to_roman_janissary_mechanic = {
	alert_icon_gfx = GFX_to_roman_janissaries_alert_icon
	alert_icon_index = 1
	available = {
		has_dlc = "Cradle of Civilization"
		has_country_modifier = to_orhan_janissaries
	}

	powers = {
		to_janissary_regiments = {
			gui = GFX_to_roman_janissaries_gov_mech
			# Used to be 10k but the progress bar doesn't work in this case, since it maxes out at a 100 still
			# max = 10000
			max = 10
			min = 0
			default = 1
			reset_on_new_ruler = no
			base_monthly_growth = 0
			is_good = yes
		}
	}
	
	interactions = {
		to_recruit_roman_janissaries = {
			icon = GFX_devshirme_conscript_heathen_recruits_button
			trigger = {
				custom_trigger_tooltip = {
					tooltip = to_janissary_reserve_for_one_regiment_tt
					has_government_power = {
						mechanic_type = to_roman_janissary_mechanic
						power_type = to_janissary_regiments
						value = 1
					}
				}
				capital_scope = {
					area_for_scope_province = {
						controlled_by = ROOT
					}
				}
			}
			effect = {
				add_mil_power = -3
				add_government_power = {
					mechanic_type = to_roman_janissary_mechanic
					power_type = to_janissary_regiments
					value = -1
				}
				if = {
					limit = {
						capital_scope = {
							controlled_by = ROOT
						}
					}
					capital_scope = {
						custom_tooltip = to_get_janissary_regiments_tt
						hidden_effect = {
							janissary_infantry = ROOT
						}
					}
				}
				else_if = {
					limit = {
						capital_scope = {
							area_for_scope_province = {
								controlled_by = ROOT
							}
						}
					}
					random_owned_province = {
						limit = {
							controlled_by = ROOT
							area_for_scope_province = {
								is_capital_of = ROOT
							}
						}
						custom_tooltip = to_get_janissary_regiments_tt
						hidden_effect = {
							janissary_infantry = ROOT
						}
					}
				}
				else = {
					capital_scope = {
						custom_tooltip = to_get_janissary_regiments_tt
						hidden_effect = {
							janissary_infantry = ROOT
						}
					}
				}
			}
			cooldown_years = 0
			ai_chance = {
				factor = 0
			}
		}
		
		to_harsh_recruitment = {
			icon = GFX_to_janissary_harsh_recruitment
			trigger = {
			}
			effect = {
				add_mil_power = -25
				custom_tooltip = nhs_new_line_tt
				custom_tooltip = to_janissary_harsh_recruitment_tt
				hidden_effect = {
					add_country_modifier = {
						name = to_janissary_harsh_recruitment
						duration = 7300
					}
				}
			}
			cooldown_years = 20
		}

		to_roman_janissary_laws = {
			icon = GFX_to_janissary_laws
			trigger = {
				NOT = {
					has_country_modifier = to_recent_janissary_law
				}
			}
			effect = {
				country_event = { id = to_janissary_events.5 }
			}
			cooldown_years = 0
		}
	}
}