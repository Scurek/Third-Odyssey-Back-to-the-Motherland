#	Example:
# 
#	example_effect = {
#		treasury = 100
#		add_adm_power = 50
#	}
#
#
#	In a script file:
#
#	effect = {
#		example_effect = yes
#	}
#

nhs_unitus_deletus = {
	while = {
		limit = {
			any_owned_province = {
				OR = {
					infantry_in_province = ROOT
					cavalry_in_province = ROOT
					artillery_in_province = ROOT
					transports_in_province = ROOT
					galleys_in_province = ROOT
					light_ships_in_province = ROOT
					heavy_ships_in_province = ROOT
				}
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					infantry_in_province = ROOT
					cavalry_in_province = ROOT
					artillery_in_province = ROOT
					transports_in_province = ROOT
					galleys_in_province = ROOT
					light_ships_in_province = ROOT
					heavy_ships_in_province = ROOT
				}
			}
			kill_units = {
				who = ROOT
				amount = 1
			}
		}
	}
	while = {
		limit = {
			any_province = {
				sea_zone = {
					OR = {
						transports_in_province = ROOT
						galleys_in_province = ROOT
						light_ships_in_province = ROOT
						heavy_ships_in_province = ROOT
					}
				}
			}
		}
		random_province = {
			limit = {
				sea_zone = {
					OR = {
						transports_in_province = ROOT
						galleys_in_province = ROOT
						light_ships_in_province = ROOT
						heavy_ships_in_province = ROOT
					}
				}
			}
			sea_zone = {
				kill_units = {
					who = ROOT
					amount = 1
				}
			}
		}
	}
}
nhs_low_supply_warning = {
	# if = {
		# limit = {
			# NOT = {
				# check_variable = {
					# which = nhs_new_flight_food_status
					# value = 1
				# }
			# }
		# }
		# custom_tooltip = nhs_low_supply_warning_tt
		# custom_tooltip = nhs_new_line_tt
	# }
}

nhs_lower_supplies = {
	# custom_tooltip = nhs_new_line_tt
	custom_tooltip = to_nhs_decrease_starting_cash_tt
	hidden_effect = {
		add_treasury = -75
		change_variable = {
			which = nhs_new_flight_space_status
			value = 1
		}
		change_variable = {
			which = nhs_new_flight_food_status
			value = -1
		}
	}
}

nhs_increase_supplies = {
	custom_tooltip = to_nhs_increase_starting_cash_tt
	hidden_effect = {
		add_treasury = 75
		change_variable = {
			which = nhs_new_flight_space_status
			value = -1
		}
		change_variable = {
			which = nhs_new_flight_food_status
			value = 1
		}
	}
}

nhs_switch_starting_event = {
	if = {
		limit = {
			is_year = 1445
			is_month = 2
		}
		custom_tooltip = nhs_enough_delay_flight_tt
		hidden_effect = {
			country_event = { id = nhs_new_flightevents.8 days = 7 }
		}
	}
	if = {
		limit = {
			NOT = {
				AND = {
					is_year = 1445
					is_month = 2
				}
			}
		}
		hidden_effect = {
			country_event = { id = nhs_new_flightevents.6 }
		}
	}
}

nhs_switch_starting_event_2 = {
	if = {
		limit = {
			is_year = 1445
			is_month = 2
		}
		custom_tooltip = nhs_enough_delay_flight_tt
		hidden_effect = {
			country_event = { id = nhs_new_flightevents.8 days = 7 }
		}
	}
	if = {
		limit = {
			NOT = {
				AND = {
					is_year = 1445
					is_month = 2
				}
			}
		}
		hidden_effect = {
			country_event = { id = nhs_new_flightevents.5 }
		}
	}
}

nhs_spawn_starting_flagship = {
	if = {
		limit = {
			has_dlc = "Golden Century"
		}
		custom_tooltip = nhs_starting_flagship_tt
		set_country_flag = nhs_first_flagship
		953 = {
			create_flagship = {	
				name = "Aghia Theotoke"
				type = heavy_ship
			}
		}
		clr_country_flag = nhs_first_flagship
	}
}

nhs_reduce_skoros_silk_price = {
	if = {
		limit = {
			any_province = {
				trade_goods = skoros_silk
			}
			NOT = { has_global_flag = nhs_skoros_silk_falls }
		}
		change_price = {
			trade_goods = skoros_silk
			key = NHS_SKOROS_FALLS
			value = -0.25
			duration = -1
		}
		custom_tooltip = nhs_new_line_tt
	}
	else_if = {
		limit = {
			NOT = { has_global_flag = nhs_skoros_silk_falls }
		}
		hidden_effect = {
			change_price = {
				trade_goods = skoros_silk
				key = NHS_SKOROS_FALLS
				value = -0.25
				duration = -1
			}
		}
	}
	set_global_flag = nhs_skoros_silk_falls
}

nhs_increase_skoros_silk_price = {
	if = {
		limit = {
			has_global_flag = nhs_skoros_silk_falls
			any_province = {
				trade_goods = skoros_silk
			}
		}
		change_price = {
			trade_goods = skoros_silk
			key = NHS_SKOROS_ISOLATIONISM
			value = 0.25
			duration = -1
		}
		custom_tooltip = nhs_new_line_tt
	}
	else_if = {
		limit = {
			has_global_flag = nhs_skoros_silk_falls
		}
		hidden_effect = {
			change_price = {
				trade_goods = skoros_silk
				key = NHS_SKOROS_ISOLATIONISM
				value = 0.25
				duration = -1
			}
		}
	}
}

vov_varangian_heir_ruler_general = {
	[[HEIR_FEMALE]
		custom_tooltip = vov_heir_to_general
	]
	[[HEIR_MALE]
		custom_tooltip = vov_heir_to_general
	]
	[[RULER_MALE]
		custom_tooltip = vov_ruler_to_general
	]
	[[RULER_FEMALE]
		custom_tooltip = vov_ruler_to_general
	]
	hidden_effect = {
		if = {
			limit = {
				NOT = { army_tradition = 75 }
			}
			add_army_tradition = 25
			[[HEIR_FEMALE]
				convert_female_heir_to_general = yes
			]
			[[HEIR_MALE]
				convert_heir_to_general = yes
			]
			[[RULER_MALE]
				convert_ruler_to_general = yes
			]
			[[RULER_FEMALE]
				convert_female_ruler_to_general = yes
			]
			add_army_tradition = -25
		}
		else = {
			set_variable = {
				which = vov_trad_var
				value = 0
			}
			while = {
				limit = {
					NOT = { army_tradition = 100 }
				}
				change_variable = {
					which = vov_trad_var
					value = 1
				}
				add_army_tradition = 1
			}
			[[HEIR_FEMALE]
				convert_female_heir_to_general = yes
			]
			[[HEIR_MALE]
				convert_heir_to_general = yes
			]
			[[RULER_MALE]
				convert_ruler_to_general = yes
			]
			[[RULER_FEMALE]
				convert_female_ruler_to_general = yes
			]
			while = {
				limit = {
					check_variable = {
						which = vov_trad_var
						value = 1
					}
				}
				change_variable = {
					which = vov_trad_var
					value = -1
				}
				add_army_tradition = -1
			}
		}
	}
}

nhs_change_to_proper_orthodox_religion = {
	if = {
		limit = {
			OR = {
				ROOT = {
					religion = orthodox
				}
				NOT = { has_global_flag = nhs2_patriarchate_established }
			}
		}
		change_religion = orthodox
	}
	else = {
		change_religion = elysian_orthodoxy
	}
}

nhs_increase_variable = {
	change_variable = {
		which = $VARIABLE$
		value = $VAL$
	}
	if = {
		limit = {
			check_variable = {
				which = $VARIABLE$
				value = $MAX$
			}
		}
		set_variable = {
			which = $VARIABLE$
			value = $MAX$
		}
	}
}

nhs_release_elysian_splinter = {
	if = {
		limit = {
			any_owned_province = {
				culture = $CULTURE$
			}
		}
		every_owned_province = {
			limit = {
				culture = $CULTURE$
				NOT = { is_core = $TAG$ }
			}
			add_core = $TAG$
		}
		if = {
			limit = {
				NOT = { exists = $TAG$ }
			}
			release = $TAG$
			$TAG$ = {
				change_religion = ROOT
			}
		}
		else = {
			every_owned_province = {
				limit = {
					culture = $CULTURE$
				}
				cede_province = $TAG$
			}
		}
	}
}

nhs_decrease_variable = {
	subtract_variable = {
		which = $VARIABLE$
		value = $VAL$
	}
	if = {
		limit = {
			NOT = {
				check_variable = {
					which = $VARIABLE$
					value = $MIN$
				}
			}
		}
		set_variable = {
			which = $VARIABLE$
			value = $MIN$
		}
	}
}

nhs_building_counter_clear_flag = {
	clr_province_flag = $FLAG$_$BUILDING$
}
nhs_building_counter_set_flag = {
	set_province_flag = $FLAG$_$BUILDING$
}
nhs_building_counter_effect_add = {
	if = {
		limit = {
			owner = {
				has_country_flag = $FLAG$ # nhs_high_tier_building_counter
			}
			NOT = {
				nhs_building_counter_had_building = { 
					FLAG = $FLAG$ 
					BUILDING = $BUILDING$ 
				}
			}
			[[ADDITIONAL_TRIGGER]
				$ADDITIONAL_TRIGGER$ = yes
			]
		}
		nhs_building_counter_set_flag = { 
			FLAG = $FLAG$ 
			BUILDING = $BUILDING$ 
		}
		owner = {
			change_variable = {
				which = $VAR$ # nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
}
nhs_building_counter_effect_sub = {
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = $FLAG$ 
				BUILDING = $BUILDING$ 
			}
			owner = {
				has_country_flag = $FLAG$ # nhs_high_tier_building_counter
			}
		}
		nhs_building_counter_clear_flag = { 
			FLAG = $FLAG$ 
			BUILDING = $BUILDING$ 
		}
		owner = {
			subtract_variable = {
				which = $VAR$ # nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
}
nhs_building_counter_effect_add_with_obsolete = {
	if = {
		limit = {
			owner = {
				has_country_flag = $FLAG$ # nhs_high_tier_building_counter
			}
			NOT = {
				nhs_building_counter_had_building = { 
					FLAG = $FLAG$ 
					BUILDING = $BUILDING$ 
				}
			}
			[[ADDITIONAL_TRIGGER]
				$ADDITIONAL_TRIGGER$ = yes
			]
		}
		if = {
			limit = {
				NOT = {
					nhs_building_counter_had_building = { 
						FLAG = $FLAG$ 
						BUILDING = $OLD_BUILDING$ 
					}
				}
			}
			nhs_building_counter_set_flag = { 
				FLAG = $FLAG$ 
				BUILDING = $BUILDING$ 
			}
			owner = {
				change_variable = {
					which = $VAR$ # nhs_HighTierBuildingCount
					value = 1
				}
			}
		}
		else = {
			nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = $OLD_BUILDING$ }
			nhs_building_counter_set_flag = { FLAG = $FLAG$ BUILDING = $BUILDING$ }
		}
	}
}
nhs_building_counter_effect_add_with_two_obsolete = {
	if = {
		limit = {
			owner = {
				has_country_flag = $FLAG$
			}
			NOT = {
				nhs_building_counter_had_building = { 
					FLAG = $FLAG$ 
					BUILDING = $BUILDING$ 
				}
			}
			[[ADDITIONAL_TRIGGER]
				$ADDITIONAL_TRIGGER$ = yes
			]
		}
		if = {
			limit = {
				nhs_building_counter_had_building = { 
					FLAG = $FLAG$ 
					BUILDING = $OLD_BUILDING$ 
				}
			}
			nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = $OLD_BUILDING$ }
			nhs_building_counter_set_flag = { FLAG = $FLAG$ BUILDING = $BUILDING$ }
		}
		else_if = {
			limit = {
				nhs_building_counter_had_building = { 
					FLAG = $FLAG$ 
					BUILDING = $OLD_BUILDING_2$ 
				}
			}
			nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = $OLD_BUILDING_2$ }
			nhs_building_counter_set_flag = { FLAG = $FLAG$ BUILDING = $BUILDING$ }
		}
		else = {
			nhs_building_counter_set_flag = { 
				FLAG = $FLAG$ 
				BUILDING = $BUILDING$ 
			}
			owner = {
				change_variable = {
					which = $VAR$
					value = 1
				}
			}
		}
	}
}
nhs_building_counter_effect_add_with_three_obsolete = {
	if = {
		limit = {
			owner = {
				has_country_flag = $FLAG$
			}
			NOT = {
				nhs_building_counter_had_building = { 
					FLAG = $FLAG$ 
					BUILDING = $BUILDING$ 
				}
			}
			[[ADDITIONAL_TRIGGER]
				$ADDITIONAL_TRIGGER$ = yes
			]
		}
		if = {
			limit = {
				nhs_building_counter_had_building = { 
					FLAG = $FLAG$ 
					BUILDING = $OLD_BUILDING$ 
				}
			}
			nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = $OLD_BUILDING$ }
			nhs_building_counter_set_flag = { FLAG = $FLAG$ BUILDING = $BUILDING$ }
		}
		else_if = {
			limit = {
				nhs_building_counter_had_building = { 
					FLAG = $FLAG$ 
					BUILDING = $OLD_BUILDING_2$ 
				}
			}
			nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = $OLD_BUILDING_2$ }
			nhs_building_counter_set_flag = { FLAG = $FLAG$ BUILDING = $BUILDING$ }
		}
		else_if = {
			limit = {
				nhs_building_counter_had_building = { 
					FLAG = $FLAG$ 
					BUILDING = $OLD_BUILDING_3$ 
				}
			}
			nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = $OLD_BUILDING_3$ }
			nhs_building_counter_set_flag = { FLAG = $FLAG$ BUILDING = $BUILDING$ }
		}
		else = {
			nhs_building_counter_set_flag = { 
				FLAG = $FLAG$ 
				BUILDING = $BUILDING$ 
			}
			owner = {
				change_variable = {
					which = $VAR$
					value = 1
				}
			}
		}
	}
}

nhs_building_counter_local_province_check_building = {
	if = {
		limit = {
			has_building = $BUILDING$
			NOT = {
				nhs_building_counter_had_building = { 
					FLAG = $FLAG$ 
					BUILDING = $BUILDING$ 
				} 
			}
		}
		nhs_building_counter_set_flag = {
			FLAG = $FLAG$ 
			BUILDING = $BUILDING$ 
		}
		owner = {
			change_variable = {
				which = $VAR$
				value = 1
			}
		}
	}
}
nhs_building_counter_former_province_check_building = {
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = $FLAG$  
				BUILDING = $BUILDING$ 
			} 
		}
		nhs_building_counter_clear_flag = {
			FLAG = $FLAG$  
			BUILDING = $BUILDING$  
		}
		FROM = {
			subtract_variable = {
				which = $VAR$
				value = 1
			}
		}
	}
}
nhs_building_counter_clear_flags = {
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = marketplace }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = workshop }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = temple }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = barracks }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = shipyard }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = fort_15th }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = coastal_defence }

	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = courthouse }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = dock }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = regimental_camp }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = fort_16th }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = naval_battery }

	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = cathedral }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = university }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = trade_depot }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = grand_shipyard }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = training_fields }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = fort_17th }

	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = stock_exchange }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = counting_house }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = town_hall }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = drydock }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = conscription_center }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = fort_18th }

	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = wharf }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = weapons }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = textile }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = plantations }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = tradecompany }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = farm_estate }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = mills }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = furnace }

	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = ramparts }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = soldier_households }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = impressment_offices }
	nhs_building_counter_clear_flag = { FLAG = $FLAG$ BUILDING = state_house }
}

nhs_initiate_homelands_building_counter = {
	nhs_end_homelands_building_counter = yes
	set_variable = {
		which = nhs_HomelandsBuildingCount
		value = 0
	}
	set_country_flag = nhs_homelands_build_counter
	every_owned_province = {
		limit = {
			nhs_homelands_building_counter_trigger = yes
		}
		nhs_homelands_building_counter_eval_local_province = yes
	}
}

nhs_end_homelands_building_counter = {
	set_variable = {
		which = nhs_HomelandsBuildingCount
		value = 0
	}
	clr_country_flag = nhs_homelands_build_counter
	every_owned_province = {
		limit = {
			nhs_homelands_building_counter_trigger = yes
		}
		nhs_building_counter_clear_flags = { FLAG = nhs_homelands_build_counter }
	}
}

nhs_homelands_building_counter_eval_local_province = {
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = marketplace }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = workshop }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = temple }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = barracks }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = shipyard }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = fort_15th }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = coastal_defence }

	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = courthouse }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = dock }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = regimental_camp }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = fort_16th }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = naval_battery }

	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = cathedral }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = university }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = trade_depot }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = grand_shipyard }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = training_fields }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = fort_17th }

	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = stock_exchange }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = counting_house }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = town_hall }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = drydock }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = conscription_center }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = fort_18th }

	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = wharf }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = weapons }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = textile }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = plantations }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = tradecompany }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = farm_estate }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = mills }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = furnace }

	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = ramparts }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = soldier_households }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = impressment_offices }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = state_house }
}
nhs_homelands_building_counter_eval_former_province = {
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = marketplace }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = workshop }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = temple }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = barracks }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = shipyard }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = fort_15th }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = coastal_defence }

	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = courthouse }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = dock }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = regimental_camp }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = fort_16th }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = naval_battery }

	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = cathedral }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = university }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = trade_depot }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = grand_shipyard }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = training_fields }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = fort_17th }

	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = stock_exchange }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = counting_house }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = town_hall }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = drydock }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = conscription_center }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = fort_18th }

	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = wharf }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = weapons }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = textile }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = plantations }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = tradecompany }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = farm_estate }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = mills }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = furnace }

	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = ramparts }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = soldier_households }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = impressment_offices }
	nhs_building_counter_former_province_check_building = { FLAG = nhs_homelands_build_counter VAR = nhs_HomelandsBuildingCount BUILDING = state_house }
}

nhs_initiate_hightier_building_counter = {
	nhs_end_hightier_building_counter = yes
	set_variable = {
		which = nhs_HighTierBuildingCount
		value = 0
	}
	set_country_flag = nhs_high_tier_building_counter
	every_owned_province = {
		limit = {
			nhs_hightier_building_counter_trigger = yes
		}
		nhs_hightier_building_counter_eval_local_province = yes
	}
}
nhs_end_hightier_building_counter = {
	set_variable = {
		which = nhs_HighTierBuildingCount
		value = 0
	}
	clr_country_flag = nhs_high_tier_building_counter
	every_owned_province = {
		limit = {
			nhs_hightier_building_counter_trigger = yes
		}
		nhs_building_counter_clear_flags = { FLAG = nhs_high_tier_building_counter }
		nhs_building_counter_clear_flag = {
			FLAG = nhs_high_tier_building_counter
			BUILDING = manufactory
		}
	}
}
nhs_hightier_building_counter_eval_local_province = {
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = cathedral }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = university }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = trade_depot }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = grand_shipyard }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = training_fields }

	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = stock_exchange }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = counting_house }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = town_hall }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = drydock }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = conscription_center }

	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = wharf }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = weapons }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = textile }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = plantations }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = tradecompany }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = farm_estate }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = mills }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = furnace }

	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = ramparts }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = soldier_households }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = impressment_offices }
	nhs_building_counter_local_province_check_building = { FLAG = nhs_high_tier_building_counter VAR = nhs_HighTierBuildingCount BUILDING = state_house }
}
# province
# FROM = old owner
nhs_hightier_building_counter_eval_former_province = {
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = town_hall
			} 
		}
		nhs_building_counter_clear_flag = {
			FLAG = nhs_high_tier_building_counter 
			BUILDING = town_hall 
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = counting_house 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = counting_house 
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = cathedral 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = cathedral 
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = university 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = university 
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = grand_shipyard 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = grand_shipyard 
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = drydock 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = drydock 
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = stock_exchange 
			}
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = stock_exchange
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = training_fields 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = training_fields
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = trade_depot 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = trade_depot
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = conscription_center 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = conscription_center
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = manufactory 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = manufactory
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = ramparts 
			}
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = ramparts
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = soldier_households 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = soldier_households
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = impressment_offices 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = impressment_offices
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
	if = {
		limit = {
			nhs_building_counter_had_building = { 
				FLAG = nhs_high_tier_building_counter 
				BUILDING = state_house 
			} 
		}
		nhs_building_counter_clear_flag = { 
			FLAG = nhs_high_tier_building_counter 
			BUILDING = state_house
		}
		FROM = {
			subtract_variable = {
				which = nhs_HighTierBuildingCount
				value = 1
			}
		}
	}
}


nhs_display_rel_center = {
	tooltip = {
		add_permanent_province_modifier = {
			name = religious_center
			duration = -1
		}
	}
}

nhs_assign_provinces_to_marches = {
	if = {
		limit = {
			any_owned_province = {
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				religion = ROOT
				nhs_$TAG$_province = yes
				development = 25
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			
		}
		random_owned_province = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				religion = ROOT
				nhs_$TAG$_province = yes
				development = 25
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				nhs_$TAG$_province = yes
				development = 25
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
		}
		random_owned_province = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				nhs_$TAG$_province = yes
				development = 25
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				religion = ROOT
				nhs_$TAG$_province = yes
				development = 15
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			
		}
		random_owned_province = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				religion = ROOT
				nhs_$TAG$_province = yes
				development = 15
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				nhs_$TAG$_province = yes
				development = 15
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
		}
		random_owned_province = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				nhs_$TAG$_province = yes
				development = 15
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_$TAG$_province = yes
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
				religion = ROOT
			}
		}
		random_owned_province = {
			limit = {
				nhs_$TAG$_province = yes
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
				religion = ROOT
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_$TAG$_province = yes
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
		}
		random_owned_province = {
			limit = {
				nhs_$TAG$_province = yes
				NOT = { is_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				religion = ROOT
				nhs_$TAG$_province = yes
				development = 25
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			
		}
		random_owned_province = {
			limit = {
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				religion = ROOT
				nhs_$TAG$_province = yes
				development = 25
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				nhs_$TAG$_province = yes
				development = 25
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
		}
		random_owned_province = {
			limit = {
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				nhs_$TAG$_province = yes
				development = 25
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				religion = ROOT
				nhs_$TAG$_province = yes
				development = 15
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			
		}
		random_owned_province = {
			limit = {
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				religion = ROOT
				nhs_$TAG$_province = yes
				development = 15
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				nhs_$TAG$_province = yes
				development = 15
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
		}
		random_owned_province = {
			limit = {
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				nhs_$TAG$_province = yes
				development = 15
				NOT = { province_has_center_of_trade_of_level = 1 }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_$TAG$_province = yes
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
				religion = ROOT
			}
		}
		random_owned_province = {
			limit = {
				nhs_$TAG$_province = yes
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
				religion = ROOT
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_$TAG$_province = yes
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
		}
		random_owned_province = {
			limit = {
				nhs_$TAG$_province = yes
				NOT = { is_state_core = ROOT }
				NOT = { has_construction = core }
				is_owned_by_trade_company = no
				NOT = { has_province_flag = nhs_exarch_province_exemption }
				NOT = { has_province_modifier = nhs2_supply_lines_tm }
			}
			tooltip = {
				cede_province = $TAG$
			}
			add_core = $TAG$
			hidden_effect = {
				ROOT = {
					release = $TAG$
				}
			}
		}
	}
	create_subject = {
		subject_type = elysian_subject
		subject = $TAG$
	}
	hidden_effect = {
		if = {
			limit = {
				any_province = {
					nhs_$TAG$_province = yes
					NOT = { has_province_flag = nhs_exarch_province_exemption }
					NOT = { is_core = ROOT }
					NOT = { is_territorial_core = ROOT }
					NOT = { has_construction = core }
					NOT = { has_construction = missionary }
					is_owned_by_trade_company = no
					OR = {
						owned_by = ROOT
						owner = {
							tag = ELG
							is_subject_of = ROOT
						}
					}
					NOT = { has_province_modifier = nhs2_supply_lines_tm }
				}
			}
			every_province = {
				limit = {
					nhs_$TAG$_province = yes
					NOT = { has_province_flag = nhs_exarch_province_exemption }
					NOT = { is_core = ROOT }
					NOT = { is_territorial_core = ROOT }
					NOT = { has_construction = core }
					NOT = { has_construction = missionary }
					is_owned_by_trade_company = no
					OR = {
						owned_by = ROOT
						owner = {
							tag = ELG
							is_subject_of = ROOT
						}
					}
					NOT = { has_province_modifier = nhs2_supply_lines_tm }
				}
				cede_province = $TAG$
				if = {
					limit = {
						is_core = ROOT
					}
					hidden_effect = {
						remove_core = ROOT
					}
					add_core = ROOT
				}
				if = {
					limit = {
						is_territorial_core = ROOT
					}
					add_territorial_core = ROOT
				}
			}
		}
	}
}

nhs_add_greek_areas_claims = {
	custom_tooltip = nhs_greek_areas_permanent_claims_tt
	hidden_effect = {
		every_province = {
			limit = {
				owner = {
					NOT = { culture_group = byzantine }
				}
				nhs_greek_areas = yes
				continent = europe
			}
			add_permanent_claim = ROOT
		}
	}
}

nhs_elg_gets_province_effect = {
	if = {
		limit = {
			nhs_greek_areas = yes
		}
		add_core = ELG
		if = {
			limit = {
				owner = {
					religion = pantheon_worship
				}
				NOT = { has_province_flag = nhs_got_question_of_religion }
			}
			set_province_flag = nhs_got_question_of_religion
			random_list = {
				40 = {
					add_province_modifier = {
					name = "nhs2_greek_deny_religion"
						duration = 7300
					}
				}
				40 = {
					add_province_modifier = {
						name = "nhs2_greek_accept_religion"
						duration = 7300
					}
				}
				10 = { change_religion = ROOT }
				10 = { 
					add_province_modifier = {
						name = "missionary_failure"
						duration = 7300
					}
				}
			}
		}
	}
}

nhs_set_base_of_operations_target = {
	set_country_flag = nhs_bo
	set_country_flag = nhs_claims_greek
	custom_tooltip = nhs_how_to_secure_bo_tt
	if = {
		limit = {
			$PROVINCE_ID$ = {
				OR = {
					country_or_subject_holds = ROOT
					controller = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
		}
		if = {
			limit = {
				$PROVINCE_ID$ = {
					NOT = { is_core = ROOT }
				}
			}
			$PROVINCE_ID$ = {
				add_core = ROOT
			}
		}
		if = {
			limit = {
				$PROVINCE_ID$ = {
					owned_by = ROOT
				}
			}
			country_event = { id = nhs2_mainlandevents.13 }
		}
		if = {
			limit = {
				$PROVINCE_ID$ = {
					NOT = { owned_by = ROOT }
				}
			}
			$PROVINCE_ID$ = {
				cede_province = ROOT
			}
			tooltip = {
				country_event = { id = nhs2_mainlandevents.13 }
			}
		}
		custom_tooltip = nhs_new_line_tt
		if = {
			limit = {
				NOT = { has_country_flag = nhs_got_bo_buff }
			}
			add_country_modifier = {
				name = $MODIFIER$
				duration = 7300
			}
		}
		set_country_flag = nhs_got_bo_buff
		nhs_add_greek_areas_claims = yes
	}
	if = {
		limit = {
			NOT = {
				$PROVINCE_ID$ = {
					OR = {
						country_or_subject_holds = ROOT
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
				}
			}
		}
		custom_tooltip = nhs_new_line_tt
		$PROVINCE_ID$ = {
			add_core = ROOT
			# if = {
			# 	limit = {
			# 		owner = {
			# 			religion_group = christian
			# 			AND = {
			# 				culture_group = byzantine
			# 				NOT = { primary_culture = turkish }
			# 			}
			# 		}
			# 	}
			# 	owner = {
			# 		country_event = { id = nhs2_mainlandevents.10 days = 1 }
			# 	}
			# 	ROOT = {
			# 		if = {
			# 			limit = {
			# 				NOT = {
			# 					religion_group = christian
			# 				}
			# 			}
			# 			add_dip_power = -50
			# 		}
			# 	}
			# }
		}
		if = {
			limit = {
				$PROVINCE_ID$ = {
					owner = {
						OR = {
							AND = {
								religion_group = christian
								AND = {
									culture_group = byzantine
									NOT = { primary_culture = turkish }
								}
							}
							AND = {
								is_subject = yes
								overlord = {
									religion_group = christian
									AND = {
										culture_group = byzantine
										NOT = { primary_culture = turkish }
									}
								}
							}
						}
					}
				}
			}
			random_country = {
				limit = {
					is_subject = no
					owns_or_subject_of = $PROVINCE_ID$
				}
				country_event = { id = nhs2_mainlandevents.10 days = 1 }
			}
			if = {
				limit = {
					NOT = {
						religion_group = christian
					}
				}
				add_dip_power = -50
			}
		}
		custom_tooltip = nhs_new_line_tt
		if = {
			limit = {
				NOT = { has_country_flag = nhs_got_bo_buff }
			}
			add_country_modifier = {
				name = $MODIFIER$
				duration = 7300
			}
		}
		set_country_flag = nhs_got_bo_buff
		nhs_add_greek_areas_claims = yes
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_enable_change_base_of_operations_tt
	}
}

nhs_handle_supply_lines = {
	if = {
		limit = {
			owner = {
				nhs_condition_all_ely = { KOMANDA = tag }
				has_country_flag = nhs_supply_lines
				NOT = { has_country_flag = nhs_supply_lines_secured }
				NOT = { has_country_flag = nhs_invasion_over }
			}
			nhs_is_target_supply_lines_province = { FLAG_SCOPE = owner }
		}
		owner = {
			country_event = { id = nhs2_mainlandevents.8 }
		}
	}
}

nhs_handle_base_of_operations = {
	if = {
		limit = {
			has_province_modifier = nhs2_base_of_operations_tm
			owner = {
				is_subject = yes
				nhs_condition_all_ely_with_if = { KOMANDA = is_subject_of }
			}
		}
		owner = {
			overlord = {
				ROOT = {
					cede_province = PREV
				}
			}
		}
	}
	if = {
		limit = {
			owner = {
				nhs_condition_all_ely = { KOMANDA = tag }
				has_country_flag = nhs_bo
				NOT = { has_country_flag = nhs_invasion_over }
				NOT = { has_country_flag = nhs_bo_secured }
				OR = {
					AND = {
						has_country_flag = nhs_bo_athens
						ROOT = { province_id = 146 }
					}
					AND = {
						has_country_flag = nhs_bo_macedonia
						ROOT = { province_id = 148 }
					}
					AND = {
						has_country_flag = nhs_bo_sparta
						ROOT = { province_id = 145 }
					}
					AND = {
						has_country_flag = nhs_bo_rhodes
						ROOT = { province_id = 320 }
					}
				}
			}
		}
		owner = {
			country_event = { id = nhs2_mainlandevents.13 }
		}
	}
	if = {
		limit = {
			owner = {
				is_subject = yes
				overlord = {
					nhs_condition_all_ely = { KOMANDA = tag }
					has_country_flag = nhs_bo
					NOT = { has_country_flag = nhs_invasion_over }
					NOT = { has_country_flag = nhs_bo_secured }
					OR = {
						AND = {
							has_country_flag = nhs_bo_athens
							ROOT = { province_id = 146 }
						}
						AND = {
							has_country_flag = nhs_bo_macedonia
							ROOT = { province_id = 148 }
						}
						AND = {
							has_country_flag = nhs_bo_sparta
							ROOT = { province_id = 145 }
						}
						AND = {
							has_country_flag = nhs_bo_rhodes
							ROOT = { province_id = 320 }
						}
					}
				}
			}
		}
		owner = {
			overlord = {
				country_event = { id = nhs2_mainlandevents.13 }
			}
		}
	}
}

nhs_set_unit_type = {
	if = {
		limit = {
			technology_group = western
		}
		change_unit_type = western
	}
	if = {
		limit = {
			technology_group = eastern
		}
		change_unit_type = eastern
	}
	if = {
		limit = {
			technology_group = ottoman
		}
		change_unit_type = ottoman
	}
	if = {
		limit = {
			technology_group = muslim
		}
		change_unit_type = muslim
	}
}
nhs_remove_reforms = {
	if = {
		limit = {
			has_country_modifier = nhs2_native_army_reform
		}
		remove_country_modifier = nhs2_native_army_reform
	}
	if = {
		limit = {
			has_country_modifier = nhs2_traditional_army_reform
		}
		remove_country_modifier = nhs2_traditional_army_reform
	}
	if = {
		limit = {
			has_country_modifier = nhs2_janissary_army_reform
		}
		remove_country_modifier = nhs2_janissary_army_reform
	}
	if = {
		limit = {
			has_country_modifier = nhs2_army_reform_byz
		}
		remove_country_modifier = nhs2_army_reform_byz
	}
	if = {
		limit = {
			has_country_modifier = nhs2_army_reform_euro
		}
		remove_country_modifier = nhs2_army_reform_euro
	}
	if = {
		limit = {
			has_country_modifier = nhs2_fire_army_reform
		}
		remove_country_modifier = nhs2_fire_army_reform
	}
	if = {
		limit = {
			has_country_modifier = nhs2_army_reform_no
		}
		remove_country_modifier = nhs2_army_reform_no
	}
	if = {
		limit = {
			has_country_modifier = nhs2_army_reform_pas
		}
		remove_country_modifier = nhs2_army_reform_pas
	}
	if = {
		limit = {
			has_country_modifier = nhs2_army_reform_cavalry
		}
		remove_country_modifier = nhs2_army_reform_cavalry
	}
	if = {
		limit = {
			has_country_modifier = nhs2_army_reform_xbow
		}
		remove_country_modifier = nhs2_army_reform_xbow
	}
	if = {
		limit = {
			has_country_modifier = nhs2_fire_army_reform2
		}
		remove_country_modifier = nhs2_fire_army_reform2
	}
	if = {
		limit = {
			has_country_modifier = nhs2_amry_reform_mm
		}
		remove_country_modifier = nhs2_amry_reform_mm
	}
	if = {
		limit = {
			has_country_modifier = nhs2_amry_reform_nma
		}
		remove_country_modifier = nhs2_amry_reform_nma
	}
	if = {
		limit = {
			has_country_modifier = nhs2_amry_reform_ga
		}
		remove_country_modifier = nhs2_amry_reform_ga
	}
	if = {
		limit = {
			has_country_modifier = nhs2_army_reform_cavalry2
		}
		remove_country_modifier = nhs2_army_reform_cavalry2
	}
	if = {
		limit = {
			has_country_modifier = nhs2_fire_army_reform3
		}
		remove_country_modifier = nhs2_fire_army_reform3
	}
	if = {
		limit = {
			has_country_modifier = nhs2_disgruntled_nobles
		}
		remove_country_modifier = nhs2_disgruntled_nobles
	}
	custom_tooltip = nhs_new_line_tt
}
nhs_set_the_fire_on = {
	if = {
		limit = {
			has_country_flag = nhs_fire_later
		}
		if = {
			limit = {
				has_country_modifier = nhs_greekfire_later_w
			}
			remove_country_modifier = nhs_greekfire_later_w
		}
		if = {
			limit = {
				NOT = { has_country_modifier = nhs_greekfire_later }
			}
			add_country_modifier = {
				name = nhs_greekfire_later
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			NOT = { has_country_flag = nhs_updated_fire }
		}
		if = {
			limit = {
				has_country_modifier = nhs_secrets_greekfire_w
			}
			remove_country_modifier = nhs_secrets_greekfire_w
		}
		if = {
			limit = {
				has_country_modifier = nhs_greekfire_update_w
			}
			remove_country_modifier = nhs_greekfire_update_w
		}
		if = {
			limit = {
				NOT = { has_country_modifier = nhs_secrets_greekfire }
			}
			add_country_modifier = {
				name = nhs_secrets_greekfire
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = nhs_updated_fire
		}
		if = {
			limit = {
				has_country_modifier = nhs_secrets_greekfire_w
			}
			remove_country_modifier = nhs_secrets_greekfire_w
		}
		if = {
			limit = {
				has_country_modifier = nhs_greekfire_update_w
			}
			remove_country_modifier = nhs_greekfire_update_w
		}
		if = {
			limit = {
				NOT = { has_country_modifier = nhs_greekfire_update }
			}
			add_country_modifier = {
				name = nhs_greekfire_update
				duration = -1
			}
		}
	}
	if = {
		limit = {
			has_country_flag = nhs_fire_reform
		}
		if = {
			limit = {
				has_country_modifier = nhs_fire_reform_w
			}
			remove_country_modifier = nhs_fire_reform_w
		}
		if = {
			limit = {
				has_country_modifier = nhs_fire_reform_w_update
			}
			remove_country_modifier = nhs_fire_reform_w_update
		}
		if = {
			limit = {
				has_country_flag = nhs_second_a_reform
			}
			add_country_modifier = {
				name = nhs2_fire_army_reform
				duration = -1
			}
		}
		if = {
			limit = {
				has_country_flag = nhs_third_a_reform
			}
			add_country_modifier = {
				name = nhs2_fire_army_reform2
				duration = -1
			}
		}
		if = {
			limit = {
				has_country_flag = nhs_fourth_a_reform
			}
			add_country_modifier = {
				name = nhs2_fire_army_reform3
				duration = -1
			}
		}
	}
	nhs_remove_fire_depleting_modifier = yes
}
nhs_set_the_fire_off = {
	if = {
		limit = {
			NOT = { nhs_has_greek_fire_reform = yes }
		}
		if = {
			limit = {
				OR = {
					has_country_flag = nhs_fire_later
					has_country_modifier = nhs_greekfire_later
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs_greekfire_later
				}
				remove_country_modifier = nhs_greekfire_later
			}
			add_country_modifier = {
				name = nhs_greekfire_later_w
				duration = 14600
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { has_country_flag = nhs_updated_fire }
					has_country_modifier = nhs_secrets_greekfire
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs_secrets_greekfire
				}
				remove_country_modifier = nhs_secrets_greekfire
			}
			if = {
				limit = {
					has_country_modifier = nhs_greekfire_update
				}
				remove_country_modifier = nhs_greekfire_update
			}
			add_country_modifier = {
				name = nhs_secrets_greekfire_w
				duration = 14600
			}
		}
		else_if = {
			limit = {
				OR = {
					has_country_flag = nhs_updated_fire
					has_country_modifier = nhs_greekfire_update
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs_secrets_greekfire
				}
				remove_country_modifier = nhs_secrets_greekfire
			}
			if = {
				limit = {
					has_country_modifier = nhs_greekfire_update
				}
				remove_country_modifier = nhs_greekfire_update
			}
			add_country_modifier = {
				name = nhs_greekfire_update_w
				duration = 14600
			}
		}
	}
	else = {
		if = {
			limit = {
				OR = {
					has_country_flag = nhs_fire_later
					has_country_modifier = nhs_greekfire_later
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs2_fire_army_reform
				}
				remove_country_modifier = nhs2_fire_army_reform
			}
			if = {
				limit = {
					has_country_modifier = nhs2_fire_army_reform2
				}
				remove_country_modifier = nhs2_fire_army_reform2
			}
			if = {
				limit = {
					has_country_modifier = nhs2_fire_army_reform3
				}
				remove_country_modifier = nhs2_fire_army_reform3
			}
			add_country_modifier = {
				name = nhs_fire_reform_w_later
				duration = 14600
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { has_country_flag = nhs_updated_fire }
					has_country_modifier = nhs_secrets_greekfire
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs2_fire_army_reform
				}
				remove_country_modifier = nhs2_fire_army_reform
			}
			if = {
				limit = {
					has_country_modifier = nhs2_fire_army_reform2
				}
				remove_country_modifier = nhs2_fire_army_reform2
			}
			if = {
				limit = {
					has_country_modifier = nhs2_fire_army_reform3
				}
				remove_country_modifier = nhs2_fire_army_reform3
			}
			add_country_modifier = {
				name = nhs_fire_reform_w
				duration = 14600
			}
		}
		else_if = {
			limit = {
				OR = {
					has_country_flag = nhs_updated_fire
					has_country_modifier = nhs_greekfire_update
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs2_fire_army_reform
				}
				remove_country_modifier = nhs2_fire_army_reform
			}
			if = {
				limit = {
					has_country_modifier = nhs2_fire_army_reform2
				}
				remove_country_modifier = nhs2_fire_army_reform2
			}
			if = {
				limit = {
					has_country_modifier = nhs2_fire_army_reform3
				}
				remove_country_modifier = nhs2_fire_army_reform3
			}
			add_country_modifier = {
				name = nhs_fire_reform_w_update
				duration = 14600
			}
		}
	}
	nhs_remove_fire_depleting_modifier = yes
}
# province
# FROM = old owner
nhs_handle_naphtha = {
	if = {
		limit = {
			is_city = yes
		}
		if = {
			limit = {
				has_province_modifier = nhs2_source_of_naphta
			}
			if = {
				limit = {
					owner = {
						nhs_condition_all_ely = { KOMANDA = tag }
						has_country_flag = nhs_searching_for_naphtha
					}
				}
				owner = {
					country_event = { id = nhs2_greek_fire.5 days = 1 }
				}
			}
			if = {
				limit = {
					owner = {
						OR = {
							has_country_modifier = nhs_greek_fire_deal
							AND = {
								is_subject = yes
								overlord = {
									nhs_condition_all_ely = { KOMANDA = tag }
									has_country_flag = nhs_searching_for_naphtha
								}
							}
						}
					}
				}
				overlord = {
					country_event = { id = nhs2_greek_fire.5 days = 1 }
				}
			}
		}
		if = {
			limit = {
				has_province_modifier = nhs2_source_of_naphta_e
				owner = {
					NOT = {
						OR = {
							AND = {
								nhs_condition_all_ely = { KOMANDA = tag }
								has_country_flag = nhs_searching_for_naphtha
							}
							has_country_modifier = nhs_greek_fire_deal
							AND = {
								is_subject = yes
								overlord = {
									nhs_condition_all_ely = { KOMANDA = tag }
									has_country_flag = nhs_searching_for_naphtha
								}
							}
						}
					}
				}
			}
			remove_province_modifier = nhs2_source_of_naphta_e
			add_permanent_province_modifier = {
				name = nhs2_source_of_naphta
				duration = -1
			}
			# NHS = {
			# 	add_treasury = 1000
			# 	country_event = { id = nhs2_greek_fire.6 days = 1 }
			# }
			if = {
				limit = {
					FROM = {
						nhs_condition_all_ely = { KOMANDA = tag }
					}
				}
				FROM = {
					country_event = { id = nhs2_greek_fire.6 }
				}
			}
			if = {
				limit = {
					FROM = {
						has_country_modifier = nhs_greek_fire_deal
					}
				}
				FROM = {
					country_event = { id = nhs2_greek_fire.8 }
				}
				nhs_scripted_effect_for_existing_elysia = { SCRIPTED_EFFECT = nhs_trigger_province_lost_event_from_trading_partner }
			}
			if = {
				limit = {
					FROM = {
						is_subject = yes
						overlord = {
							nhs_condition_all_ely = { KOMANDA = tag }
							has_country_flag = nhs_searching_for_naphtha
						}
					}
				}
				FROM = {
					overlord = {
						country_event = { id = nhs2_greek_fire.6 }
					}
				}
			}
			# else = {
			# 	nhs_scripted_effect_for_existing_elysia = { SCRIPTED_EFFECT = nhs_trigger_province_lost_event_from_trading_partner }
			# }
		}
	}
}

# ROOT = Overlord, FROM = Minor
nhs_handle_naphtha_in_subject = {
	if = {
		limit = {
			nhs_condition_all_ely = { KOMANDA = tag }
			has_country_flag = nhs_searching_for_naphtha
			FROM = {
				any_owned_province = {
					is_city = yes
					has_province_modifier = nhs2_source_of_naphta
					NOT = { has_province_modifier = nhs2_source_of_naphta_e }
				}
			}
		}
		country_event = { id = nhs2_greek_fire.5 days = 1 }
	}
	if = {
		limit = {
			NOT = { nhs_condition_all_ely = { KOMANDA = tag } }
			FROM = {
				NOT = { has_country_modifier = nhs_greek_fire_deal }
				any_owned_province = {
					is_city = yes
					has_province_modifier = nhs2_source_of_naphta_e
				}
			}
		}
		nhs_trigger_event = { EVENT_ID = nhs2_greek_fire.6 }
	}
}

nhs_trigger_province_lost_event_from_trading_partner = {
	set_country_flag = nhs_naphta_lost_in_trading_partner
	country_event = { id = nhs2_greek_fire.6 }
	clr_country_flag = nhs_naphta_lost_in_trading_partner
}
nhs_set_fire_depleting_modifier = {
	if = {
		limit = {
			OR = {
				has_country_modifier = nhs_secrets_greekfire
				has_country_modifier = nhs_greekfire_later
			}
			NOT = { nhs_has_greek_fire_reform = yes }
		}
		add_country_modifier = {
			name = nhs2_depleting_fire_fuel
			duration = 1825
		}
	}
	else_if = {
		limit = {
			has_country_modifier = nhs_greekfire_update
			NOT = { nhs_has_greek_fire_reform = yes }
		}
		add_country_modifier = {
			name = nhs2_depleting_fire_fuel_update
			duration = 1825
		}
	}
	else_if = {
		limit = {
			OR = {
				has_country_modifier = nhs_secrets_greekfire
				has_country_modifier = nhs_greekfire_later
			}
			nhs_has_greek_fire_reform = yes
		}
		add_country_modifier = {
			name = nhs2_depleting_fire_fuel_reform
			duration = 1825
		}
	}
	else_if = {
		limit = {
			has_country_modifier = nhs_greekfire_update
			nhs_has_greek_fire_reform = yes
		}
		add_country_modifier = {
			name = nhs2_depleting_fire_fuel_reform_update
			duration = 1825
		}
	}
}
nhs_remove_fire_depleting_modifier = {
	remove_country_modifier = nhs2_depleting_fire_fuel
	remove_country_modifier = nhs2_depleting_fire_fuel_update
	remove_country_modifier = nhs2_depleting_fire_fuel_reform
	remove_country_modifier = nhs2_depleting_fire_fuel_reform_update
	remove_country_modifier = nhs2_depleting_fire_fuel_timer
}

viking_discovery = {
	discover_province = 980
	discover_province = 981
	discover_province = 2573
	discover_province = 997
	discover_province = 2575
	discover_province = 2574
	discover_province = 996
	discover_province = 2576
	discover_province = 2577
	discover_province = 2578
	discover_province = 995
	discover_province = 994
	discover_province = 2583
	discover_province = 2582
	discover_province = 986
	discover_province = 2572
	discover_province = 985
	discover_province = 2571
	discover_province = 2570
	discover_province = 2566
	discover_province = 983
	discover_province = 984
	discover_province = 2569
	discover_province = 2568
	discover_province = 982
	discover_province = 1104
	discover_province = 1105
	discover_province = 1482
	discover_province = 1483
	discover_province = 1493
	discover_province = 1490
	discover_province = 1495
	discover_province = 1494
	discover_province = 1491
	discover_province = 1492

}
thorfinn_bay_discovery = {
	discover_province = 998
	discover_province = 999
	discover_province = 1000
	discover_province = 1003
	discover_province = 1004
	discover_province = 1005
	discover_province = 1006
	discover_province = 2592
}
great_lakes_discovery = {
	discover_province = 989
	discover_province = 961
	discover_province = 960 
	discover_province = 959 
	discover_province = 958 
	discover_province = 2670 
	discover_province = 987 
	discover_province = 954 
	discover_province = 947 
	discover_province = 946 
	discover_province = 944 
	discover_province = 2521 
	discover_province = 2587 
	discover_province = 2586 
	discover_province = 988 
	discover_province = 2671 
	discover_province = 1001 
	discover_province = 945 
	discover_province = 911 
	discover_province = 914 
	discover_province = 915 
	discover_province = 942 
	discover_province = 2522 
	discover_province = 2518 
	discover_province = 2517 
	discover_province = 910 
	discover_province = 1007 
	discover_province = 2015
}

erikson_river_discovery = {
	discover_province = 994 
	discover_province = 2583 
	discover_province = 990 
	discover_province = 993 
	discover_province = 2584 
	discover_province = 2585 
	discover_province = 2559 
	discover_province = 989 
	discover_province = 961 
	erikson_river_area = {
		ROOT = {
			discover_province = PREV
		}
	}
}

disputed_lands_coast_discovery = {
	discover_province = 2570 
	discover_province = 2566 
	discover_province = 2013 
	discover_province = 970 
	discover_province = 971 
	discover_province = 968 
	discover_province = 2561 
	discover_province = 967 
}

elysian_coast_discovery = {
	discover_province = 2010 
	discover_province = 2560 
	discover_province = 965 
	discover_province = 2639 
	discover_province = 962 
	discover_province = 957 
	discover_province = 2554 
	discover_province = 953 
	discover_province = 2550 
	discover_province = 952 
	discover_province = 950 
	discover_province = 2547 
	discover_province = 938 
	discover_province = 2546  
}
erikson_gulf_discovery = {
	discover_province = 980 
	discover_province = 981 
	discover_province = 981 
	discover_province = 982 
	discover_province = 983 
	discover_province = 984 
	discover_province = 985 
	discover_province = 986 
	discover_province = 994 
	discover_province = 995 
	discover_province = 996 
	discover_province = 997 
	discover_province = 2568 
	discover_province = 2569 
	discover_province = 2572 
	discover_province = 2573 
	discover_province = 2574 
	discover_province = 2575 
	discover_province = 2576 
	discover_province = 2577 
	discover_province = 2578 
	discover_province = 2582 
	discover_province = 2583
}

north_elysian_sea_discovery = {
	discover_province = 1501 
	discover_province = 1500 
	discover_province = 1499 
	discover_province = 1492 
}

south_elysian_sea_discovery = {
	discover_province = 1501 
	discover_province = 1502 
	discover_province = 1503 
}

vinlandic_sea_discovery = {
	discover_province = 1483 
	discover_province = 1490 
	discover_province = 1491 
	discover_province = 1493 
	discover_province = 1494 
	discover_province = 1495
}

thorfinn_sea_discovery = {
	discover_province = 1485
	discover_province = 1488 
	discover_province = 1486 
	discover_province = 1487 
	discover_province = 1484
	discover_province = 1489
}

great_lakes_sea_discovery = {
	discover_province = 1659
	discover_province = 1660
	discover_province = 1661
	discover_province = 1662
	discover_province = 1663
}

# greenland_discovery = {


# }

# north_sea_discovery = {


# }

nhs_set_herald_preach = {
	hidden_effect = {
		if = {
			limit = {
				NOT = { has_country_modifier = nhs_heralds1 }
			}
			add_country_modifier = {
				name = nhs_heralds1
				duration = 1825
				hidden = yes
			}
		}
		else_if = {
			limit = {
				has_country_modifier = nhs_heralds1
				NOT = { has_country_modifier = nhs_heralds2 }
			}
			add_country_modifier = {
				name = nhs_heralds2
				duration = 1825
				hidden = yes
			}
		}
		else_if = {
			limit = {
				has_country_modifier = nhs_heralds1
				has_country_modifier = nhs_heralds2
				NOT = { has_country_modifier = nhs_heralds3 }
			}
			add_country_modifier = {
				name = nhs_heralds3
				duration = 1825
				hidden = yes
			}
		}
		else_if = {
			limit = {
				has_country_modifier = nhs_heralds1
				has_country_modifier = nhs_heralds2
				has_country_modifier = nhs_heralds3
				NOT = { has_country_modifier = nhs_heralds4 }
			}
			add_country_modifier = {
				name = nhs_heralds4
				duration = 1825
				hidden = yes
			}
		}
	}
}

nhs_set_herald_7300 = {
	hidden_effect = {
		if = {
			limit = {
				has_country_modifier = nhs_heralds1
				has_country_modifier = nhs_heralds2
				has_country_modifier = nhs_heralds3
				NOT = { has_country_modifier = nhs_heralds4 }
			}
			add_country_modifier = {
				name = nhs_heralds4
				duration = 7300
				hidden = yes
			}
		}
		if = {
			limit = {
				has_country_modifier = nhs_heralds1
				has_country_modifier = nhs_heralds2
				NOT = { has_country_modifier = nhs_heralds3 }
			}
			add_country_modifier = {
				name = nhs_heralds3
				duration = 7300
				hidden = yes
			}
		}
		if = {
			limit = {
				has_country_modifier = nhs_heralds1
				NOT = { has_country_modifier = nhs_heralds2 }
			}
			add_country_modifier = {
				name = nhs_heralds2
				duration = 7300
				hidden = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_modifier = nhs_heralds1 }
			}
			add_country_modifier = {
				name = nhs_heralds1
				duration = 7300
				hidden = yes
			}
		}
	}
}

nhs_give_province = {
	if = {
		limit = {
			has_province_flag = nhs_p2
		}
		ROOT = {
			change_variable = { which = nhs_pm value = -1 }
		}
		random_neighbor_province = {
			limit = {
				has_province_flag = nhs_p1
			}
			cede_province = ROOT
			set_province_flag = nhs_province
		}
		## END
		country_event = { id = nhs2_p.3 }			
	}
	if = {
		limit = {
			has_province_flag = nhs_p3
		}
		ROOT = {
			change_variable = { which = nhs_pm value = -1 }
		}
		random_neighbor_province = {
			limit = {
				has_province_flag = nhs_p2
				any_neighbor_province = {
					has_province_flag = nhs_p1
				}
			}
			cede_province = ROOT
			set_province_flag = nhs_province
		}		
	}
	if = {
		limit = {
			has_province_flag = nhs_p4
		}
		ROOT = {
			change_variable = { which = nhs_pm value = -1 }
		}
		random_neighbor_province = {
			limit = {
				has_province_flag = nhs_p3
				any_neighbor_province = {
					has_province_flag = nhs_p2
					any_neighbor_province = {
						has_province_flag = nhs_p1
					}
				}
			}
			cede_province = ROOT
			set_province_flag = nhs_province
		}		
	}
	if = {
		limit = {
			has_province_flag = nhs_p5
		}
		ROOT = {
			change_variable = { which = nhs_pm value = -1 }
		}
		random_neighbor_province = {
			limit = {
				has_province_flag = nhs_p4
				any_neighbor_province = {
					has_province_flag = nhs_p3
					any_neighbor_province = {
						has_province_flag = nhs_p2
						any_neighbor_province = {
							has_province_flag = nhs_p1
						}
					}
				}
			}
			cede_province = ROOT
			set_province_flag = nhs_province
		}		
	}
}

nhs_roll_the_next_battle = {
	if = {
		limit = {
			OR = {
				MK1 = { NOT = { num_of_cities = 2 } }
				HLL = { NOT = { num_of_cities = 2 } }
			}
		}
		country_event = { id = nhs_vov_civil_war.9 days = 25 }
	}
	if = {
		limit = {
			any_province = {
				OR = {
					owned_by = MK1
					owned_by = HLL
				}
				NOT = { region = canada_region }
			}
			NOT = {
				OR = {
					MK1 = { NOT = { num_of_cities = 2 } }
					HLL = { NOT = { num_of_cities = 2 } }
				}
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						OR = {
							any_province = {
								owned_by = MK1
								any_neighbor_province = {
									owned_by = HLL
									is_capital = yes
								}
							}
							HLL = { NOT = { num_of_cities = 2 } }
						}
						HLL = { NOT = { num_of_cities = 10 } }
						NOT = {
							trading_with_helluland = yes
						}
					}
					AND = {
						OR = {
							any_province = {
								owned_by = HLL
								any_neighbor_province = {
									owned_by = MK1
									is_capital = yes
								}
							}
							MK1 = { NOT = { num_of_cities = 2 } }
						}
						MK1 = { NOT = { num_of_cities = 10 } }
						NOT = {
							trading_with_markland = yes
						}
					}
				}
			}
			random_list = {
				70 = {
					country_event = { id = nhs_vov_civil_war.10 days = 50 }
				}
				30 = {
					country_event = { id = nhs_vov_civil_war.9 days = 50 }
				}
			}
		}
		if = {
			limit = {
				NOT = {
					OR = {
						AND = {
							OR = {
								any_province = {
									owned_by = MK1
									any_neighbor_province = {
										owned_by = HLL
										is_capital = yes
									}
								}
								HLL = { NOT = { num_of_cities = 2 } }
							}
							HLL = { NOT = { num_of_cities = 10 } }
							NOT = {
								trading_with_helluland = yes
							}
						}
						AND = {
							OR = {
								any_province = {
									owned_by = HLL
									any_neighbor_province = {
										owned_by = MK1
										is_capital = yes
									}
								}
								MK1 = { NOT = { num_of_cities = 2 } }
							}
							MK1 = { NOT = { num_of_cities = 10 } }
							NOT = { 
								trading_with_markland = yes
							}
						}
					}
				}
			}
			random_list = {
				70 = {
					country_event = { id = nhs_vov_civil_war.9 days = 50 }
				}
				30 = {
					country_event = { id = nhs_vov_civil_war.5 days = 50 }
				}
			}
		}
	}
	###
	if = {
		limit = {
			NOT = {
				any_province = {
					OR = {
						owned_by = MK1
						owned_by = HLL
					}
					NOT = { region = canada_region }
				}
			}
			NOT = {
				OR = {
					MK1 = { NOT = { num_of_cities = 2 } }
					HLL = { NOT = { num_of_cities = 2 } }
				}
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						OR = {
							any_province = {
								owned_by = MK1
								any_neighbor_province = {
									owned_by = HLL
									is_capital = yes
								}
							}
							HLL = { NOT = { num_of_cities = 2 } }
						}
						HLL = { NOT = { num_of_cities = 10 } }
						NOT = {
							trading_with_helluland = yes
						}
					}
					AND = {
						OR = {
							any_province = {
								owned_by = HLL
								any_neighbor_province = {
									owned_by = MK1
									is_capital = yes
								}
							}
							MK1 = { NOT = { num_of_cities = 2 } }
						}
						MK1 = { NOT = { num_of_cities = 10 } }
						NOT = { 
							trading_with_markland = yes
						}
					}
				}	
			}
			random_list = {
				70 = {
					country_event = { id = nhs_vov_civil_war.9 days = 50 }
				}
				30 = {
					country_event = { id = nhs_vov_civil_war.5 days = 50 }
				}
			}
		}
		if = {
			limit = {
				NOT = {
					OR = {
						AND = {
							OR = {
								any_province = {
									owned_by = MK1
									any_neighbor_province = {
										owned_by = HLL
										is_capital = yes
									}
								}
								HLL = { NOT = { num_of_cities = 2 } }
							}
							HLL = { NOT = { num_of_cities = 10 } }
							NOT = {
								trading_with_helluland = yes
							}
						}
						AND = {
							OR = {
								any_province = {
									owned_by = HLL
									any_neighbor_province = {
										owned_by = MK1
										is_capital = yes
									}
								}
								MK1 = { NOT = { num_of_cities = 2 } }
							}
							MK1 = { NOT = { num_of_cities = 10 } }
							NOT = { 
								trading_with_markland = yes
							}
						}
					}
				}
			}
			country_event = { id = nhs_vov_civil_war.5 days = 50 }
		}
	}
}

nhs_improve_portuguese_enclave_from_small = {
	clr_country_flag = nhs_has_small_por_enclave
	set_country_flag = nhs_has_por_enclave
	custom_tooltip = nhs_enclave_expansion_tt
	custom_tooltip = nhs_institution_spread_enclave_increased_tt
	if = {
		limit = {
			any_owned_province = {
				has_province_modifier = nhs2_small_por_enclave
			}
		}
		random_owned_province = {
			limit = {
				has_province_modifier = nhs2_small_por_enclave
			}
			
			remove_province_modifier = nhs2_small_por_enclave
			add_province_modifier = {
				name = nhs2_por_enclave
				duration = -1
			}
		}
	}
}

# RECIPIENT - country that provinces are ceeded to
nhs_cede_elysian_brazilian_settlements = {
	if = {
		limit = {
			any_province = {
				continent = south_america
				owner = {
					OR = {
						nhs_condition_all_ely = { KOMANDA = tag }
						AND = {
							is_colonial_nation = yes
							colonial_parent = {
								nhs_condition_all_ely = { KOMANDA = tag }
							}
						}
						AND = {
							nhs_condition_all_ely = { KOMANDA = is_subject_of }
							NOT = {
								capital_scope = {
									continent = south_america
								}
							}
						}
					}
				}
			}
		}
		every_province = {
			limit = {
				continent = south_america
				owner = {
					OR = {
						nhs_condition_all_ely = { KOMANDA = tag }
						AND = {
							is_colonial_nation = yes
							colonial_parent = {
								nhs_condition_all_ely = { KOMANDA = tag }
							}
						}
						AND = {
							nhs_condition_all_ely = { KOMANDA = is_subject_of }
							NOT = {
								capital_scope = {
									continent = south_america
								}
							}
						}
					}
				}
			}
			cede_province = $RECIPIENT$
			hidden_effect = {
				add_core = $RECIPIENT$
				every_country = {
					limit = {
						OR = {
							nhs_condition_all_ely = { KOMANDA = tag }
							AND = {
								is_colonial_nation = yes
								colonial_parent = {
									nhs_condition_all_ely = { KOMANDA = tag }
								}
							}
							AND = {
								nhs_condition_all_ely = { KOMANDA = is_subject_of }
								NOT = {
									capital_scope = {
										continent = south_america
									}
								}
							}
						}
					}
					remove_core = PREV
				}
			}
		}
	}
}

nhs_move_por_settlements = {
	while = {
		limit = {
			any_province = {
				continent = north_america
				OR = {
					owned_by = ROOT
					owner = {
						AND = {
							is_colonial_nation = yes
							colonial_parent = {
								tag = ROOT
							}
						}
					}
				}
			}
		}
		random_province = {
			limit = {
				continent = north_america
				OR = {
					owned_by = ROOT
					owner = {
						AND = {
							is_colonial_nation = yes
							colonial_parent = {
								tag = ROOT
							}
						}
					}
				}
			}
			add_colonysize = -1000
			cede_province = ---
			change_trade_goods = unknown
			if = {
				limit = {
					OR = {
						has_province_modifier = to_nat_tribal_development
						native_size = 1
					}
				}
				to_nat_restore_original_culture_from_flag = { CHANGE_ORIGINAL_CULTURE = yes }
			}
			else_if = {
				limit = {
					NOT = { nhs_culturally_native_primary = yes }
				}
				change_culture = noculture
				change_religion = noreligion
			}
		}
		clr_country_flag = nhs_found_move_por_settlements_target
		random_province = {
			limit = {
				is_empty = yes
				has_port = yes
				region = brazil_region
				any_neighbor_province = {
					OR = {
						owned_by = ROOT
						owner = {
							is_colonial_nation = yes
							colonial_parent = {
								tag = ROOT
							}
						}
					}
				}
			}
			ROOT = {
				set_country_flag = nhs_found_move_por_settlements_target
			}
			save_event_target_as = nhs_move_por_settlements_target
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_found_move_por_settlements_target }
			}
			random_province = {
				limit = {
					is_empty = yes
					has_port = yes
					region = brazil_region
					range = ROOT
					province_has_center_of_trade_of_level = 1
				}
				ROOT = {
					set_country_flag = nhs_found_move_por_settlements_target
				}
				save_event_target_as = nhs_move_por_settlements_target
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_found_move_por_settlements_target }
			}
			random_province = {
				limit = {
					is_empty = yes
					has_port = yes
					region = brazil_region
					range = ROOT
				}
				ROOT = {
					set_country_flag = nhs_found_move_por_settlements_target
				}
				save_event_target_as = nhs_move_por_settlements_target
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_found_move_por_settlements_target }
			}
			random_province = {
				limit = {
					is_empty = yes
					region = brazil_region
					any_neighbor_province = {
						OR = {
							owned_by = ROOT
							owner = {
								is_colonial_nation = yes
								colonial_parent = {
									tag = ROOT
								}
							}
						}
					}
				}
				ROOT = {
					set_country_flag = nhs_found_move_por_settlements_target
				}
				save_event_target_as = nhs_move_por_settlements_target
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_found_move_por_settlements_target }
			}
			random_province = {
				limit = {
					continent = south_america
					region = colombia_region
					has_port = yes
					is_empty = yes
					any_neighbor_province = {
						OR = {
							owned_by = ROOT
							owner = {
								is_colonial_nation = yes
								colonial_parent = {
									tag = ROOT
								}
							}
						}
					}
				}
				ROOT = {
					set_country_flag = nhs_found_move_por_settlements_target
				}
				save_event_target_as = nhs_move_por_settlements_target
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_found_move_por_settlements_target }
			}
			random_province = {
				limit = {
					is_empty = yes
					has_port = yes
					region = colombia_region
					range = ROOT
					province_has_center_of_trade_of_level = 1
				}
				ROOT = {
					set_country_flag = nhs_found_move_por_settlements_target
				}
				save_event_target_as = nhs_move_por_settlements_target
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_found_move_por_settlements_target }
			}
			random_province = {
				limit = {
					is_empty = yes
					has_port = yes
					region = colombia_region
					range = ROOT
				}
				ROOT = {
					set_country_flag = nhs_found_move_por_settlements_target
				}
				save_event_target_as = nhs_move_por_settlements_target
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_found_move_por_settlements_target }
			}
			random_province = {
				limit = {
					continent = south_america
					region = colombia_region
					is_empty = yes
					any_neighbor_province = {
						OR = {
							owned_by = ROOT
							owner = {
								is_colonial_nation = yes
								colonial_parent = {
									tag = ROOT
								}
							}
						}
					}
				}
				ROOT = {
					set_country_flag = nhs_found_move_por_settlements_target
				}
				save_event_target_as = nhs_move_por_settlements_target
			}
		}
		if = {
			limit = {
				has_country_flag = nhs_found_move_por_settlements_target
			}
			event_target:nhs_move_por_settlements_target = {
				cede_province = ROOT
				change_culture = ROOT
				change_religion = ROOT
				add_core = ROOT
				hidden_effect = {
					nhs_on_province_culture_converted_general = yes
				}
			}
		}
		# At this point we say GG

		# else_if = {
		# 	limit = {
		# 		any_province = {
		# 			region = brazil_region
		# 			is_empty = yes
		# 		}
		# 	}
		# 	random_province = {
		# 		limit = {
		# 			region = brazil_region
		# 			is_empty = yes
		# 		}
		# 		cede_province = ROOT
		# 		change_culture = ROOT
		# 		change_religion = ROOT
		# 	}
		# }
		# else_if = {
		# 	limit = {
		# 		any_province = {
		# 			continent = south_america
		# 			is_empty = yes
		# 		}
		# 	}
		# 	random_province = {
		# 		limit = {
		# 			continent = south_america
		# 			is_empty = yes
		# 		}
		# 		cede_province = ROOT
		# 		change_culture = ROOT
		# 		change_religion = ROOT
		# 	}
		# }
	}
	clr_country_flag = nhs_found_move_por_settlements_target
}

nhs_discover_treaty_provinces_ely = {
	every_province = {
		limit = {
			region = brazil_region
			owner = {
				OR = {
					tag = ROOT
					AND = {
						is_colonial_nation = yes
						colonial_parent = {
							tag = ROOT
						}
					}
				}
			}
		}
		discover_country = FROM
		if = {
			limit = {
				has_port = yes
			}
			sea_zone = {
				discover_country = FROM
			}
		}
	}
	# FROM = {	
		# discover_province = 1530
		# discover_province = 1529
		# discover_province = 1528
		# discover_province = 747
		# discover_province = 2890
		# discover_province = 748
		# discover_province = 2927
		# discover_province = 2886
		# discover_province = 751
		# discover_province = 753
		# discover_province = 749
		# discover_province = 2938
	# }
}

nhs_set_por_colonial_capital = {
	set_global_flag = nhs_treaty_of_lantanopolis
	custom_tooltip = nhs_por_loses_claims_in_na_por_perspective_tt
	custom_tooltip = nhs_lose_claims_in_sa_por_perspective_tt
	hidden_effect = {
		every_province = {
			limit = {
				continent = south_america
				OR = {
					is_claim = FROM
					is_permanent_claim = FROM
					any_country = {
						is_subject_of = FROM
						OR = {
							is_claim = PREV
							PREV = {
								is_permanent_claim = PREV 
							}
						}
					}
				}
			}
			remove_claim = FROM
		}
		FROM = {
			every_subject_country = {
				every_province = {
					limit = {
						continent = south_america
						OR = {
							is_claim = PREV
							is_permanent_claim = PREV 
						}
					}
					remove_claim = PREV
				}
				every_subject_country = {
					limit = {
						any_province = {
							continent = south_america
							OR = {
								is_claim = PREV
								is_permanent_claim = PREV 
							}
						}
					}
					every_province = {
						limit = {
							continent = south_america
							OR = {
								is_claim = PREV
								is_permanent_claim = PREV 
							}
						}
						remove_claim = PREV
					}
				}
			}
		}
		every_province = {
			limit = {
				continent = north_america
				OR = {
					is_claim = ROOT
					is_permanent_claim = ROOT
				}
			}
			remove_claim = ROOT
		}
		every_subject_country = {
			every_province = {
				limit = {
					continent = north_america
					OR = {
						is_claim = PREV
						is_permanent_claim = PREV 
					}
				}
				remove_claim = PREV
			}
			every_subject_country = {
				limit = {
					any_province = {
						continent = north_america
						OR = {
							is_claim = PREV
							is_permanent_claim = PREV 
						}
					}
				}
				every_province = {
					limit = {
						continent = north_america
						OR = {
							is_claim = PREV
							is_permanent_claim = PREV 
						}
					}
					remove_claim = PREV
				}
			}
		}
	}
	add_country_modifier = {
		name = nhs2_treaty_of_lantanopolis_por
		duration = -1
	}
	if = {
		limit = {
			$TARGET_PROVINCE$ = {
				is_empty = yes
			}
		}
		$TARGET_PROVINCE$ = {
			# tooltip = {
			# 	create_colony = 1000
			# }
			cede_province = ROOT
			add_core = ROOT
			change_culture = ROOT
			change_religion = ROOT
			hidden_effect = {
				nhs_on_province_culture_converted_general = yes
			}
		}
	}
	else_if = {
		limit = {
			$TARGET_PROVINCE$ = {
				NOT = {
					owner = {
						OR = {
							tag = ROOT
							AND = {
								is_colonial_nation = yes
								colonial_parent = {
									tag = POR
								}
							}
						}
					}
				}
			}
		}
		$TARGET_PROVINCE$ = {
			cede_province = ROOT
			add_core = ROOT
			change_culture = ROOT
			change_religion = ROOT
			hidden_effect = {
				nhs_on_province_culture_converted_general = yes
			}
		}
	}
	nhs_cede_elysian_brazilian_settlements = { RECIPIENT = ROOT }
	if = {
		limit = {
			any_province = {
				continent = north_america
				OR = {
					owned_by = POR
					owner = {
						AND = {
							is_colonial_nation = yes
							colonial_parent = {
								tag = POR
							}
						}
					}
				}
			}
		}
		custom_tooltip = nhs_fate_of_o_settlements_tt #Our current settlements will be relocated to SA
		hidden_effect = {
			nhs_move_por_settlements = yes
		}
	}
}

nhs_break_por_deal = {
	clr_country_flag = nhs_has_por_enclave
	clr_country_flag = nhs_has_large_por_enclave
	clr_country_flag = nhs_has_small_por_enclave
	clr_global_flag = nhs_treaty_of_lantanopolis
	# set_global_flag = nhs_broke_deals_with_por
	
	if = {
		limit = {
			has_country_modifier = nhs2_ely_por_trade
		}
		remove_country_modifier = nhs2_ely_por_trade
	}
	random_country = {
		limit = {
			has_country_flag = nhs_portugese_secret
		}
		remove_historical_friend = ROOT
		ROOT = {
			remove_historical_friend = PREV
		}
		if = {
			limit = {
				has_country_modifier = nhs2_treaty_of_lantanopolis_por
			}
			remove_country_modifier = nhs2_treaty_of_lantanopolis_por
		}
		if = {
			limit = {
				has_country_modifier = nhs2_por_ely_trade
			}
			remove_country_modifier = nhs2_por_ely_trade
		}
		add_trust = { who = ROOT value = -40 }
		custom_tooltip = nhs_por_remove_150_opinion_tt
		hidden_effect = {
			add_opinion = {
				who = ROOT
				modifier = nhs_broke_the_deals
			}
			remove_opinion = {
				who = ROOT
				modifier = nhs_por_trade_deal
			}
			# remove_opinion = {
			# 	who = ROOT
			# 	modifier = nhs_unchecked_expansion
			# }
		}
		
		reverse_remove_opinion = {
			who = ROOT
			modifier = nhs_por_trade_deal
		}
		
	}
	[[REMOVE_ENCLAVES]
		custom_tooltip = nhs_new_line_tt
		if = {
			limit = {
				any_province = {
					has_province_modifier = nhs2_small_por_enclave
				}
			}
			every_province = {
				limit = {
					has_province_modifier = nhs2_small_por_enclave
				}
				remove_province_modifier = nhs2_small_por_enclave
			}
		}
		if = {
			limit = {
				any_province = {
					has_province_modifier = nhs2_por_enclave
				}
			}
			every_province = {
				limit = {
					has_province_modifier = nhs2_por_enclave
				}
				remove_province_modifier = nhs2_por_enclave
			}
		}
		if = {
			limit = {
				any_province = {
					has_province_modifier = nhs2_large_por_enclave
				}
			}
			every_province = {
				limit = {
					has_province_modifier = nhs2_large_por_enclave
				}
				remove_province_modifier = nhs2_large_por_enclave
			}
		}
	]
}

nhs_add_proper_enclave = {
	owner = { clr_country_flag = nhs_enclave_pending }
	if = {
		limit = {
			owner = { has_country_flag = nhs_has_small_por_enclave }
		}
		add_province_modifier = {
			name = nhs2_small_por_enclave
			duration = -1
		}
	}
	if = {
		limit = {
			owner = { has_country_flag = nhs_has_por_enclave }
		}
		add_province_modifier = {
			name = nhs2_por_enclave
			duration = -1
		}
	}
	if = {
		limit = {
			owner = { has_country_flag = nhs_has_large_por_enclave }
		}
		add_province_modifier = {
			name = nhs2_large_por_enclave
			duration = -1
		}
	}
	if = {
		limit = {
			owner = { has_country_flag = nhs_has_eu_enclave }
		}
		add_province_modifier = {
			name = nhs2_european_enclave
			duration = -1
		}
	}
}

to_nhs_spawn_enclave = {
	if = {
		limit = {
			950 = {
				owned_by = ROOT
				NOT = { has_albanian_majority_modifier = yes }
			}
		}
		950 = {
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				OR = {
					province_id = 962
					province_id = 2547
				}
				culture_group = ROOT
				NOT = { has_albanian_majority_modifier = yes }
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					province_id = 962
					province_id = 2547
				}
				culture_group = ROOT
				NOT = { has_albanian_majority_modifier = yes }
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				OR = {
					province_id = 962
					province_id = 2547
				}
				NOT = { has_albanian_majority_modifier = yes }
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					province_id = 962
					province_id = 2547
				}
				NOT = { has_albanian_majority_modifier = yes }
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				OR = {
					area = carolinas_area
					area = new_york_area
				}
				has_port = yes
				culture_group = ROOT
				NOT = { has_albanian_majority_modifier = yes }
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					area = carolinas_area
					area = new_york_area
				}
				has_port = yes
				culture_group = ROOT
				NOT = { has_albanian_majority_modifier = yes }
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				OR = {
					area = carolinas_area
					area = new_york_area
				}
				has_port = yes
				NOT = { has_albanian_majority_modifier = yes }
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					area = carolinas_area
					area = new_york_area
				}
				has_port = yes
				NOT = { has_albanian_majority_modifier = yes }
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			owns = 957
			957 = {
				culture_group = ROOT
				NOT = { has_albanian_majority_modifier = yes }
			}
		}
		957 = {
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_eligible_for_enclave = yes
				culture_group = ROOT
				nhs_homelands = yes
				is_capital = no
				NOT = { has_albanian_majority_modifier = yes }
			}
		}
		random_owned_province = {
			limit = {
				nhs_eligible_for_enclave = yes
				culture_group = ROOT
				nhs_homelands = yes
				is_capital = no
				NOT = { has_albanian_majority_modifier = yes }
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_eligible_for_enclave = yes
				culture_group = ROOT
				is_capital = no
				NOT = { has_albanian_majority_modifier = yes }
			}
		}
		random_owned_province = {
			limit = {
				nhs_eligible_for_enclave = yes
				culture_group = ROOT
				NOT = { has_albanian_majority_modifier = yes }
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_eligible_for_enclave = yes
				culture_group = ROOT
				NOT = { has_albanian_majority_modifier = yes }
			}
		}
		random_owned_province = {
			limit = {
				nhs_eligible_for_enclave = yes
				culture_group = ROOT
				NOT = { has_albanian_majority_modifier = yes }
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_eligible_for_enclave = yes
				culture_group = ROOT
			}
		}
		random_owned_province = {
			limit = {
				nhs_eligible_for_enclave = yes
				culture_group = ROOT
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_eligible_for_enclave = yes
			}
		}
		random_owned_province = {
			limit = {
				nhs_eligible_for_enclave = yes
				culture_group = ROOT
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_eligible_for_enclave_with_canada = yes
				culture_group = ROOT
			}
		}
		random_owned_province = {
			limit = {
				nhs_eligible_for_enclave_with_canada = yes
				culture_group = ROOT
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				nhs_eligible_for_enclave_with_canada = yes
			}
		}
		random_owned_province = {
			limit = {
				nhs_eligible_for_enclave_with_canada = yes
			}
			custom_tooltip = nhs_temporary_enclave_tt
			add_province_modifier = {
				name = $ENCLAVE_MODIFIER$
				duration = -1
			}
		}
	}
	else = {
		custom_tooltip = nhs_will_get_enclave_later_tt
		set_country_flag = nhs_enclave_pending
	}
}

nhs_move_t_post = {
	if = {
		limit = {
			has_province_modifier = nhs2_european_enclave
		}
		remove_province_modifier = nhs2_european_enclave
		ROOT = {
			to_nhs_spawn_enclave = { ENCLAVE_MODIFIER = nhs2_european_enclave }
		}
	}
	if = {
		limit = {
			has_province_modifier = nhs2_small_por_enclave
		}
		remove_province_modifier = nhs2_small_por_enclave
		ROOT = {
			to_nhs_spawn_enclave = { ENCLAVE_MODIFIER = nhs2_small_por_enclave }
		}
	}
	if = {
		limit = {
			has_province_modifier = nhs2_por_enclave
		}
		remove_province_modifier = nhs2_por_enclave
		ROOT = {
			to_nhs_spawn_enclave = { ENCLAVE_MODIFIER = nhs2_por_enclave }
		}
	}
	if = {
		limit = {
			has_province_modifier = nhs2_large_por_enclave
		}
		remove_province_modifier = nhs2_large_por_enclave
		ROOT = {
			to_nhs_spawn_enclave = { ENCLAVE_MODIFIER = nhs2_large_por_enclave }
		}
	}
}

nhs_heir_age_mm_10_pregen = {
	clr_country_flag = nhs_heir_age_choice_$HT$_1
	clr_country_flag = nhs_heir_age_choice_$HT$_2
	clr_country_flag = nhs_heir_age_choice_$HT$_3
	clr_country_flag = nhs_heir_age_choice_$HT$_4
	clr_country_flag = nhs_heir_age_choice_$HT$_5
	clr_country_flag = nhs_heir_age_choice_$HT$_6
	clr_country_flag = nhs_heir_age_choice_$HT$_7
	clr_country_flag = nhs_heir_age_choice_$HT$_8
	clr_country_flag = nhs_heir_age_choice_$HT$_9
	clr_country_flag = nhs_heir_age_choice_$HT$_10
	random_list = {
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_1
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_2
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_3
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_4
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_5
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_6
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_7
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_8
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_9
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_10
		}
	}
}

nhs_heir_age_mm_10 = {
	trigger_switch = {
		on_trigger = has_country_flag 
		nhs_heir_age_choice_$HT$_1 = {
			#add_treasury = $AGE1$0
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$0
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_2 = {
			#add_treasury = $AGE1$1
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$1
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_3 = {
			#add_treasury = $AGE1$2
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$2
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_4 = {
			#add_treasury = $AGE1$3
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$3
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_5 = {
			#add_treasury = $AGE1$4
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$4
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_6 = {
			#add_treasury = $AGE1$5
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$5
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_7 = {
			#add_treasury = $AGE1$6
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$6
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_8 = {
			#add_treasury = $AGE1$7
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$7
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_9 = {
			#add_treasury = $AGE1$8
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$8
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_10 = {
			#add_treasury = $AGE1$9
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$9
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
	}
}

nhs_heir_age_mm_20_pregen = {
	clr_country_flag = nhs_heir_age_choice_$HT$_1
	clr_country_flag = nhs_heir_age_choice_$HT$_2
	clr_country_flag = nhs_heir_age_choice_$HT$_3
	clr_country_flag = nhs_heir_age_choice_$HT$_4
	clr_country_flag = nhs_heir_age_choice_$HT$_5
	clr_country_flag = nhs_heir_age_choice_$HT$_6
	clr_country_flag = nhs_heir_age_choice_$HT$_7
	clr_country_flag = nhs_heir_age_choice_$HT$_8
	clr_country_flag = nhs_heir_age_choice_$HT$_9
	clr_country_flag = nhs_heir_age_choice_$HT$_10
	clr_country_flag = nhs_heir_age_choice_$HT$_11
	clr_country_flag = nhs_heir_age_choice_$HT$_12
	clr_country_flag = nhs_heir_age_choice_$HT$_13
	clr_country_flag = nhs_heir_age_choice_$HT$_14
	clr_country_flag = nhs_heir_age_choice_$HT$_15
	clr_country_flag = nhs_heir_age_choice_$HT$_16
	clr_country_flag = nhs_heir_age_choice_$HT$_17
	clr_country_flag = nhs_heir_age_choice_$HT$_18
	clr_country_flag = nhs_heir_age_choice_$HT$_19
	clr_country_flag = nhs_heir_age_choice_$HT$_20
	random_list = {
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_1
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_2
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_3
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_4
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_5
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_6
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_7
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_8
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_9
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_10
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_11
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_12
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_13
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_14
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_15
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_16
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_17
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_18
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_19
		}
		5 = {
			set_country_flag = nhs_heir_age_choice_$HT$_20
		}
	}
}

nhs_heir_age_mm_20 = {
	trigger_switch = {
		on_trigger = has_country_flag 
		nhs_heir_age_choice_$HT$_1 = {
			#add_treasury = $AGE1$0
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$0
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_2 = {
			#add_treasury = $AGE1$1
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$1
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_3 = {
			#add_treasury = $AGE1$2
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$2
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_4 = {
			#add_treasury = $AGE1$3
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$3
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_5 = {
			#add_treasury = $AGE1$4
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$4
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_6 = {
			#add_treasury = $AGE1$5
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$5
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_7 = {
			#add_treasury = $AGE1$6
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$6
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		5nhs_heir_age_choice_$HT$_8 = {
			#add_treasury = $AGE1$7
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$7
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_9 = {
			#add_treasury = $AGE1$8
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$8
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_10 = {
			#add_treasury = $AGE1$9
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE1$9
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_11 = {
			#add_treasury = $AGE2$0
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE2$0
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_12 = {
			#add_treasury = $AGE2$1
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE2$1
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_13 = {
			#add_treasury = $AGE2$2
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE2$2
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_14 = {
			#add_treasury = $AGE2$3
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE2$3
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_15 = {
			#add_treasury = $AGE2$4
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE2$4
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_16 = {
			#add_treasury = $AGE2$5
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE2$5
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_17 = {
			#add_treasury = $AGE2$6
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE2$6
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_18 = {
			#add_treasury = $AGE2$7
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE2$7
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_19 = {
			#add_treasury = $AGE2$8
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE2$8
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
		nhs_heir_age_choice_$HT$_20 = {
			#add_treasury = $AGE2$9
			define_heir = {
				[[DYNASTY]
					dynasty = $DYNASTY$
				]
				[[NAME]
					name = $NAME$
				]
				age = $AGE2$9
				[[MIN_R_ADM]
					change_adm = $MIN_R_ADM$
				]
				[[MIN_R_DIP]
					change_dip = $MIN_R_DIP$
				]
				[[MIN_R_MIL]
					change_mil = $MIN_R_MIL$
				]
				[[MAX_R_ADM]
					max_random_adm = $MAX_R_ADM$
				]
				[[MAX_R_DIP]
					max_random_dip = $MAX_R_DIP$
				]
				[[MAX_R_MIL]
					max_random_mil = $MAX_R_MIL$
				]
				[[IS_MALE]
					male = yes
				]
				[[IS_FEMALE]
					female = yes
				]
			}
		}
	}
}

#nhs_heir_age_mm_20 = {
#	random_list = {
#		5 = {
#			#add_treasury = $AGE1$0
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$0
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE1$1
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$1
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE1$2
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$2
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE1$3
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$3
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE1$4
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$4
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE1$5
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$5
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE1$6
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$6
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE1$7
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$7
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE1$8
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$8
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE1$9
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$9
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE2$0
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$0
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE2$1
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$1
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE2$2
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$2
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE2$3
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$3
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE2$4
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$4
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE2$5
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$5
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE2$6
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$6
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE2$7
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$7
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE2$8
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$8
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			#add_treasury = $AGE2$9
#			define_heir = {
#				[[DYNASTY]
#					dynasty = $DYNASTY$
#				]
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$9
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#	}
#}
#nhs_heir_age_mm_10 = {
#	random_list = {
#		5 = {
#			add_treasury = $AGE1$
#			define_heir = {
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE1$
#				[[MIN_R_ADM]
#					change_adm = $MIN_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MIN_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MIN_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			add_treasury = $AGE2$
#			define_heir = {
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE2$
#				[[MIN_R_ADM]
#					change_adm = $MAX_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MAX_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MAX_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			add_treasury = $AGE3$
#			define_heir = {
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE3$
#				[[MIN_R_ADM]
#					change_adm = $MAX_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MAX_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MAX_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			add_treasury = $AGE4$
#			define_heir = {
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE4$
#				[[MIN_R_ADM]
#					change_adm = $MAX_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MAX_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MAX_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			add_treasury = $AGE5$
#			define_heir = {
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE5$
#				[[MIN_R_ADM]
#					change_adm = $MAX_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MAX_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MAX_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			add_treasury = $AGE6$
#			define_heir = {
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE6$
#				[[MIN_R_ADM]
#					change_adm = $MAX_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MAX_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MAX_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			add_treasury = $AGE7$
#			define_heir = {
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE7$
#				[[MIN_R_ADM]
#					change_adm = $MAX_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MAX_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MAX_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			add_treasury = $AGE8$
#			define_heir = {
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE8$
#				[[MIN_R_ADM]
#					change_adm = $MAX_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MAX_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MAX_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			add_treasury = $AGE9$
#			define_heir = {
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE9$
#				[[MIN_R_ADM]
#					change_adm = $MAX_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MAX_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MAX_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#		5 = {
#			add_treasury = $AGE10$
#			define_heir = {
#				[[NAME]
#					name = $NAME$
#				]
#				age = $AGE10$
#				[[MIN_R_ADM]
#					change_adm = $MAX_R_ADM$
#				]
#				[[MIN_R_DIP]
#					change_dip = $MAX_R_DIP$
#				]
#				[[MIN_R_MIL]
#					change_mil = $MAX_R_MIL$
#				]
#				[[MAX_R_ADM]
#					max_random_adm = $MAX_R_ADM$
#				]
#				[[MAX_R_DIP]
#					max_random_dip = $MAX_R_DIP$
#				]
#				[[MAX_R_MIL]
#					max_random_mil = $MAX_R_MIL$
#				]
#				[[IS_MALE]
#					male = yes
#				]
#				[[IS_FEMALE]
#					female = yes
#				]
#			}
#		}
#	}
#}

nhs_restore_ruler = {
	ELF = {
		#limit = {
			#ai = yes
			#is_subject = no
			#NOT = {
			##	num_of_unions = 1
			#}
			#NOT = { tag = PAP }
			
		#}
		#exile_ruler_as = nhs_temp_ruler
		if = {
			limit = {
				has_global_flag = $HEIR_FLAG$
				has_global_flag = $RULER_FLAG$
			}
			set_ruler = $RULER_EXILE$
			set_heir = $HEIR_EXILE$
			#log = "RULER AND HEIR"
			if = {
				limit = {
					ruler_age = 70
				}
				#log = "RULER TOO OLD"
				if = {
					limit = {
						heir_age = 80
					}
					#log = "HEIR TOO OLD"
					ROOT = {
						define_ruler = {
							dynasty = PREV
							claim = 50
							#age = 20
							min_age = 30
							max_age = 40
						}
						if = {
							limit = {
								ruler_age = 60
								has_heir = no
							}
							kill_ruler = yes
							define_heir = {
								dynasty = PREV
								claim = 50
								age = 15
							}
						}
					}
				}
				else = {
					#log = "Ruler 1: [ELF.Monarch.GetName]"
					#log = "Heir 1: [ELF.Heir.GetName]"
					#exile_ruler_as = nhs_temp_exile
					#log = "Ruler 2: [ELF.Monarch.GetName]"
					#exile_ruler_as = $RULER_EXILE$
					exile_heir_as = $HEIR_EXILE$
					#log = "Ruler 3: [ELF.Monarch.GetName]"
					#log = "Heir 3: [ELF.Heir.GetName]"
					ROOT = {
						define_ruler = {
							name = "(Interregnum)"
							adm = 3
							dip = 3
							mil = 1
							regency = yes
						}
						set_heir = $HEIR_EXILE$
						add_legitimacy = 100
						add_legitimacy = -20
						if = {
							limit = {
								heir_age = 60
							}
							kill_ruler = yes
							if = {
								limit = {
									has_heir = no
								}
								define_heir = {
									dynasty = PREV
									claim = 50
									age = 15
								}
							}
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						heir_age = 70
					}
					#log = "HEIR TOO OLD"
					exile_ruler_as = $RULER_EXILE$
					ROOT = {
						set_ruler = $RULER_EXILE$
						if = {
							limit = {
								ruler_age = 50
								has_heir = no
							}
							define_heir = {
								dynasty = PREV
								claim = 50
								age = 15
							}
						}
					}
				}
				else = {
					exile_heir_as = $HEIR_EXILE$
					exile_ruler_as = $RULER_EXILE$
					ROOT = {
						set_heir = $HEIR_EXILE$
						set_ruler = $RULER_EXILE$
						add_legitimacy = 100
						add_legitimacy = -20
					}
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = $HEIR_FLAG$
				NOT = { has_global_flag = $RULER_FLAG$ }
			}
			#log = "HEIR"
			set_heir = $HEIR_EXILE$
			#log = "Ruler 1: [ELF.Monarch.GetName]"
			#log = "Heir 1: [ELF.Heir.GetName]"
			#kill_ruler = yes
			#log = "Ruler 1: [ELF.Monarch.GetName]"
			#log = "Heir 1: [ELF.Heir.GetName]"
			if = {
				limit = {
					heir_age = 80
				}
				#log = "RULER TOO OLD"
				ROOT = {
					define_ruler = {
						dynasty = PREV
						claim = 50
						age = 21
					}
				}
			}
			else = {
				exile_heir_as = $HEIR_EXILE$
				ROOT = {
					define_ruler = {
						name = "(Interregnum)"
						adm = 3
						dip = 3
						mil = 1
						regency = yes
					}
					set_heir = $HEIR_EXILE$
					add_legitimacy = 100
					add_legitimacy = -20
					if = {
						limit = {
							heir_age = 60
						}
						kill_ruler = yes
						if = {
							limit = {
								has_heir = no
							}
							define_heir = {
								dynasty = PREV
								claim = 50
								age = 15
							}
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_flag = $HEIR_FLAG$ }
				has_global_flag = $RULER_FLAG$
			}
			#log = "RULER"
			set_ruler = $RULER_EXILE$
			if = {
				limit = {
					ruler_age = 80
				}
				log = "RULER TOO OLD"
				ROOT = {
					define_ruler = {
						dynasty = PREV
						claim = 50
						age = 21
					}
				}
			}
			else = {
				exile_ruler_as = $RULER_EXILE$
				ROOT = {
					set_ruler = $RULER_EXILE$
					if = {
						limit = {
							ruler_age = 50
							has_heir = no
						}
						define_heir = {
							dynasty = PREV
							claim = 50
							age = 15
						}
					}
				}
			}
		}
		else = {
			ROOT = {
				define_ruler = {
					dynasty = "historic_dynasty"
					claim = 40
					age = 21
				}
			}
		}
		clr_global_flag = $HEIR_FLAG$
		clr_global_flag = $RULER_FLAG$
	}
}

# nhs_assign_names_ely = {
# 	trigger_switch = {
# 		on_trigger = province_id
# 		968 = { rename_capital = "Maiandros"  }
# 		970 = { rename_capital = "Phokaia"  }
# 		2013 = { rename_capital = "Kourion"  }
# 		2561 = { rename_capital = "Polychna"  }
# 		966 = { rename_capital = "Makistos"  }
# 		967 = { rename_capital = "Halaitos"  }
# 		2010 = { rename_capital = "Senithyre"  }
# 		2560 = { rename_capital = "Tanais"  }
# 		2562 = { rename_capital = "Amphissa"  }
# 		963 = { rename_capital = "Gordion"  }
# 		965 = { rename_capital = "Kalydon"  }
# 		2558 = { rename_capital = "Tomis"  }
# 		2639 = { rename_capital = "Chryse"  }
# 		956 = { rename_capital = "Labinion"  }
# 		962 = { rename_capital = "Atlapolis"  }
# 		2023 = { rename_capital = "Rhodan"  }
# 		960 = { rename_capital = "Dyvela"  }
# 		961 = { rename_capital = "Korydalla"  }
# 		964 = { rename_capital = "Klazomenai"  }
# 		2559 = { rename_capital = "Leuktra"  }
# 		954 = { rename_capital = "Thespiai"  }
# 		958 = { rename_capital = "Hykara"  }
# 		959 = { rename_capital = "Ethyphleia"  }
# 		955 = { rename_capital = "Kydonia"  }
# 		2555 = { rename_capital = "Epeion"  }
# 		2556 = { rename_capital = "Agathe"  }
# 		2557 = { rename_capital = "Teichos"  }
# 		949 = { rename_capital = "Aeolis"  }
# 		2011 = { rename_capital = "Pyrgos"  }
# 		2552 = { rename_capital = "Siphai"  }
# 		2553 = { rename_capital = "Doriskos"  }
# 		2549 = { rename_capital = "Alexandroupolis"  }
# 		933 = { rename_capital = "Ambrakia"  }
# 		937 = { rename_capital = "Aperlai"  }
# 		2541 = { rename_capital = "Istros"  }
# 		2545 = { rename_capital = "Kelainai"  }
# 		2544 = { rename_capital = "Argos"  }
# 		938 = { rename_capital = "Tyros"  }
# 		2546 = { rename_capital = "Neauios"  }
# 		2547 = { rename_capital = "Mykene"  }
# 		932 = { rename_capital = "Tiveris"  }
# 		2542 = { rename_capital = "Ephesos"  }
# 		2543 = { rename_capital = "Khlorion"  }
# 		929 = { rename_capital = "Phaleron"  }
# 		2537 = { rename_capital = "Perrhaibia"  }
# 		2539 = { rename_capital = "Kyzikos"  }
# 		930 = { rename_capital = "Lydeia"  }
# 		2538 = { rename_capital = "Limnaia"  }
# 		2540 = { rename_capital = "Vreithon"  }
# 		926 = { rename_capital = "Maionion"  }
# 		2535 = { rename_capital = "Kyaneai"  }
# 		2536 = { rename_capital = "Akatos"  }
# 		4626 = { rename_capital = "Loryma"  }
# 		927 = { rename_capital = "Mara"  }
# 		928 = { rename_capital = "Kestros"  }
# 		2534 = { rename_capital = "Kynares"  }
# 		4625 = { rename_capital = "Pagasa "  }
# 		951 = { rename_capital = "Amelas"  }
# 		2548 = { rename_capital = "Nysreia"  }
# 		2551 = { rename_capital = "Nea Amorion"  }
# 		931 = { rename_capital = "Keryneia"  }
# 		935 = { rename_capital = "Potidaia"  }
# 		936 = { rename_capital = "Perinthos"  }
# 		921 = { rename_capital = "Klousion"  }
# 		922 = { rename_capital = "Stageira"  }
# 		923 = { rename_capital = "Boion"  }
# 		2530 = { rename_capital = "Daskyleion"  }
# 		2533 = { rename_capital = "Limyra"  }
# 		918 = { rename_capital = "Lepreon"  }
# 		919 = { rename_capital = "Myrkinos"  }
# 		939 = { rename_capital = "Soreos"  }
# 		920 = { rename_capital = "Koroneia"  }
# 		2528 = { rename_capital = "Kyme"  }
# 		2529 = { rename_capital = "Nea Dyrrakhion"  }
# 		924 = { rename_capital = "Ioulianos"  }
# 		925 = { rename_capital = "Azoros"  }
# 		2531 = { rename_capital = "Phaselis"  }
# 		2532 = { rename_capital = "Chrysaoris"  }
# 		2527 = { rename_capital = "Medeon"  }
# 		934 = { rename_capital = "Oropos"  }
# 		940 = { rename_capital = "Sardeis"  }
# 		941 = { rename_capital = "Erytheia"  }
# 		2526 = { rename_capital = "Maiotis"  }
# 		946 = { rename_capital = "Astraios"  }
# 		947 = { rename_capital = "Phanagoria"  }
# 		948 = { rename_capital = "Thyateira"  }
# 		2525 = { rename_capital = "Orchomenos"  }
# 		943 = { rename_capital = "Sarachyl"  }
# 		2523 = { rename_capital = "Stratonikeia"  }
# 		2524 = { rename_capital = "Teos"  }
# 		915 = { rename_capital = "Thymbre"  }
# 		942 = { rename_capital = "Sounion"  }
# 		2519 = { rename_capital = "Olynthos"  }
# 		916 = { rename_capital = "Orestias"  }
# 		917 = { rename_capital = "Andronikopolis"  }
# 		2513 = { rename_capital = "Myrina"  }
# 		2520 = { rename_capital = "Himera"  }
# 		944 = { rename_capital = "Anaia"  }
# 		945 = { rename_capital = "Aisymi"  }
# 		2521 = { rename_capital = "Sigeion"  }
# 		2522 = { rename_capital = "Rhosos"  }
# 		910 = { rename_capital = "Mekone"  }
# 		2517 = { rename_capital = "Neokastro"  }
# 		2518 = { rename_capital = "Mendai"  }
# 		911 = { rename_capital = "Pitane"  }
# 		912 = { rename_capital = "Triphylia"  }
# 		913 = { rename_capital = "Philomelion"  }
# 		914 = { rename_capital = "Doliche"  }
# 		894 = { rename_capital = "Metauros"  }
# 		895 = { rename_capital = "Andriake"  }
# 		2014 = { rename_capital = "Atarneus"  }
# 		2516 = { rename_capital = "Stauroupolis"  }
# 		900 = { rename_capital = "Temnos"  }
# 		902 = { rename_capital = "Eirenoupolis"  }
# 		2514 = { rename_capital = "Kolossai"  }
# 		897 = { rename_capital = "Nemea"  }
# 		899 = { rename_capital = "Emathia"  }
# 		2515 = { rename_capital = "Galepsos"  }
# 		890 = { rename_capital = "Mainolos"  }
# 		891 = { rename_capital = "Skamandria"  }
# 		892 = { rename_capital = "Hyele"  }
# 		896 = { rename_capital = "Laodikeia"  }
# 		2509 = { rename_capital = "Tiryns"  }
# 		898 = { rename_capital = "Rhyendre"  }
# 		901 = { rename_capital = "Skotoussa"  }
# 		903 = { rename_capital = "Phthia"  }
# 		2508 = { rename_capital = "Prasia"  }
# 		2672 = { rename_capital = "Kleonai"  }
# 		906 = { rename_capital = "Veronikeia"  }
# 		908 = { rename_capital = "Stente"  }
# 		909 = { rename_capital = "Sagalassos"  }
# 		2007 = { rename_capital = "Demetrias"  }
# 		2512 = { rename_capital = "Thurioi"  }
# 		904 = { rename_capital = "Kolophon"  }
# 		905 = { rename_capital = "Akanthos"  }
# 		907 = { rename_capital = "Phleious"  }
# 		2502 = { rename_capital = "Aulai"  }
# 		2503 = { rename_capital = "Pythion"  }
# 		2510 = { rename_capital = "Tymphaia"  }
# 		2501 = { rename_capital = "Pallantion"  }
# 		1809 = { rename_capital = "Karia"  }
# 		2008 = { rename_capital = "Helike"  }
# 		2009 = { rename_capital = "Eryx"  }
# 		2505 = { rename_capital = "Knidos"  }
# 		882 = { rename_capital = "Heraia"  }
# 		885 = { rename_capital = "Sarpeidion"  }
# 		2496 = { rename_capital = "Antheia"  }
# 		2497 = { rename_capital = "Molossia"  }
# 		4630 = { rename_capital = "Oiniadai"  }
# 		884 = { rename_capital = "Karallia"  }
# 		887 = { rename_capital = "Idrias"  }
# 		888 = { rename_capital = "Phalkon"  }
# 		2665 = { rename_capital = "Miletos"  }
# 		2669 = { rename_capital = "Pella"  }
# 		883 = { rename_capital = "Pergamon"  }
# 		886 = { rename_capital = "Kopais"  }
# 		2500 = { rename_capital = "Sestos"  }
# 		4627 = { rename_capital = "Sylleion"  }
# 		987 = { rename_capital = "Sikyon"  }
# 		989 = { rename_capital = "Blachernai"  }
# 		2585 = { rename_capital = "Cheldia"  }
# 		2670 = { rename_capital = "Myndos"  }
# 		991 = { rename_capital = "Kaikos"  }
# 		1001 = { rename_capital = "Abdera"  }
# 		1007 = { rename_capital = "Melia"  }
# 		2015 = { rename_capital = "Argyre"  }
# 		2593 = { rename_capital = "Kadmeis"  }
# 		988 = { rename_capital = "Gerakioupolis"  }
# 		2586 = { rename_capital = "Nisaia"  }
# 		2587 = { rename_capital = "Azanoi"  }
# 		2671 = { rename_capital = "Rhamnos"  }
# 		1008 = { rename_capital = "Aphidnai"  }
# 		1010 = { rename_capital = "Priene"  }
# 		2016 = { rename_capital = "Pellene"  }
# 		2511 = { rename_capital = "Neo Chalkedon"  }
# 		2596 = { rename_capital = "Daphnai"  }
# 		2597 = { rename_capital = "Okaleia"  }
# 		2598 = { rename_capital = "Dekeleia"  }
# 		2005 = { rename_capital = "Phaistos"  }
# 		861 = { rename_capital = "Rhegion"  }
# 		2619 = { rename_capital = "Kremna"  }
# 		2666 = { rename_capital = "Pessinos"  }
# 		2667 = { rename_capital = "Magydos"  }
# 		4606 = { rename_capital = "Phaiakia"  }
# 		863 = { rename_capital = "Apollonia"  }
# 		864 = { rename_capital = "Ainis"  }
# 		2618 = { rename_capital = "Epiphania"  }
# 		4644 = { rename_capital = "Machara"  }
# 		2498 = { rename_capital = "Dikella"  }
# 		4628 = { rename_capital = "Akraiphia"  }
# 		4629 = { rename_capital = "Parauaia"  }
# 		858 = { rename_capital = "Amyklai"  }
# 		2499 = { rename_capital = "Hysia"  }
# 		2614 = { rename_capital = "Plataia"  }
# 		2668 = { rename_capital = "Troas"  }
# 		484 = { rename_capital = "Tousklon"  }
# 		485 = { rename_capital = "Geilyn"  }
# 		4622 = { rename_capital = "Teukos"  }
# 		4623 = { rename_capital = "Aigiroessa"  }
# 		4624 = { rename_capital = "Kibyra"  }
# 		486 = { rename_capital = "Tartessos"  }
# 		2654 = { rename_capital = "Graivion"  }
# 		2655 = { rename_capital = "Ivros"  }
# 		2656 = { rename_capital = "Messapia"  }
# 		488 = { rename_capital = "Brauron"  }
# 		489 = { rename_capital = "Thyreai"  }
# 		4618 = { rename_capital = "Iapygia"  }
# 		4619 = { rename_capital = "Oisyme"  }
# 		490 = { rename_capital = "Pherai"  }
# 		2658 = { rename_capital = "Megaria"  }
# 		2659 = { rename_capital = "Vetriakon"  }
# 		4620 = { rename_capital = "Scheria"  }
# 		4621 = { rename_capital = "Issos"  }
# 		487 = { rename_capital = "Lerna"  }
# 		491 = { rename_capital = "Xanthos"  }
# 		492 = { rename_capital = "Iolkos"  }
# 		482 = { rename_capital = "Brasiai"  }
# 		483 = { rename_capital = "Antigoneia"  }
# 		493 = { rename_capital = "Skillous"  }
# 		494 = { rename_capital = "Chiloune"  }
# 		495 = { rename_capital = "Pteleon"  }
# 		496 = { rename_capital = "Vareine"  }
# 		1881 = { rename_capital = "Nyssa"  }
# 		497 = { rename_capital = "Diaskourios"  }
# 		498 = { rename_capital = "Ophrynion"  }
# 		499 = { rename_capital = "Anthele"  }
# 		500 = { rename_capital = "Thapsakos"  }
# 		501 = { rename_capital = "Stymphalos"  }
# 		1011 = { rename_capital = "Skala"  }
# 		1009 = { rename_capital = "Askalon"  }
# 		1813 = { rename_capital = "Traianoupolis"  }
# 		2595 = { rename_capital = "Selymbria"  }
# 		889 = { rename_capital = "Kroton"  }
# 		2507 = { rename_capital = "Olpai"  }
# 		2625 = { rename_capital = "Levedos"  }
# 		2600 = { rename_capital = "Euromos"  }
# 		2599 = { rename_capital = "Tauris"  }
# 		2601 = { rename_capital = "Orikon"  }
# 		2004 = { rename_capital = "Borysthenes"  }
# 		2602 = { rename_capital = "Hybla"  }
# 		969 = { rename_capital = "Beryna" }
# 	}
# }


# nhs_assign_names_effect = {
# 	if = {
# 		limit = {
# 			is_empty = no
# 			NOT = { province_id = 953 }
# 		}
# 		if = {
# 			limit = {
# 				NOT = { has_province_flag = nhs_prevent_changing_province_capital }
# 				culture_group = owner
# 				# owner =	{
# 					# culture_group = PREV
# 				# }
# 				OR = {
# 					is_colony = yes
# 					owner = {
# 						OR = {
# 							culture_group = byzantine
# 							primary_culture = apogonoi
# 							AND = {
# 								culture_group = byzantine
# 								NOT = { primary_culture = turkish }
# 							}
# 						}
# 					}
# 				}
# 			}
# 			nhs_assign_names_ely = yes
# 		}
# 	}
# }

nhs_ai_picks_secrets = {
	random_list = {
		10 = {
			set_variable = {
				which = nhs_new_flight_food_status
				value = 4
			}
		}
		30 = {
			set_variable = {
				which = nhs_new_flight_food_status
				value = 3
			}
			random_list = {
				50 = {
					set_country_flag = nhs_new_flight_taken_books
					add_country_modifier = {
						name = "nhs_secrets_books"
						duration = -1
					}
				}
				30 = {
					set_country_flag = nhs_new_flight_taken_silk
					add_country_modifier = {
						name = "nhs_secrets_silk"
						duration = -1
					}
				}
				20 = {
					set_country_flag = nhs_new_flight_taken_venetians
					set_global_flag = nhs_enable_venetian_merchant_estate_g
				}
			}
		}
		50 = {
			set_variable = {
				which = nhs_new_flight_food_status
				value = 2
			}
			random_list = {
				33 = {
					set_country_flag = nhs_new_flight_taken_books
					add_country_modifier = {
						name = "nhs_secrets_books"
						duration = -1
					}
					set_country_flag = nhs_new_flight_taken_silk
					add_country_modifier = {
						name = "nhs_secrets_silk"
						duration = -1
					}
				}
				33 = {
					set_country_flag = nhs_new_flight_taken_books
					add_country_modifier = {
						name = "nhs_secrets_books"
						duration = -1
					}
					set_country_flag = nhs_new_flight_taken_venetians
					set_global_flag = nhs_enable_venetian_merchant_estate_g
				}
				33 = {
					set_country_flag = nhs_new_flight_taken_silk
					add_country_modifier = {
						name = "nhs_secrets_silk"
						duration = -1
					}
					set_country_flag = nhs_new_flight_taken_venetians
					set_global_flag = nhs_enable_venetian_merchant_estate_g
				}
			}
		}
		10 = {
			set_variable = {
				which = nhs_new_flight_food_status
				value = 1
			}
			set_country_flag = nhs_new_flight_taken_books
			add_country_modifier = {
				name = "nhs_secrets_books"
				duration = -1
			}
			set_country_flag = nhs_new_flight_taken_silk
			add_country_modifier = {
				name = "nhs_secrets_silk"
				duration = -1
			}
			set_country_flag = nhs_new_flight_taken_venetians
			set_global_flag = nhs_enable_venetian_merchant_estate_g
		}
	}
}

nhs_settler_boost_on_colony_created = {
	if = {
		limit = {
			owner = {
				has_idea = colonial_administration
			}
			NOT = { has_province_flag = nhs_got_boost }
			NOT = { colonysize = 200 }
			continent = north_america
		}
		set_province_flag = nhs_got_boost
		add_colonysize = 200
	}
}

nhs_remove_fort = {
	if = {
		limit = {
			has_building = fort_15th
		}
		remove_building = fort_15th
	}
	else_if = {
		limit = {
			has_building = fort_16th
		}
		remove_building = fort_16th
	}
	else_if = {
		limit = {
			has_building = fort_17th
		}
		remove_building = fort_17th
	}
	else_if = {
		limit = {
			has_building = fort_18th
		}
		remove_building = fort_18th
	}
}

nhs_highest_dev_province = {
	set_variable = {
		which = nhs_highest_province_dev
		value = 0
	}
	every_owned_province = {
		limit = {
			$PROVINCE_CONDITION$ = yes
		}
		ROOT = {
			export_to_variable = {
				which = nhs_local_dev
				value = development
				who = PREV
			}
		}
		
		[[TRADE_CENTER_BONUS]
			if = {
				limit = {
					province_has_center_of_trade_of_level = 1
				}
				ROOT = {
					change_variable = {            
						which = nhs_local_dev
						value = $TRADE_CENTER_BONUS$
					}
				}
			}
		]
		ROOT = {
			if = {
				limit = {
					check_variable = { 
						which = nhs_local_dev 
						which = nhs_highest_province_dev 
					}
				}
				set_variable = {
					which = nhs_highest_province_dev 
					which = nhs_local_dev 
				}
				PREV = {
					save_event_target_as = $EVENT_TARGET$
				}
			}
		}
	}
}

# PROVINCE - target province, TAG - owner tag
remove_shipyards_in_province = {
	$PROVINCE$ = {
		if = {
			limit = {
				has_building = shipyard
			}
			remove_building = shipyard
		}
		if = {
			limit = {
				has_building = grand_shipyard
			}
			remove_building = grand_shipyard
		}
	}
}

to_ely_province_culture_check = {
	if = {
		limit = {
			culture_group = byzantine
			to_nhs_has_dynamic_elysian_culture = yes
			NOT = { has_albanian_majority_modifier = yes }
		}
		if = {
			limit = {
				owner = {
					has_country_flag = nhs_borealians_appeared_country
				}
				nhs_borealian_province = yes	
			}
			if = {
				limit = {
					NOT = { culture = borealian }
				}
				change_culture = borealian
				[[CHANGE_ORIGINAL_CULTURE]
				change_original_culture = borealian
				]
			}
		}
		else_if = {
			limit = {
				owner = {
					has_country_flag = nhs_hyperborealians_appeared_country
				}
				nhs_hyperborealian_province = yes
			}
			if = {
				limit = {
					NOT = { culture = hyperborealian }
				}
				change_culture = hyperborealian
				[[CHANGE_ORIGINAL_CULTURE]
				change_original_culture = hyperborealian
				]
			}
		}
		else_if = {
			limit = {
				owner = {
					has_country_flag = nhs_hesperidians_appeared_country
				}
				nhs_hesperidian_province = yes
			}
			if = {
				limit = {
					NOT = { culture = hesperidian }
				}
				change_culture = hesperidian
				[[CHANGE_ORIGINAL_CULTURE]
				change_original_culture = hesperidian
				]
			}
		}
		else_if = {
			limit = {
				owner = {
					has_country_flag = nhs_kykladian_appeared_country
				}
				nhs_kykladian_province = yes
			}
			if = {
				limit = {
					NOT = { culture = kykladian }
				}
				change_culture = kykladian
				[[CHANGE_ORIGINAL_CULTURE]
				change_original_culture = kykladian
				]
			}
		}
		else_if = {
			limit = {
				owner = {
					has_country_flag = nhs_elyric_appeared_country
				}
				nhs_elyric_province = yes
			}
			if = {
				limit = {
					NOT = { culture = elyric }
				}
				change_culture = elyric
				[[CHANGE_ORIGINAL_CULTURE]
				change_original_culture = elyric
				]
			}
		}
		else_if = {
			limit = {
				owner = {
					has_country_flag = nhs_arkadians_appeared_country
				}
				nhs_arkadian_province = yes
			}
			if = {
				limit = {
					NOT = { culture = arkadian }
				}
				change_culture = arkadian
				[[CHANGE_ORIGINAL_CULTURE]
				change_original_culture = arkadian
				]
			}
		}
		else_if = {
			limit = {
				owner = {
					has_country_flag = nhs_eleutheroi_appeared_country
				}
				nhs_eleutheroi_province = yes
			}
			if = {
				limit = {
					NOT = { culture = eleutheroi }
				}
				change_culture = eleutheroi
				[[CHANGE_ORIGINAL_CULTURE]
				change_original_culture = eleutheroi
				]
			}
		}
		else_if = {
			limit = {
				OR = {
					region = northeast_america_region
					region = southeast_america_region
				}
			}
			if = {
				limit = {
					NOT = { culture = elysian }
				}
				to_nhs_change_culture_to_romanoi_or_elysian = yes
				[[CHANGE_ORIGINAL_CULTURE]
				to_nhs_change_original_culture_to_romanoi_or_elysian = yes
				]
			}
		}
		else_if = {
			limit = {
				any_neighbor_province = {
					culture_group = byzantine
					NOT = { culture = elysameric }
					NOT = { culture = shqipproi }
				}
			}
			random_neighbor_province = {
				limit = {
					culture_group = byzantine
					NOT = { culture = elysameric }
					NOT = { culture = shqipproi }
				}
				PREV = {
					if = {
						limit = {
							NOT = { culture = PREV }
						}
						change_culture = PREV
						[[CHANGE_ORIGINAL_CULTURE]
						change_original_culture = PREV
						]
					}
				}
			}
		}
	}
}

to_nhs_change_culture_to_romanoi_or_elysian = {
	if = {
		limit = {
			to_nhs_eligible_for_romanoi_culture = yes
		}
		if = {
			limit = {
				NOT = { culture = romanoi }
			}
			change_culture = romanoi
		}
	}
	else_if = {
		limit = {
			NOT = { culture = elysian }
		}
		change_culture = elysian
	}
}

to_nhs_change_original_culture_to_romanoi_or_elysian = {
	if = {
		limit = {
			to_nhs_eligible_for_romanoi_culture = yes
		}
		change_original_culture = romanoi
	}
	else = {
		change_original_culture = elysian
	}
}

to_nhs_assign_correct_elysian_culture = {
	if = {
		limit = {
			owner = {
				primary_culture = shqipproi
			}
		}
		change_culture = shqipproi
	}
	else_if = {
		limit = {
			owner = {
				has_country_flag = nhs_borealians_appeared_country
			}
			nhs_borealian_province = yes
		}
		change_culture = borealian
	}
	else_if = {
		limit = {
			owner = {
				has_country_flag = nhs_hyperborealians_appeared_country
			}
			nhs_hyperborealian_province = yes
		}
		change_culture = hyperborealian
	}
	else_if = {
		limit = {
			owner = {
				has_country_flag = nhs_hesperidians_appeared_country
			}
			nhs_hesperidian_province = yes
		}
		change_culture = hesperidian
	}
	else_if = {
		limit = {
			owner = {
				has_country_flag = nhs_kykladian_appeared_country
			}
			nhs_kykladian_province = yes
		}
		change_culture = kykladian
	}
	else_if = {
		limit = {
			owner = {
				has_country_flag = nhs_elyric_appeared_country
			}
			nhs_elyric_province = yes
		}
		change_culture = elyric
	}
	else_if = {
		limit = {
			owner = {
				has_country_flag = nhs_arkadians_appeared_country
			}
			nhs_arkadian_province = yes
		}
		change_culture = arkadian
	}
	else_if = {
		limit = {
			owner = {
				has_country_flag = nhs_eleutheroi_appeared_country
			}
			nhs_eleutheroi_province = yes
		}
		change_culture = eleutheroi
	}
	else_if = {
		limit = {
			OR = {
				region = northeast_america_region
				region = southeast_america_region
			}
		}
		to_nhs_change_culture_to_romanoi_or_elysian = yes
	}
	# else_if = {
	# 	limit = {
	# 		has_saved_event_target = nhs_countryevents25_neighbor_province_target
	# 		event_target:nhs_countryevents25_neighbor_province_target = {
	# 			culture_group = byzantine
	# 			NOT = { culture = elysameric }
	# 			NOT = { culture = shqipproi }
	# 		}
	# 	}
	# 	change_culture = event_target:nhs_countryevents25_neighbor_province_target
	# }
	else = {
		custom_tooltip = to_owner_culture_tt
		hidden_effect = {
			owner = {
				PREV = {
					change_culture = PREV
				}
			}
		}
	}
}

to_ely_country_culture_check = {
	if = {
		limit = {
			$FLAG_SCOPE$ = {
				has_country_flag = nhs_borealians_appeared_country
			}
			capital_scope = {
				nhs_borealian_province = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_borealians_appeared_country }
			}
			set_country_flag = nhs_borealians_appeared_country
		}
		if = {
			limit = {
				NOT = { primary_culture = borealian }
			}
			change_primary_culture = borealian
		}
	}
	else_if = {
		limit = {
			$FLAG_SCOPE$ = {
				has_country_flag = nhs_hyperborealians_appeared_country
			}
			capital_scope = {
				nhs_hyperborealian_province = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_hyperborealians_appeared_country }
			}
			set_country_flag = nhs_hyperborealians_appeared_country
		}
		if = {
			limit = {
				NOT = { primary_culture = hyperborealian }
			}
			change_primary_culture = hyperborealian
		}
	}
	else_if = {
		limit = {
			$FLAG_SCOPE$ = {
				has_country_flag = nhs_hesperidians_appeared_country
			}
			capital_scope = {
				nhs_hesperidian_province = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_hesperidians_appeared_country }
			}
			set_country_flag = nhs_hesperidians_appeared_country
		}
		if = {
			limit = {
				NOT = { primary_culture = hesperidian }
			}
			change_primary_culture = hesperidian
		}
	}
	else_if = {
		limit = {
			$FLAG_SCOPE$ = {
				has_country_flag = nhs_kykladian_appeared_country
			}
			capital_scope = {
				nhs_kykladian_province = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_kykladian_appeared_country }
			}
			set_country_flag = nhs_kykladian_appeared_country
		}
		if = {
			limit = {
				NOT = { primary_culture = kykladian }
			}
			change_primary_culture = kykladian
		}
	}
	else_if = {
		limit = {
			$FLAG_SCOPE$ = {
				has_country_flag = nhs_elyric_appeared_country
			}
			capital_scope = {
				nhs_elyric_province = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_elyric_appeared_country }
			}
			set_country_flag = nhs_elyric_appeared_country
		}
		if = {
			limit = {
				NOT = { primary_culture = elyric }
			}
			change_primary_culture = elyric
		}
	}
	else_if = {
		limit = {
			$FLAG_SCOPE$ = {
				has_country_flag = nhs_arkadians_appeared_country
			}
			capital_scope = {
				nhs_arkadian_province = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_arkadians_appeared_country }
			}
			set_country_flag = nhs_arkadians_appeared_country
		}
		if = {
			limit = {
				NOT = { primary_culture = arkadian }
			}
			change_primary_culture = arkadian
		}
	}
	else_if = {
		limit = {
			$FLAG_SCOPE$ = {
				has_country_flag = nhs_eleutheroi_appeared_country
			}
			capital_scope = {
				nhs_eleutheroi_province = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_eleutheroi_appeared_country }
			}
			set_country_flag = nhs_eleutheroi_appeared_country
		}
		if = {
			limit = {
				NOT = { primary_culture = eleutheroi }
			}
			change_primary_culture = eleutheroi
		}
	}
	else_if = {
		limit  = {
			capital_scope = {
				OR = {
					region = northeast_america_region
					region = southeast_america_region
				}
			}
		}
		if = {
			limit = {
				NOT = { primary_culture = elysian }
				NOT = { primary_culture = romanoi }
			}
			if = {
				limit = {
					NOT = { has_global_flag = nhs_romanoi_to_elysian }
				}
				change_primary_culture = romanoi
			}
			else = {
				change_primary_culture = elysian
			}			
		}
	}
	else_if = {
		limit = {
			always = $FLAG_SCOPE_BACKUP$
		}
		if = {
			limit = {
				$FLAG_SCOPE$ = {
					NOT = {
						primary_culture = PREV
					}
				}
			}
			$FLAG_SCOPE$ = {
				PREV = {
					change_primary_culture = PREV
				}
			}
		}
	}
	else = {
		if = {
			limit = {
				NOT = { primary_culture = elysian }
				NOT = { primary_culture = romanoi }
			}
			if = {
				limit = {
					NOT = { has_global_flag = nhs_romanoi_to_elysian }
				}
				change_primary_culture = romanoi
			}
			else = {
				change_primary_culture = elysian
			}			
		}
	}
}

to_ely_province_culture_add_autonomy = {
	if = {
		limit = {
			culture_group = byzantine
			to_nhs_has_dynamic_elysian_culture = yes
			NOT = { has_province_flag = nhs_got_autonomy }
			NOT = { has_albanian_majority_modifier = yes }
		}
		if = {
			limit = {
				culture = borealian
				nhs_borealian_province = yes
				owner = { to_gets_autonomy_borealian = yes }
			}
			set_province_flag = nhs_got_autonomy
			add_local_autonomy = 20
		}
		else_if = {
			limit = {
				culture = hyperborealian
				nhs_hyperborealian_province = yes
				owner = { to_gets_autonomy_hyperborealian = yes }
			}
			set_province_flag = nhs_got_autonomy
			add_local_autonomy = 20
		}
		else_if = {
			limit = {
				culture = hesperidian
				nhs_hesperidian_province = yes
				owner = { to_gets_autonomy_hesperidian = yes }
			}
			set_province_flag = nhs_got_autonomy
			add_local_autonomy = 20
		}
		else_if = {
			limit = {
				culture = kykladian
				nhs_kykladian_province = yes
				owner = { to_gets_autonomy_kykladian = yes }
			}
			set_province_flag = nhs_got_autonomy
			add_local_autonomy = 20
		}
	}
}

# nhs_discover_adjacent = {
# 	if = {
# 		limit = {
# 			owner = {
# 				has_idea_group = new_hellas_ideas
# 			}
# 		}
# 		every_neighbor_province = {
# 			every_country = {
# 				limit = { tag = ROOT }
# 				discover_province = PREV
# 			}
# 		}
# 		every_empty_neighbor_province = {
# 			every_country = {
# 				limit = { tag = ROOT }
# 				discover_province = PREV
# 			}
# 		}
# 	}
# }

nhs_handle_fort_manpower = {
	if = {
		limit = {
			owner = {
				mission_completed = nhs_build_army_mission
			}
		}
		if = {
			limit = {
				has_building = fort_15th
			}
			add_province_modifier = {
				name = nhs_fort_manpower_2
				duration = -1
				hidden = yes
			}
			remove_province_modifier = nhs_fort_manpower_4
			remove_province_modifier = nhs_fort_manpower_6
			remove_province_modifier = nhs_fort_manpower_8
		}
		else_if = {
			limit = {
				has_building = fort_16th
			}
			remove_province_modifier = nhs_fort_manpower_2
			add_province_modifier = {
				name = nhs_fort_manpower_4
				duration = -1
				hidden = yes
			}
			remove_province_modifier = nhs_fort_manpower_6
			remove_province_modifier = nhs_fort_manpower_8
		}
		else_if = {
			limit = {
				has_building = fort_17th
			}
			remove_province_modifier = nhs_fort_manpower_2
			remove_province_modifier = nhs_fort_manpower_4
			add_province_modifier = {
				name = nhs_fort_manpower_6
				duration = -1
				hidden = yes
			}
			remove_province_modifier = nhs_fort_manpower_8
		}
		else_if = {
			limit = {
				has_building = fort_18th
			}
			remove_province_modifier = nhs_fort_manpower_2
			remove_province_modifier = nhs_fort_manpower_4
			remove_province_modifier = nhs_fort_manpower_6
			add_province_modifier = {
				name = nhs_fort_manpower_8
				duration = -1
				hidden = yes
			}
		}
	}
}

# FORT_LEVEL - level of the modifier
nhs_fort_manpower_add_modifier = {
	if = {
		limit = {
			owner = {
				mission_completed = nhs_build_army_mission
			}
		}
		custom_tooltip = nhs_fort_manpower_modifier_$FORT_LEVEL$_tt
		hidden_effect = {
			add_province_modifier = {
				name = nhs_fort_manpower_$FORT_LEVEL$
				duration = -1
				hidden = yes
			}
		}
	}
}

nhs_fort_manpower_remove_all_modifiers = {
	remove_province_modifier = nhs_fort_manpower_2
	remove_province_modifier = nhs_fort_manpower_4
	remove_province_modifier = nhs_fort_manpower_6
	remove_province_modifier = nhs_fort_manpower_8
}

to_ely_true_nation_mission_trigger_reduce = {
	custom_tooltip = nhs_true_nation_mission_trigger_reduce_tt
	hidden_effect = {
		change_variable = {
			which = nhs_early_missions_completed
			value = 1
		}
	}
}

to_nhs_spawn_pre_disaster_hellenic_rebels = {
	if = {
		limit = {
			owner = {
				has_country_flag = hellenic_conversion_preacher
				NOT = { has_disaster = nhs_hcd_hellenic_crisis }
			}
		}
		custom_tooltip = to_nhs_pre_disaster_hellenic_rebels_tt
	}
	spawn_rebels = {
		type = pantheon_worship_rebels
		size = $SIZE$
	}
}

to_nhs_decrease_hellenic_crisis_disaster_progress = {
	add_disaster_progress = {
		disaster = nhs_hcd_hellenic_crisis
		value = -24
	}
}

to_nhs_increase_hellenic_crisis_disaster_progress = {
	add_disaster_progress = {
		disaster = nhs_hcd_hellenic_crisis
		value = 12
	}
}

to_nhs_exempt_all_non_greek_provinces_from_hellenic_disaster = {
	custom_tooltip = to_nhs_exempt_all_non_greek_provinces_from_hellenic_disaster_tt
	hidden_effect = {
		every_owned_province = {
			add_province_triggered_modifier = nhs_hcd_exempt_from_disaster_tm
		}
	}
}

to_nhs_handle_exemption_from_hellenic_disaster = {
	if = {
		limit = {
			is_empty = no
			owner = {
				has_disaster = nhs_hcd_hellenic_crisis
			}
		}
		add_province_triggered_modifier = nhs_hcd_exempt_from_disaster_tm
	}
	else = {
		remove_province_triggered_modifier = nhs_hcd_exempt_from_disaster_tm
	}
}

to_nhs_handle_post_disaster_tolerance_modifier_all_provinces = {
	every_owned_province = {
		to_nhs_handle_post_disaster_tolerance_modifier = yes
	}
}

to_nhs_handle_post_disaster_tolerance_modifier = {
	if = {
		limit = {
			is_empty = no
			owner = {
				has_country_flag = nhs_enable_tolerated_minority
				culture_group = PREV
			}
			OR = {
				AND = {
					religion = pantheon_worship
					owner = {
						OR = {
							religion = orthodox
							religion = elysian_orthodoxy
						}
					}
				}
				AND = {
					religion = orthodox
					owner = {
						OR = {
							religion = pantheon_worship
							religion = aztlan_worship
						}
					}
				}
			}
		}
		if = {
			limit = {
				religion = pantheon_worship
			}
			add_province_modifier = {
				name = nhs_tolerated_minority
				duration = -1
				desc = "NHS_TOLERANCE_HELLENIC_DESC"
			}
		}
		else = {
			add_province_modifier = {
				name = nhs_tolerated_minority
				duration = -1
				desc = "NHS_TOLERANCE_ORTHODOX_DESC"
			}
		}
	}
	else_if = {
		limit = {
			is_empty = no
			owner = {
				has_country_flag = nhs_enable_semi_tolerated_minority
				culture_group = PREV
			}
			religion = pantheon_worship
			owner = {
				OR = {
					religion = orthodox
					religion = elysian_orthodoxy
				}
			}
		}
		add_province_modifier = {
			name = nhs_semi_tolerated_minority
			duration = -1
			desc = "NHS_TOLERANCE_HELLENIC_DESC"
		}
	}
	else_if = {
		limit = {
			OR = {
				has_province_modifier = nhs_tolerated_minority
				has_province_modifier = nhs_semi_tolerated_minority
			}
		}
		remove_province_modifier = nhs_tolerated_minority
		remove_province_modifier = nhs_semi_tolerated_minority
	}
}

to_nhs_remove_post_disaster_tolerance_modifier_albanians = {
	if = {
		limit = {
			OR = {
				has_province_modifier = nhs_tolerated_minority
				has_province_modifier = nhs_semi_tolerated_minority
			}
		}
		remove_province_modifier = nhs_tolerated_minority
		remove_province_modifier = nhs_semi_tolerated_minority
	}
}

to_nhs_handle_post_disaster_tolerance_modifier_albanians = {
	if = {
		limit = {
			$COUNTRY_SCOPE$ = {
				has_country_flag = nhs_enable_tolerated_minority
				religion = pantheon_worship
				[[CHECK_FLAG]
					has_global_flag = nhs_shqiperi_into_elysian
				]
			}
		}
		add_province_modifier = {
			name = nhs_tolerated_minority
			duration = -1
			desc = "NHS_TOLERANCE_ORTHODOX_DESC"
		}
	}
	else_if = {
		limit = {
			has_province_modifier = nhs_tolerated_minority
		}
		remove_province_modifier = nhs_tolerated_minority
	}
}

to_nhs_handle_post_disaster_tolerance_modifier_culture_integration = {
	if = {
		limit = {
			is_empty = no
			owner = {
				has_country_flag = nhs_enable_tolerated_minority
			}
			OR = {
				AND = {
					religion = pantheon_worship
					owner = {
						OR = {
							religion = orthodox
							religion = elysian_orthodoxy
						}
					}
				}
				AND = {
					religion = orthodox
					owner = {
						OR = {
							religion = pantheon_worship
							religion = aztlan_worship
						}
					}
				}
			}
		}
		if = {
			limit = {
				religion = pantheon_worship
			}
			add_province_modifier = {
				name = nhs_tolerated_minority
				duration = -1
				desc = "NHS_TOLERANCE_HELLENIC_DESC"
			}
		}
		else = {
			add_province_modifier = {
				name = nhs_tolerated_minority
				duration = -1
				desc = "NHS_TOLERANCE_ORTHODOX_DESC"
			}
		}
	}
	else_if = {
		limit = {
			is_empty = no
			owner = {
				has_country_flag = nhs_enable_semi_tolerated_minority
			}
			religion = pantheon_worship
			owner = {
				OR = {
					religion = orthodox
					religion = elysian_orthodoxy
				}
			}
		}
		add_province_modifier = {
			name = nhs_semi_tolerated_minority
			duration = -1
			desc = "NHS_TOLERANCE_HELLENIC_DESC"
		}
	}
}

to_nhs_remove_pre_hellenic_disaster_country_modifiers = {
	remove_country_modifier = nhs_hcd_hellenic_struggles
	remove_country_modifier = nhs_hcd_hellenic_struggles_legacy
	remove_country_modifier = nhs_hcd_hellenic_coup
	remove_country_modifier = nhs_hcd_hellenic_representation
	remove_country_modifier = nhs_hcd_pagan_concessions
}

to_nhs_remove_pre_hellenic_disaster_anti_hellenic_province_modifiers = {
	every_owned_province = {
		limit = {
			has_province_modifier = nhs_hcd_Pagan_taxes
		}
		remove_province_modifier = nhs_hcd_Pagan_taxes
	}
	every_owned_province = {
		limit = {
			has_province_modifier = nhs_hcd_Pagan_persecution
		}
		remove_province_modifier = nhs_hcd_Pagan_persecution
	}
}

to_nhs_remove_pre_hellenic_disaster_hellenic_province_modifiers = {
	every_owned_province = {
		limit = {
			has_province_modifier = nhs_hcd_famine_aid
		}
		remove_province_modifier = nhs_hcd_famine_aid
	}
	every_owned_province = {
		limit = {
			has_province_modifier = nhs_hcd_famine_exempt
		}
		remove_province_modifier = nhs_hcd_famine_exempt
	}
}

to_nhs_remove_pre_hellenic_disaster_conflict_province_modifiers = {
	to_nhs_remove_pre_hellenic_disaster_anti_hellenic_province_modifiers = yes
	every_owned_province = {
		limit = {
			has_province_modifier = nhs_hcd_hellenic_conversion_strife
		}
		remove_province_modifier = nhs_hcd_hellenic_conversion_strife
	}
	every_owned_province = {
		limit = {
			has_province_modifier = nhs_hcd_land_dispute
		}
		remove_province_modifier = nhs_hcd_land_dispute
	}
	every_owned_province = {
		limit = {
			has_province_modifier = nhs_hcd_colonial_tensions
		}
		remove_province_modifier = nhs_hcd_colonial_tensions
	}
}

to_nhs_remove_pre_hellenic_disaster_province_modifiers = {
	to_nhs_remove_pre_hellenic_disaster_conflict_province_modifiers = yes
	to_nhs_remove_pre_hellenic_disaster_hellenic_province_modifiers = yes
}

to_nhs_remove_pre_hellenic_disaster_flags = {
	clr_country_flag = hellenic_conversion_preacher
	clr_country_flag = nhs_hcd_can_have_religious_disaster

	clr_country_flag = TO_hcd_picked_major_event
	clr_country_flag = TO_nhs_hellenicconversion_2
	clr_country_flag = TO_nhs_hellenicconversion_3
	clr_country_flag = TO_nhs_hellenicconversion_4
	clr_country_flag = TO_nhs_hellenicconversion_101
	clr_country_flag = TO_nhs_hellenicconversion_102
	clr_country_flag = TO_nhs_hellenicconversion_103
	clr_country_flag = TO_nhs_hellenicconversion_104
	clr_country_flag = TO_nhs_hellenicconversion_105
	clr_country_flag = TO_nhs_hellenicconversion_106
	clr_country_flag = TO_nhs_hellenicconversion_107

	clr_country_flag = nhs_had_hellenicconversion_41
	clr_country_flag = nhs_had_hellenicconversion_43
	clr_country_flag = nhs_had_hellenicconversion_44

	clr_country_flag = nhs_had_hellenicconversion_51
	clr_country_flag = nhs_had_hellenicconversion_52
	clr_country_flag = nhs_had_hellenicconversion_53

	clr_country_flag = nhs_pagan_assemblies
	# clr_country_flag = nhs_hcd_opposed_the_inquisition
}

to_nhs_remove_all_clergy_privileges = {
	custom_tooltip = to_nhs_remove_all_clergy_privileges_tt
	hidden_effect = {
		if = {
			limit = {
				has_estate_privilege = estate_church_land_rights
			}
			remove_estate_privilege = estate_church_land_rights
			change_estate_land_share = {
				estate = estate_church
				share = -5
			}
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_religious_state
			}
			remove_estate_privilege = estate_church_religious_state
			change_estate_land_share = {
				estate = estate_church
				share = -10
			}
		}
	
		if = {
			limit = {
				has_estate_privilege = estate_church_independent_inquisition
			}
			remove_estate_privilege = estate_church_independent_inquisition
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_new_world_mission
			}
			remove_estate_privilege = estate_church_new_world_mission
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_clerical_ministers
			}
			remove_estate_privilege = estate_church_clerical_ministers
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_clerical_oversight
			}
			remove_estate_privilege = estate_church_clerical_oversight
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_enforced_one_faith
			}
			remove_estate_privilege = estate_church_enforced_one_faith
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_for_the_faith
			}
			remove_estate_privilege = estate_church_for_the_faith
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_one_faith_one_culture
			}
			remove_estate_privilege = estate_church_one_faith_one_culture
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_religious_diplomats
			}
			remove_estate_privilege = estate_church_religious_diplomats
		}
	}
}

to_nhs_remove_all_non_tolerant_clergy_privileges = {
	if = {
		limit = {
			has_estate_privilege = estate_church_nhs_inquisition_privilege
		}
		remove_estate_privilege = estate_church_nhs_inquisition_privilege
	}
	if = {
		limit = {
			has_estate_privilege = estate_church_one_faith_one_culture
		}
		remove_estate_privilege = estate_church_one_faith_one_culture
	}
	if = {
		limit = {
			has_estate_privilege = estate_church_enforced_one_faith
		}
		remove_estate_privilege = estate_church_enforced_one_faith
	}
}
nhs_set_clergy_loyalty_to_50 = {
	custom_tooltip = nhs_set_clergy_loyalty_to_50_tt
	hidden_effect = {
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 100
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -50
		}
	}
}

to_nhs_spawn_inquisition_revolt = {
	capital_scope = {
		spawn_rebels = {
			type = to_inquisition_mob_rebels
			size = 1
		}
	}
	if = {
		limit = {
			has_saved_event_target = $EVENT_TARGET$
			event_target:$EVENT_TARGET$ = {
				owned_by = ROOT
			}
		}
		event_target:$EVENT_TARGET$ = {
			spawn_rebels = {
				type = to_inquisition_mob_rebels
				size = 2
				win = yes
			}
			add_province_modifier = {
				name = nhs_hcd_inquisition_headquarters
				duration = -1
				desc = "END_OF_INQUISITION_REVOLT"
			}
		}
	}
	else_if = {
		limit = {
			any_owned_province = {
				is_capital = no
				NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
				religion = orthodox
			}
		}
		random_owned_province = {
			limit = {
				is_capital = no
				NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
				religion = orthodox
			}
			spawn_rebels = {
				type = to_inquisition_mob_rebels
				size = 2
				win = yes
			}
			add_province_modifier = {
				name = nhs_hcd_inquisition_headquarters
				duration = -1
				desc = "END_OF_INQUISITION_REVOLT"
			}
		}
	}
	else = {
		capital_scope = {
			spawn_rebels = {
				type = to_inquisition_mob_rebels
				size = 2
				win = yes
			}
			add_province_modifier = {
				name = nhs_hcd_inquisition_headquarters
				duration = -1
				desc = "END_OF_INQUISITION_REVOLT"
			}
		}
	}
}

to_nhs_spawn_inquisition_revolt_disaster = {
	if = {
		limit = {
			has_estate_privilege = estate_church_nhs_inquisition_privilege
		}
		custom_tooltip = to_nhs_inquisition_dissaproves_tt
		set_country_flag = nhs_hcd_inquisition_revolt
		# add_stability = -1
		[[REDUCE_LOYALTY]
			add_estate_loyalty = {
				estate = estate_church
				loyalty = -10
			}
		]
		# if = {
		# 	limit = {
		# 		always = $REDUCE_LOYALTY$
		# 	}
			
		# }
		remove_estate_privilege = estate_church_nhs_inquisition_privilege
		to_nhs_spawn_inquisition_revolt = { EVENT_TARGET = $EVENT_TARGET$ }
		custom_tooltip = nhs_dotted_line_tt
	}
}

to_nhs_hellenic_disaster_anger_hellenic_minor = {
	custom_tooltip = hellenicconversion_anger_pagans.tt
	hidden_effect = {
		change_variable = {
			which = HellenicUprising
			value = 1
		}
	}
}

to_nhs_hellenic_disaster_anger_hellenic_major = {
	custom_tooltip = hellenicconversion_anger_pagans_more.tt
	hidden_effect = {
		change_variable = {
			which = HellenicUprising
			value = 2
		}
	}
}

to_nhs_hellenic_disaster_anger_hellenic_huge = {
	custom_tooltip = hellenicconversion_anger_pagans_more_more.tt
	hidden_effect = {
		change_variable = {
			which = HellenicUprising
			value = 3
		}
	}
}

to_nhs_hellenic_disaster_anger_orthodox_minor = {
	custom_tooltip = hellenicconversion_anger_orthodox.tt
	hidden_effect = {
		change_variable = {
			which = OrthodoxUprising
			value = 1
		}
	}
}

to_nhs_hellenic_disaster_anger_orthodox_major = {
	custom_tooltip = hellenicconversion_anger_orthodox_more.tt
	hidden_effect = {
		change_variable = {
			which = OrthodoxUprising
			value = 2
		}
	}
}

to_nhs_hellenic_disaster_anger_orthodox_huge = {
	custom_tooltip = hellenicconversion_anger_orthodox_more_more.tt
	hidden_effect = {
		change_variable = {
			which = OrthodoxUprising
			value = 3
		}
	}
}

to_byz_undiscover_flight_path = {
	undiscover_province = 1566
    undiscover_province = 1567
    undiscover_province = 1580
    undiscover_province = 1583
    undiscover_province = 1575
    undiscover_province = 1574
    undiscover_province = 1571
    undiscover_province = 1501
}

to_byz_discover_next_flight_path_province = {
	if = {
		limit = {
			has_country_flag = to_byz_flight_discovery_path_1
		}
		discover_province = 1566
		clr_country_flag = to_byz_flight_discovery_path_1
		set_country_flag = to_byz_flight_discovery_path_2
	}
	else_if = {
		limit = {
			has_country_flag = to_byz_flight_discovery_path_2
		}
		discover_province = 1567
		clr_country_flag = to_byz_flight_discovery_path_2
		set_country_flag = to_byz_flight_discovery_path_3
	}
	else_if = {
		limit = {
			has_country_flag = to_byz_flight_discovery_path_3
		}
		discover_province = 1580
		clr_country_flag = to_byz_flight_discovery_path_3
		set_country_flag = to_byz_flight_discovery_path_4
	}
	else_if = {
		limit = {
			has_country_flag = to_byz_flight_discovery_path_4
		}
		discover_province = 1583
		clr_country_flag = to_byz_flight_discovery_path_4
		set_country_flag = to_byz_flight_discovery_path_5
	}
	else_if = {
		limit = {
			has_country_flag = to_byz_flight_discovery_path_5
		}
		discover_province = 1575
		clr_country_flag = to_byz_flight_discovery_path_5
		set_country_flag = to_byz_flight_discovery_path_6
	}
	else_if = {
		limit = {
			has_country_flag = to_byz_flight_discovery_path_6
		}
		discover_province = 1574
		clr_country_flag = to_byz_flight_discovery_path_6
		set_country_flag = to_byz_flight_discovery_path_7
	}
	else_if = {
		limit = {
			has_country_flag = to_byz_flight_discovery_path_7
		}
		discover_province = 1571
		clr_country_flag = to_byz_flight_discovery_path_7
		set_country_flag = to_byz_flight_discovery_path_8
	}
	else_if = {
		limit = {
			has_country_flag = to_byz_flight_discovery_path_8
		}
		discover_province = 1501
		clr_country_flag = to_byz_flight_discovery_path_8
		set_country_flag = to_byz_flight_discovery_path_9
	}
	else_if = {
		limit = {
			has_country_flag = to_byz_flight_discovery_path_9
		}
		discover_province = 5377
		clr_country_flag = to_byz_flight_discovery_path_9
	}
}

to_nhs_spawn_hellenic_disaster_revolt = {
	if = {
		limit = {
			has_saved_event_target = nhs_$RELIGION$_first_revolt_province
			event_target:nhs_$RELIGION$_first_revolt_province = {
				owned_by = ROOT
			}
		}
		custom_tooltip = nhs_$RELIGION$_rebels_during_the_disaster_tt
		event_target:nhs_$RELIGION$_first_revolt_province = {
			spawn_rebels = {
				size = 2
				type = $RELIGION$_rebels
				win = yes
			}
		}
	}
	else_if = {
		limit = {
			has_saved_event_target = nhs_$RELIGION$_first_revolt_province
			any_owned_province = {
				is_capital = no
			}
		}
		custom_tooltip = nhs_$RELIGION$_rebels_during_the_disaster_tt
		random_owned_province = {
			limit = {
				is_capital = no
			}
			spawn_rebels = {
				size = 2
				type = $RELIGION$_rebels
				win = yes
			}
		}
	}
	if = {
		limit = {
			has_saved_event_target = nhs_$RELIGION$_second_revolt_province
			event_target:nhs_$RELIGION$_second_revolt_province = {
				owned_by = ROOT
			}
		}
		event_target:nhs_$RELIGION$_second_revolt_province = {
			spawn_rebels = {
				size = 1
				type = $RELIGION$_rebels
			}
		}
	}
	else_if = {
		limit = {
			has_saved_event_target = nhs_$RELIGION$_second_revolt_province
			any_owned_province = {
				is_capital = no
			}
		}
		random_owned_province = {
			limit = {
				is_capital = no
			}
			spawn_rebels = {
				size = 1
				type = $RELIGION$_rebels
			}
		}
	}
	# custom_tooltip = nhs_rebels_during_the_disaster_tt
}

to_nhs_spawn_hellenic_disaster_revolt_moderate = {
	if = {
		limit = {
			to_nhs_hellenic_disaster_attitude_hostile = {
				ATTITUDE_VARIABLE = $ATTITUDE_VARIABLE$
			}
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = to_nhs_consequences_moderate_hostile_$RELIGION$_tt
		if = {
			limit = {
				has_saved_event_target = nhs_$RELIGION$_first_revolt_province
				event_target:nhs_$RELIGION$_first_revolt_province = {
					owned_by = ROOT
				}
			}
			# custom_tooltip = nhs_$RELIGION$_rebels_during_the_disaster_tt
			event_target:nhs_$RELIGION$_first_revolt_province = {
				spawn_rebels = {
					size = 2
					type = $RELIGION$_rebels
					win = yes
				}
			}
		}
		else_if = {
			limit = {
				has_saved_event_target = nhs_$RELIGION$_first_revolt_province
				any_owned_province = {
					is_capital = no
				}
			}
			# custom_tooltip = nhs_$RELIGION$_rebels_during_the_disaster_tt
			random_owned_province = {
				limit = {
					is_capital = no
				}
				spawn_rebels = {
					size = 2
					type = $RELIGION$_rebels
					win = yes
				}
			}
		}
	}
	else_if = {
		limit = {
			to_nhs_hellenic_disaster_attitude_unfriendly = {
				ATTITUDE_VARIABLE = $ATTITUDE_VARIABLE$
			}
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = to_nhs_consequences_moderate_unfriendly_$RELIGION$_tt
		if = {
			limit = {
				has_saved_event_target = nhs_$RELIGION$_first_revolt_province
				event_target:nhs_$RELIGION$_first_revolt_province = {
					owned_by = ROOT
				}
			}
			# custom_tooltip = nhs_$RELIGION$_rebels_during_the_disaster_tt
			event_target:nhs_$RELIGION$_first_revolt_province = {
				spawn_rebels = {
					size = 1
					type = $RELIGION$_rebels
					win = yes
				}
			}
		}
		else_if = {
			limit = {
				has_saved_event_target = nhs_$RELIGION$_first_revolt_province
				any_owned_province = {
					is_capital = no
				}
			}
			# custom_tooltip = nhs_$RELIGION$_rebels_during_the_disaster_tt
			random_owned_province = {
				limit = {
					is_capital = no
				}
				spawn_rebels = {
					size = 1
					type = $RELIGION$_rebels
					win = yes
				}
			}
		}
	}
	else_if = {
		limit = {
			to_nhs_hellenic_disaster_attitude_friendly = {
				ATTITUDE_VARIABLE = $ATTITUDE_VARIABLE$
			}
			has_spawned_rebels = $RELIGION$_rebels
		}
		custom_tooltip = to_nhs_consequences_moderate_friendly_$RELIGION$_tt
		tooltip = {
			disband_rebels = $RELIGION$_rebels
		}
	}
}

to_nhs_enable_monument = {
	custom_tooltip = to_nhs_enable_monument_$GREAT_PROJECT$_tt
	hidden_effect = {
		$PROVINCE_ID$ = {
			add_great_project = {
				type = $GREAT_PROJECT$
				instant = yes
			}
		}
	}
}

to_nhs_setup_church_land = {
	if = {
		limit = {
			has_country_flag = nhs_setting_church_land
			has_estate = estate_church
		}
		clr_country_flag = nhs_setting_church_land
		change_estate_land_share = {
			estate = estate_church
			share = -100
		}
		change_estate_land_share = {
			estate = estate_church
			share = 20
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_religious_state
			}
			change_estate_land_share = {
				estate = estate_church
				share = 10
			}
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_land_rights
			}
			change_estate_land_share = {
				estate = estate_church
				share = 5
			}
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_one_faith_one_culture
			}
			change_estate_land_share = {
				estate = estate_church
				share = 5
			}
		}
	}
}

to_nhs_handle_capital_area_cores_colonisation = {
	if = {
		limit = {
			nhs_homelands_no_capital = yes
			is_colony = no
			NOT = { has_province_flag = nhs_is_colony }
			NOT = { has_province_flag = nhs_got_core }
			owner = {
				nhs_condition_all_ely = { KOMANDA = tag }
			}
		}
		province_event = { id = nhs2_countryevents.2 }
	}
}

to_nhs_handle_capital_area_cores_conquest = {
	if = {
		limit = {
			nhs_homelands_no_capital = yes
			is_city = yes
			NOT = { has_province_flag = nhs_is_colony }
			NOT = { has_province_flag = nhs_got_core }
			owner = {
				nhs_condition_all_ely = { KOMANDA = tag }
			}
		}
		if = {
			limit = {
				province_id = 952
			}
			# if = {
			# 	limit = {
			# 		owner = {
			# 			is_core = PREV 
			# 		}
			# 	}
			# 	province_event = { id = nhs2_countryevents.34 }
			# }
			if = {
				limit = {
					NOT = {
						owner = {
							is_core = PREV 
						}
					}
				}
				province_event = { id = nhs2_countryevents.21 }
			}
			# else = {
			# 	province_event = { id = nhs2_countryevents.21 }
			# }
		}
		if = {
			limit = {
				NOT = {
					province_id = 952
				}
			}
			province_event = { id = nhs2_countryevents.2 }
		}
		# else = {
		# 	province_event = { id = nhs2_countryevents.2 }
		# }
	}
}

to_nhs_discover_carribean = {
	bahama_channel_area = {
		every_country = {
			limit = {
				tag = $TAG$
			}
			discover_province = PREV
		}
	}
	caribbean_sea_area = {
		every_country = {
			limit = {
				tag = $TAG$
			}
			discover_province = PREV
		}
	}
	carribeans_region = {
		every_country = {
			limit = {
				tag = $TAG$
			}
			discover_province = PREV
		}
	}
	$TAG$ = {
		discover_province = 1504
		discover_province = 1571
		discover_province = 1572
		discover_province = 1574
		discover_province = 1526
		discover_province = 1575
	}
}

to_nhs_handle_lots_of_people_modifiers = {
	if = {
		limit = {
			owner = {
				OR = {
					has_country_modifier = nhs_lots_of_ppl1
					has_country_modifier = nhs_lots_of_ppl2
					has_country_modifier = nhs_lots_of_ppl3
				}
			}
		}
		owner = {
			change_variable = {
				which = nhs_finished_colonies
				value = 1
			}
			if = {
				limit = {
					has_country_modifier = nhs_lots_of_ppl1
					check_variable = {
						which = nhs_finished_colonies
						value = 2
					}
				}
				remove_country_modifier = nhs_lots_of_ppl1
				add_country_modifier = {
					name = nhs_lots_of_ppl2
					duration = -1
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs_lots_of_ppl2
					check_variable = {
						which = nhs_finished_colonies
						value = 4
					}
				}
				remove_country_modifier = nhs_lots_of_ppl2
				add_country_modifier = {
					name = nhs_lots_of_ppl3
					duration = -1
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs_lots_of_ppl3
					check_variable = {
						which = nhs_finished_colonies
						value = 7
					}
				}
				remove_country_modifier = nhs_lots_of_ppl3
			}
		}
	}
	else_if = {
		limit = {
			owner = {
				OR = {
					has_country_modifier = nhs_lots_of_ppl1_halved
					has_country_modifier = nhs_lots_of_ppl2_halved
					has_country_modifier = nhs_lots_of_ppl3_halved
				}
			}
		}
		owner = {
			change_variable = {
				which = nhs_finished_colonies
				value = 1
			}
			if = {
				limit = {
					has_country_modifier = nhs_lots_of_ppl1_halved
					check_variable = {
						which = nhs_finished_colonies
						value = 2
					}
				}
				remove_country_modifier = nhs_lots_of_ppl1_halved
				add_country_modifier = {
					name = nhs_lots_of_ppl2_halved
					duration = -1
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs_lots_of_ppl2_halved
					check_variable = {
						which = nhs_finished_colonies
						value = 4
					}
				}
				remove_country_modifier = nhs_lots_of_ppl2_halved
				add_country_modifier = {
					name = nhs_lots_of_ppl3_halved
					duration = -1
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs_lots_of_ppl3_halved
					check_variable = {
						which = nhs_finished_colonies
						value = 7
					}
				}
				remove_country_modifier = nhs_lots_of_ppl3_halved
			}
		}
	}
	else_if = {
		limit = {
			owner = {
				OR = {
					has_country_modifier = nhs_lots_of_ppl1_winter
					has_country_modifier = nhs_lots_of_ppl2_winter
					has_country_modifier = nhs_lots_of_ppl3_winter
				}
			}
		}
		owner = {
			change_variable = {
				which = nhs_finished_colonies
				value = 1
			}
			if = {
				limit = {
					has_country_modifier = nhs_lots_of_ppl1_winter
					check_variable = {
						which = nhs_finished_colonies
						value = 2
					}
				}
				remove_country_modifier = nhs_lots_of_ppl1_winter
				add_country_modifier = {
					name = nhs_lots_of_ppl2_winter
					duration = -1
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs_lots_of_ppl2_winter
					check_variable = {
						which = nhs_finished_colonies
						value = 4
					}
				}
				remove_country_modifier = nhs_lots_of_ppl2_winter
				add_country_modifier = {
					name = nhs_lots_of_ppl3_winter
					duration = -1
				}
			}
			if = {
				limit = {
					has_country_modifier = nhs_lots_of_ppl3_winter
					check_variable = {
						which = nhs_finished_colonies
						value = 7
					}
				}
				remove_country_modifier = nhs_lots_of_ppl3_winter
			}
		}
	}
}

nhs_inward_focus_mission_effect = {
	if = {
		limit = {
			NOT = { mission_completed = nhs_hegemony_mission }
		}
		custom_tooltip = nhs_inwards_lock
		custom_tooltip = nhs_replace_ambition_inward_tt
		hidden_effect = {
			remove_country_modifier = nhs_organised_expansion_2
			add_country_modifier = {
				name = nhs_organised_expansion_inwars_1
				duration = -1
			}
		}
	}
	else_if = {
		limit = {
			mission_completed = nhs_outward_focus
		}
		custom_tooltip = nhs_locks_heir_of_justinian
		add_country_modifier = {
			name = nhs_organised_expansion_inwars_1_with_outward
			duration = -1
		}
	}
	else_if = {
		limit = {
			mission_completed = nhs_heir_of_justinian
		}
		custom_tooltip = nhs_locks_outward_focus
		custom_tooltip = nhs_replace_ambition_inward_tt
		hidden_effect = {
			remove_country_modifier = nhs_organised_expansion_2
			add_country_modifier = {
				name = nhs_organised_expansion_inwars_1
				duration = -1
			}
		}
	}
	else = {
		custom_tooltip = nhs_replace_ambition_inward_tt
		hidden_effect = {
			remove_country_modifier = nhs_organised_expansion_2
			add_country_modifier = {
				name = nhs_organised_expansion_inwars_1
				duration = -1
			}
		}
	}
	custom_tooltip = nhs_unlocks_vinland_sub_dec_tt
	custom_tooltip = unlock_NA_cb_on_norse_tt
	custom_tooltip = nhs_new_line_tt
	if = {
		limit = {
			OR = {
				religion = pantheon_worship
				religion = aztlan_worship
			}
		}
		country_event = { id = nhs_mission_events.2 }
	}
	if = {
		limit = {
			religion_group = christian
		}
		country_event = { id = nhs_mission_events.1 }
	}

	custom_tooltip = nhs_new_line_tt
	custom_tooltip = nhs_inward_focus_province_mod_1_tt
	if = {
		limit = {
			953 = {
				trade_goods = grain
			}
		}
		custom_tooltip = nhs_change_elysia_to_cloth_tt
		hidden_effect = {
			953 = {
				change_trade_goods = cloth
			}
		}
	}
	custom_tooltip = nhs_add_capital_area_improvement_tt
	# custom_tooltip = nhs_add_grassland_improvement_tt
	# custom_tooltip = nhs_new_line_tt
	# custom_tooltip = nhs_add_coastline_improvement_tt
	# custom_tooltip = nhs_new_line_tt
	hidden_effect = {
		every_owned_province = {
			limit = {
				OR = {
					province_id = 953
					province_id = 2550
					province_id = 952
				}
			}
			add_permanent_province_modifier = {
				name = nhs2_improve_grassland
				duration = -1
			}
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 2554
					province_id = 957
				}
			}
			add_permanent_province_modifier = {
				name = nhs2_improve_coastline
				duration = -1
			}
		}
		if = {
			limit = {
				950 = {
					has_province_modifier = nhs2_drain_ivos_swamps
				}
			}
			custom_tooltip = nhs_upgrade_swamp_drain_tt
			hidden_effect = {
				950 = {
					remove_province_modifier = nhs2_drain_ivos_swamps
					add_permanent_province_modifier = {
						name = nhs2_drain_ivos_swamps2
						duration = -1
					}
				}
			}
		}
		else = {
			950 = {
				add_permanent_province_modifier = {
					name = nhs2_drain_ivos_swamps2
					duration = -1
				}
			}
		}
	}
	hidden_effect = {
		every_province = {
			limit = {
				continent = north_america
				is_wasteland = no
				owner = {
					nhs_elysia_or_subject = yes
				}
			}
			add_province_modifier = {
				name = nhs_inward_focus_province_mod_1
				duration = -1
			}
		}
		nhs_initiate_hightier_building_counter = yes
	}
}

to_nhs_handle_inwards_path_province_modifiers_all_provinces = {
	if = {
		limit = {
			OR = {
				mission_completed = nhs_the_promised_land
				mission_completed = nhs_the_city_of_cities
				mission_completed = nhs_development_of_the_true_homeland
				mission_completed = nhs_inward_focus
			}
		}
		every_province = {
			limit = {
				OR = {
					continent = north_america
					continent = south_america
				}
				owner = {
					nhs_elysia_or_subject = yes
				}
			}
			to_nhs_handle_inwards_path_province_modifiers = yes
		}
	}
}

to_nhs_handle_inwards_path_province_modifiers = {
	if = {
		limit = {
			OR = {
				continent = north_america
				continent = south_america
			}
			owner = {
				OR = {
					mission_completed = nhs_the_promised_land
					AND = {
						is_subject = yes
						overlord = {
							OR = {
								mission_completed = nhs_the_promised_land
								AND = {
									is_subject = yes
									overlord = {
										mission_completed = nhs_the_promised_land
									}
								}
							}
						}
					}
				}
			}
		}
		add_province_modifier = {
			name = nhs_inward_focus_province_mod_3
			duration = -1
		}
	}
	else_if = {
		limit = {
			continent = north_america
			owner = {
				OR = {
					mission_completed = nhs_development_of_the_true_homeland
					AND = {
						is_subject = yes
						overlord = {
							OR = {
								mission_completed = nhs_development_of_the_true_homeland
								AND = {
									is_subject = yes
									overlord = {
										mission_completed = nhs_development_of_the_true_homeland
									}
								}
							}
						}
					}
				}
			}
		}
		add_province_modifier = {
			name = nhs_inward_focus_province_mod_3
			duration = -1
		}
	}
	else_if = {
		limit = {
			continent = north_america
			owner = {
				OR = {
					mission_completed = nhs_the_city_of_cities
					AND = {
						is_subject = yes
						overlord = {
							OR = {
								mission_completed = nhs_the_city_of_cities
								AND = {
									is_subject = yes
									overlord = {
										mission_completed = nhs_the_city_of_cities
									}
								}
							}
						}
					}
				}
			}
		}
		add_province_modifier = {
			name = nhs_inward_focus_province_mod_2
			duration = -1
		}
	}
	else_if = {
		limit = {
			continent = north_america
			owner = {
				OR = {
					mission_completed = nhs_inward_focus
					AND = {
						is_subject = yes
						overlord = {
							OR = {
								mission_completed = nhs_inward_focus
								AND = {
									is_subject = yes
									overlord = {
										mission_completed = nhs_inward_focus
									}
								}
							}
						}
					}
				}
			}
		}
		add_province_modifier = {
			name = nhs_inward_focus_province_mod_1
			duration = -1
		}
	}
}

nhs_assemble_an_invasion_force_handle_modifiers = {
	if = {
		limit = {
			owner = {
				has_country_flag = nhs_assemble_an_invasion_force_enable_effects
			}
		}
		if = {
			limit = {
				has_building = training_fields
			}
			nhs_assemble_an_invasion_force_add_building_modifier = { 
				BUILDING = training_fields
				REMOVE_BUILDING_MODIFIER = barracks
			}
		}
		else_if = {
			limit = {
				has_building = barracks
			}
			nhs_assemble_an_invasion_force_add_building_modifier = { 
				BUILDING = barracks
			}
		}
		if = {
			limit = {
				has_building = drydock
			}
			nhs_assemble_an_invasion_force_add_building_modifier = { 
				BUILDING = drydock
				REMOVE_BUILDING_MODIFIER = dock
			}
		}
		else_if = {
			limit = {
				has_building = dock
			}
			nhs_assemble_an_invasion_force_add_building_modifier = { 
				BUILDING = dock
			}
		}
	}
}

nhs_assemble_an_invasion_force_remove_all_modifiers = {
	every_owned_province = {
		remove_province_modifier = nhs_assemble_an_invasion_force_barracks_modifier
		remove_province_modifier = nhs_assemble_an_invasion_force_training_fields_modifier
		remove_province_modifier = nhs_assemble_an_invasion_force_dock_modifier
		remove_province_modifier = nhs_assemble_an_invasion_force_drydock_modifier
	}
}

nhs_assemble_an_invasion_force_add_building_modifier = {
	if = {
		limit = {
			owner = {
				has_country_flag = nhs_assemble_an_invasion_force_enable_effects
			}
		}
		custom_tooltip = nhs_assemble_an_invasion_force_$BUILDING$_modifier_tt
		hidden_effect = {
			[[REMOVE_BUILDING_MODIFIER]
				remove_province_modifier = nhs_assemble_an_invasion_force_$REMOVE_BUILDING_MODIFIER$_modifier
			]
			add_province_modifier = {
				name = nhs_assemble_an_invasion_force_$BUILDING$_modifier
				duration = -1
				hidden = yes
			}
		}
	}
}

nhs_assemble_an_invasion_force_remove_building_modifier = {
	hidden_effect = {
		remove_province_modifier = nhs_assemble_an_invasion_force_$BUILDING$_modifier
	}
}

nhs_set_greek_fire_sprites = {
	# hidden_effect = {
		if = {
			limit = {
				NOT = { nhs_has_greek_fire_reform = yes }
			}
			apply_sprite_pack = to_elysian_fire_pack
		}
		hidden_effect = {
			apply_sprite_pack = to_elysian_fire_pack
		}
	# }
}

nhs_reset_elysian_sprites = {
	# hidden_effect = {
		if = {
			limit = {
				nhs_has_fire_all_cases = yes
			}
			apply_sprite_pack = to_elysian_sprite_pack
		}
		hidden_effect = {
			apply_sprite_pack = to_elysian_sprite_pack
		}
	# }
}

to_nhs_remove_exarch_cores = {
	if = {
		limit = {
			is_subject = yes
			is_subject_of_type = elysian_subject
		}
		country_event = { id = nhs2_ely_marches.4 }
	}
}

to_check_exarch_claims_check_all_provinces = {
	every_owned_province = {
		set_province_flag = nhs_eligible_for_exarch_claim@$EXARCH_TAG$
		every_neighbor_province = {
			set_province_flag = nhs_eligible_for_exarch_claim@$EXARCH_TAG$
		}
		every_neighbor_sea_zone = {
			every_neighbor_province = {
				set_province_flag = nhs_eligible_for_exarch_claim@$EXARCH_TAG$
			}
		}
	}
}

to_check_exarch_claims_on_province_gained = {
	if = {
		limit = {
			is_city = yes
			owner = {
				is_subject_of_type = elysian_subject
			}
		}
		set_province_flag = nhs_eligible_for_exarch_claim@ROOT
		every_neighbor_province = {
			set_province_flag = nhs_eligible_for_exarch_claim@ROOT
		}
		every_neighbor_sea_zone = {
			every_neighbor_province = {
				set_province_flag = nhs_eligible_for_exarch_claim@ROOT
			}
		}
	}
}

to_check_exarch_claims_on_province_lost = {
	if = {
		limit = {
			is_city = yes
			FROM = {
				is_subject_of_type = elysian_subject
			}
		}
		every_province = {
			clr_province_flag = nhs_eligible_for_exarch_claim@FROM
		}
		FROM = {
			to_check_exarch_claims_check_all_provinces = { EXARCH_TAG = FROM }
		}
	}
}

to_check_exarch_claims_on_become_subject = {
	if = {
		limit = {
			is_subject_of_type = elysian_subject
		}
		every_province = {
			clr_province_flag = nhs_eligible_for_exarch_claim@FROM
		}
		to_check_exarch_claims_check_all_provinces = { EXARCH_TAG = FROM }
	}
}

to_fabricate_exarch_claim_effect = {
	if = {
		limit = {
			$EXARCH_TAG$ = {
				is_subject_of = ROOT
				is_subject_of_type = elysian_subject
			}
			any_owned_province = {
				has_province_flag = nhs_eligible_for_exarch_claim$EXARCH_TAG$
			}
		}
		every_owned_province = {
			limit = {
				has_province_flag = nhs_eligible_for_exarch_claim$EXARCH_TAG$
				NOT = { is_claim = $EXARCH_TAG$ }
				NOT = { is_permanent_claim = $EXARCH_TAG$ }
			}
			add_claim = $EXARCH_TAG$
		}
	}
}

to_nhs_exarch_monument_mod_transfer = {
	if = {
		limit = {
			owner = {
				nhs_condition_all_ely = { KOMANDA = tag }
			}
		}
		custom_tooltip = to_nhs_exarch_monument_mod_transfer_tt
	}
	else_if = {
		limit = {
			owner = {
				nhs_condition_all_ely = { KOMANDA = is_subject_of }
			}
		}
		custom_tooltip = to_nhs_exarch_monument_mod_transfer_subject_tt
	}
}

to_nhs_exarch_kleisoura_monument_mod_transfer = {
	if = {
		limit = {
			owner = {
				nhs_condition_all_ely = { KOMANDA = tag }
			}
		}
		custom_tooltip = to_nhs_exarch_kleisoura_monument_mod_transfer_tt
	}
	else_if = {
		limit = {
			owner = {
				nhs_condition_all_ely = { KOMANDA = is_subject_of }
			}
		}
		custom_tooltip = to_nhs_exarch_kleisoura_monument_mod_transfer_subject_tt
	}
}

to_destroy_cahokian_monument = {
	destroy_great_project = {
		type = cahokia
	}
	destroy_great_project = {
		type = cahokia_roman_pagan
	}
	destroy_great_project = {
		type = cahokia_roman_non_pagan
	}
}

to_switch_cahokia_monument = {
	if = {
		limit = {
			to_has_cahokia_monument_at_TIER = { TIER = 3 }
		}
		set_province_flag = to_cahokia_tier_3
	}
	else_if = {
		limit = {
			to_has_cahokia_monument_at_TIER = { TIER = 2 }
		}
		set_province_flag = to_cahokia_tier_2
	}
	else_if = {
		limit = {
			to_has_cahokia_monument_at_TIER = { TIER = 1 }
		}
		set_province_flag = to_cahokia_tier_1
	}
	to_destroy_cahokian_monument = yes
	
	if = {
		limit = {
			has_construction = great_project
		}
		if = {
			limit = {
				construction_progress = 0.1
			}
			if = {
				limit = {
					has_province_flag = to_cahokia_tier_2
				}
				owner = {
					add_treasury = 2000
				}
			}
			else_if = {
				limit = {
					has_province_flag = to_cahokia_tier_1
				}
				owner = {
					add_treasury = 1000
				}
			}
			else = {
				owner = {
					add_treasury = 500
				}
			}
		}
		cancel_construction = yes
	}
	if = {
		limit = {
			construction_progress = 0
		}
		set_province_flag = to_cahokian_rebuild_pending
	}
	if = {
		limit = {
			NOT = { construction_progress = 0 }
		}
		add_great_project = {
			type = $CORRECT_MONUMENT$
			instant = yes
		}
		set_province_flag = to_cahokian_rebuild_pending
		to_restore_cahokia_monument_tier = { CORRECT_MONUMENT = $CORRECT_MONUMENT$ }
	}
}

to_restore_cahokia_monument = {
	owner = {
		country_event = { id = nhs_mission_events.20 days = 1 }
	}
}

to_restore_cahokia_monument_tier = {
	if = {
		limit = {
			has_province_flag = to_cahokian_rebuild_pending
		}
		clr_province_flag = to_cahokian_rebuild_pending
		if = {
			limit = {
				has_province_flag = to_cahokia_tier_3
			}
			add_great_project_tier = {
				type = $CORRECT_MONUMENT$
				tier = 3
			}
			clr_province_flag = to_cahokia_tier_3
		}
		if = {
			limit = {
				has_province_flag = to_cahokia_tier_2
			}
			add_great_project_tier = {
				type = $CORRECT_MONUMENT$
				tier = 2
			}
			clr_province_flag = to_cahokia_tier_2
		}
		if = {
			limit = {
				has_province_flag = to_cahokia_tier_1
			}
			add_great_project_tier = {
				type = $CORRECT_MONUMENT$
				tier = 1
			}
			clr_province_flag = to_cahokia_tier_1
		}
	}
}

to_configure_cahokia_monument = {
	if = {
		limit = {
			province_id = 917
		}
		owner = { country_event = { id = nhs_mission_events.16 } }
	}
}

to_configure_cahokia_monument_country = {
	if = {
		limit = {
			any_owned_province = {
				province_id = 917
			}
		}
		country_event = { id = nhs_mission_events.16 }
	}
}