# -- NATIVE ESTATE EFFECTS --
nhs_add_appropriate_native_estate_flag = {
	clr_country_flag = native_council_enabled_early
	clr_country_flag = native_council_enabled_mid
	# clr_country_flag = native_council_enabled_late
	if = {
		limit = {
			nhs_check_all_vinland = { CONDITION = tag }
			# OR = {
			# 	has_global_flag = nhs_first_barbaroi_integration
			# 	nhs_check_all_vinland = { CONDITION = tag }
			# }
		}
		set_country_flag = native_council_enabled_mid
	}
	else_if = {
		limit = {
			has_global_flag = nhs_first_barbaroi_integration
			any_owned_province = {
				culture = elysameric
			}
		}
		set_country_flag = native_council_enabled_mid
		set_country_flag = nhs_barbaroi_integration
	}
	else = {
		set_country_flag = native_council_enabled_early
	}
}

# Add influence modifier to any existing native estate with amount QUANTITY, description DESC and duration DURATION
# We can keep this, since we can easily change this if native estates ever differentiate (again)...
# Use: nhs_add_any_native_estate_influence_modifier = { QUANTITY = -15 DESC = EST_NHS_REVOKED_PRIVILEGES DURATION = 7300 }
nhs_add_any_native_estate_influence_modifier = {
	add_estate_influence_modifier = {
		estate = estate_all_natives
		desc = $DESC$
		influence = $QUANTITY$
		duration = $DURATION$
	}
}

# Add loyalty to any existing native estate with amount QUANTITY
# We can keep this, since we can easily change this if native estates ever differentiate (again)...
# Use: nhs_add_any_native_estate_loyalty = { QUANTITY = -40 }
nhs_add_any_native_estate_loyalty = {
	add_estate_loyalty = {
		estate = estate_all_natives
		loyalty = $QUANTITY$
	}
}

# Update a single province, single native estate privilege's modifier
# Use: province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_local_councils_empowered MODIFIER = nhs_native_priv_local_councils_empowered_mod }
province_update_estate_privilege = {
	if = {
		# Add province modifier if needed (and applicable)
		limit = {
			[[PRIVILEGE]
				owner = { has_estate_privilege = $PRIVILEGE$ }
			]
			[[ADDITIONAL_TRIGGER]
				$ADDITIONAL_TRIGGER$ = yes
			]
			nhs_culturally_native = yes
		}
		[[EARLY_MODIFIER]
		if = {
			limit = {
				owner = {
					has_country_flag = native_council_enabled_early
				}
			}
			if = {
				limit = {
					NOT = { has_province_modifier = $EARLY_MODIFIER$ }
				}
				add_province_modifier = {
					name = $EARLY_MODIFIER$
					duration = -1
				}
			}
			add_province_modifier = {
				name = $EARLY_MODIFIER$
				duration = -1
			}
		}
		else_if = {
			limit = {
				has_province_modifier = $EARLY_MODIFIER$
			}
			remove_province_modifier = $EARLY_MODIFIER$
		}
		]
		[[MID_MODIFIER]
		if = {
			limit = {
				owner = {
					has_country_flag = native_council_enabled_mid
				}
			}
			if = {
				limit = {
					NOT = { has_province_modifier = $MID_MODIFIER$ }
				}
				add_province_modifier = {
					name = $MID_MODIFIER$
					duration = -1
				}
			}
			add_province_modifier = {
				name = $MID_MODIFIER$
				duration = -1
			}
		}
		else_if = {
			limit = {
				has_province_modifier = $MID_MODIFIER$
			}
			remove_province_modifier = $MID_MODIFIER$
		}
		]
		[[LATE_MODIFIER]
		if = {
			limit = {
				owner = {
					has_country_flag = native_council_enabled_late
				}
			}
			if = {
				limit = {
					NOT = { has_province_modifier = $LATE_MODIFIER$ }
				}
				add_province_modifier = {
					name = $LATE_MODIFIER$
					duration = -1
				}
			}
			add_province_modifier = {
				name = $LATE_MODIFIER$
				duration = -1
			}
		}
		else_if = {
			limit = {
				has_province_modifier = $LATE_MODIFIER$
			}
			remove_province_modifier = $LATE_MODIFIER$
		}
		]
		[[MODIFIER]
		if = {
			limit = {
				NOT = { has_province_modifier = $MODIFIER$ }
			}
			add_province_modifier = {
				name = $MODIFIER$
				duration = -1
			}
		}
		]
	}
	else = {
		# Remove province modifier if present (and not applicable)
		[[EARLY_MODIFIER]
		remove_province_modifier = $EARLY_MODIFIER$
		]
		[[MID_MODIFIER]
		remove_province_modifier = $MID_MODIFIER$
		]
		[[LATE_MODIFIER]
		remove_province_modifier = $LATE_MODIFIER$
		]
		[[MODIFIER]
		remove_province_modifier = $MODIFIER$
		]
	}
	
}

# Recalculate all native estate modifiers for a single province
province_recalculate_estate_privileges_effect_natives = {
	# TODO: effect can't use other effect?
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_local_councils_empowered MODIFIER = nhs_native_priv_local_councils_empowered_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_pax_romana_early MODIFIER = nhs_native_priv_pax_romana_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_pax_romana_mid MODIFIER = nhs_native_priv_pax_romana_mid_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_increase_tribute MODIFIER = nhs_native_priv_increase_tribute_mod }
	province_update_estate_privilege = {
		EARLY_MODIFIER = nhs_native_priv_cultural_sufferance_early_mod 
		MID_MODIFIER = nhs_native_priv_cultural_sufferance_mid_mod 
		ADDITIONAL_TRIGGER = nhs_native_priv_cultural_sufferance_province_trigger
	}
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_designate_development_zones MODIFIER = nhs_native_priv_designate_development_zones_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_divide_et_impera_early MODIFIER = nhs_native_priv_divide_et_impera_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_divide_et_impera_mid MODIFIER = nhs_native_priv_divide_et_impera_mid_mod }
}

handle_nhs_native_priv_inclusive_citizenship_modifier = {
	if = {
		limit = {
			nhs_native_priv_inclusive_citizenship_province = yes
		}
		add_province_modifier = {
			name = nhs_native_priv_inclusive_citizenship_mod
			duration = -1
		}
	}
	else_if = {
		limit = {
			has_province_modifier = nhs_native_priv_inclusive_citizenship_mod
		}
		remove_province_modifier = nhs_native_priv_inclusive_citizenship_mod
	}
}

handle_nhs_native_priv_inclusive_citizenship_colony_finished = {
	if = {
		limit = {
			has_province_modifier = nhs_native_priv_inclusive_citizenship_mod
		}
		remove_province_modifier = nhs_native_priv_inclusive_citizenship_mod
		add_local_autonomy = 25
		owner = {
			change_estate_land_share = {
				estate = estate_all_natives
				share = 5
				province = PREV
			}
		}
	}
}

handle_nhs_native_priv_ancestral_land_colony_finished = {
	if = {
		limit = {
			has_province_modifier = to_nat_tribal_development
		}
		owner = {
			change_estate_land_share = {
				estate = estate_all_natives
				share = 5
				province = PREV
			}
		}
	}
}

handle_nhs_native_priv_cultural_sufferance_modifier = {
	every_owned_province = {
		province_update_estate_privilege = { 
			PRIVILEGE = nhs_native_priv_encourage_barbaroi_officials 
			EARLY_MODIFIER = nhs_native_priv_cultural_sufferance_early_mod 
			MID_MODIFIER = nhs_native_priv_cultural_sufferance_mid_mod 
			ADDITIONAL_TRIGGER = nhs_native_priv_cultural_sufferance_province_trigger
		}
	}
}

nhs_switch_elysian_native_estate_to_mid = {
	set_country_flag = native_council_enabled_mid
	clr_country_flag = native_council_enabled_early
	custom_tooltip = nhs_begin_barbaroi_integration_tt
	custom_tooltip = nhs_new_line_tt
	custom_tooltip = nhs_new_council_loyalty_tt
	custom_tooltip = nhs_new_council_privileges_tt
	custom_tooltip = nhs_new_line_tt
	# custom_tooltip = nhs_native_priv_ancestral_land_mid_change_tt
	# custom_tooltip = nhs_native_priv_local_councils_empowered_change_tt
	custom_tooltip = nhs_native_priv_divide_et_impera_change_tt
	custom_tooltip = nhs_new_line_tt
	custom_tooltip = nhs_native_priv_pax_romana_change_tt
	custom_tooltip = nhs_new_line_tt
	custom_tooltip = nhs_native_priv_inclusive_citizenship_change_tt
	custom_tooltip = nhs_new_line_tt
	custom_tooltip = nhs_increases_barbaroi_integration_change_tt
	hidden_effect = {
		if = {
			limit = {
				has_estate_privilege = nhs_native_priv_inclusive_citizenship_early
			}
			set_estate_privilege = nhs_native_priv_inclusive_citizenship_mid
			remove_estate_privilege = nhs_native_priv_inclusive_citizenship_early
		}
		if = {
			limit = {
				has_estate_privilege = nhs_native_priv_divide_et_impera_early
			}
			set_estate_privilege = nhs_native_priv_divide_et_impera_mid
			remove_estate_privilege = nhs_native_priv_divide_et_impera_early
		}
		if = {
			limit = {
				has_estate_privilege = nhs_native_priv_pax_romana_early
			}
			set_estate_privilege = nhs_native_priv_pax_romana_mid
			remove_estate_privilege = nhs_native_priv_pax_romana_early
		}
	}
}

# -- GENERAL ESTATE EFFECTS --

nhs_add_estate_loyalty_if_exists = {
	if = {
		limit = {
			has_estate = $ESTATE$
		}
		add_estate_loyalty = {
			estate = $ESTATE$
			loyalty = $LOYALTY$
			short = yes
		}
	}
}

nhs_add_estate_influence_modifier_if_exists = {
	if = {
		limit = {
			has_estate = $ESTATE$
		}
		add_estate_influence_modifier = {
			estate = $ESTATE$
			desc = $DESC$
			duration = $DURATION$
			influence = $INFLUENCE$
			short = yes
		}
	}
}

# ESTATE - estate identifier
# TERRITORY_VARIABLE - variable into which the territory will be stored
nhs_export_estate_territory_to_variable = {
	# You could also do this with else if bloc, but you can't get decimals.
	set_variable = {
		which = $TERRITORY_VARIABLE$
		value = 0
	}
	while = {
		limit = {
			estate_territory = {
				estate = $ESTATE$
				territory = 10
			}
		}
		change_estate_land_share = {
			estate = $ESTATE$
			share = -10
		}
		change_variable = {
			which = $TERRITORY_VARIABLE$
			value = 10
		}
	}
	while = {
		limit = {
			estate_territory = {
				estate = $ESTATE$
				territory = 1
			}
		}
		change_estate_land_share = {
			estate = $ESTATE$
			share = -1
		}
		change_variable = {
			which = $TERRITORY_VARIABLE$
			value = 1
		}
	}
	# The following is the result of estate_territory not accepting decimals. Have fun.
	change_estate_land_share = {
		estate = $ESTATE$
		share = 1
	}
	while = {
		limit = {
			estate_territory = {
				estate = $ESTATE$
				territory = 1
			}
		}
		change_estate_land_share = {
			estate = $ESTATE$
			share = -0.1
		}
		change_variable = {
			which = $TERRITORY_VARIABLE$
			value = 0.1
		}
	}
	change_variable = {
		which = $TERRITORY_VARIABLE$
		value = -0.1
	}
	change_estate_land_share = {
		estate = $ESTATE$
		share = 0.1
	}
	while = {
		limit = {
			estate_territory = {
				estate = $ESTATE$
				territory = 1
			}
		}
		change_estate_land_share = {
			estate = $ESTATE$
			share = -0.01
		}
		change_variable = {
			which = $TERRITORY_VARIABLE$
			value = 0.01
		}
	}
	change_variable = {
		which = $TERRITORY_VARIABLE$
		value = -0.01
	}
	change_estate_land_share = {
		estate = $ESTATE$
		share = 0.01
	}
	while = {
		limit = {
			estate_territory = {
				estate = $ESTATE$
				territory = 1
			}
		}
		change_estate_land_share = {
			estate = $ESTATE$
			share = -0.001
		}
		change_variable = {
			which = $TERRITORY_VARIABLE$
			value = 0.001
		}
	}
	change_variable = {
		which = $TERRITORY_VARIABLE$
		value = -0.001
	}
	change_estate_land_share = {
		estate = $ESTATE$
		share = -1
	}
	set_variable = {
		which = estate_territory_temp
		which = $TERRITORY_VARIABLE$
	}
	while = {
		limit = {
			check_variable = {
				which = estate_territory_temp
				value = 0.001
			}
		}
		if = {
			limit = {
				check_variable = {
					which = estate_territory_temp
					value = 10
				}
			}
			change_estate_land_share = {
				estate = $ESTATE$
				share = 10
			}
			change_variable = {
				which = estate_territory_temp
				value = -10
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_territory_temp
					value = 1
				}
			}
			change_estate_land_share = {
				estate = $ESTATE$
				share = 1
			}
			change_variable = {
				which = estate_territory_temp
				value = -1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_territory_temp
					value = 0.1
				}
			}
			change_estate_land_share = {
				estate = $ESTATE$
				share = 0.1
			}
			change_variable = {
				which = estate_territory_temp
				value = -0.1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_territory_temp
					value = 0.01
				}
			}
			change_estate_land_share = {
				estate = $ESTATE$
				share = 0.01
			}
			change_variable = {
				which = estate_territory_temp
				value = -0.01
			}
		}
		else = {
			change_estate_land_share = {
				estate = $ESTATE$
				share = 0.001
			}
			change_variable = {
				which = estate_territory_temp
				value = -0.001
			}
		}
	}
	set_variable = {
		which = estate_territory_temp
		value = 0
	}
}

# ESTATE - Estate which territory will be equalized
# ESTATE_GOAL - Estate which territory will be equalized to
# ONLY_POSITIVE
# ONLY_POSITIVE_ERR_FLAG
nhs_equalize_estate_territory = {
	nhs_export_estate_territory_to_variable = {
		ESTATE = $ESTATE$
		TERRITORY_VARIABLE = estate_init_territory
	}
	nhs_export_estate_territory_to_variable = {
		ESTATE = $ESTATE_GOAL$
		TERRITORY_VARIABLE = estate_goal_territory
	}
	set_variable = {
		which = territory_diff
		which = estate_goal_territory
	}
	subtract_variable = {
		which = territory_diff
		which = estate_init_territory
	}
	if = {
		limit = {
			always = $ONLY_POSITIVE$
			NOT = {
				check_variable = {
					which = territory_diff
					value = 0
				}
			}
		}
		[[ONLY_POSITIVE]
			set_country_flag = $ONLY_POSITIVE_ERR_FLAG$
		]
	}
	else_if = {
		limit = { 
			check_variable = {
				which = territory_diff
				value = 0
			}
		}
		while = {
			limit = {
				check_variable = {
					which = territory_diff
					value = 0.001
				}
			}
			if = {
				limit = {
					check_variable = {
						which = territory_diff
						value = 10
					}
				}
				change_estate_land_share = {
					estate = $ESTATE$
					share = 10
				}
				change_variable = {
					which = territory_diff
					value = -10
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = territory_diff
						value = 1
					}
				}
				change_estate_land_share = {
					estate = $ESTATE$
					share = 1
				}
				change_variable = {
					which = territory_diff
					value = -1
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = territory_diff
						value = 0.1
					}
				}
				change_estate_land_share = {
					estate = $ESTATE$
					share = 0.1
				}
				change_variable = {
					which = territory_diff
					value = -0.1
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = territory_diff
						value = 0.01
					}
				}
				change_estate_land_share = {
					estate = $ESTATE$
					share = 0.01
				}
				change_variable = {
					which = territory_diff
					value = -0.01
				}
			}
			else = {
				change_estate_land_share = {
					estate = $ESTATE$
					share = 0.001
				}
				change_variable = {
					which = territory_diff
					value = -0.001
				}
			}
		}
	}
	else_if = {
		limit = {
			OR = {
				NOT = {
					check_variable = {
						which = territory_diff
						value = -0.001
					}
				}
				is_variable_equal = {
					which = territory_diff
					value = -0.001
				}
			}
		}
		while = {
			limit = {
				check_variable = {
					which = territory_diff
					value = -0.001
				}
			}
			if = {
				limit = {
					check_variable = {
						which = territory_diff
						value = -10
					}
				}
				change_estate_land_share = {
					estate = $ESTATE$
					share = -10
				}
				change_variable = {
					which = territory_diff
					value = 10
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = territory_diff
						value = -1
					}
				}
				change_estate_land_share = {
					estate = $ESTATE$
					share = -1
				}
				change_variable = {
					which = territory_diff
					value = 1
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = territory_diff
						value = -0.1
					}
				}
				change_estate_land_share = {
					estate = $ESTATE$
					share = -0.1
				}
				change_variable = {
					which = territory_diff
					value = 0.1
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = territory_diff
						value = -0.01
					}
				}
				change_estate_land_share = {
					estate = $ESTATE$
					share = -0.01
				}
				change_variable = {
					which = territory_diff
					value = 0.01
				}
			}
			else = {
				change_estate_land_share = {
					estate = $ESTATE$
					share = -0.001
				}
				change_variable = {
					which = territory_diff
					value = 0.001
				}
			}
		}
	}
}

# -- NOBLE ESTATE EFFECTS --

nhs_add_noble_estate_influence_modifier = {
	if = {
		limit = {
			has_estate = estate_nobles
			NOT = {
				has_estate_influence_modifier = {
					estate = estate_nobles
					modifier = $desc$
				}
			}
		}
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = $desc$
			influence = $influence$
			duration = $duration$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
			NOT = {
				has_estate_influence_modifier = {
					estate = estate_nhs_nobles
					modifier = $desc$
				}
			}
		}
		add_estate_influence_modifier = {
			estate = estate_nhs_nobles
			desc = $desc$
			influence = $influence$
			duration = $duration$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
			NOT = {
				has_estate_influence_modifier = {
					estate = estate_nhs_apogonoi
					modifier = $desc$
				}
			}
		}
		add_estate_influence_modifier = {
			estate = estate_nhs_apogonoi
			desc = $desc$
			influence = $influence$
			duration = $duration$
		}
	}
}

nhs_add_noble_estate_loyalty = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = $loyalty$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		add_estate_loyalty = {
			estate = estate_nhs_nobles
			loyalty = $loyalty$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		add_estate_loyalty = {
			estate = estate_nhs_apogonoi
			loyalty = $loyalty$
		}
	}
}

nhs_change_noble_estate_land_share = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = $share$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = $share$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = $share$
		}
	}
}

nhs_add_noble_estate_loyalty_modifier = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		add_estate_loyalty_modifier = {
			estate = estate_nobles
			loyalty = $loyalty$
			[[desc]
				desc = $desc$
			]
			duration = $duration$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		add_estate_loyalty_modifier = {
			estate = estate_nhs_nobles
			loyalty = $loyalty$
			[[desc]
				desc = $desc$
			]
			duration = $duration$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		add_estate_loyalty_modifier = {
			estate = estate_nhs_apogonoi
			loyalty = $loyalty$
			[[desc]
				desc = $desc$
			]
			duration = $duration$
		}
	}
}

# estate = what estate
# Will give the estate 1% land
nhs_give_noble_estate_land_share_small = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = 1
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = 1
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = 1
		}
	}
}

# estate = what estate
# Will give the estate 2% land
nhs_give_noble_estate_land_share_medium = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = 2
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = 2
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = 2
		}
	}
}

# estate = what estate
# Will give the estate 3% land
nhs_give_noble_estate_land_share_large = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = 3
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = 3
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = 3
		}
	}
}

# estate = what estate
# Will give the estate 5% land
nhs_give_noble_estate_land_share_massive = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = 5
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = 5
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = 5
		}
	}
}

# estate = what estate
# Will give the estate 10% land
nhs_give_noble_estate_land_share_gigantic = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = 10
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = 10
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = 10
		}
	}
}

# Will take the 1% land from estate
nhs_take_noble_estate_land_share_small = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -1
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = -1
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = -1
		}
	}
}

# estate = what estate
# Will take away 2% land from estate
nhs_take_noble_estate_land_share_medium = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -2
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = -2
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = -2
		}
	}
}

# estate = what estate
# Will take the 3% land from estate
nhs_take_noble_estate_land_share_large = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -3
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = -3
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = -3
		}
	}
}

# estate = what estate
# Will take the 5% land from estate
nhs_take_noble_estate_land_share_massive = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -5
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = -5
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = -5
		}
	}
}

# estate = what estate
# Will take the 10% land from estate
nhs_take_noble_estate_land_share_gigantic = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -10
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = -10
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = -10
		}
	}
}


nhs_scaled_estate_nobles_land_share_effect = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		scaled_estate_land_share_add_effect = { estate = estate_nobles }
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		scaled_estate_land_share_add_effect = { estate = estate_nhs_nobles }
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		scaled_estate_land_share_add_effect = { estate = estate_nhs_apogonoi }
	}
}

nhs_scaled_estate_nobles_land_share_effect = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		scaled_estate_land_share_add_effect = { estate = estate_nobles }
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		scaled_estate_land_share_add_effect = { estate = estate_nhs_nobles }
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		scaled_estate_land_share_add_effect = { estate = estate_nhs_apogonoi }
	}
}