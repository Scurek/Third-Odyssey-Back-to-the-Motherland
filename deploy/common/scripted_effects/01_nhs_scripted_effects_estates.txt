nhs_buybacks_landshare_nobles_church = {
	if = {
		limit = {
			estate_territory = {
				estate = $estate_noble$
				territory = 8
			}
		}
		change_estate_land_share = {
			estate = $estate_noble$
			share = -8
		}
		if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 2
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -2
			}
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_noble$
				territory = 5
			}
		}
		change_estate_land_share = {
			estate = $estate_noble$
			share = -5
		}
		if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 5
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -5
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 3
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -3
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 1
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -1
			}
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_noble$
				territory = 3
			}
		}
		change_estate_land_share = {
			estate = $estate_noble$
			share = -3
		}
		if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 7
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -7
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 5
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -5
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 3
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -3
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 1
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -1
			}
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_noble$
				territory = 1
			}
		}
		change_estate_land_share = {
			estate = $estate_noble$
			share = -1
		}
		if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 9
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -9
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 7
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -7
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 5
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -5
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 3
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -3
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 1
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -1
			}
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_church$
				territory = 10
			}
		}
		change_estate_land_share = {
			estate = $estate_church$
			share = -10
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_church$
				territory = 8
			}
		}
		change_estate_land_share = {
			estate = $estate_church$
			share = -8
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_church$
				territory = 6
			}
		}
		change_estate_land_share = {
			estate = $estate_church$
			share = -6
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_church$
				territory = 4
			}
		}
		change_estate_land_share = {
			estate = $estate_church$
			share = -4
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_church$
				territory = 2
			}
		}
		change_estate_land_share = {
			estate = $estate_church$
			share = -2
		}
	}
}

nhs_buybacks_landshare = {
	if = {
		limit = {
			estate_territory = {
				estate = $estate$
				territory = 10
			}
		}
		change_estate_land_share = {
			estate = $estate$
			share = -10
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate$
				territory = 8
			}
		}
		change_estate_land_share = {
			estate = $estate$
			share = -8
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate$
				territory = 6
			}
		}
		change_estate_land_share = {
			estate = $estate$
			share = -6
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate$
				territory = 4
			}
		}
		change_estate_land_share = {
			estate = $estate$
			share = -4
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate$
				territory = 2
			}
		}
		change_estate_land_share = {
			estate = $estate$
			share = -2
		}
	}
}


# -- NATIVE ESTATE EFFECTS --

# Add influence modifier to any existing native estate with amount QUANTITY, description DESC and duration DURATION
# We can keep this, since we can easily change this if native estates ever differentiate (again)...
# Use: nhs_add_any_native_estate_influence_modifier = { QUANTITY = -15 DESC = EST_NHS_REVOKED_PRIVILEGES DURATION = 7300 }
nhs_add_any_native_estate_influence_modifier = {
	add_estate_influence_modifier = {
		estate = estate_all_natives
		desc = $DESC$
		influence = $QUANTITY$
		duration = $DURATION$
	}
}

# Add loyalty to any existing native estate with amount QUANTITY
# We can keep this, since we can easily change this if native estates ever differentiate (again)...
# Use: nhs_add_any_native_estate_loyalty = { QUANTITY = -40 }
nhs_add_any_native_estate_loyalty = {
	add_estate_loyalty = {
		estate = estate_all_natives
		loyalty = $QUANTITY$
	}
}

# Update a single province, single native estate privilege's modifier
# Use: province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_local_councils_empowered MODIFIER = nhs_native_priv_local_councils_empowered_mod }
province_update_estate_privilege = {
	if = {
		# Add province modifier if needed (and applicable)
		limit = {
			owner = { has_estate_privilege = $PRIVILEGE$ }
			nhs_culturally_native = yes
		}
		if = {
			limit = {
				NOT = { has_province_modifier = $MODIFIER$ }
			}
			add_province_modifier = {
				name = $MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		# Remove province modifier if present (and not applicable)
		limit = {
			has_province_modifier = $MODIFIER$
		}
		remove_province_modifier = $MODIFIER$
	}
	
}


# Recalculate all native estate modifiers for a single province
province_recalculate_estate_privileges_effect_natives = {
	# TODO: effect can't use other effect?
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_local_councils_empowered MODIFIER = nhs_native_priv_local_councils_empowered_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_minor_pax_romana_early MODIFIER = nhs_native_priv_minor_pax_romana_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_major_pax_romana_early MODIFIER = nhs_native_priv_major_pax_romana_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_major_pax_romana_mid MODIFIER = nhs_native_priv_major_pax_romana_mid_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_increase_tribute_early MODIFIER = nhs_native_priv_increase_tribute_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_increase_tribute_mid MODIFIER = nhs_native_priv_increase_tribute_mid_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_increase_tribute_late MODIFIER = nhs_native_priv_increase_tribute_late_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_designate_development_zones_mid MODIFIER = nhs_native_priv_designate_development_zones_mid_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_designate_development_zones_late MODIFIER = nhs_native_priv_designate_development_zones_late_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_divide_et_impera_early MODIFIER = nhs_native_priv_divide_et_impera_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_divide_et_impera_mid MODIFIER = nhs_native_priv_divide_et_impera_mid_mod }
}

nhs_add_noble_estate_influence_modifier = {
	if = {
		limit = {
			has_estate = estate_nobles
			NOT = {
				has_estate_influence_modifier = {
					estate = estate_nobles
					modifier = $desc$
				}
			}
		}
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = $desc$
			influence = $influence$
			duration = $duration$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
			NOT = {
				has_estate_influence_modifier = {
					estate = estate_nhs_nobles
					modifier = $desc$
				}
			}
		}
		add_estate_influence_modifier = {
			estate = estate_nhs_nobles
			desc = $desc$
			influence = $influence$
			duration = $duration$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
			NOT = {
				has_estate_influence_modifier = {
					estate = estate_nhs_apogonoi
					modifier = $desc$
				}
			}
		}
		add_estate_influence_modifier = {
			estate = estate_nhs_apogonoi
			desc = $desc$
			influence = $influence$
			duration = $duration$
		}
	}
}

nhs_add_noble_estate_loyalty = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = $loyalty$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		add_estate_loyalty = {
			estate = estate_nhs_nobles
			loyalty = $loyalty$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		add_estate_loyalty = {
			estate = estate_nhs_apogonoi
			loyalty = $loyalty$
		}
	}
}

nhs_change_noble_estate_land_share = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = $share$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = $share$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = $share$
		}
	}
}

nhs_add_noble_estate_loyalty_modifier = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		add_estate_loyalty_modifier = {
			estate = estate_nobles
			loyalty = $loyalty$
			[[desc]
				desc = $desc$
			]
			duration = $duration$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		add_estate_loyalty_modifier = {
			estate = estate_nhs_nobles
			loyalty = $loyalty$
			[[desc]
				desc = $desc$
			]
			duration = $duration$
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		add_estate_loyalty_modifier = {
			estate = estate_nhs_apogonoi
			loyalty = $loyalty$
			[[desc]
				desc = $desc$
			]
			duration = $duration$
		}
	}
}

# estate = what estate
# Will give the estate 1% land
nhs_give_noble_estate_land_share_small = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = 1
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = 1
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = 1
		}
	}
}

# estate = what estate
# Will give the estate 2% land
nhs_give_noble_estate_land_share_medium = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = 2
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = 2
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = 2
		}
	}
}

# estate = what estate
# Will give the estate 3% land
nhs_give_noble_estate_land_share_large = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = 3
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = 3
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = 3
		}
	}
}

# estate = what estate
# Will give the estate 5% land
nhs_give_noble_estate_land_share_massive = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = 5
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = 5
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = 5
		}
	}
}

# estate = what estate
# Will give the estate 10% land
nhs_give_noble_estate_land_share_gigantic = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = 10
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = 10
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = 10
		}
	}
}

# Will take the 1% land from estate
nhs_take_noble_estate_land_share_small = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -1
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = -1
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = -1
		}
	}
}

# estate = what estate
# Will take away 2% land from estate
nhs_take_noble_estate_land_share_medium = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -2
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = -2
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = -2
		}
	}
}

# estate = what estate
# Will take the 3% land from estate
nhs_take_noble_estate_land_share_large = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -3
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = -3
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = -3
		}
	}
}

# estate = what estate
# Will take the 5% land from estate
nhs_take_noble_estate_land_share_massive = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -5
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = -5
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = -5
		}
	}
}

# estate = what estate
# Will take the 10% land from estate
nhs_take_noble_estate_land_share_gigantic = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -10
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		change_estate_land_share = {
			estate = estate_nhs_nobles
			share = -10
		}
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		change_estate_land_share = {
			estate = estate_nhs_apogonoi
			share = -10
		}
	}
}


nhs_scaled_estate_nobles_land_share_effect = {
	if = {
		limit = {
			has_estate = estate_nobles
		}
		scaled_estate_land_share_add_effect = { estate = estate_nobles }
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_nobles
		}
		scaled_estate_land_share_add_effect = { estate = estate_nhs_nobles }
	}
	else_if = {
		limit = {
			has_estate = estate_nhs_apogonoi
		}
		scaled_estate_land_share_add_effect = { estate = estate_nhs_apogonoi }
	}
}