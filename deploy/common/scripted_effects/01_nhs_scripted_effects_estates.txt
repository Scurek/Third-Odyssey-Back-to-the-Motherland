nhs_buybacks_landshare_nobles_church = {
	if = {
		limit = {
			estate_territory = {
				estate = $estate_noble$
				territory = 8
			}
		}
		change_estate_land_share = {
			estate = $estate_noble$
			share = -8
		}
		if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 2
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -2
			}
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_noble$
				territory = 5
			}
		}
		change_estate_land_share = {
			estate = $estate_noble$
			share = -5
		}
		if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 5
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -5
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 3
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -3
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 1
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -1
			}
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_noble$
				territory = 3
			}
		}
		change_estate_land_share = {
			estate = $estate_noble$
			share = -3
		}
		if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 7
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -7
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 5
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -5
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 3
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -3
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 1
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -1
			}
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_noble$
				territory = 1
			}
		}
		change_estate_land_share = {
			estate = $estate_noble$
			share = -1
		}
		if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 9
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -9
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 7
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -7
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 5
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -5
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 3
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -3
			}
		}
		else_if = {
			limit = {
				estate_territory = {
					estate = $estate_church$
					territory = 1
				}
			}
			change_estate_land_share = {
				estate = $estate_church$
				share = -1
			}
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_church$
				territory = 10
			}
		}
		change_estate_land_share = {
			estate = $estate_church$
			share = -10
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_church$
				territory = 8
			}
		}
		change_estate_land_share = {
			estate = $estate_church$
			share = -8
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_church$
				territory = 6
			}
		}
		change_estate_land_share = {
			estate = $estate_church$
			share = -6
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_church$
				territory = 4
			}
		}
		change_estate_land_share = {
			estate = $estate_church$
			share = -4
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate_church$
				territory = 2
			}
		}
		change_estate_land_share = {
			estate = $estate_church$
			share = -2
		}
	}
}

nhs_buybacks_landshare = {
	if = {
		limit = {
			estate_territory = {
				estate = $estate$
				territory = 10
			}
		}
		change_estate_land_share = {
			estate = $estate$
			share = -10
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate$
				territory = 8
			}
		}
		change_estate_land_share = {
			estate = $estate$
			share = -8
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate$
				territory = 6
			}
		}
		change_estate_land_share = {
			estate = $estate$
			share = -6
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate$
				territory = 4
			}
		}
		change_estate_land_share = {
			estate = $estate$
			share = -4
		}
	}
	else_if = {
		limit = {
			estate_territory = {
				estate = $estate$
				territory = 2
			}
		}
		change_estate_land_share = {
			estate = $estate$
			share = -2
		}
	}
}


# -- NATIVE ESTATE EFFECTS --

# Add influence modifier to any existing native estate with amount QUANTITY, description DESC and duration DURATION
# We can keep this, since we can easily change this if native estates ever differentiate (again)...
# Use: nhs_add_any_native_estate_influence_modifier = { QUANTITY = -15 DESC = EST_NHS_REVOKED_PRIVILEGES DURATION = 7300 }
nhs_add_any_native_estate_influence_modifier = {
	add_estate_influence_modifier = {
		estate = estate_all_natives
		desc = $DESC$
		influence = $QUANTITY$
		duration = $DURATION$
	}
}

# Add loyalty to any existing native estate with amount QUANTITY
# We can keep this, since we can easily change this if native estates ever differentiate (again)...
# Use: nhs_add_any_native_estate_loyalty = { QUANTITY = -40 }
nhs_add_any_native_estate_loyalty = {
	add_estate_loyalty = {
		estate = estate_all_natives
		loyalty = $QUANTITY$
	}
}

# Update a single province, single native estate privilege's modifier
# Use: province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_local_councils_empowered MODIFIER = nhs_native_priv_local_councils_empowered_mod }
province_update_estate_privilege = {
	if = {
		# Add province modifier if needed (and applicable)
		limit = {
			owner = { has_estate_privilege = $PRIVILEGE$ }
			nhs_culturally_native = yes
		}
		if = {
			limit = {
				NOT = { has_province_modifier = $MODIFIER$ }
			}
			add_province_modifier = {
				name = $MODIFIER$
				duration = -1
			}
		}
	}
	else_if = {
		# Remove province modifier if present (and not applicable)
		limit = {
			has_province_modifier = $MODIFIER$
		}
		remove_province_modifier = $MODIFIER$
	}
	
}


# Recalculate all native estate modifiers for a single province
province_recalculate_estate_privileges_effect_natives = {
	# TODO: effect can't use other effect?
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_local_councils_empowered MODIFIER = nhs_native_priv_local_councils_empowered_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_minor_pax_romana_early MODIFIER = nhs_native_priv_minor_pax_romana_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_major_pax_romana_early MODIFIER = nhs_native_priv_major_pax_romana_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_major_pax_romana_mid MODIFIER = nhs_native_priv_major_pax_romana_mid_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_increase_tribute_early MODIFIER = nhs_native_priv_increase_tribute_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_increase_tribute_mid MODIFIER = nhs_native_priv_increase_tribute_mid_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_increase_tribute_late MODIFIER = nhs_native_priv_increase_tribute_late_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_encourage_barbaroi_officials_early MODIFIER = nhs_native_priv_encourage_barbaroi_officials_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_designate_development_zones_mid MODIFIER = nhs_native_priv_designate_development_zones_mid_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_designate_development_zones_late MODIFIER = nhs_native_priv_designate_development_zones_late_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_divide_et_impera_early MODIFIER = nhs_native_priv_divide_et_impera_early_mod }
	province_update_estate_privilege = { PRIVILEGE = nhs_native_priv_divide_et_impera_mid MODIFIER = nhs_native_priv_divide_et_impera_mid_mod }
}
