to_achievement_setup = {
	set_global_flag = to_new_achievement_system
	to_setup_non_hellenic_pagan_provinces = yes
}

to_check_ironman = {
	if = {
		limit = {
			ironman = no
		}
		set_global_flag = to_no_ironman_detected
	}
}

to_complete_achievement = {
	if = {
		limit = {
			NOT = { to_achievement_status_completed = { ACHIEVEMENT = $ACHIEVEMENT$ } }
		}
		set_country_flag = to_completed_achievement_$ACHIEVEMENT$
		to_open_achievement_completed_window = yes
	}
}

to_open_achievement_completed_window = {
	set_country_flag = to_show_achievement_window_$ACHIEVEMENT$
}

to_close_achievement_completed_window = {
	clr_country_flag = to_show_achievement_window_$ACHIEVEMENT$
}

to_enable_achievement_province_decision = {
	if = {
		limit = {
			to_achievement_province_decision_shown = { ACHIEVEMENT = $ACHIEVEMENT$ }
		}
		# custom_tooltip = to_hide_achievement_provinces_decision_$ACHIEVEMENT$_tt
		clr_country_flag = to_show_achievement_provinces_decision_$ACHIEVEMENT$
	}
	else = {
		# custom_tooltip = to_show_achievement_provinces_decision_$ACHIEVEMENT$_tt
		set_country_flag = to_show_achievement_provinces_decision_$ACHIEVEMENT$
	}
}

to_yearly_achievement_check = {
	if = {
		limit = {
			ironman = yes
			is_month = 0
			NOT = { is_month = 1 }
		}
		if = {
			limit = {
				is_year = 1600
				NOT = { is_year = 1601 }
			}
			every_country = {
				limit = {
					to_has_elysian_achievements = yes
					NOT = { to_achievement_status_completed = { ACHIEVEMENT = to_make_pytheas_proud } }
					NOT = { to_achievement_to_make_pytheas_proud_failed_no_date = yes }
					to_achievement_to_make_pytheas_proud_can_be_completed = yes
				}
				to_complete_achievement = { ACHIEVEMENT = to_make_pytheas_proud }
			}
		}
		if = {
			limit = {
				is_year = 1545
				NOT = { is_year = 1546 }
			}
			every_country = {
				limit = {
					to_has_elysian_achievements = yes
					NOT = { to_achievement_status_completed = { ACHIEVEMENT = 100_years_away_from_home } }
					NOT = { to_achievement_100_years_away_from_home_failed_no_date = yes }
					to_achievement_100_years_away_from_home_can_be_completed = yes
				}
				to_complete_achievement = { ACHIEVEMENT = 100_years_away_from_home }
			}
		}
		if = {
			limit = {
				is_year = 1570
				NOT = { is_year = 1571 }
			}
			every_country = {
				limit = {
					to_has_elysian_achievements = yes
					NOT = { to_achievement_status_completed = { ACHIEVEMENT = the_only_colonizer } }
					NOT = { to_achievement_the_only_colonizer_failed_no_date = yes }
					to_achievement_the_only_colonizer_can_be_completed = yes
				}
				to_complete_achievement = { ACHIEVEMENT = the_only_colonizer }
			}
		}
		if = {
			limit = {
				is_year = 1491
				NOT = { is_year = 1492 }
			}
			every_country = {
				limit = {
					to_has_elysian_achievements = yes
					NOT = { to_achievement_status_completed = { ACHIEVEMENT = veni_vidi_vici } }
					NOT = { to_achievement_veni_vidi_vici_failed_no_date = yes }
					to_achievement_veni_vidi_vici_can_be_completed = yes
				}
				to_complete_achievement = { ACHIEVEMENT = veni_vidi_vici }
			}
		}
		if = {
			limit = {
				is_year = 1700
				NOT = { is_year = 1701 }
			}
			every_country = {
				limit = {
					to_has_elysian_achievements = yes
					NOT = { to_achievement_status_completed = { ACHIEVEMENT = byzantine_blitz } }
					NOT = { to_achievement_byzantine_blitz_failed_no_date = yes }
					to_achievement_byzantine_blitz_can_be_completed = yes
				}
				to_complete_achievement = { ACHIEVEMENT = byzantine_blitz }
			}
		}
	}
}

to_on_province_owner_change_achievement_check = {
	if = {
		limit = {
			ironman = yes
		}
		if = {
			limit = {
				owner = {
					to_has_elysian_achievements = yes
				}
			}
			owner = {
				to_achievement_pax_deiorum_check = yes
				to_achievement_post_finem_check = yes
				to_achievement_re_restitutor_orbis_check = yes
				to_achievement_100_years_away_from_home_check = yes
			}
		}
		else_if = {
			limit = {
				owner = {
					overlord = {
						to_has_elysian_achievements = yes
					}
				}
			}
			owner = {
				overlord = {
					to_achievement_pax_deiorum_check = yes
					to_achievement_post_finem_check = yes
					to_achievement_re_restitutor_orbis_check = yes
					to_achievement_100_years_away_from_home_check = yes
				}
			}
		}
	}
}

# Code generated by achievements/generate_achievements.py
to_achievement_pax_deiorum_check = {
	hidden_effect = {
		if = {
			limit = {
				NOT = { to_achievement_status_completed = { ACHIEVEMENT = pax_deiorum } }
				NOT = { to_achievement_pax_deiorum_status_failed = yes }
				to_achievement_pax_deiorum_can_be_completed = yes
			}
			to_complete_achievement = { ACHIEVEMENT = pax_deiorum }
		}
	}
}

to_achievement_100_years_away_from_home_check = {
	hidden_effect = {
		if = {
			limit = {
				NOT = { to_achievement_status_completed = { ACHIEVEMENT = 100_years_away_from_home } }
				NOT = { to_achievement_100_years_away_from_home_status_failed = yes }
				to_achievement_100_years_away_from_home_can_be_completed = yes
			}
			to_complete_achievement = { ACHIEVEMENT = 100_years_away_from_home }
		}
	}
}

to_achievement_no_more_schisms_check = {
	hidden_effect = {
		if = {
			limit = {
				NOT = { to_achievement_status_completed = { ACHIEVEMENT = no_more_schisms } }
				NOT = { to_achievement_no_more_schisms_status_failed = yes }
				to_achievement_no_more_schisms_can_be_completed = yes
			}
			to_complete_achievement = { ACHIEVEMENT = no_more_schisms }
		}
	}
}

to_achievement_post_finem_check = {
	hidden_effect = {
		if = {
			limit = {
				NOT = { to_achievement_status_completed = { ACHIEVEMENT = post_finem } }
				NOT = { to_achievement_post_finem_status_failed = yes }
				to_achievement_post_finem_can_be_completed = yes
			}
			to_complete_achievement = { ACHIEVEMENT = post_finem }
		}
	}
}

to_achievement_re_restitutor_orbis_check = {
	hidden_effect = {
		if = {
			limit = {
				NOT = { to_achievement_status_completed = { ACHIEVEMENT = re_restitutor_orbis } }
				NOT = { to_achievement_re_restitutor_orbis_status_failed = yes }
				to_achievement_re_restitutor_orbis_can_be_completed = yes
			}
			to_complete_achievement = { ACHIEVEMENT = re_restitutor_orbis }
		}
	}
}

to_achievement_byzantine_blitz_check = {
	hidden_effect = {
		if = {
			limit = {
				NOT = { to_achievement_status_completed = { ACHIEVEMENT = byzantine_blitz } }
				NOT = { to_achievement_byzantine_blitz_status_failed = yes }
				to_achievement_byzantine_blitz_can_be_completed = yes
			}
			to_complete_achievement = { ACHIEVEMENT = byzantine_blitz }
		}
	}
}