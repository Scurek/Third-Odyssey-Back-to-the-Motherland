oth_remove_albanian_quarter = {
	if = {
		limit = {
			owns = 953
		}
		953 = {
			remove_province_modifier = nhs2_albanian_quarter
			add_base_tax = -1
			add_base_manpower = -1
			add_base_production = -1
		}
	}
	else = {
		hidden_effect = {
			953 = {
				remove_province_modifier = nhs2_albanian_quarter
				add_base_tax = -1
				add_base_manpower = -1
				add_base_production = -1
			}
		}
	}
}

oth_albanian_initial_colonisation_frontier = {
	cede_province = ROOT
	add_territorial_core = ROOT
	hidden_effect = {
		add_institution_embracement = {
			which = "feudalism"
			value = 100
		}
	}
	change_culture = shqiperi
	add_core = SHQ
	custom_tooltip = nhs_new_line_tt
	add_base_tax = 1
	add_base_manpower = 1
	tooltip = {
		add_permanent_province_modifier = {
			name = nhs2_albanian_majority
			duration = -1
		}
	}
	hidden_effect = {
		add_province_triggered_modifier = nhs2_albanian_majority_tm
	}
	if = {
		limit = {
			NOT = { religion = orthodox }
			NOT = { owner = { has_global_flag = nhs2_patriarchate_established } }
		}
		change_religion = orthodox
		add_province_modifier = {
			name = religious_zeal_at_conv
			duration = 14600
		}
	}
	if = {
		limit = {
			NOT = { religion = elysian_orthodoxy }
			owner = { has_global_flag = nhs2_patriarchate_established }
		}
		change_religion = elysian_orthodoxy
		add_province_modifier = {
			name = religious_zeal_at_conv
			duration = 14600
		}
	}
	to_nhs_handle_post_disaster_tolerance_modifier_albanians = { COUNTRY_SCOPE = ROOT CHECK_FLAG = yes }
	hidden_effect = {
		add_unrest = -20
		add_nationalism = -100
		# Prevents the colony finished procedure from firing
		clr_province_flag = nhs_is_empty_province
		clr_province_flag = nhs_is_colony
	}
	hidden_effect = {
		nhs_on_province_culture_converted_general = yes
	}
}

oth_albanian_initial_colonisation_vassal = {
	# cede_province = ROOT
	# add_core = ROOT
	tooltip = {
		cede_province = SHQ
	}
	hidden_effect = {
		cede_province = ROOT
		discover_country = ROOT
		add_institution_embracement = {
			which = "feudalism"
			value = 100
		}
	}
	change_culture = shqiperi
	add_core = SHQ
	add_base_tax = 2
	add_base_production = 2
	add_base_manpower = 3
	add_province_triggered_modifier = nhs2_albanian_majority_tm
	if = {
		limit = {
			NOT = { religion = orthodox }
			NOT = { owner = { has_global_flag = nhs2_patriarchate_established } }
		}
		change_religion = orthodox
		add_province_modifier = {
			name = religious_zeal_at_conv
			duration = 14600
		}
	}
	if = {
		limit = {
			NOT = { religion = elysian_orthodoxy }
			owner = { has_global_flag = nhs2_patriarchate_established }
		}
		change_religion = elysian_orthodoxy
		add_province_modifier = {
			name = religious_zeal_at_conv
			duration = 14600
		}
	}
	to_nhs_handle_post_disaster_tolerance_modifier_albanians = { COUNTRY_SCOPE = ROOT CHECK_FLAG = yes }
	hidden_effect = {
		# Prevents the colony finished procedure from firing
		clr_province_flag = nhs_is_empty_province
		clr_province_flag = nhs_is_colony
	}
	hidden_effect = {
		nhs_on_province_culture_converted_general = yes
	}
}

oth_albanian_colonisation = {
	if = {
		limit = {
			exists = SHQ
			SHQ = { is_subject_of = ROOT }
		}
		cede_province = SHQ
		add_core = SHQ
	}
	else = {
		cede_province = ROOT
		add_territorial_core = ROOT
	}
	add_local_autonomy = -100
	hidden_effect = {
		discover_country = ROOT
		add_institution_embracement = {
			which = "feudalism"
			value = 100
		}
	}
	
	if = {
		limit = {
			has_global_flag = nhs_shqiperi_into_elysian
		}
		change_culture = shqipproi
		tooltip = {
			add_permanent_province_modifier = {
				name = nhs2_albanian_majority2
				duration = -1
			}
		}
		hidden_effect = {
			add_province_triggered_modifier = nhs2_albanian_majority2_tm
		}
	}
	else = {
		change_culture = shqiperi
		tooltip = {
			add_permanent_province_modifier = {
				name = nhs2_albanian_majority
				duration = -1
			}
		}
		hidden_effect = {
			add_province_triggered_modifier = nhs2_albanian_majority_tm
		}
	}
	
	add_unrest = -20
	if = {
		limit = {
			OR = {
				AND = {
					NOT = { religion = orthodox }
					NOT = { owner = { has_global_flag = nhs2_patriarchate_established } }
				}
				AND = {
					NOT = { religion = elysian_orthodoxy }
					owner = { has_global_flag = nhs2_patriarchate_established }
				}
			}
			OR = {
				NOT = { exists = SHQ }
				AND = {
					exists = SHQ
					SHQ = { is_subject_of = ROOT }
					SHQ = {
						OR = {
							religion = orthodox
							religion = elysian_orthodoxy
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { religion = orthodox }
				NOT = { owner = { has_global_flag = nhs2_patriarchate_established } }
			}
			change_religion = orthodox
			add_province_modifier = {
				name = religious_zeal_at_conv
				duration = 14600
			}
		}
		if = {
			limit = {
				NOT = { religion = elysian_orthodoxy }
				owner = { has_global_flag = nhs2_patriarchate_established }
			}
			change_religion = elysian_orthodoxy
			add_province_modifier = {
				name = religious_zeal_at_conv
				duration = 14600
			}
		}
	}
	to_nhs_handle_post_disaster_tolerance_modifier_albanians = { COUNTRY_SCOPE = ROOT CHECK_FLAG = yes }
	hidden_effect = {
		# Prevents the colony finished procedure from firing
		clr_province_flag = nhs_is_empty_province
		clr_province_flag = nhs_is_colony
	}
	hidden_effect = {
		nhs_on_province_culture_converted_general = yes
	}
}

oth_albanian_movement = {
	if = {
		limit = {
			NOT = {	has_global_flag = nhs_shqiperi_into_elysian }
		}
		change_culture = shqiperi
		if = {
			limit = {
				has_country_flag = nhs_alb_change_religion
			}
			if = {
				limit = {
					NOT = { religion = orthodox }
					NOT = { owner = { has_global_flag = nhs2_patriarchate_established } }
				}
				change_religion = orthodox
			}
			if = {
				limit = {
					NOT = { religion = elysian_orthodoxy }
					owner = { has_global_flag = nhs2_patriarchate_established }
					
				}
				change_religion = elysian_orthodoxy
			}
			clr_country_flag = nhs_alb_change_religion
		}
		else = {
			change_religion = ROOT
		}
	}
	else = {
		change_culture = shqipproi
		change_religion = ROOT
	}
	add_core = SHQ
	tooltip = {
		add_permanent_province_modifier = {
			name = nhs2_albanian_majority
			duration = -1
		}
	}
	hidden_effect = {
		add_province_triggered_modifier = nhs2_albanian_majority_tm
	}
	add_base_tax = 2
	add_base_production = 1
	add_base_manpower = 2
	add_unrest = 10
	to_nhs_handle_post_disaster_tolerance_modifier_albanians = { COUNTRY_SCOPE = ROOT CHECK_FLAG = yes }
	if = {
		limit = {
			ROOT = {
				has_parliament = yes
			}
			has_seat_in_parliament = yes
		}
		set_seat_in_parliament = no
	}
	hidden_effect = {
		nhs_on_province_culture_converted_general = yes
	}
}


oth_albanian_integration_exists = {
	SHQ = {
		change_primary_culture = shqipproi
		change_religion = ROOT
		add_opinion = {
			who = ROOT
			modifier = nhs_forced_culture_change
		}
		every_owned_province = {
			limit = {
				OR = {
					has_province_modifier = nhs2_albanian_majority_tm
					culture = shqiperi
				}
			}
			change_culture = shqipproi
			if = {
				limit = {
					has_province_modifier = nhs2_albanian_majority_tm
				}
				custom_tooltip = nhs_update_albanian_majority_tt
				custom_tooltip = nhs_self_governance_tt
				hidden_effect = {
					remove_province_triggered_modifier = nhs2_albanian_majority_tm
					add_province_triggered_modifier = nhs2_albanian_majority2_tm
				}
			}
			hidden_effect = {
				nhs_on_province_culture_converted_general = yes
			}
		}
	}
	every_province = {
		limit = {
			OR = {
				has_province_modifier = nhs2_albanian_majority_tm
				culture = shqiperi
			}
			NOT = { owned_by = SHQ }
		}
		change_culture = shqipproi
		if = {
			limit = {
				has_province_modifier = nhs2_albanian_majority_tm
			}
			custom_tooltip = nhs_update_albanian_majority_tt
			hidden_effect = {
				remove_province_triggered_modifier = nhs2_albanian_majority_tm
				add_province_triggered_modifier = nhs2_albanian_majority2_tm
			}
		}
		to_nhs_handle_post_disaster_tolerance_modifier_albanians = { COUNTRY_SCOPE = owner }
		hidden_effect = {
			nhs_on_province_culture_converted_general = yes
		}
	}
	set_global_flag = nhs_shqiperi_into_elysian
	clr_country_flag = nhs_ingrate40
	clr_country_flag = nhs_ingrate30
	clr_country_flag = nhs_ingrate20
	clr_country_flag = nhs_ingrate10
}

oth_albanian_integration_not_exists = {
	every_province = {
		limit = {
			OR = {
				has_province_modifier = nhs2_albanian_majority_tm
				culture = shqiperi
			}
		}
		change_culture = shqipproi
		if = {
			limit = {
				has_province_modifier = nhs2_albanian_majority_tm
			}
			custom_tooltip = nhs_update_albanian_majority_tt
			hidden_effect = {
				remove_province_triggered_modifier = nhs2_albanian_majority_tm
				add_province_triggered_modifier = nhs2_albanian_majority2_tm
			}
		}
		to_nhs_handle_post_disaster_tolerance_modifier_albanians = { COUNTRY_SCOPE = owner }
		hidden_effect = {
			nhs_on_province_culture_converted_general = yes
		}
	}
	hidden_effect = {
		SHQ = {
			change_primary_culture = shqipproi
			change_religion = ROOT
		}
	}
	set_global_flag = nhs_shqiperi_into_elysian
	clr_country_flag = nhs_ingrate40
	clr_country_flag = nhs_ingrate30
	clr_country_flag = nhs_ingrate20
	clr_country_flag = nhs_ingrate10
}