to_ongoing_fixes = {
	if = {
		limit = {
			nhs_check_all_elysian_tags = { CONDITION = tag }
			has_idea_group = default_ideas
		}
		swap_free_idea_group = yes
	}

	if = {
		limit = {
			has_estate_privilege = to_estate_church_patriarchal_dominance
		}
		every_owned_province = {
			limit = {
				has_province_modifier = nhs2_patriarchate_land
			}
			remove_province_modifier = nhs2_patriarchate_land
			add_province_modifier = {
				name = nhs2_patriarchate_land_reduced
				duration = -1
			}
		}
		every_owned_province = {
			limit = {
				has_province_modifier = nhs2_patriarchate_land_capital
			}
			remove_province_modifier = nhs2_patriarchate_land_capital
			add_province_modifier = {
				name = nhs2_patriarchate_land_capital_reduced
				duration = -1
			}
		}
	}

	to_remove_revolution_if_you_cannot_get_it_all_provinces = yes

	if = {
		limit = {
			OR = {
				has_mission = to_eternal_empire_mission
				has_mission = to_eternal_empire_mission_ely
			}
			NOT = { has_country_flag = to_unlock_eternal_empire_mission }
		}
		set_country_flag = to_unlock_eternal_empire_mission
	}

	if = {
		limit = {
			nhs_check_all_elysian_tags = { CONDITION = tag }
			mission_completed = to_the_promised_land_mission
			mission_completed = to_koine_glossa_mission
			mission_completed = to_elysia_ascendant_mission
			NOT = { has_mission = to_eternal_empire_mission }
			NOT = { has_mission = to_eternal_empire_mission_ely }
		}
		set_country_flag = to_unlock_eternal_empire_mission
		swap_non_generic_missions = yes
	}

	if = {
		limit = {
			950 = {
				has_province_modifier = nhs_seagate_guardians_tm
			}
		}
		950 = {
			show_ambient_object = wonder_statue
			show_ambient_object = wonder_statue_2
		}
	}
	if = {
		limit = {
			has_native_government = yes
			has_regency = yes
			OR = {
				has_ruler = "Native Council"
				has_ruler = "Native Council (Interregnum)"
			}
		}
		define_ruler = {
			culture = ROOT
			religion = ROOT
		}
	}
	if = {
		limit = {
			exists = MS1
			exists = MSN
		}
		MSN = {
			inherit = MS1
		}
	}

	# Recalc triumphs
	if = {
		limit = {
			nhs_check_all_elysian_tags = { CONDITION = tag }
		}
		reset_triumph_counter = { REGION = france_region }
		reset_triumph_counter = { REGION = low_countries_region }
		reset_triumph_counter = { REGION = italy_region }
		reset_triumph_counter = { REGION = south_german_region }
		reset_triumph_counter = { REGION = iberia_region }
		reset_triumph_counter = { REGION = british_isles_region }
		reset_triumph_counter = { REGION = carpathia_region }
		reset_triumph_counter = { REGION = egypt_region }
		reset_triumph_counter = { REGION = maghreb_region }
		reset_triumph_counter = { REGION = mashriq_region }
		reset_triumph_counter = { REGION = anatolia_region }
		reset_triumph_counter = { REGION = balkan_region }
		every_province = {
			limit = {
				is_empty = no
			}
			if = {
				limit = {
					nhs_check_all_elysian_tags = { CONDITION = owned_by }
				}
				to_change_triumph_province_counters = { CHANGE = 1 SCOPE = owner }
			}
			else_if = {
				limit = {
					nhs_check_all_elysian_tags = { CONDITION = country_or_subject_holds }
				}
				owner = {
					overlord = {
						save_event_target_as = to_roman_overlord
					}
				}
				to_change_triumph_province_counters = { CHANGE = 1 SCOPE = event_target:to_roman_overlord }
			}
		}
	}

	random_owned_province = {
		limit = {
			has_great_project = {
				type = to_elysian_highways_project
			}
		}
		if = {
			limit = {
				has_global_flag = to_elysian_highways_project_tier_3
			}
			if = {
				limit = {
					NOT = {
						has_great_project = {
							type = to_elysian_highways_project
							tier = 3
						}
					}
				}
				add_great_project_tier = {
					type = to_elysian_highways_project
					tier = 3
				}
			}
		}
		if = {
			limit = {
				NOT = { has_global_flag = to_elysian_highways_project_tier_3 }
				has_global_flag = to_elysian_highways_project_tier_2
			}
			if = {
				limit = {
					NOT = {
						has_great_project = {
							type = to_elysian_highways_project
							tier = 1
						}
					}
				}
				add_great_project_tier = {
					type = to_elysian_highways_project
					tier = 2
				}
			}
			if = {
				limit = {
					NOT = {
						has_great_project = {
							type = to_elysian_highways_project
							tier = 2
						}
					}
				}
				add_great_project_tier = {
					type = to_elysian_highways_project
					tier = 1
				}
			}
			if = {
				limit = {
					has_great_project = {
						type = to_elysian_highways_project
						tier = 3
					}
				}
				add_great_project_tier = {
					type = to_elysian_highways_project
					tier = -1
				}
			}
		}
		if = {
			limit = {
				NOT = { has_global_flag = to_elysian_highways_project_tier_3 }
				NOT = { has_global_flag = to_elysian_highways_project_tier_2 }
				has_global_flag = to_elysian_highways_project_tier_1
			}
			if = {
				limit = {
					NOT = {
						has_great_project = {
							type = to_elysian_highways_project
							tier = 1
						}
					}
				}
				add_great_project_tier = {
					type = to_elysian_highways_project
					tier = 1
				}
			}
			if = {
				limit = {
					has_great_project = {
						type = to_elysian_highways_project
						tier = 3
					}
				}
				add_great_project_tier = {
					type = to_elysian_highways_project
					tier = -2
				}
			}
			if = {
				limit = {
					has_great_project = {
						type = to_elysian_highways_project
						tier = 2
					}
				}
				add_great_project_tier = {
					type = to_elysian_highways_project
					tier = -1
				}
			}
		}
	}

	every_owned_province = {
		limit = {
			to_has_culture_adaptation_potential = yes
			NOT = { to_has_culture_assimilation = yes }
			NOT = { to_has_greek_integration = yes }
			NOT = { to_has_european_culture_integration = yes }
			NOT = { to_has_tribal_integration = yes }
		}
		to_remove_culture_adaptation_variables = yes
	}
}

to_count_provinces_in_region = {
	set_variable = {
		which = $REGION$_provinces
		value = 0
	}
	every_province = {
		limit = {
			region = $REGION$
		}
		ROOT = {
			change_variable = {
				which = $REGION$_provinces
				value = 1
			}
		}
	}
}