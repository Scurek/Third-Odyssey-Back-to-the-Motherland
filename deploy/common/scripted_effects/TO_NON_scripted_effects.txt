to_ongoing_fixes = {
	to_remove_revolution_if_you_cannot_get_it_all_provinces = yes

	if = {
		limit = {
			950 = {
				has_province_modifier = nhs_seagate_guardians_tm
			}
		}
		950 = {
			show_ambient_object = wonder_statue
			show_ambient_object = wonder_statue_2
		}
	}
	if = {
		limit = {
			has_native_government = yes
			has_regency = yes
			OR = {
				has_ruler = "Native Council"
				has_ruler = "Native Council (Interregnum)"
			}
		}
		define_ruler = {
			culture = ROOT
			religion = ROOT
		}
	}
	if = {
		limit = {
			exists = MS1
			exists = MSN
		}
		MSN = {
			inherit = MS1
		}
	}

	if = {
		limit = {
			mission_completed = to_imperial_silk_mission
			NOT = { has_country_flag = to_elysian_silk_production_mechanic }
		}
		set_variable = {
			which = to_elysian_silk_provinces
			value = 0
		}
		set_variable = {
			which = to_base_elysian_silk_provinces
			value = 0
		}
		set_country_flag = to_elysian_silk_production_mechanic
	}

	if = {
		limit = {
			mission_completed = to_infrastructure_projects_mission
			NOT = {
				950 = {
					has_province_flag = nhs_enable_cothon
				}
			}
		}
		if = {
			limit = {
				950 = {
					owned_by = PREV
				}
			}
			country_event = { id = nhs_monuments.7 }
		}
		else = {
			set_country_flag = nhs_enable_carthaginian_harbour_decision
		}
		
	}

	if = {
		limit = {
			mission_completed = to_form_colonial_institution_mission
			NOT = {
				2554 = {
					has_province_flag = nhs_enable_alexandrian_library
				}
			}
		}
		if = {
			limit = {
				2554 = {
					owned_by = PREV
				}
			}
			country_event = { id = nhs_monuments.9 }
		}
		else = {
			set_country_flag = nhs_enable_alexandrian_library_decision
		}
	}

	if = {
		limit = {
			mission_completed = to_para_bellum_mission
			NOT = {
				953 = {
					has_province_flag = nhs_enable_hippodrome
				}
			}
		}
		if = {
			limit = {
				953 = {
					owned_by = PREV
				}
			}
			country_event = { id = nhs_monuments.2 }
		}
		else = {
			set_country_flag = nhs_enable_hippodrome_decision
		}
	}

	if = {
		limit = {
			1501 = {
				NOT = { has_province_modifier = to_hold_triumph_war_activator }
			}
		}
		1501 = {
			add_province_triggered_modifier = to_hold_triumph_war_activator
		}
	}

	if = {
		limit = {
			NOT = { has_saved_global_event_target = to_steam_engine_tm_province }
		}
		random_province = {
			limit = {
				has_province_modifier = nhs2_steam_engine_tm
			}
			save_global_event_target_as = to_steam_engine_tm_province
		}
	}
	if = {
		limit = {
			NOT = { has_saved_global_event_target = to_great_mine_tm_province }
		}
		random_province = {
			limit = {
				has_province_modifier = nhs2_great_mine_tm
			}
			save_global_event_target_as = to_great_mine_tm_province
		}
	}

	if = {
		limit = {
			has_mission = to_gateway_to_elysium_mission
			is_variable_equal = {
				which = to_kykladia_trade_share_total
				value = 0
			}
		}
		to_compute_gateway_to_elysium_trade_share_effect = yes
	}

	if = {
		limit = {
			nhs_check_all_elysian_tags = { CONDITION = tag }
			NOT = { has_global_flag = to_new_province_counting_system }
		}
		set_global_flag = to_new_province_counting_system
		set_variable = {
			which = nhs_HighTierBuildingCount
			value = 0
		}
		every_owned_province = {
			limit = {
				to_elysium_building_counter_trigger = yes
			}
			to_elysium_building_counter_eval_local_province = yes
		}
	}

	if = {
		limit = {
			NOT = { has_global_flag = to_has_set_lakonian_culture_potential }
		}
		to_set_lakonian_culture_potential = yes
	}

	if = {
		limit = {
			NOT = { has_global_flag = to_new_exarch_systems }
		}
		set_global_flag = to_new_exarch_systems
		EEU = { change_country_color = { color = { 160 160 160 } } } # Megali Germania
		EEC = { change_country_color = { color = { 58 117 195 } } } # Scanza
		EEJ = { change_country_color = { color = { 255 205 80 } } } # Baltikos
		EEO = { change_country_color = { color = { 236 118 37 } } } # Syria
		4155 = { change_province_name = "North Carpathians" }
		5356 = { change_province_name = "South Carpathians" }
		5357 = { change_province_name = "Great Sand Sea" }
		5358 = { change_province_name = "Fezzan Desert" }
		5359 = { change_province_name = "North Sahara" }

		if = {
			limit = {
				EEV = {
					exists = yes
					is_subject_of_type = elysian_subject
				}
			}
			every_province = {
				limit = {
					OR = {
						area = slovakia_area
						area = lusatia_area
					}
					owner = {
						is_subject_of_type = elysian_subject
						NOT = { tag = EEV }
					}
				}
				owner = {
					save_event_target_as = to_non_exarch_target
				}
				to_cede_province_to_exarch = {
					CURRENT_OWNER = event_target:to_non_exarch_target
					NEW_OWNER = EEV
				}
			}
		}

		if = {
			limit = {
				EEJ = {
					exists = yes
					is_subject_of_type = elysian_subject
				}
			}
			every_province = {
				limit = {
					OR = {
						area = east_prussia_area
						area = west_prussia_area
					}
					owner = {
						is_subject_of_type = elysian_subject
						NOT = { tag = EEJ }
					}
				}
				owner = {
					save_event_target_as = to_non_exarch_target
				}
				to_cede_province_to_exarch = {
					CURRENT_OWNER = event_target:to_non_exarch_target
					NEW_OWNER = EEJ
				}
			}
		}

		if = {
			limit = {
				EEM = {
					exists = yes
					is_subject_of_type = elysian_subject
				}
			}
			every_province = {
				limit = {
					area = red_ruthenia_area
					owner = {
						is_subject_of_type = elysian_subject
						NOT = { tag = EEM }
					}
				}
				owner = {
					save_event_target_as = to_non_exarch_target
				}
				to_cede_province_to_exarch = {
					CURRENT_OWNER = event_target:to_non_exarch_target
					NEW_OWNER = EEM
				}
			}
		}

		if = {
			limit = {
				EES = {
					exists = yes
					is_subject_of_type = elysian_subject
				}
			}
			every_province = {
				limit = {
					OR = {
						area = tambov_area
						area = saratov_area
						area = samara_area
						area = kazan_area
						area = volga_area
						area = bashkiria_area
						area = lower_yik_area
						area = nogai_area
					}
					owner = {
						is_subject_of_type = elysian_subject
						NOT = { tag = EES }
					}
				}
				owner = {
					save_event_target_as = to_non_exarch_target
				}
				to_cede_province_to_exarch = {
					CURRENT_OWNER = event_target:to_non_exarch_target
					NEW_OWNER = EES
				}
			}
		}

		if = {
			limit = {
				EEA = {
					exists = yes
					is_subject_of_type = elysian_subject
				}
			}
			every_province = {
				limit = {
					OR = {
						area = erzurum_area
						area = armenia_area
					}
					owner = {
						is_subject_of_type = elysian_subject
						NOT = { tag = EEA }
					}
				}
				owner = {
					save_event_target_as = to_non_exarch_target
				}
				to_cede_province_to_exarch = {
					CURRENT_OWNER = event_target:to_non_exarch_target
					NEW_OWNER = EEA
				}
			}
		}

		if = {
			limit = {
				EEO = {
					exists = yes
					is_subject_of_type = elysian_subject
				}
			}
			every_province = {
				limit = {
					area = north_kurdistan_area
					owner = {
						is_subject_of_type = elysian_subject
						NOT = { tag = EEO }
					}
				}
				owner = {
					save_event_target_as = to_non_exarch_target
				}
				to_cede_province_to_exarch = {
					CURRENT_OWNER = event_target:to_non_exarch_target
					NEW_OWNER = EEO
				}
			}
		}

		if = {
			limit = {
				2474 = {
					owner = {
						tag = EEF
						is_subject_of_type = elysian_subject
					}
				}
			}
			2474 = {
				owner = {
					overlord = {
						save_event_target_as = to_non_exarch_target

					}
				}
				to_cede_province_to_exarch = {
					CURRENT_OWNER = EEF
					NEW_OWNER = event_target:to_non_exarch_target
				}
			}
		}

		if = {
			limit = {
				EEC = {
					exists = yes
					is_subject_of_type = elysian_subject
				}
			}
			every_province = {
				limit = {
					area = north_karelia
					owner = {
						is_subject_of_type = elysian_subject
						NOT = { tag = EEC }
					}
				}
				owner = {
					save_event_target_as = to_non_exarch_target
				}
				to_cede_province_to_exarch = {
					CURRENT_OWNER = event_target:to_non_exarch_target
					NEW_OWNER = EEC
				}
			}
		}

		every_country_including_inactive = {
			limit = {
				has_discovered = 1794
			}
			5359 = {
				discover_country = PREV
			}
		}

		every_country_including_inactive = {
			limit = {
				has_discovered = 1795
			}
			5357 = {
				discover_country = PREV
			}
			5358 = {
				discover_country = PREV
			}
		}

		every_country_including_inactive = {
			limit = {
				has_discovered = 4155
			}
			5356 = {
				discover_country = PREV
			}
		}

		every_country = {
			limit = {
				is_subject_of_type = elysian_subject
			}
			change_government = republic
			add_government_reform = to_exarch_reform
			every_owned_province = {
				limit = {
					PREV = {
						NOT = { accepted_culture = PREV }
					}
				}
				PREV = {
					add_accepted_culture = PREV
				}
			}
			every_owned_province = {
				to_handle_exarch_autonomy_modifier = yes
			}
			to_imperial_integration_country_check = yes
		}
	}

	if = {
		limit = {
			NOT = { has_global_flag = to_new_culture_integration_ui }
		}
		set_global_flag = to_new_culture_integration_ui
		every_province = {
			limit = {
				OR = {
					has_province_modifier = to_culture_assimilation_inactive
					has_province_modifier = to_tribal_integration_inactive
					has_province_modifier = to_culture_assimilation_roman_inactive
					has_province_modifier = to_culture_assimilation_norse_inactive
					has_province_modifier = to_culture_integration_inactive
					to_remove_culture_adaptation_modifiers = yes
				}
			}
			remove_province_modifier = to_culture_assimilation_inactive
			remove_province_modifier = to_tribal_integration_inactive
			remove_province_modifier = to_culture_assimilation_roman_inactive
			remove_province_modifier = to_culture_assimilation_norse_inactive
			remove_province_modifier = to_culture_integration_inactive
			to_remove_culture_adaptation_modifiers = yes
			
			set_variable = {
				which = to_assimilation_base_total
				value = 0
			}
			change_variable = {
				which = to_assimilation_base_total
				which = to_assimilation_base
			}
			change_variable = {
				which = to_assimilation_base_total
				which = to_assimilation_neighboring_provinces
			}
			set_province_flag = to_assimilation_active
		}
	}
}

to_count_provinces_in_region = {
	set_variable = {
		which = $REGION$_provinces
		value = 0
	}
	every_province = {
		limit = {
			region = $REGION$
		}
		ROOT = {
			change_variable = {
				which = $REGION$_provinces
				value = 1
			}
		}
	}
}