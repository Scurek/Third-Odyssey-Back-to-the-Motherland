namespace = nhs2_european_trade_events

###################################################
### ELYSIAN-EUROPEAN TRADE EVENTS
###################################################

# The Portuguese are livid!
country_event = {
	id = nhs2_european_trade_events.1
	title = nhs2_european_trade_events.1.t
	desc = nhs2_european_trade_events.1.d
	picture = ACCUSATION_eventPicture
	
	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		POR = {
			NOT = { has_country_flag = nhs_portugese_secret }
		}
		any_country = {
			technology_group = western
			exists = yes
		}
		has_global_flag = nhs_europe_discovered
	}

	option = {
		name = "nhs2_european_trade_events.1.a"
		POR = {
			add_opinion = {
				who = ROOT
				modifier = nhs_deception_por
			}
			add_trust = { who = ROOT value = -70 }
		}
		every_country = {
			limit = {
				NOT = { tag = POR }
				OR = {
					tag = FRA
					tag = ENG
					tag = GBR
					AND = {
						has_idea_group = exploration_ideas
						OR = {
							technology_group = western
							technology_group = eastern
						}
					}
				}
			}
			add_opinion = {
				who = ROOT
				modifier = nhs_deception
			}
			add_trust = { who = ROOT value = -20 }
		}
	}
}

# European Trade Ventures
country_event = {
	id = nhs2_european_trade_events.2
	title = nhs2_european_trade_events.2.t
	desc = nhs2_european_trade_events.2.d
	picture = ELYSHIP_eventPicture
	
	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		NOT = { has_country_modifier = nhs2_ely_por_trade }
		had_global_flag = { flag = nhs_europe_discovered days = 1825 }
		NOT = { has_country_modifier = nhs2_elysian_restricted_trade }
		NOT = { has_country_modifier = nhs2_elysian_free_trade }
		NOT = { has_country_modifier = nhs2_elysian_isolationism }
		# OR = {
		# 	NOT = { has_country_modifier = nhs2_elysian_isolationism }
		# 	AND = {
		# 		has_country_modifier = nhs2_elysian_isolationism
		# 		NOT = { has_global_flag = nhs_no_more_deals }
		# 	}
		# }
		any_country = {
			technology_group = western
			exists = yes
		}
		any_owned_province = {
			has_port = yes
			culture_group = ROOT
			OR = {
				region = northeast_america_region
				region = southeast_america_region
				AND = {
					region = canada_region
					NOT = { 
						province_group = nhs_provinces_around_lakes
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		years = 1
   	}

	option = {
		name = "nhs2_european_trade_events.2.a"
		ai_chance = {
			factor = 60
			modifier = {
				factor = 2
				ruler_has_personality = scholar_personality
			}
		}
		custom_tooltip = nhs_institution_spread_enclave_eu_tt
		custom_tooltip = nhs_new_line_tt
		set_country_flag = nhs_has_eu_enclave
		add_mercantilism = 5
		add_country_modifier = {
			name = nhs2_elysian_restricted_trade
			duration = -1
		}
		nhs_reduce_skoros_silk_price = yes
		to_nhs_spawn_enclave = { ENCLAVE_MODIFIER = nhs2_european_enclave }
	}
	option = {
		name = "nhs2_european_trade_events.2.b"
		ai_chance = {
			factor = 20
			modifier = {
				factor = 4
				ruler_has_personality = entrepreneur_personality
			}
			modifier = {
				factor = 2
				ruler_has_personality = scholar_personality
			}
			modifier = {
				factor = 0.5
				ruler_has_personality = zealot_personality
			}
		}
		custom_tooltip = nhs_institution_spread_enclave_free_tt
		custom_tooltip = nhs_new_line_tt
		add_mercantilism = -50
		add_country_modifier = {
			name = nhs2_elysian_free_trade
			duration = -1
		}
		set_global_flag = nhs_skoros_silk_falls
		nhs_reduce_skoros_silk_price = yes
	}
	option = {
		name = "nhs2_european_trade_events.2.c"
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				ruler_has_personality = entrepreneur_personality
			}
			modifier = {
				factor = 2
				ruler_has_personality = zealot_personality
			}
		}
		add_mercantilism = 50
		add_country_modifier = {
			name = nhs2_elysian_isolationism
			duration = -1
		}
		nhs_increase_skoros_silk_price = yes
	}
}

# Lost Enclave event for european
country_event = {
	id = nhs2_european_trade_events.3
	title = nhs2_european_trade_events.3.t
	desc = nhs2_european_trade_events.3.d
	picture = SIEGE_eventPicture

	trigger = {
		OR = {
			has_country_flag = nhs_has_eu_enclave
			has_country_modifier = nhs2_elysian_restricted_trade
		}
		NOT = { has_country_flag = nhs_enclave_pending }
		NOT = {
			any_owned_province = {
				has_province_modifier = nhs2_european_enclave
			}
		}
		any_owned_province = {
			has_port = yes
			culture_group = ROOT
			OR = {
				region = northeast_america_region
				region = southeast_america_region
				AND = {
					region = canada_region
					NOT = {
						province_group = nhs_provinces_around_lakes
					}
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			set_country_flag = nhs_has_eu_enclave
		}
	}

	option = {
		name = "nhs2_european_trade_events.3.a"
		ai_chance = {
			factor = 100
		}
		hidden_effect = {
			every_province = {
				limit = {
					has_province_modifier = nhs2_european_enclave
				}
				remove_province_modifier = nhs2_european_enclave
			}
		}
		if = {
			limit = {
				NOT = { has_country_modifier = nhs2_elysian_restricted_trade }
			}
			add_country_modifier = {
				name = nhs2_elysian_restricted_trade
				duration = -1
			}
		}
		to_nhs_spawn_enclave = { ENCLAVE_MODIFIER = nhs2_european_enclave }
	}
	option = {
		name = "nhs2_european_trade_events.3.b"
		remove_country_modifier = nhs2_elysian_restricted_trade
		ai_chance = {
			factor = 0
		}
		clr_country_flag = nhs_has_eu_enclave
		add_mercantilism = -50
		add_country_modifier = {
			name = nhs2_elysian_free_trade
			duration = -1
		}
		hidden_effect = {
			every_province = {
				limit = {
					has_province_modifier = nhs2_european_enclave
				}
				remove_province_modifier = nhs2_european_enclave
			}
		}
	}
	option = {
		name = "nhs2_european_trade_events.3.c"
		clr_country_flag = nhs_has_eu_enclave
		ai_chance = {
			factor = 0
		}
		add_mercantilism = 50
		remove_country_modifier = nhs2_elysian_restricted_trade
		add_country_modifier = {
			name = nhs2_elysian_isolationism
			duration = -1
		}
		nhs_increase_skoros_silk_price = yes
		hidden_effect = {
			every_province = {
				limit = {
					has_province_modifier = nhs2_european_enclave
				}
				remove_province_modifier = nhs2_european_enclave
			}
		}
	}
}

#The last Sighting of the Byzantines is in original 01_nhs_others file

# Byzantines discovered!
country_event = {
	id = nhs2_european_trade_events.4
	title = nhs2_european_trade_events.4.t
	desc = nhs2_european_trade_events.4.d
	picture = SHIP_SAILING_eventPicture
	
	fire_only_once = yes

	trigger = {
		# tag = POR
		has_country_flag = nhs_portugese_secret
		nhs_condition_all_ely = { KOMANDA = exists }
		is_year = 1485
		any_province = {
			nhs_condition_all_ely = { KOMANDA = owned_by }
			has_port = yes
			owner = {
				culture_group = PREV
			}
			OR = {
				region = northeast_america_region
				region = southeast_america_region
				AND = {
					region = canada_region
					NOT = { 
						province_group = nhs_provinces_around_lakes
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 0.5
			is_year = 1490
		}
		modifier = {
			factor = 0.5
			is_year = 1492
		}
		modifier = {
			factor = 0.5
			is_year = 1495
		}
		modifier = {
			factor = 0.5
			is_year = 1497
		}
		modifier = {
			factor = 0.1
			is_year = 1500
		}
		modifier = {
			factor = 0.001
			is_year = 1501
		}
		modifier = {
			factor = 0.001
			any_province = {
				nhs_condition_all_ely = { KOMANDA = owned_by }
				has_discovered = ROOT
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			nhs_make_event_target_elysia = yes
			save_global_event_target_as = to_nhs_elysian_trading_partner
		}
	}

	option = {
		name = "nhs2_european_trade_events.4.a"
		set_global_flag = nhs_portugal_discovers_ely
		random_province = {
			limit = {
				owner = {
					nhs_condition_all_ely = { KOMANDA = tag }
				}
				is_capital = yes
			}
			discover_country = ROOT
		}
		event_target:existing_elysia = {
			reverse_add_opinion = {
				who = ROOT
				modifier = nhs_secret_ally
			}
		}
	}
}



# Portuguese Explorers Arrive
country_event = {
	id = nhs2_european_trade_events.5
	title = nhs2_european_trade_events.5.t
	desc = nhs2_european_trade_events.5.d
	picture = ELYSHIP_eventPicture

	fire_only_once = yes
	
	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		#exists = POR
		had_global_flag = { flag = nhs_portugal_discovers_ely days = 25 }
		any_country = {
			exists = yes
			has_country_flag = nhs_portugese_secret
		}
		any_owned_province = {
			has_port = yes
			culture_group = ROOT
			OR = {
				region = northeast_america_region
				region = southeast_america_region
				AND = {
					region = canada_region
					NOT = {
						province_group = nhs_provinces_around_lakes
					}
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			random_country = {
				limit = {
					has_country_flag = nhs_portugese_secret
				}
				save_event_target_as = nhs_portugal_tar
			}
		}
	}

	option = {
		name = "nhs2_european_trade_events.5.a" #Establish a Portuguese enclave, keeping them isolated from our people
		ai_chance = {
			factor = 70
			modifier = {
				factor = 3
				ruler_has_personality = entrepreneur_personality
			}
			modifier = {
				factor = 0.7
				ruler_has_personality = zealot_personality
			}
			modifier = {
				factor = 3
				ruler_has_personality = scholar_personality
			}
		}
		custom_tooltip = nhs_institution_spread_enclave_tt
		custom_tooltip = nhs_new_line_tt
		set_country_flag = nhs_has_small_por_enclave
		add_country_modifier = {
			name = nhs2_ely_por_trade
			duration = -1
		}
		nhs_reduce_skoros_silk_price = yes
		tooltip = {
			event_target:nhs_portugal_tar = {
				add_country_modifier = {
					name = nhs2_por_ely_trade
					duration = -1
				}
			}
		}
		event_target:nhs_portugal_tar = {
			add_opinion = {
				who = ROOT
				modifier = nhs_por_trade_deal
			}
		}
		add_opinion = {
			who = event_target:nhs_portugal_tar
			modifier = nhs_por_trade_deal
		}
		tooltip = {
			event_target:nhs_portugal_tar = { add_trust = { who = ROOT value = 50 } }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_spawn_enclave = { ENCLAVE_MODIFIER = nhs2_small_por_enclave }
		hidden_effect = {
			random_province = {
				limit = {
					owned_by = event_target:nhs_portugal_tar
					is_capital = yes
				}
				discover_country = event_target:nhs_portugal_tar
			}
		}
		event_target:nhs_portugal_tar = { country_event = { id = nhs2_european_trade_events.6 } }
		custom_tooltip = nhs_repeal_portuguese_deal_decision_tt
	}
	option = {
		name = "nhs2_european_trade_events.5.b"
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.1
				ruler_has_personality = entrepreneur_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = zealot_personality
			}
		}
		# set_global_flag = nhs_broke_deals_with_por
		add_prestige = 20
		add_mercantilism = 5
		event_target:nhs_portugal_tar = {
			add_opinion = {
				who = ROOT
				modifier = nhs_refused_trade_deal
			}	
		}
		custom_tooltip = nhs_new_line_tt
		event_target:nhs_portugal_tar = {
			country_event = { id = nhs2_european_trade_events.7 }
		}
	}
	option = {
		name = "nhs2_european_trade_events.5.c"
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				ruler_has_personality = entrepreneur_personality
			}
			modifier = {
				factor = 2
				ruler_has_personality = malevolent_personality
			}
		}
		# set_global_flag = nhs_broke_deals_with_por
		add_prestige = -10
		add_mercantilism = 5
		if = {
			limit = {
				event_target:nhs_portugal_tar = {
					num_of_explorers = 1
				}
			}
			kill_leader = {
				type = explorer
			}
		}
		else_if = {
			limit = {
				event_target:nhs_portugal_tar = {
					num_of_admirals = 1
				}
			}
			kill_leader = {
				type = admiral
			}
		}
		event_target:nhs_portugal_tar = {
			add_opinion = {
				who = ROOT
				modifier = nhs_you_done_f_up
			}
		}
		# custom_tooltip = to_por_retaliation_claims_on_east_coast
		tooltip = {
			event_target:nhs_portugal_tar = { add_trust = { who = ROOT value = -100 } }
		}
		custom_tooltip = nhs_new_line_tt
		tooltip = {
			every_owned_province = {
				limit = {
					has_port = yes
					OR = {
						region = northeast_america_region
						region = southeast_america_region
					}
				}
				add_permanent_claim = event_target:nhs_portugal_tar
			}
		}
		custom_tooltip = nhs_new_line_tt
		event_target:nhs_portugal_tar = { country_event = { id = nhs2_european_trade_events.8 } }
	}
}

# Elysians Accept Proposal
country_event = {
	id = nhs2_european_trade_events.6
	title = nhs2_european_trade_events.6.t
	desc = nhs2_european_trade_events.6.d
	picture = TRADEGOODS_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = "nhs2_european_trade_events.6.a"
		add_country_modifier = {
			name = nhs2_por_ely_trade
			duration = -1
		}
		tooltip = {
			FROM = {
				add_country_modifier = {
					name = nhs2_ely_por_trade
					duration = -1
				}
			}
			reverse_add_opinion = {
				who = FROM
				modifier = nhs_por_trade_deal
			}
			add_opinion = {
				who = FROM
				modifier = nhs_por_trade_deal
			}
		}
		add_trust = { who = FROM value = 50 }
		hidden_effect = {
			if = {
				limit = {
					FROM = {
						religion = pantheon_worship
					}
				}
				country_event = { id = nhs2_european_trade_events.16 days = 3 }
			}
			if = {
				limit = {
					FROM = {
						religion = elysian_orthodoxy
					}
				}
				country_event = { id = nhs2_european_trade_events.17 days = 3 }
			}
		}
	}
}

# Elysians Reject Proposal
country_event = {
	id = nhs2_european_trade_events.7
	title = nhs2_european_trade_events.7.t
	desc = nhs2_european_trade_events.7.d
	picture = ACCUSATION_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = "nhs2_european_trade_events.7.a"
		tooltip = {
			add_opinion = {
				who = FROM
				modifier = nhs_refused_trade_deal
			}
		}
		hidden_effect = {
			if = {
				limit = {
					FROM = {
						religion = pantheon_worship
					}
				}
				country_event = { id = nhs2_european_trade_events.16 days = 3 }
			}
			if = {
				limit = {
					FROM = {
						religion = elysian_orthodoxy
					}
				}
				country_event = { id = nhs2_european_trade_events.17 days = 3 }
			}
		}
	}
}

# Expedition Missing
country_event = {
	id = nhs2_european_trade_events.8
	title = nhs2_european_trade_events.8.t
	desc = nhs2_european_trade_events.8.d
	picture = BYZNAVAL_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = "nhs2_european_trade_events.8.a"
		tooltip = {
			add_opinion = {
				who = FROM
				modifier = nhs_you_done_f_up
			}
		}
		add_trust = { who = FROM value = -100 }
		every_province = {
			limit = {
				has_port = yes
				OR = {
					region = northeast_america_region
					region = southeast_america_region
				}
				owned_by = FROM
			}
			add_permanent_claim = ROOT
		}
		hidden_effect = {
			if = {
				limit = {
					FROM = {
						religion = pantheon_worship
					}
				}
				country_event = { id = nhs2_european_trade_events.16 days = 3 }
			}
			if = {
				limit = {
					FROM = {
						religion = elysian_orthodoxy
					}
				}
				country_event = { id = nhs2_european_trade_events.17 days = 3 }
			}
		}
	}
}

# Treaty of Lantanopolis 
country_event = {
	id = nhs2_european_trade_events.9
	title = nhs2_european_trade_events.9.t
	desc = nhs2_european_trade_events.9.d
	picture = nhs_DIPLOMAT_INTERROGATION_eventPicture
	
	fire_only_once = yes

	trigger = {
		is_year = 1492
		has_country_modifier = nhs2_ely_por_trade
		nhs_condition_all_ely = { KOMANDA = tag }
		had_global_flag = { flag = nhs_portugal_discovers_ely days = 3650 }
		any_country = {
			exists = yes
			has_country_flag = nhs_portugese_secret
			has_country_modifier = nhs2_por_ely_trade
		}
		any_owned_province = {
			OR = {
				has_province_modifier = nhs2_small_por_enclave
				has_province_modifier = nhs2_large_por_enclave
			}
		}
	}

	immediate = {
		hidden_effect = {
			random_country = {
				limit = {
					has_country_flag = nhs_portugese_secret
				}
				save_event_target_as = nhs_portugal_tar
			}
		}
	}

	option = {
		name = "nhs2_european_trade_events.9.a"
		ai_chance = {
			factor = 80
			modifier = {
				factor = 1.5
				ruler_has_personality = expansionist_personality
			}
			modifier = {
				factor = 3
				ruler_has_personality = silver_tongue_personality
			}
			modifier = {
				factor = 3
				ruler_has_personality = charismatic_negotiator_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = navigator_personality
			}
		}
		custom_tooltip = nhs_treaty_of_lanthanopolis_tt
		tooltip = {
			event_target:nhs_portugal_tar = {
				add_country_modifier = {
					name = nhs2_treaty_of_lantanopolis_por
					duration = -1
				}
			}
			nhs_cede_elysian_brazilian_settlements = { RECIPIENT = event_target:nhs_portugal_tar }
		}
		if = {
			limit = {
				any_province = {
					continent = north_america
					OR = {
						owned_by = event_target:nhs_portugal_tar
						owner = {
							AND = {
								is_colonial_nation = yes
								colonial_parent = {
									tag = event_target:nhs_portugal_tar
								}
							}
						}
					}
				}
			}
			custom_tooltip = nhs_fate_of_p_settlements_tt #Current Portugese settlements will be relocated to SA
		}
		event_target:nhs_portugal_tar = { country_event = { id = nhs2_european_trade_events.10 } }
		if = {
			limit = {
				has_country_flag = nhs_has_small_por_enclave
			}
			custom_tooltip = nhs_new_line_tt
			custom_tooltip = nhs_dotted_line_tt
			nhs_improve_portuguese_enclave_from_small = yes
		}
	}
	option = {
		name = "nhs2_european_trade_events.9.b"
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				ruler_has_personality = expansionist_personality
			}
			modifier = {
				factor = 2
				ruler_has_personality = babbling_buffoon_personality
			}
			modifier = {
				factor = 2
				ruler_has_personality = loose_lips_personality
			}
			modifier = {
				factor = 2
				ruler_has_personality = naive_personality
			}
		}
		event_target:nhs_portugal_tar = {
			add_opinion = {
				who = ROOT
				modifier = nhs_unchecked_expansion
			}
		}
		event_target:nhs_portugal_tar = { add_trust = { who = ROOT value = 50 } }
		if = {
			limit = {
				has_country_flag = nhs_has_small_por_enclave
			}
			custom_tooltip = nhs_new_line_tt
			custom_tooltip = nhs_dotted_line_tt
			nhs_improve_portuguese_enclave_from_small = yes
		}
	}
	# option = {
	# 	name = "nhs2_european_trade_events.9.c"
	# 	ai_chance = {
	# 		factor = 20
	# 		modifier = {
	# 			factor = 2
	# 			ruler_has_personality = malevolent_personality
	# 		}
	# 		modifier = {
	# 			factor = 2
	# 			ruler_has_personality = babbling_buffoon_personality
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			ruler_has_personality = just_personality
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			ruler_has_personality = righteous_personality
	# 		}
	# 	}
	# 	custom_tooltip = nhs_attract_eu_merchants_tt
	# 	nhs_break_por_deal = yes
	# 	# hidden_effect = {
	# 	# 	event_target:nhs_portugal_tar = {
	# 	# 		discover_province = 1470
	# 	# 		discover_province = 1469
	# 	# 		discover_province = 1484
	# 	# 		discover_province = 1530
	# 	# 		discover_province = 1529
	# 	# 		discover_province = 1528
	# 	# 		discover_province = 747
	# 	# 		discover_province = 2890
	# 	# 		discover_province = 748
	# 	# 		discover_province = 2927
	# 	# 		discover_province = 2886
	# 	# 		discover_province = 751
	# 	# 		discover_province = 753	
	# 	# 	}
	# 	# }
	# }
}

# Colonial Capital
country_event = {
	id = nhs2_european_trade_events.10
	title = nhs2_european_trade_events.10.t

	desc = {
		trigger = {
			OR = {
				has_saved_event_target = colonial_capital_alternate_target
				747 = {
					is_empty = yes
				}
				748 = {
					is_empty = yes
				}
				749 = {
					is_empty = yes
				}
			}
		}
		desc = nhs2_european_trade_events.10.da #From both the sea and the east
	}
	desc = {
		trigger = {
			NOT = {
				OR = {
					has_saved_event_target = colonial_capital_alternate_target
					747 = {
						is_empty = yes
					}
					748 = {
						is_empty = yes
					}
					749 = {
						is_empty = yes
					}
				}
			}
		}
		desc = nhs2_european_trade_events.10.db #From the sea
	}

	picture = ELYEXPLORER_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			# Search for alternate province
			discover_province = 1470
			discover_province = 1469
			discover_province = 1096
			discover_province = 1584
			every_province = {
				limit = {
					has_port = yes
					OR = {
						area = amapa_area
						area = grao_para_area
						area = maranhao_area
						area = piaui_area
						area = ceara_area
					}
				}
				discover_country = ROOT
				sea_zone = {
					discover_country = ROOT
				}
			}

			random_province = {
				limit = {
					OR = {
						area = amapa_area
						area = grao_para_area
						area = maranhao_area
						area = piaui_area
						area = ceara_area
					}
					owner = {
						OR = {
							tag = ROOT
							AND = {
								is_colonial_nation = yes
								colonial_parent = {
									nhs_condition_all_ely = { KOMANDA = tag }
								}
							}
						}
					}
					any_empty_neighbor_province = {
						has_port = yes
					}
				}
				random_empty_neighbor_province = {
					limit = {
						has_port = yes
					}
					save_event_target_as = colonial_capital_alternate_target
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = colonial_capital_alternate_target }
				}
				random_province = {
					limit = {
						OR = {
							area = amapa_area
							area = grao_para_area
							area = maranhao_area
							area = piaui_area
							area = ceara_area
						}
						has_port = yes
						is_empty = yes
					}
					save_event_target_as = colonial_capital_alternate_target
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = colonial_capital_alternate_target }
				}
				random_province = {
					limit = {
						region = brazil_region
						owner = {
							OR = {
								tag = ROOT
								AND = {
									is_colonial_nation = yes
									colonial_parent = {
										nhs_condition_all_ely = { KOMANDA = tag }
									}
								}
							}
						}
						any_empty_neighbor_province = {
							has_port = yes
						}
					}
					random_empty_neighbor_province = {
						limit = {
							has_port = yes
						}
						save_event_target_as = colonial_capital_alternate_target
					}
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = colonial_capital_alternate_target }
				}
				random_province = {
					limit = {
						region = brazil_region
						owner = {
							OR = {
								tag = ROOT
								AND = {
									is_colonial_nation = yes
									colonial_parent = {
										nhs_condition_all_ely = { KOMANDA = tag }
									}
								}
							}
						}
						has_empty_adjacent_province = yes
					}
					random_empty_neighbor_province = {
						save_event_target_as = colonial_capital_alternate_target
					}
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = colonial_capital_alternate_target }
				}
				random_province = {
					limit = {
						region = brazil_region
						is_empty = yes
						has_port = yes
					}
					save_event_target_as = colonial_capital_alternate_target
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = colonial_capital_alternate_target }
				}
				random_province = {
					limit = {
						continent = south_america
						region = colombia_region
						sea_zone = {
							region = caribbean_sea_region
						}
						owner = {
							OR = {
								tag = ROOT
								AND = {
									is_colonial_nation = yes
									colonial_parent = {
										nhs_condition_all_ely = { KOMANDA = tag }
									}
								}
							}
						}
						any_empty_neighbor_province = {
							has_port = yes
						}
					}
					random_empty_neighbor_province = {
						limit = {
							has_port = yes
						}
						save_event_target_as = colonial_capital_alternate_target
					}
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = colonial_capital_alternate_target }
				}
				random_province = {
					limit = {
						continent = south_america
						region = colombia_region
						sea_zone = {
							region = caribbean_sea_region
						}
						owner = {
							OR = {
								tag = ROOT
								AND = {
									is_colonial_nation = yes
									colonial_parent = {
										nhs_condition_all_ely = { KOMANDA = tag }
									}
								}
							}
						}
						has_empty_adjacent_province = yes
					}
					random_empty_neighbor_province = {
						save_event_target_as = colonial_capital_alternate_target
					}
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = colonial_capital_alternate_target }
				}
				random_province = {
					limit = {
						continent = south_america
						region = colombia_region
						sea_zone = {
							region = caribbean_sea_region
						}
						is_empty = yes
						has_port = yes
					}
					save_event_target_as = colonial_capital_alternate_target
				}
			}

			if = {
				limit = {
					has_saved_event_target = colonial_capital_alternate_target
					event_target:colonial_capital_alternate_target = {
						OR = {
							region = brazil_region
							region = colombia_region
						}
					}
				}
				every_province = {
					limit = {
						region = brazil_region
						has_port = yes
					}
					discover_country = ROOT
					sea_zone = {
						discover_country = ROOT
					}
				}
			}
			if = {
				limit = {
					has_saved_event_target = colonial_capital_alternate_target
					event_target:colonial_capital_alternate_target = {
						region = colombia_region
						NOT = {
							any_neighbor_province = {
								region = brazil_region
								has_port = yes
							}
						}
					}
				}
				every_province = {
					limit = {
						region = colombia_region
						continent = south_america
						has_port = yes
						sea_zone = {
							region = caribbean_sea_region
						}
					}
					discover_country = ROOT
					sea_zone = {
						discover_country = ROOT
					}
				}
			}
		}
	}

	option = {
		name = "nhs2_european_trade_events.10.a"
		goto = 747
		trigger = {
			747 = {
				is_empty = yes
				# OR = {
				# 	is_empty = yes
				# 	owner = {
				# 		technology_group = south_american
				# 	}
				# }
			}
		}
		ai_chance = {
			factor = 33
			modifier = {
				factor = 0.1
				747 = {
					is_empty = no
				}
			}
		}
		
		nhs_set_por_colonial_capital = { TARGET_PROVINCE = 747 }
		hidden_effect = {
			nhs_discover_treaty_provinces_ely = yes
		}
	}
	option = {
		name = "nhs2_european_trade_events.10.b"
		goto = 748
		trigger = {
			748 = {
				is_empty = yes
				# OR = {
				# 	is_empty = yes
				# 	owner = {
				# 		technology_group = south_american
				# 	}
				# }
			}
		}
		ai_chance = {
			factor = 33
			modifier = {
				factor = 0.1
				748 = {
					is_empty = no
				}
			}
		}
		
		nhs_set_por_colonial_capital = { TARGET_PROVINCE = 748 }
		hidden_effect = {
			nhs_discover_treaty_provinces_ely = yes
		}
	}
	option = {
		name = "nhs2_european_trade_events.10.c"
		goto = 749
		trigger = {
			749 = {
				is_empty = yes
				# OR = {
				# 	is_empty = yes
				# 	owner = {
				# 		technology_group = south_american
				# 	}
				# }
			}
		}
		ai_chance = {
			factor = 33
			modifier = {
				factor = 0.1
				749 = {
					is_empty = no
				}
			}
		}

		nhs_set_por_colonial_capital = { TARGET_PROVINCE = 749 }
		hidden_effect = {
			nhs_discover_treaty_provinces_ely = yes
		}
	}

	option = {
		name = "nhs2_european_trade_events.10.f"
		goto = colonial_capital_alternate_target
		trigger = {
			has_saved_event_target = colonial_capital_alternate_target
			NOT = {
				747 = {
					is_empty = yes
				}
			}
			NOT = {
				748 = {
					is_empty = yes
				}
			}
			NOT = {
				749 = {
					is_empty = yes
				}
			}
		}
		ai_chance = {
			factor = 33
		}

		nhs_set_por_colonial_capital = { TARGET_PROVINCE = event_target:colonial_capital_alternate_target }
		hidden_effect = {
			nhs_discover_treaty_provinces_ely = yes
		}
	}

	option = {
		name = "nhs2_european_trade_events.10.g"
		trigger = {
			NOT = { has_saved_event_target = colonial_capital_alternate_target }
			NOT = {
				747 = {
					is_empty = yes
				}
			}
			NOT = {
				748 = {
					is_empty = yes
				}
			}
			NOT = {
				749 = {
					is_empty = yes
				}
			}
		}
		ai_chance = {
			factor = 33
		}
		hidden_effect = {
			nhs_discover_treaty_provinces_ely = yes
		}
	}

	option = {
		name = "nhs2_european_trade_events.10.e"
		ai_chance = {
			factor = 0
		}
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = nhs_dissapointed
			}
		}
	}
}

# Portuguese Accept Treaty
country_event = {
	id = nhs2_european_trade_events.18
	title = nhs2_european_trade_events.18.t
	desc = nhs2_european_trade_events.18.d
	picture = BURGHER_ESTATE_eventPicture
	
	is_triggered_only = yes

	option = {
		name = nhs2_european_trade_events.18.a
	}
}

# Portuguese Refuse Treaty
country_event = {
	id = nhs2_european_trade_events.19
	title = nhs2_european_trade_events.19.t
	desc = nhs2_european_trade_events.19.d
	picture = nhs_MERCHANTS_ARGUING_eventPicture
	
	is_triggered_only = yes

	option = {
		name = nhs2_european_trade_events.19.a
		tooltip = {
			add_opinion = {
				who = FROM
				modifier = nhs_dissapointed
			}
		}
	}
}

# European Trade Expands
country_event = {
	id = nhs2_european_trade_events.11
	title = nhs2_european_trade_events.11.t
	desc = nhs2_european_trade_events.11.d
	picture = ELYSIAN_HARBOUR_eventPicture
	
	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_modifier = nhs2_ely_por_trade
		had_global_flag = { flag = nhs_europe_discovered days = 1825 }
		had_global_flag = { flag = nhs_portugal_discovers_ely days = 3650 }
		# NOT = { has_global_flag = nhs_broke_deals_with_por }
		NOT = { has_country_modifier = nhs2_elysian_restricted_trade }
		NOT = { has_country_modifier = nhs2_elysian_free_trade }
		NOT = { has_country_modifier = nhs2_elysian_isolationism }
		any_country = {
			exists = yes
			has_country_flag = nhs_portugese_secret
			has_country_modifier = nhs2_por_ely_trade
		}
		any_owned_province = {
			OR = {
				has_province_modifier = nhs2_por_enclave
				has_province_modifier = nhs2_small_por_enclave
			}
		}
	}

	immediate = {
		hidden_effect = {
			random_country = {
				limit = {
					has_country_flag = nhs_portugese_secret
				}
				save_event_target_as = nhs_portugal_tar
			}
		}
	}

	option = {
		name = "nhs2_european_trade_events.11.a"
		ai_chance = {
			factor = 50
		}
		clr_country_flag = nhs_has_por_enclave
		clr_country_flag = nhs_has_small_por_enclave
		set_country_flag = nhs_has_large_por_enclave
		add_dip_power = 50
		# add_prestige = 10
		add_legitimacy = 5
		event_target:nhs_portugal_tar = {
			add_opinion = {
				who = ROOT
				modifier = nhs_upheld_trade
			}
		}
		add_trust = { who = event_target:nhs_portugal_tar value = 100 }
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_institution_spread_enclave_increased_tt
		tooltip = {
			random_owned_province = {
				limit = {
					OR = {
						has_province_modifier = nhs2_por_enclave
						has_province_modifier = nhs2_small_por_enclave
					}
				}
				if = {
					limit = {
						has_province_modifier = nhs2_por_enclave
					}
					remove_province_modifier = nhs2_por_enclave
				}
				if = {
					limit = {
						has_province_modifier = nhs2_small_por_enclave
					}
					remove_province_modifier = nhs2_small_por_enclave
				}
				add_province_modifier = {
					name = nhs2_large_por_enclave
					duration = -1
				}
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					has_province_modifier = nhs2_por_enclave
					has_province_modifier = nhs2_small_por_enclave
				}
			}
			hidden_effect = {
				if = {
					limit = {
						has_province_modifier = nhs2_por_enclave
					}
					remove_province_modifier = nhs2_por_enclave
				}
				if = {
					limit = {
						has_province_modifier = nhs2_small_por_enclave
					}
					remove_province_modifier = nhs2_small_por_enclave
				}
				add_province_modifier = {
					name = nhs2_large_por_enclave
					duration = -1
				}
			}
			nhs_set_center_of_trade_2 = yes
		}
	}
	option = {
		name = "nhs2_european_trade_events.11.b"
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0
				ruler_has_personality = just_personality
			}
			modifier = {
				factor = 0
				ruler_has_personality = righteous_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = entrepreneur_personality
			}
		}
		custom_tooltip = nhs_institution_spread_enclave_eu_change_tt
		custom_tooltip = nhs_new_line_tt
		add_dip_power = 25
		# add_prestige = 5
		set_country_flag = nhs_has_eu_enclave
		add_country_modifier = {
			name = nhs2_elysian_restricted_trade
			duration = -1
		}
		nhs_break_por_deal = {}
		custom_tooltip = nhs_new_line_tt
		tooltip = {
			random_owned_province = {
				limit = {
					OR = {
						has_province_modifier = nhs2_por_enclave
						has_province_modifier = nhs2_small_por_enclave
					}
				}
				if = {
					limit = {
						has_province_modifier = nhs2_por_enclave
					}
					remove_province_modifier = nhs2_por_enclave
				}
				if = {
					limit = {
						has_province_modifier = nhs2_small_por_enclave
					}
					remove_province_modifier = nhs2_small_por_enclave
				}
				add_province_modifier = {
					name = nhs2_european_enclave
					duration = -1
				}
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					has_province_modifier = nhs2_por_enclave
					has_province_modifier = nhs2_small_por_enclave
				}
			}
			hidden_effect = {
				if = {
					limit = {
						has_province_modifier = nhs2_por_enclave
					}
					remove_province_modifier = nhs2_por_enclave
				}
				if = {
					limit = {
						has_province_modifier = nhs2_small_por_enclave
					}
					remove_province_modifier = nhs2_small_por_enclave
				}
				add_province_modifier = {
					name = nhs2_european_enclave
					duration = -1
				}
			}
			nhs_set_center_of_trade_2 = yes
		}
	}
	option = {
		name = "nhs2_european_trade_events.11.c"
		ai_chance = {
			factor = 15
			modifier = {
				factor = 0
				ruler_has_personality = just_personality
			}
			modifier = {
				factor = 0
				ruler_has_personality = righteous_personality
			}
			modifier = {
				factor = 2.5
				ruler_has_personality = entrepreneur_personality
			}
			modifier = {
				factor = 3
				ruler_has_personality = scholar_personality
			}
			modifier = {
				factor = 2
				ruler_has_personality = free_thinker_personality
			}
		}
		custom_tooltip = nhs_institution_spread_enclave_free_change_tt
		custom_tooltip = nhs_new_line_tt
		clr_country_flag = nhs_has_small_por_enclave
		clr_country_flag = nhs_has_por_enclave
		# set_global_flag = nhs_broke_deals_with_por
		# remove_country_modifier = nhs2_ely_por_trade
		add_dip_power = 25
		add_mercantilism = -50
		add_country_modifier = {
			name = nhs2_elysian_free_trade
			duration = -1
		}
		nhs_break_por_deal = {}
		# POR = {
		# 	remove_country_modifier = nhs2_por_ely_trade
		# 	add_trust = { who = ROOT value = -40 }
		# 	add_opinion = {
		# 		who = ROOT
		# 		modifier = nhs_broke_the_deals
		# 	}
		# 	remove_opinion = {
		# 		who = ROOT
		# 		modifier = nhs2_por_ely_trade
		# 	}
		# }
		tooltip = {
			random_owned_province = {
				limit = {
					OR = {
						has_province_modifier = nhs2_por_enclave
						has_province_modifier = nhs2_small_por_enclave
					}
				}
				if = {
					limit = {
						has_province_modifier = nhs2_por_enclave
					}
					remove_province_modifier = nhs2_por_enclave
				}
				if = {
					limit = {
						has_province_modifier = nhs2_small_por_enclave
					}
					remove_province_modifier = nhs2_small_por_enclave
				}
			}
		}
		custom_tooltip = nhs_new_line_tt
		random_owned_province = {
			limit = {
				OR = {
					has_province_modifier = nhs2_por_enclave
					has_province_modifier = nhs2_small_por_enclave
				}
			}
			hidden_effect = {
				if = {
					limit = {
						has_province_modifier = nhs2_por_enclave
					}
					remove_province_modifier = nhs2_por_enclave
				}
				if = {
					limit = {
						has_province_modifier = nhs2_small_por_enclave
					}
					remove_province_modifier = nhs2_small_por_enclave
				}
			}
			nhs_set_center_of_trade_2 = yes
		}
		
	}
	
	option = {
		name = "nhs2_european_trade_events.11.e"
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				ruler_has_personality = just_personality
			}
			modifier = {
				factor = 0
				ruler_has_personality = righteous_personality
			}
			modifier = {
				factor = 3
				ruler_has_personality = babbling_buffoon_personality
			}
			modifier = {
				factor = 3
				ruler_has_personality = malevolent_personality
			}
		}
		add_mercantilism = 50
		add_country_modifier = {
			name = nhs2_elysian_isolationism
			duration = -1
		}
		# set_global_flag = nhs_no_more_deals
		nhs_increase_skoros_silk_price = yes
		nhs_break_por_deal = { REMOVE_ENCLAVES = yes }
	}
}

# Lost Enclave event for portugese
country_event = {
	id = nhs2_european_trade_events.12
	title = nhs2_european_trade_events.12.t
	desc = nhs2_european_trade_events.12.d
	picture = SIEGE_eventPicture

	trigger = {
		NOT = { has_country_flag = nhs_enclave_pending }
		OR = {
			AND = {
				has_country_flag = nhs_has_small_por_enclave
				NOT = {
					any_owned_province = {
						has_province_modifier = nhs2_small_por_enclave
					}
				}
			}
			AND = {
				has_country_flag = nhs_has_por_enclave
				NOT = {
					any_owned_province = {
						has_province_modifier = nhs2_por_enclave
					}
				}
			}
			AND = {
				has_country_flag = nhs_has_large_por_enclave
				NOT = {
					any_owned_province = {
						has_province_modifier = nhs2_large_por_enclave
					}
				}
			}
		}
		any_owned_province = {
			has_port = yes
			culture_group = ROOT
			OR = {
				region = northeast_america_region
				region = southeast_america_region
				AND = {
					region = canada_region
					NOT = {
						province_group = nhs_provinces_around_lakes
					}
				}
			}
		}
	}

	option = {
		name = "nhs2_european_trade_events.12.a"
		ai_chance = {
			factor = 100
		}
		hidden_effect = {
			every_province = {
				limit = {
					has_province_modifier = nhs2_small_por_enclave
				}
				remove_province_modifier = nhs2_small_por_enclave
			}
			every_province = {
				limit = {
					has_province_modifier = nhs2_por_enclave
				}
				remove_province_modifier = nhs2_por_enclave
			}
			every_province = {
				limit = {
					has_province_modifier = nhs2_large_por_enclave
				}
				remove_province_modifier = nhs2_large_por_enclave
			}
		}
		if = {
			limit = {
				any_owned_province = {
					nhs_eligible_for_enclave = yes
					culture_group = ROOT
					NOT = { nhs_homelands = yes }
				}
			}
			random_owned_province = {
				limit = {
					nhs_eligible_for_enclave = yes
					culture_group = ROOT
					NOT = { nhs_homelands = yes }
				}
				nhs_add_proper_enclave = yes
			}
			
		}
		else_if = {
			limit = {
				any_owned_province = {
					nhs_eligible_for_enclave = yes
					culture_group = ROOT
				}
			}
			random_owned_province = {
				limit = {
					nhs_eligible_for_enclave = yes
					culture_group = ROOT
				}
				if = {
					limit = {
						nhs_homelands = yes
					}
					custom_tooltip = nhs_temporary_enclave_tt
				}
				nhs_add_proper_enclave = yes
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					nhs_eligible_for_enclave_with_canada = yes
				}
			}
			random_owned_province = {
				limit = {
					nhs_eligible_for_enclave_with_canada = yes
				}
				if = {
					limit = {
						OR = {
							nhs_homelands = yes
							has_albanian_majority_modifier = yes
						}
					}
					custom_tooltip = nhs_temporary_enclave_tt
				}
				nhs_add_proper_enclave = yes
			}
		}
		else = {
			custom_tooltip = nhs_will_get_enclave_later_tt
			set_country_flag = nhs_enclave_pending
		}
	}
	# option = {
	# 	name = "nhs2_european_trade_events.12.b"
	# 	ai_chance = {
	# 		factor = 0
	# 	}
	# 	custom_tooltip = nhs_attract_eu_merchants_tt
	# 	nhs_break_por_deal = yes
	# }
}

# Fall of Portugal
country_event = {
	id = nhs2_european_trade_events.13
	title = nhs2_european_trade_events.13.t
	desc = nhs2_european_trade_events.13.d
	picture = BAD_WITH_MONARCH_eventPicture
	
	trigger = {
		has_country_modifier = nhs2_ely_por_trade
		NOT = {
			any_country = {
				exists = yes
				has_country_modifier = nhs2_por_ely_trade
				# has_country_flag = nhs_portugese_secret
			}
		}
	}

	option = {
		name = "nhs2_european_trade_events.13.a"
		custom_tooltip = nhs_attract_eu_merchants_tt

		nhs_break_por_deal = { REMOVE_ENCLAVES = yes }
		# clr_country_flag = nhs_has_por_enclave
		# clr_country_flag = nhs_has_large_por_enclave
		# clr_country_flag = nhs_has_small_por_enclave
		# clr_global_flag = nhs_treaty_of_lantanopolis
		# # set_global_flag = nhs_broke_deals_with_por
		# remove_country_modifier = nhs2_ely_por_trade
		# hidden_effect = {
		# 	random_country = {
		# 		limit = {
		# 			has_country_flag = nhs_portugese_secret
		# 		}
		# 		if = {
		# 			limit = {
		# 				has_country_modifier = nhs2_treaty_of_lantanopolis_por
		# 			}
		# 			remove_country_modifier = nhs2_treaty_of_lantanopolis_por
		# 		}
		# 		remove_country_modifier = nhs2_por_ely_trade
		# 	}
		# }
		# if = {
		# 	limit = {
		# 		any_province = {
		# 			has_province_modifier = nhs2_small_por_enclave
		# 		}
		# 	}
		# 	every_province = {
		# 		limit = {
		# 			has_province_modifier = nhs2_small_por_enclave
		# 		}
		# 		remove_province_modifier = nhs2_small_por_enclave
		# 	}
		# }
		# if = {
		# 	limit = {
		# 		any_province = {
		# 			has_province_modifier = nhs2_por_enclave
		# 		}
		# 	}
		# 	every_province = {
		# 		limit = {
		# 			has_province_modifier = nhs2_por_enclave
		# 		}
		# 		remove_province_modifier = nhs2_por_enclave
		# 	}
		# }
		# if = {
		# 	limit = {
		# 		any_province = {
		# 			has_province_modifier = nhs2_large_por_enclave
		# 		}
		# 	}
		# 	every_province = {
		# 		limit = {
		# 			has_province_modifier = nhs2_large_por_enclave
		# 		}
		# 		remove_province_modifier = nhs2_large_por_enclave
		# 	}
		# }
	}
}

# War with Portugal
country_event = {
	id = nhs2_european_trade_events.14
	title = nhs2_european_trade_events.14.t
	desc = nhs2_european_trade_events.14.d
	picture = BATTLE_eventPicture
	
	trigger = {
		has_country_modifier = nhs2_ely_por_trade
		any_country = {
			has_country_modifier = nhs2_por_ely_trade
			OR = {
				is_in_war = {
					attacker_leader = ROOT
					defender_leader = THIS
				}
				is_in_war = {
					attacker_leader = THIS
					defender_leader = ROOT
				}
			}
		}
	}

	option = {
		name = "nhs2_european_trade_events.14.a"
		custom_tooltip = nhs_attract_eu_merchants_tt

		nhs_break_por_deal = { REMOVE_ENCLAVES = yes }
		# clr_country_flag = nhs_has_por_enclave
		# clr_country_flag = nhs_has_large_por_enclave
		# clr_country_flag = nhs_has_small_por_enclave
		# clr_global_flag = nhs_treaty_of_lantanopolis
		# set_global_flag = nhs_broke_deals_with_por
		# remove_country_modifier = nhs2_ely_por_trade
		# add_opinion = {
		# 	who = POR
		# 	modifier = nhs_broke_the_deals
		# }
		# remove_opinion = {
		# 	who = POR
		# 	modifier = nhs_por_trade_deal
		# }
		# POR = {
		# 	if = {
		# 		limit = {
		# 			has_country_modifier = nhs2_treaty_of_lantanopolis_por
		# 		}
		# 		remove_country_modifier = nhs2_treaty_of_lantanopolis_por
		# 	}
		# 	remove_country_modifier = nhs2_por_ely_trade
		# 	add_trust = { who = ROOT value = -40 mutual = yes }
		# 	add_opinion = {
		# 		who = ROOT
		# 		modifier = nhs_broke_the_deals
		# 	}
		# 	remove_opinion = {
		# 		who = ROOT
		# 		modifier = nhs2_por_ely_trade
		# 	}
		# 	remove_opinion = {
		# 		who = ROOT
		# 		modifier = nhs_unchecked_expansion
		# 	}
		# }
		# if = {
		# 	limit = {
		# 		any_province = {
		# 			has_province_modifier = nhs2_small_por_enclave
		# 		}
		# 	}
		# 	every_province = {
		# 		limit = {
		# 			has_province_modifier = nhs2_small_por_enclave
		# 		}
		# 		remove_province_modifier = nhs2_small_por_enclave
		# 	}
		# }
		# if = {
		# 	limit = {
		# 		any_province = {
		# 			has_province_modifier = nhs2_por_enclave
		# 		}
		# 	}
		# 	every_province = {
		# 		limit = {
		# 			has_province_modifier = nhs2_por_enclave
		# 		}
		# 		remove_province_modifier = nhs2_por_enclave
		# 	}
		# }
		# if = {
		# 	limit = {
		# 		any_province = {
		# 			has_province_modifier = nhs2_large_por_enclave
		# 		}
		# 	}
		# 	every_province = {
		# 		limit = {
		# 			has_province_modifier = nhs2_large_por_enclave
		# 		}
		# 		remove_province_modifier = nhs2_large_por_enclave
		# 	}
		# }
	}
}

#Enclave maintenance event
country_event = {
	id = nhs2_european_trade_events.15
	title = nhs2_european_trade_events.15.t
	desc = nhs2_european_trade_events.15.d
	picture = CITY_VIEW_eventPicture
	
	hidden = yes
	
	trigger = {
		OR = {
			AND = {
				NOT = { has_country_flag = nhs_has_eu_enclave }
				any_owned_province = {
					has_province_modifier = nhs2_european_enclave
				}
			}
			AND = {
				NOT = { has_country_flag = nhs_has_small_por_enclave }
				any_owned_province = {
					has_province_modifier = nhs2_small_por_enclave
				}
			}
			AND = {
				NOT = { has_country_flag = nhs_has_por_enclave }
				any_owned_province = {
					has_province_modifier = nhs2_por_enclave
				}
			}
			AND = {
				NOT = { has_country_flag = nhs_has_large_por_enclave }
				any_owned_province = {
					has_province_modifier = nhs2_large_por_enclave
				}
			}
			AND = {
				OR = {
					has_country_flag = nhs_has_eu_enclave
					has_country_flag = nhs_has_small_por_enclave
					has_country_flag = nhs_has_por_enclave
					has_country_flag = nhs_has_large_por_enclave
				}
				OR = {
					AND = {
						has_country_flag = nhs_enclave_pending
						NOT = {
							any_owned_province = {
								OR = {
									has_province_modifier = nhs2_small_por_enclave
									has_province_modifier = nhs2_por_enclave
									has_province_modifier = nhs2_large_por_enclave
									has_province_modifier = nhs2_european_enclave
								}
							}
						}
					}
					AND = {
						any_owned_province = {
							OR = {
								nhs_homelands = yes
								has_albanian_majority_modifier = yes
							}
							OR = {
								has_province_modifier = nhs2_small_por_enclave
								has_province_modifier = nhs2_por_enclave
								has_province_modifier = nhs2_large_por_enclave
								has_province_modifier = nhs2_european_enclave
							}
						}
					}
				}
				any_owned_province = {
					nhs_eligible_for_enclave_with_canada = yes
					NOT = { nhs_homelands = yes }
					NOT = { has_albanian_majority_modifier = yes }
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_country_flag = nhs_has_eu_enclave }
				any_owned_province = {
					has_province_modifier = nhs2_european_enclave
				}
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs2_european_enclave
				}
				remove_province_modifier = nhs2_european_enclave
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_has_small_por_enclave }
				any_owned_province = {
					has_province_modifier = nhs2_small_por_enclave
				}
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs2_small_por_enclave
				}
				remove_province_modifier = nhs2_small_por_enclave
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_has_por_enclave }
				any_owned_province = {
					has_province_modifier = nhs2_por_enclave
				}
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs2_por_enclave
				}
				remove_province_modifier = nhs2_por_enclave
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = nhs_has_large_por_enclave }
				any_province = {
					has_province_modifier = nhs2_large_por_enclave
				}
			}
			every_province = {
				limit = {
					has_province_modifier = nhs2_large_por_enclave
				}
				remove_province_modifier = nhs2_large_por_enclave
			}
		}
		if = {
			limit = {
				OR = {
					has_country_flag = nhs_has_eu_enclave
					has_country_flag = nhs_has_small_por_enclave
					has_country_flag = nhs_has_por_enclave
					has_country_flag = nhs_has_large_por_enclave
				}
				OR = {
					AND = {
						has_country_flag = nhs_enclave_pending
						NOT = {
							any_owned_province = {
								OR = {
									has_province_modifier = nhs2_small_por_enclave
									has_province_modifier = nhs2_por_enclave
									has_province_modifier = nhs2_large_por_enclave
									has_province_modifier = nhs2_european_enclave
								}
							}
						}
					}
					AND = {
						any_owned_province = {
							OR = {
								nhs_homelands = yes
								has_albanian_majority_modifier = yes
							}
							OR = {
								has_province_modifier = nhs2_small_por_enclave
								has_province_modifier = nhs2_por_enclave
								has_province_modifier = nhs2_large_por_enclave
								has_province_modifier = nhs2_european_enclave
							}
						}
					}
				}
				any_owned_province = {
					nhs_eligible_for_enclave_with_canada = yes
					NOT = { nhs_homelands = yes }
					NOT = { has_albanian_majority_modifier = yes }
				}
			}
			every_province = {
				limit = {
					OR = {
						has_province_modifier = nhs2_small_por_enclave
						has_province_modifier = nhs2_por_enclave
						has_province_modifier = nhs2_large_por_enclave
						has_province_modifier = nhs2_european_enclave
					}
				}
				remove_province_modifier = nhs2_small_por_enclave
				remove_province_modifier = nhs2_por_enclave
				remove_province_modifier = nhs2_large_por_enclave
				remove_province_modifier = nhs2_european_enclave
			}
			if = {
				limit = {
					any_owned_province = {
						nhs_eligible_for_enclave = yes
						NOT = { nhs_homelands = yes }
						NOT = { has_albanian_majority_modifier = yes }
						culture_group = ROOT
					}
				}
				random_owned_province = {
					limit = {
						nhs_eligible_for_enclave = yes
						NOT = { nhs_homelands = yes }
						NOT = { has_albanian_majority_modifier = yes }
						culture_group = ROOT
					}
					nhs_add_proper_enclave = yes
				}
			}
			else_if = {
				limit = {
					any_owned_province = {
						nhs_eligible_for_enclave_with_canada = yes
						NOT = { nhs_homelands = yes }
						NOT = { has_albanian_majority_modifier = yes }
						culture_group = ROOT
					}
				}
				random_owned_province = {
					limit = {
						nhs_eligible_for_enclave_with_canada = yes
						NOT = { nhs_homelands = yes }
						NOT = { has_albanian_majority_modifier = yes }
						culture_group = ROOT
					}
					nhs_add_proper_enclave = yes
				}
			}
			else = {
				random_owned_province = {
					limit = {
						nhs_eligible_for_enclave_with_canada = yes
						NOT = { nhs_homelands = yes }
						NOT = { has_albanian_majority_modifier = yes }
					}
					nhs_add_proper_enclave = yes
				}
			}
		}
	}

	option = {
		name = "nhs2_european_trade_events.15.a"
	}
}

# Elysian Heathens
country_event = {
	id = nhs2_european_trade_events.16
	title = nhs2_european_trade_events.16.t
	desc = nhs2_european_trade_events.16.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	option = {
		name = "nhs2_european_trade_events.16.a"

	}
}

# Elysian Heretics
country_event = {
	id = nhs2_european_trade_events.17
	title = nhs2_european_trade_events.17.t
	desc = nhs2_european_trade_events.17.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	option = {
		name = "nhs2_european_trade_events.17.a"
	}
}