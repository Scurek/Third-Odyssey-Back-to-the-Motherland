namespace = nhs_countryevents

### Flavor events for Elysia (NHS) and in the later stages Elysian Empire (ELY)

# Allow second wives and concubines, ally with a native faction
# Maybe remove
country_event = {
	id = nhs_countryevents.4
	title = nhs_countryevents.4.t
	desc = nhs_countryevents.4.d
	picture = byz_COURT_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		OR = {
			nhs_condition_all_ely = { KOMANDA = tag }
			nhs_check_all_spartan = { CONDITION = tag }
		}
		is_year = 1460
		religion = pantheon_worship
		any_neighbor_country = {
			religion_group = pagan
			is_at_war = no
			has_opinion = { who = ROOT value = -50 }
			NOT = { is_subject_of = ROOT }
			NOT = { alliance_with = ROOT }
		}
		NOT = { has_country_modifier = nhs_allows_polygamy }
	}

	mean_time_to_happen = {
		months = 12
	}

	option = {		# Allow for it
		name = "NHSCOUNTRYEVENTSNAME4A"
		ai_chance = { 
			factor = 60
			modifier = {
				factor = 2
				legitimacy = 95
			}
			modifier = {
				factor = 0.2
				NOT = {
					legitimacy = 60
				}
			}
		}
		add_legitimacy = -15
		add_country_modifier = {
			name = "nhs_allows_polygamy"
			duration = -1
		}
		random_neighbor_country = {
			limit = {
				religion_group = pagan
				is_at_war = no
				has_opinion = { who = ROOT value = -50 }
				NOT = { is_subject_of = ROOT }
				NOT = { alliance_with = ROOT }
			}
			create_alliance = ROOT
			if = {
				limit = {
					OR = {
						has_reform = despotic_monarchy
						has_reform = feudal_monarchy
						has_reform = administrative_monarchy
						has_reform = noble_republic
						has_reform = constitutional_monarchy
						has_reform = enlightened_despotism
						has_reform = steppe_horde
						has_reform = tribal_despotism
						has_reform = tribal_federation
					}
				}
				create_marriage = ROOT
			}
			add_opinion = {
				who = ROOT
				modifier = nhs_accepted_gift
			}
			reverse_add_opinion = {
				who = ROOT
				modifier = nhs_accepted_gift
			}
		}
	}
	option = {		# Reject
		name = "NHSCOUNTRYEVENTSNAME4B"
		ai_chance = { 
			factor = 40
			modifier = {
				factor = 0.5
				legitimacy = 95
			}
			modifier = {
				factor = 2
				NOT = {
					legitimacy = 60
				}
			}
		}
		add_legitimacy = 10
	}
}

# Nobles trained as Cataphracts
# Move to the privilege
country_event = {
	id = nhs_countryevents.6
	title = nhs_countryevents.6.t
	desc = nhs_countryevents.6.d
	picture = CATAPHRACT_eventPicture
	
	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		NOT = { has_country_flag = nhs_hadevent_countryevents6 }
		NOT = { has_country_modifier = nhs_noble_cataphracts }
		is_year = 1470
	}

	mean_time_to_happen = {
		months = 12
	}

	immediate = {
		set_country_flag = nhs_hadevent_countryevents6
	}

	option = {		# Accept the new noble class
		name = "NHSCOUNTRYEVENTSNAME6A"
		ai_chance = { 
			factor = 70
			modifier = {
				factor = 0.5
				NOT = {
					legitimacy = 60
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					prestige = 0
				}
			}
		}
		add_legitimacy = -5
		add_prestige = 10
		add_army_tradition = -10
		add_country_modifier = {
			name = "nhs_noble_cataphracts"
			duration = -1
		}
	}
	option = {		# Reject the new noble class
		name = "NHSCOUNTRYEVENTSNAME6B"
		ai_chance = { 
			factor = 30
			modifier = {
				factor = 0.5
				NOT = {
					prestige = 10
				}
				stability = 0
			}
			modifier = {
				factor = 4
				NOT = {
					stability = 0
				}
			}
		}
		add_prestige = -10
		add_stability_or_adm_power = yes
	}
}

# Natives discover Gold on our borders
# country_event = {
# 	id = nhs_countryevents.9
# 	title = nhs_countryevents.9.t
# 	desc = nhs_countryevents.9.d
# 	picture = MINE_2_eventPicture

# 	fire_only_once = yes

#     trigger = {
# 		nhs_condition_all_ely = { KOMANDA = tag }
# 		is_year = 1500
# 		any_owned_province = {
# 			any_neighbor_province = {
# 				NOT = { trade_goods = gold }
# 				is_empty = no
# 				NOT = { is_claim = ROOT }
# 				religion_group = pagan
# 				owner = {
# 					NOT = { has_reform = migratory_society }
# 					NOT = { religion = norse_pagan_reformed }
# 					NOT = { is_subject_of = ROOT }
# 					NOT = { alliance_with = ROOT }
# 					NOT = { nhs_condition_all_ely = { KOMANDA = tag } }
# 				}
# 			}
# 		}
# 	}

# 	mean_time_to_happen = {
# 		months = 1000
# 		modifier = {
# 			factor = 0.6
# 			any_owned_province = {
# 				any_neighbor_province = {
# 					NOT = { trade_goods = gold }
# 					is_empty = no
# 					NOT = { is_claim = ROOT }
# 					religion_group = pagan
# 					owner = { 
# 						NOT = { is_subject_of = ROOT }
# 						NOT = { has_reform = migratory_society }
# 						NOT = { alliance_with = ROOT }
# 						NOT = { religion = norse_pagan_reformed }
# 						NOT = { nhs_condition_all_ely = { KOMANDA = tag } }
# 						NOT = { has_opinion = { who = ROOT value = 0 } }
# 					}
# 				}
# 			}
# 		}
# 	}
	
# 	immediate = {
# 		hidden_effect = {
# 			random_owned_province = {
# 				limit = {
# 					any_neighbor_province = {
# 						NOT = { trade_goods = gold }
# 						is_empty = no
# 						NOT = { is_claim = ROOT }
# 						religion_group = pagan
# 						owner = { 
# 							NOT = { is_subject_of = ROOT }
# 							NOT = { has_reform = migratory_society }
# 							NOT = { religion = norse_pagan_reformed }
# 							NOT = { alliance_with = ROOT }
# 							NOT = { nhs_condition_all_ely = { KOMANDA = tag } }
# 						}
# 					}
# 				}
# 				random_neighbor_province = {
# 					limit = {
# 						NOT = { trade_goods = gold }
# 						is_empty = no
# 						NOT = { is_claim = ROOT }
# 						religion_group = pagan
# 						owner = { 
# 							NOT = { nhs_condition_all_ely = { KOMANDA = tag } }
# 							NOT = { has_reform = migratory_society}
# 							NOT = { religion = norse_pagan_reformed }
# 							NOT = { is_subject_of = ROOT }
# 							NOT = { alliance_with = ROOT }
# 						}
# 					}
# 					save_event_target_as = nhs_province_gold_et
# 					set_province_flag = nhs_province_gold
# 				}
# 			}
# 		}
# 	}

# 	option = {
# 		name = "NHSCOUNTRYEVENTSNAME9"
# 		event_target:nhs_province_gold_et = { 
# 			change_trade_goods = gold
# 			add_claim = ROOT
# 			owner = {
# 				add_opinion = {
# 					who = ROOT
# 					modifier = nhs_borderconflict_gold
# 				}
# 				reverse_add_opinion = {
# 					who = ROOT
# 					modifier = nhs_borderconflict_gold
# 				}
# 			}
# 		}
# 	}
# }


# Elysian silk becomes even more valuable
# Maybe remove
country_event = {
	id = nhs_countryevents.18
	title = nhs_countryevents.18.t
	desc = nhs_countryevents.18.d
	picture = AWESOMECITY_eventPicture
	
	fire_only_once = yes
	
	major = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		any_owned_province = {
			trade_goods = elysian_silk
		}
		any_known_country = {
			technology_group = western
			any_owned_province = {
				continent = asia
			}
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	option = {
		name = "NHSCOUNTRYEVENTSNAME18"
		change_price = {
			trade_goods = elysian_silk
			key = ELYSIAN_SILK_BETTER
			value = 0.5
			duration = -1
		}
		change_price = {
			trade_goods = silk
			key = ELYSIAN_SILK_BETTER
			value = -0.1
			duration = -1
		}
	}
}