namespace = nhs_countryevents

### Flavor events for Elysia (NHS) and in the later stages Elysian Empire (ELY)

# Marry native consort, ally with faction of origin
country_event = {
	id = nhs_countryevents.4
	title = nhs_countryevents.4.t
	desc = nhs_countryevents.4.d
	picture = byz_COURT_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		is_year = 1465
		nhs_check_all_elysian = { CONDITION = tag }
		has_government_attribute = queen
		AND = {
			has_dlc = "Rights of Man"
			has_consort = no
		}
		any_neighbor_country = {
			native_culture_primary = yes
			is_at_war = no
			has_opinion = { who = ROOT value = -50 }
			NOT = { is_subject_of = ROOT }
			NOT = { alliance_with = ROOT }
		}
	}

	immediate = {
		random_neighbor_country = {
			limit = {
				native_culture_primary = yes
				is_at_war = no
				has_opinion = { who = ROOT value = -50 }
				NOT = { is_subject_of = ROOT }
				NOT = { alliance_with = ROOT }
			}
			save_event_target_as = selected_country
		}
	}

	mean_time_to_happen = {
		months = 6
	}

	option = {		# Allow for it
		name = "nhs_countryevents.4.a"
		ai_chance = { 
			factor = 60
			modifier = {
				factor = 2
				legitimacy = 95
			}
			modifier = {
				factor = 0.2
				NOT = {
					legitimacy = 60
				}
			}
		}
		add_legitimacy = -15
		event_target:selected_country = {
			create_alliance = ROOT
			create_marriage = ROOT
			if = {
				limit = {
					has_dlc = "Rights of Man"
				}
				define_consort = {
					country_of_origin = FROM
					culture = FROM
					religion = FROM
				}
			}
		}
	}
	option = {		# Reject
		name = "nhs_countryevents.4.b"
		ai_chance = { 
			factor = 40
			modifier = {
				factor = 0.5
				legitimacy = 95
			}
			modifier = {
				factor = 2
				NOT = {
					legitimacy = 60
				}
			}
		}
		add_legitimacy = 10
		event_target:selected_country = {
			add_opinion = {
				who = ROOT
				modifier = insulted
			}
		}
	}
}

# Nobles trained as Cataphracts
# Move to the privilege
country_event = {
	id = nhs_countryevents.6
	title = nhs_countryevents.6.t
	desc = nhs_countryevents.6.d
	picture = CATAPHRACT_eventPicture
	
	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		NOT = { has_country_flag = nhs_hadevent_countryevents6 }
		NOT = { has_country_modifier = nhs_noble_cataphracts }
		is_year = 1470
	}

	mean_time_to_happen = {
		months = 12
	}

	immediate = {
		set_country_flag = nhs_hadevent_countryevents6
	}

	option = {		# Accept the new noble class
		name = "NHSCOUNTRYEVENTSNAME6A"
		ai_chance = { 
			factor = 70
			modifier = {
				factor = 0.5
				NOT = {
					legitimacy = 60
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					prestige = 0
				}
			}
		}
		add_legitimacy = -5
		add_prestige = 10
		add_army_tradition = -10
		add_country_modifier = {
			name = "nhs_noble_cataphracts"
			duration = -1
		}
	}
	option = {		# Reject the new noble class
		name = "NHSCOUNTRYEVENTSNAME6B"
		ai_chance = { 
			factor = 30
			modifier = {
				factor = 0.5
				NOT = {
					prestige = 10
				}
				stability = 0
			}
			modifier = {
				factor = 4
				NOT = {
					stability = 0
				}
			}
		}
		add_prestige = -10
		add_stability_or_adm_power = yes
	}
}


# Elysian silk becomes even more valuable
# Maybe remove
country_event = {
	id = nhs_countryevents.18
	title = nhs_countryevents.18.t
	desc = nhs_countryevents.18.d
	picture = AWESOMECITY_eventPicture
	
	fire_only_once = yes
	
	major = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		any_owned_province = {
			trade_goods = elysian_silk
		}
		any_known_country = {
			technology_group = western
			any_owned_province = {
				continent = asia
			}
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	option = {
		name = "NHSCOUNTRYEVENTSNAME18"
		change_price = {
			trade_goods = elysian_silk
			key = ELYSIAN_SILK_BETTER
			value = 0.5
			duration = -1
		}
		change_price = {
			trade_goods = silk
			key = ELYSIAN_SILK_BETTER
			value = -0.1
			duration = -1
		}
	}
}