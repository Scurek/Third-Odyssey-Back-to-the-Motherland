namespace = nhs2_estateevents

# Barbaroi councils estate rises in revolt
country_event = {
	id = nhs2_estateevents.1
	title = nhs2_estateevents.1.t
	desc = nhs2_estateevents.1.d
	picture = NATIVE_LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			# Set the disaster hidden timer
			add_country_modifier = {
				name = nhs_natives_disaster_timer
				duration = 1095  # 3 years
				hidden = yes
			}
			# Add some trouble everywhere
			every_province = {
				limit = {
					is_colony = no
					owned_by = ROOT
					nhs_culturally_native = yes
				}
				add_unrest = 10
				add_local_autonomy = 20
			}
			# Select provinces
			random_province = {
				limit = {
					is_colony = no
					owned_by = ROOT
					nhs_culturally_native = yes
					NOT = { has_province_flag = nhs_prepped_for_estate_natives_rise_temp }
				}
				set_province_flag = nhs_prepped_for_estate_natives_rise_temp
			}
			random_province = {
				limit = {
					is_colony = no
					owned_by = ROOT
					nhs_culturally_native = yes
					NOT = { has_province_flag = nhs_prepped_for_estate_natives_rise_temp }
				}
				set_province_flag = nhs_prepped_for_estate_natives_rise_temp
			}
			# Spawn rebels
			every_owned_province = {
				limit = {
					owned_by = ROOT
					has_province_flag = nhs_prepped_for_estate_natives_rise_temp
				}
				spawn_rebels = {
					type = native_rebels
					size = 3
					win = yes
				}
			}
		}
	}

	option = {
		name = "nhs2_estateevents.1.a"
		add_stability = -3
		tooltip = {
			# Repeat immediate province effects for clarity
			every_province = {
				limit = {
					is_colony = no
					owned_by = ROOT
					nhs_culturally_native = yes
				}
				add_unrest = 10
				add_local_autonomy = 20
			}
			every_owned_province = {
				limit = {
					owned_by = ROOT
					has_province_flag = nhs_prepped_for_estate_natives_rise_temp
				}
				spawn_rebels = {
					type = native_rebels
					size = 3
					win = yes
				}
			}
		}
		hidden_effect = {
			# Clear the flags when event is closed
			every_owned_province = {
				limit = {
					owned_by = ROOT
					has_province_flag = nhs_prepped_for_estate_natives_rise_temp
				}
				clr_province_flag = nhs_prepped_for_estate_natives_rise_temp
			}
		}
	}
}


country_event = {
	id = nhs2_estateevents.2
	title = nhs2_estateevents.2.t
	desc = nhs2_estateevents.2.d
	picture = NATIVE_LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes

	option = {
		name = "nhs2_estateevents.2.a"
		tooltip = native_disaster_ends_tt
	}
}
