# Events for the Hellenic conversion and disaster setup
# Written by TheWerelizard

namespace = nhs_hellenicconversion

##################
# Starting event #
##################

# Sets up the frame, custom variable and flag

country_event = {
	id = nhs_hellenicconversion.1
	title = nhs_hellenicconversion1.t 
	desc = nhs_hellenicconversion1.d
	picture = OLYMPIANS_eventPicture

	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		is_year = 1448
	}

	mean_time_to_happen = {
		months = 2
	}

	immediate = {
		hidden_effect = {
			set_variable = {
				which = HellenicUprising
				value = 0
			}
			set_variable = {
				which = OrthodoxUprising
				value = 0
			}
			set_variable = {
				which = HellenicDisasterProgress
				value = 0
			}
		}
	}

	option = {
		name = nhs_hellenicconversion.1.a
		set_country_flag = hellenic_conversion_preacher
		set_country_flag = nhs_hcd_can_have_religious_disaster
		add_country_modifier = {
			name = nhs_hcd_hellenic_struggles
			duration = -1
		}
		custom_tooltip = hellenicconversion_preacher.tt
	}
}

# Hidden event selector
country_event = {
	id = nhs_hellenicconversion.100
	title = nhs_hellenicconversion.100.t 
	desc = nhs_hellenicconversion.100.d
	picture = OLYMPIANS_eventPicture

	hidden = yes

	trigger = {
		NOT = { is_year = 1468 }  # Just something so it's definitely disabled by time disaster should even be over, maybe EU4 can optimize on this?
		has_country_flag = hellenic_conversion_preacher
		nhs_condition_all_ely = { KOMANDA = tag }
		religion_group = christian
	}
	
	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		if = {
			# Start major event chain, if possible
			limit = {
				NOT = { has_country_flag = hellenic_conversion_major_event }
				NOT = { has_country_modifier = nhs_hcd_majorevent_cooldown_timer }
				check_variable = {
					which = HellenicDisasterProgress
					value = 2
				}
				NOT = {
					AND = {
						has_country_flag = TO_nhs_hellenicconversion_2
						has_country_flag = TO_nhs_hellenicconversion_3
						has_country_flag = TO_nhs_hellenicconversion_4
					}
				}
			}
			random_list = {
				1 = {
					trigger = {
						NOT = { has_country_flag = TO_nhs_hellenicconversion_2 }
					}
					set_country_flag = TO_hcd_picked_major_event
					set_country_flag = TO_nhs_hellenicconversion_2
					country_event = { id = nhs_hellenicconversion.2 }  # Death of Georgios
				}
				1 = {
					trigger = {
						has_heir = yes
						heir_age = 13
						government = monarchy
						NOT = { has_country_flag = TO_nhs_hellenicconversion_3 }
					}
					set_country_flag = TO_hcd_picked_major_event
					set_country_flag = TO_nhs_hellenicconversion_3
					country_event = { id = nhs_hellenicconversion.3 }  # Heir accused of being a heretic
				}
				1 = {
					trigger = {
						check_variable = {
							which = HellenicDisasterProgress
							value = 5
						}
						num_of_cities = 4
						NOT = { has_country_flag = TO_nhs_hellenicconversion_4 }
					}
					set_country_flag = TO_hcd_picked_major_event
					set_country_flag = TO_nhs_hellenicconversion_4
					country_event = { id = nhs_hellenicconversion.4 }  # Pagan assemblies
				}
			}
			if = {
				limit = {
					has_country_flag =  TO_hcd_picked_major_event
				}
				clr_country_flag =  TO_hcd_picked_major_event
				set_country_flag = hellenic_conversion_major_event
				add_country_modifier = {
					name = nhs_hcd_majorevent_cooldown_timer
					duration = 547  # ~1.5 year cooldown between, at minimum
					hidden = yes
				}
				change_variable = {
					which = HellenicDisasterProgress
					value = 3
				}
			}
		}
		else = {
			# Pick basic event otherwise
			change_variable = {
				which = HellenicDisasterProgress
				value = 1
			}
			random_list = {
				1 = {
					trigger = {
						num_of_cities = 4
						any_owned_province = {
							NOT = { has_province_modifier = nhs_hcd_Pagan_taxes }
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_101 }
					}
					set_country_flag = TO_nhs_hellenicconversion_101
					country_event = { id = nhs_hellenicconversion.101 }
				}
				1 = {
					trigger = {
						num_of_cities = 3
						any_owned_province = {
							NOT = { has_province_modifier = nhs_hcd_hellenic_conversion_strife }
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_102 }
					}
					set_country_flag = TO_nhs_hellenicconversion_102
					country_event = { id = nhs_hellenicconversion.102 }
				}
				1 = {
					trigger = {
						num_of_cities = 3
						any_owned_province = {
							religion_group = christian
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_103 }
					}
					set_country_flag = TO_nhs_hellenicconversion_103
					country_event = { id = nhs_hellenicconversion.103 }
				}
				1 = {
					trigger = {
						num_of_cities = 2
						NOT = { has_country_flag = TO_nhs_hellenicconversion_104 }
					}
					set_country_flag = TO_nhs_hellenicconversion_104
					country_event = { id = nhs_hellenicconversion.104 }
				}
				1 = {
					trigger = {
						num_of_cities = 3
						any_owned_province = {
							is_colony = yes
							colonysize = 400
							NOT = { has_province_modifier = nhs_hcd_land_dispute }
							NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_105 }
					}
					set_country_flag = TO_nhs_hellenicconversion_105
					country_event = { id = nhs_hellenicconversion.105 }
				}
				1 = {
					trigger = {
						num_of_cities = 3
						any_owned_province = {
							is_colony = yes
							colonysize = 400
							NOT = { has_province_modifier = nhs_hcd_land_dispute }
							NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_106 }
					}
					set_country_flag = TO_nhs_hellenicconversion_106
					country_event = { id = nhs_hellenicconversion.106 }
				}
				1 = {
					trigger = {
						has_advisor = yes
						NOT = { has_country_flag = TO_nhs_hellenicconversion_107 }
					}
					set_country_flag = TO_nhs_hellenicconversion_107
					country_event = { id = nhs_hellenicconversion.107 }
				}
			}
		}
	}

	option = {
		# Dummy option, must be present
		name = nhs_hellenicconversion.100.a
	}
}


################
# Basic events #
################

# Pagans refuse to pay taxes
country_event = {
	id = nhs_hellenicconversion.101
	title = nhs_hellenicconversion101.t 
	desc = nhs_hellenicconversion101.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					NOT = { has_province_modifier = nhs_hcd_hellenic_conversion_strife }
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Increase tax collection efforts and drive them out
		name = nhs_hellenicconversion.101.a
		
		event_target:nhs_hcd_target_province = {
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
			add_province_modifier = {
				name = nhs_hcd_Pagan_taxes
				duration = 730
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans_more.tt
	}

	option = { 
		# Increase tax collection efforts
		name = nhs_hellenicconversion.101.b
		
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_Pagan_taxes
				duration = 365
			}
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Tax the church
		name = nhs_hellenicconversion.101.c
		
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		} 
		hidden_effect = {
			change_variable = {
			which = OrthodoxUprising
			value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Forfeit taxes
		name = nhs_hellenicconversion.101.d
		
		add_years_of_income = -0.4
		custom_tooltip = hellenicconversion_anger_neither.tt
	} 

}


# Zealots attack Pagans
country_event = { 
	id = nhs_hellenicconversion.102
	title = nhs_hellenicconversion102.t 
	desc = nhs_hellenicconversion102.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					NOT = { has_province_modifier = nhs_hcd_hellenic_conversion_strife }
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Burn more Pagans
		name = nhs_hellenicconversion.102.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		hidden_effect = {        
			change_variable = {
				which = HellenicUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans_more.tt
	}

	option = {
		# Let the zealots do their thing
		name = nhs_hellenicconversion.102.b
		
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_hellenic_conversion_strife
				duration = 365
			}
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Stop the zealots
		name = nhs_hellenicconversion.102.c
		
		event_target:nhs_hcd_target_province = {
			spawn_rebels = {
				type = orthodox_rebels
				size = 1
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Restore order
		name = nhs_hellenicconversion.102.d
		
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_hellenic_conversion_strife
				duration = 180
			}
		}
		add_mil_power = -50
		custom_tooltip = hellenicconversion_anger_neither.tt
	} 

}


# Priest killed
country_event = {
	id = nhs_hellenicconversion.103
	title = nhs_hellenicconversion103.t 
	desc = nhs_hellenicconversion103.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes

	option = {
		# Accuse the Pagans
		name = nhs_hellenicconversion.103.a
 
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}      
		hidden_effect = {        
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Accuse natives
		name = nhs_hellenicconversion.103.b
		trigger = {
			has_estate = estate_all_natives
		}

		add_estate_loyalty = {
			estate = estate_all_natives
			loyalty = -5
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Let the matter drop
		name = nhs_hellenicconversion.103.c

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		} 
		add_dip_power = -50
		add_legitimacy = -5
		custom_tooltip = hellenicconversion_anger_neither.tt
	}

}


# Angered church
country_event = {
	id = nhs_hellenicconversion.104
	title = nhs_hellenicconversion104.t 
	desc = nhs_hellenicconversion104.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = { 
		# Issue a public condemenation of Pagans
		name = nhs_hellenicconversion.104.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = { 
		# Refuse to hear the priest out
		name = nhs_hellenicconversion.104.b

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = { 
		# Make vague statements of supports to the church
		name = nhs_hellenicconversion.104.c

		add_patriarch_authority = -0.25
		add_dip_power = -50
		custom_tooltip = hellenicconversion_anger_neither.tt
	}
}


# Pagan settlers
country_event = { 
	id = nhs_hellenicconversion.105
	title = nhs_hellenicconversion105.t 
	desc = nhs_hellenicconversion105.d
	picture = COLONIZATION_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_colony = yes
					colonysize = 400
					NOT = { has_province_modifier = nhs_hcd_land_dispute }
					NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Conversion or death
		name = nhs_hellenicconversion.105.a

		event_target:nhs_hcd_target_province = {
			add_colonysize = -200
			add_province_modifier = {
				name = nhs_hcd_land_dispute
				duration = 90
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Let them settle
		name = nhs_hellenicconversion.105.b

		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_land_dispute
				duration = 60
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Protect the settlers
		name = nhs_hellenicconversion.105.c

		event_target:nhs_hcd_target_province = {
			add_colonysize = 100
			add_province_modifier = {
				name = nhs_hcd_land_dispute
				duration = 30
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox_more.tt
	}
}


# Pagans Flee
country_event = {
	id = nhs_hellenicconversion.106
	title = nhs_hellenicconversion106.t 
	desc = nhs_hellenicconversion106.d
	picture = BORDER_TENSION_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_colony = yes
					colonysize = 400
					NOT = { has_province_modifier = nhs_hcd_land_dispute }
					NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Stop them
		name = nhs_hellenicconversion.106.a

		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_colonial_tensions
				duration = 180
			}
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans_more.tt
	}

	option = {
		# Let them go and seize their land
		name = nhs_hellenicconversion.106.b

		event_target:nhs_hcd_target_province = {
			add_colonysize = -200
			add_province_modifier = {
				name = nhs_hcd_colonial_tensions
				duration = 90
			}
		}
		add_years_of_income = 0.10
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		} 
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Let them go
		name = nhs_hellenicconversion.106.c

		event_target:nhs_hcd_target_province = {
			add_colonysize = -200
			add_province_modifier = {
				name = nhs_hcd_colonial_tensions
				duration = 90
			}
		} 
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Send in new settlers
		name = nhs_hellenicconversion.106.d

		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_colonial_tensions
				duration = 30
			}
		}
		add_years_of_income = -0.25
		add_dip_power = -50
		custom_tooltip = hellenicconversion_anger_neither.tt      
	}
}


# Pagan advisor
country_event = { 
	id = nhs_hellenicconversion.107
	title = nhs_hellenicconversion107.t 
	desc = nhs_hellenicconversion107.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_list = {
				1 = {
					trigger = {
						employed_advisor = {
							category = ADM
						}
					}
					set_country_flag = nhs_hcd_advisor_events_adm
				}
				1 = {
					trigger = {
						employed_advisor = {
							category = DIP
						}
					}
					set_country_flag = nhs_hcd_advisor_events_dip
				}
				1 = {
					trigger = {
						employed_advisor = {
							category = MIL
						}
					}
					set_country_flag = nhs_hcd_advisor_events_mil
				}
			}
		}
	}

	option = { 
		# Fire the advisor
		name = nhs_hellenicconversion.107.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		trigger_switch = {
			on_trigger = has_country_flag
			nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
			nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
			nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans_more.tt
	}

	option = { 
		# Fair trial
		name = nhs_hellenicconversion.107.b

		random_list = {
			75 = {
				trigger_switch = {
					on_trigger = has_country_flag
					nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
					nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
					nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
				}
			}
			25 = {
				add_prestige = 10
			}
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = { 
		# Stand by the advisor
		name = nhs_hellenicconversion.107.c

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = { 
		# Pay retirement
		name = nhs_hellenicconversion.107.d

		add_adm_power = -50
		add_years_of_income = -0.2
		trigger_switch = {
			on_trigger = has_country_flag
			nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
			nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
			nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
		}
		custom_tooltip = hellenicconversion_anger_neither.tt
	}

	after = {
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				nhs_hcd_advisor_events_adm = { clr_country_flag = nhs_hcd_advisor_events_adm }
				nhs_hcd_advisor_events_dip = { clr_country_flag = nhs_hcd_advisor_events_dip }
				nhs_hcd_advisor_events_mil = { clr_country_flag = nhs_hcd_advisor_events_mil }
			}
		}
	}
}


#########################
# Funeral of Georgios   #
#########################

# Death of Georgios
country_event = {
	id = nhs_hellenicconversion.2
	title = nhs_hellenicconversion2.t 
	desc = nhs_hellenicconversion2.d
	picture = REFORM_eventPicture
	
	is_triggered_only = yes

	option = {
		# Organise an official funeral 
		name = nhs_hellenicconversion.2.a

		add_years_of_income = -0.4
		hidden_effect = {
			random_list = {
				10 = {
					country_event = { id = nhs_hellenicconversion.21 days = 5 }  # Emperor dies
				}
				90 = {
					country_event = { id = nhs_hellenicconversion.22 days = 5 }  # Backlash from church
				}
			}
		}
		custom_tooltip = nhs_hellenicconversion.2.a.tt
	}

	option = {
		# Covertly fund a funeral
		name = nhs_hellenicconversion.2.b

		add_years_of_income = -0.4
		hidden_effect = {
			random_list = {
				30 = {
					country_event = { id = nhs_hellenicconversion.23 days = 5 }  # Corruption discovered
				}
				70 = {
					country_event = { id = nhs_hellenicconversion.24 days = 5 }  # Funeral goes as planned
				}
			}
		}
		custom_tooltip = nhs_hellenicconversion.2.b.tt
	}

	option = { 
		# Let the Pagans organise their own event
		name = nhs_hellenicconversion.2.c

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		hidden_effect = {
			random_list = {
				60 = {
					country_event = { id = nhs_hellenicconversion.25 days = 5 }  # Violent clashes
				}
				40 = {
					country_event = { id = nhs_hellenicconversion.26 days = 5 }  # Peaceful vigil
				}
			}
		}
		custom_tooltip = nhs_hellenicconversion.2.c.tt
	}

	option = { 
		# Condemn the man
		name = nhs_hellenicconversion.2.d

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		hidden_effect = {
			random_list = {
				40 = {
					country_event = { id = nhs_hellenicconversion.27 days = 5 }  # Pagans outraged
				}
				30 = {
					country_event = { id = nhs_hellenicconversion.28 days = 5 }  # Pagans rise up in violence
				}
				30 = {
					country_event = { id = nhs_hellenicconversion.29 days = 5 }  # Orthodox violence
				}
			}
		}
		custom_tooltip = nhs_hellenicconversion.2.d.tt
	}
}


# Ruler assassinated during funeral
country_event = {
	id = nhs_hellenicconversion.21
	title = nhs_hellenicconversion21.t
	desc = nhs_hellenicconversion21.d
	picture = DEATH_OF_HEIR_eventPicture

	is_triggered_only = yes 

	immediate = {
		hidden_effect = {
			kill_ruler = yes
		}
	}

	option = { 
		# Round up the Pagan leaders
		name = nhs_hellenicconversion.21.a 

		add_country_modifier = {
			name = nhs_hcd_hellenic_coup
			duration = 365
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans_more.tt
	}

	option = { 
		# Accuse the church of plotting against the emperor
		name = nhs_hellenicconversion.21.b 

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -30
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox_more.tt
	}

	option = { 
		# Accuse no one
		name = nhs_hellenicconversion.21.c 

		add_stability = -1
		custom_tooltip = hellenicconversion_anger_neither.tt
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Church angered by funeral
country_event = { 
	id = nhs_hellenicconversion.22
	title = nhs_hellenicconversion22.t
	desc = nhs_hellenicconversion22.d
	picture = STREET_SPEECH_eventPicture

	is_triggered_only = yes

	option = { 
		# The church can eat it
		name = nhs_hellenicconversion.22.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		random_list = {
			50 = {}
			50 = {
				random_owned_province = {
					limit = {
						is_city = yes
						religion_group = christian
					}
					spawn_rebels = {
						type = orthodox_rebels
						size = 2
					}
				}
			}
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox_more.tt
	}

	option = { 
		# Make sure the church stays quiet
		name = nhs_hellenicconversion.22.b

		add_years_of_income = -0.25
		add_corruption = 2
		random_list = {
			50 = {
				custom_tooltip = nhs_hellenicconversion.22.b.1
			}
			50 = {
				custom_tooltip = nhs_hellenicconversion.22.b.2
				add_legitimacy = -10
			}
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Corruption discovered
country_event = {
	id = nhs_hellenicconversion.23
	title = nhs_hellenicconversion23.t
	desc = nhs_hellenicconversion23.d
	picture = PROTESTANT_CATHOLIC_DEBATE_eventPicture

	is_triggered_only = yes

	option = {
		name = nhs_hellenicconversion.23.a

		add_corruption = 2
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Funeral goes as planned
country_event = {
	id = nhs_hellenicconversion.24
	title = nhs_hellenicconversion24.t
	desc = nhs_hellenicconversion24.d
	picture = CATHOLIC_RULERS_PRAYING_eventPicture

	is_triggered_only = yes

	option = {
		name = nhs_hellenicconversion.24.a
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Violent clashes
country_event = {
	id = nhs_hellenicconversion.25
	title = nhs_hellenicconversion25.t
	desc = nhs_hellenicconversion25.d
	picture = SIEGE_PRAGUE_CASTLE_eventPicture

	is_triggered_only = yes

	option = {
		# Call down the guard
		name = nhs_hellenicconversion.25.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		random_owned_province = {
			limit = {
				is_capital = yes
			}
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
		}
		random_owned_province = {
			limit = {
				is_capital = no
			}
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans_more.tt
	}

	option = {
		# Attempt to talk them down
		name = nhs_hellenicconversion.25.b

		add_dip_power = -50
		random_list = {
			50 = {
				add_legitimacy = 5
			}
			50 = {
				random_owned_province = {
					limit = {
						is_capital = yes
					}
					spawn_rebels = {
						type = particularist_rebels
						size = 1
					}
				}
				random_owned_province = {
					limit = {
						is_capital = no
					}
					spawn_rebels = {
						type = particularist_rebels
						size = 1
					}
				}
			}
		}
		custom_tooltip = hellenicconversion_anger_neither.tt
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Peaceful vigil
country_event = {
	id = nhs_hellenicconversion.26
	title = nhs_hellenicconversion26.t
	desc = nhs_hellenicconversion26.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = nhs_hellenicconversion.26.a
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Pagans outraged
country_event = {
	id = nhs_hellenicconversion.27
	title = nhs_hellenicconversion27.t
	desc = nhs_hellenicconversion27.d
	picture = DEBATE_REPUBLICAN_eventPicture

	is_triggered_only = yes

	option = { 
		# Too bad
		name = nhs_hellenicconversion.27.a

		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Pagans rise up
country_event = {
	id = nhs_hellenicconversion.28
	title = nhs_hellenicconversion28.t
	desc = nhs_hellenicconversion28.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes 

	option = { 
		# Stop them
		name = nhs_hellenicconversion.28.a

		random_owned_province = {
			limit = {
				is_capital = yes
			}
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
		}
		random_owned_province = {
			limit = {
				is_capital = no
				is_city = yes
			}
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Do not intervene
		name = nhs_hellenicconversion.28.b

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		random_owned_province = {
			limit = {
				is_capital = yes
			}
			add_base_manpower = -1
			add_devastation = 50
			add_unrest = 5
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox_more.tt
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Orthodox violence
country_event = {
	id = nhs_hellenicconversion.29 
	title = nhs_hellenicconversion29.t 
	desc = nhs_hellenicconversion29.d
	picture = VILLAGE_RAIDED_eventPicture

	is_triggered_only = yes 

	option = { 
		# Brutal
		name = nhs_hellenicconversion.29.a

		random_owned_province = {
			limit = {
				is_city = yes
			}
			add_province_modifier = {
				name = nhs_hcd_Pagan_persecution
				duration = 365
			}
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
		}
		random_owned_province = {
			limit = {
				is_city = yes
			}
			add_province_modifier = {
				name = nhs_hcd_Pagan_persecution
				duration = 365
			}
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans_more.tt
	}

	option = { 
		# Let them fight
		name = nhs_hellenicconversion.29.b

		random_owned_province = {
			limit = {
				is_capital = yes
			}
			add_base_manpower = -1
			add_devastation = 50
			add_unrest = 5
		}
		random_owned_province = {
			limit = {
				is_capital = no
			}
			add_base_manpower = -1
			add_devastation = 50
			add_unrest = 5
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Stop this madness!
		name = nhs_hellenicconversion.29.c

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		random_owned_province = {
			limit = {
				is_capital = yes
			}
			spawn_rebels = {
				type = orthodox_rebels
				size = 2
			}
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


##################
# Royal Heresy   #
##################

# Heir accused of being a heretic
country_event = {
	id = nhs_hellenicconversion.3
	title = nhs_hellenicconversion3.t
	desc = nhs_hellenicconversion3.d
	picture = orthodox_court_eventPicture

	is_triggered_only = yes

	option = { 
		# Denounce the heir
		name = nhs_hellenicconversion.3.a

		add_heir_claim = -20
		hidden_effect = {
			random_list = {
				33 = {
					country_event = { id = nhs_hellenicconversion.31 days = 31 } # Faifthul heir
				}
				33 = {
					country_event = { id = nhs_hellenicconversion.32 days = 31 } # Heathen heir
				}
				33 = {
					country_event = { id = nhs_hellenicconversion.33 days = 31 } # Heir assassinated
				}
			}
			change_variable = {
				which = PaganUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Stand by the heir
		name = nhs_hellenicconversion.3.b

		add_legitimacy = -10
		hidden_effect = {
			random_list = {
				33 = {
					country_event = { id = nhs_hellenicconversion.31 days = 31 } # Faifthul heir
				}
				33 = {
					country_event = { id = nhs_hellenicconversion.32 days = 31 } # Heathen heir
				}
				33 = {
					country_event = { id = nhs_hellenicconversion.33 days = 31 } # Heir assassinated
				}
			}
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Have the priest thrown in jail
		name = nhs_hellenicconversion.3.c

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		hidden_effect = {
			random_list = {
				33 = {
					country_event = { id = nhs_hellenicconversion.31 days = 31 } # Faifthul heir
				}
				33 = {
					country_event = { id = nhs_hellenicconversion.32 days = 31 } # Heathen heir
				}
				33 = {
					country_event = { id = nhs_hellenicconversion.33 days = 31 } # Heir assassinated
				}
			}
			change_variable = {
				which = OrthodoxUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox_more.tt
	}
}


# Faithful Heir
country_event = {
	id = nhs_hellenicconversion.31
	title = nhs_hellenicconversion31.t
	desc = nhs_hellenicconversion31.d
	picture = RELIGIOUS_CONVERSION_eventPicture

	is_triggered_only = yes

	option = {
		name = nhs_hellenicconversion.31.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		add_heir_claim = 20
		add_legitimacy = 10
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Heathen Heir
country_event = {
	id = nhs_hellenicconversion.32
	title = nhs_hellenicconversion32.t
	desc = nhs_hellenicconversion32.d
	picture = COURT_eventPicture

	is_triggered_only = yes

	immediate = {
		set_heir_religion = pantheon_worship
	}

	option = {
		# Have the heir JAILED
		name = nhs_hellenicconversion.32.a

		add_stability = -1
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		kill_heir = {}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans_more.tt
	}

	option = {
		# Refuse to hurt the heir
		name = nhs_hellenicconversion.32.b

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		random_list = {
			50 = {
				add_heir_claim = -20
			}
			50 = {
				random_owned_province = {
					limit = {
						is_capital = no
						is_city = yes
					}
					spawn_rebels = {
						type = pretender_rebels
						religion = pantheon_worship
						culture = ROOT
						size = 2
						use_heir_as_leader = yes
					}
				}
			}
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Heir assassinated
country_event = {
	id = nhs_hellenicconversion.33
	title = nhs_hellenicconversion33.t
	desc = nhs_hellenicconversion33.d
	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes  

	immediate = {
		hidden_effect = {
			kill_heir = {}
		}
	}

	option = {
		name = nhs_hellenicconversion.33.a

		add_stability = -1
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


######################
# Pagan Assemblies   #
######################

# Pagan assemblies
country_event = {
	id = nhs_hellenicconversion.4
	title = nhs_hellenicconversion4.t
	desc = nhs_hellenicconversion4.d
	picture = REFORM_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_city = yes
					is_capital = no
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Immediately put it down
		name = nhs_hellenicconversion.4.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans_more.tt
	}

	option = {
		# Let them be
		name = nhs_hellenicconversion.4.b
	
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
			set_country_flag = nhs_pagan_assemblies
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Nearby christians angered
country_event = {
	id = nhs_hellenicconversion.41
	desc = nhs_hellenicconversion41.d
	title = nhs_hellenicconversion41.t
	picture = PRINCE_BISHOP_RESIGN_eventPicture

	fire_only_once = yes
	goto = nhs_hcd_target_province

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = nhs_pagan_assemblies
		any_owned_province = {
			has_province_modifier = nhs_hcd_Pagan_minority
		}
		religion_group = christian
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = no
					is_city = yes
					any_neighbor_province = {
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	mean_time_to_happen = {
		months = 12
	}

	option = {
		# Demand compensation from the pagans
		name = nhs_hellenicconversion.41.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		random_owned_province = {
			limit = {
				has_province_modifier = nhs_hcd_Pagan_minority
			}
			add_base_tax = -1
		}
		event_target:nhs_hcd_target_province = {
			add_base_tax = 1
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Ignore the christians
		name = nhs_hellenicconversion.41.b

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		event_target:nhs_hcd_target_province = {
			add_base_tax = -1
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Settle the dispute
		name = nhs_hellenicconversion.41.c

		add_years_of_income = -0.4
		custom_tooltip = hellenicconversion_anger_neither.tt
	}
}


# New pagan assembly
country_event = {
	id = nhs_hellenicconversion.42
	desc = nhs_hellenicconversion42.d
	title = nhs_hellenicconversion42.t
	picture = CITY_DEVELOPMENT_eventPicture

	fire_only_once = yes
	goto = nhs_hcd_target_province

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = nhs_pagan_assemblies
		any_owned_province = {
			has_province_modifier = nhs_hcd_Pagan_minority
			any_neighbor_province = {
				is_capital = no
				is_city = yes
				NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
			}
		}
		religion_group = christian
	}

	mean_time_to_happen = {
		months = 12
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = no
					is_city = yes
					NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
					any_neighbor_province = {
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Allow it
		name = nhs_hellenicconversion.42.a

		add_estate_loyalty = {
			estate  = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
			add_base_tax = 1
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Restrain it
		name = nhs_hellenicconversion.42.b

		add_estate_loyalty = {
			estate  = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_target_province = {
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}
}


# Pagans request tax exemption
country_event = {
	id = nhs_hellenicconversion.43
	desc = nhs_hellenicconversion43.d
	title = nhs_hellenicconversion43.t
	picture = FAMINE_eventPicture

	fire_only_once = yes
	goto = nhs_hcd_target_province

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = nhs_pagan_assemblies
		any_owned_province = {
			has_province_modifier = nhs_hcd_Pagan_minority
		}
		religion_group = christian
	}

	mean_time_to_happen = {
		months = 24
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = { 
		# Refuse
		name = nhs_hellenicconversion.43.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_target_province = {
			add_unrest = 10
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Offer assistance
		name = nhs_hellenicconversion.43.b

		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_famine_aid
				duration = 365
			}
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Offer exemption long term
		name = nhs_hellenicconversion.43.c

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_famine_exempt
				duration = -1
			}
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox_more.tt
	}

	option = {
		# Use the crown's ressources
		name = nhs_hellenicconversion.43.d
		
		add_years_of_income = -0.4
		event_target:nhs_hcd_target_province = {
			add_unrest = -3
		}
		custom_tooltip = hellenicconversion_anger_neither.tt
	}
}


# Pagans request representation
country_event = {
	id = nhs_hellenicconversion.44
	desc = nhs_hellenicconversion44.d
	title = nhs_hellenicconversion44.t
	picture = BURGHER_ESTATE_UPSET_eventPicture

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = nhs_pagan_assemblies
		any_owned_province = {
			has_province_modifier = nhs_hcd_Pagan_minority
		}
		religion_group = christian
	}

	mean_time_to_happen = {
		months = 24
	}

	option = {
		# Accept
		name = nhs_hellenicconversion.44.a

		add_adm_power = -50
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		add_country_modifier = {
			name = nhs_hcd_hellenic_representation
			duration = -1
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Refuse
		name = nhs_hellenicconversion.44.b

		add_patriarch_authority = 0.1
		random_owned_province = {
			limit = {
				is_capital = no
				is_city = yes
				has_province_modifier = nhs_hcd_Pagan_minority
			}
			spawn_rebels = {
				type = particularist_rebels
				size = 2
			}
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Offer concessions
		name = nhs_hellenicconversion.44.c

		add_country_modifier = {
			name = nhs_hcd_pagan_concessions 
			duration = 7300
		}
		custom_tooltip = hellenicconversion_anger_neither.tt
	}

	option = {
		# Negotiate
		name = nhs_hellenicconversion.44.d

		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = righteous_personality
				ruler_has_personality = kind_hearted_personality
				ruler_has_personality = charismatic_negotiator_personality
				ruler_has_personality = silver_tongue_personality
			}
		}
		add_prestige = -10
		add_country_modifier = {
			name = nhs_hcd_hellenic_representation
			duration = 7300
		}
		custom_tooltip = hellenicconversion_anger_neither.tt
	}
}


########################
# People's inquisition #
########################

# Establish inquisition
country_event = {
	id = nhs_hellenicconversion.5
	title = nhs_hellenicconversion5.t
	desc = nhs_hellenicconversion5.d
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = hellenic_conversion_preacher
		check_variable = {
			which = HellenicDisasterProgress
			value = 5
		}
		religion_group = christian
	}

	mean_time_to_happen = {
		months = 6
		modifier = {
			factor = 0.5
			estate_loyalty = {
				estate = estate_church 
				loyalty = 30
			}
		}
	}

	option = {
		# Allow the church to establish an inquisition
		name = nhs_hellenicconversion.5.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		set_estate_privilege = estate_church_nhs_inquisition_privilege
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = blank_tooltip.tt
		custom_tooltip = hellenicconversion_anger_pagans_more.tt
	}

	option = {
		# Fund a state-backed inquisition
		name = nhs_hellenicconversion.5.b

		add_years_of_income = -0.75
		add_country_modifier = {
			name = nhs_hcd_state_inquisition
			duration = 1825
		}
		custom_tooltip = hellenicconversion_anger_neither.tt
	}

	option = {
		# An inquistion is not necessary
		name = nhs_hellenicconversion.5.c

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox_more.tt
	}
}


# Purges
country_event = {
	id = nhs_hellenicconversion.51
	title = nhs_hellenicconversion51.t
	desc = nhs_hellenicconversion51.d
	picture = CHURCH_ESTATE_1_eventPicture
	
	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = hellenic_conversion_preacher
		has_estate_privilege = estate_church_nhs_inquisition_privilege
	}

	mean_time_to_happen = {
		months = 12
	}

	immediate = {
		hidden_effect = {
			set_country_flag = nhs_hcd_had_event_nhs_hellenicconversion_51
			random_list = {
				1 = {
					trigger = {
						employed_advisor = {
							category = ADM
						}
					}
					set_country_flag = nhs_hcd_advisor_events_adm
				}
				1 = {
					trigger = {
						employed_advisor = {
							category = DIP
						}
					}
					set_country_flag = nhs_hcd_advisor_events_dip
				}
				1 = {
					trigger = {
						employed_advisor = {
							category = MIL
						}
					}
					set_country_flag = nhs_hcd_advisor_events_mil
				}
				1 = {
					trigger = {
						NOT = { has_advisor = yes }
					}
					set_country_flag = nhs_hcd_advisor_events_none
				}
			}
		}
	}

	option = {
		# Let the inquisition purge the suspected heathens (If advisor)
		name = nhs_hellenicconversion.51.a
		trigger = {
			has_advisor = yes
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		trigger_switch = {
			on_trigger = has_country_flag
			nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
			nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
			nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		set_country_flag = nhs_hcd_inquisition_purges
		custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = blank_tooltip.tt
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Let the inquisition purge the suspected heathens (No advisor)
		name = nhs_hellenicconversion.51.a
		trigger = {
			NOT = { has_advisor = yes }
		}
		
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		add_dip_power = -25
		add_adm_power = -25
		add_mil_power = -25
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		set_country_flag = nhs_hcd_inquisition_purges
		custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = blank_tooltip.tt
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = { 
		# Have the list changed
		name = nhs_hellenicconversion.51.b
		
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		add_corruption = 2
		add_years_of_income = -0.25
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		set_country_flag = nhs_hcd_inquisition_purges
		custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = blank_tooltip.tt
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Delay
		name = nhs_hellenicconversion.51.c

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		add_dip_power = -50
		custom_tooltip = hellenicconversion_anger_neither.tt
	}

	option = {
		# Refuse
		name = nhs_hellenicconversion.51.d

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		add_stability = -1
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	after = {
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				nhs_hcd_advisor_events_adm = { clr_country_flag = nhs_hcd_advisor_events_adm }
				nhs_hcd_advisor_events_dip = { clr_country_flag = nhs_hcd_advisor_events_dip }
				nhs_hcd_advisor_events_mil = { clr_country_flag = nhs_hcd_advisor_events_mil }
				nhs_hcd_advisor_events_none = { clr_country_flag = nhs_hcd_advisor_events_none }
			}
		}
	}
}


# Witch trials
country_event = {
	id = nhs_hellenicconversion.52
	title = nhs_hellenicconversion52.t
	desc = nhs_hellenicconversion52.d
	picture = aow_WITCHBURNING_eventPicture

	fire_only_once = yes
	goto = nhs_hcd_target_province

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = hellenic_conversion_preacher
		has_estate_privilege = estate_church_nhs_inquisition_privilege
	}

	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = nhs_hcd_target_province
			}
		}
		set_country_flag = nhs_hcd_had_event_nhs_hellenicconversion_52
	}

	option = {
		# Tacitly approve
		name = nhs_hellenicconversion.52.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_target_province = {
			add_unrest = 10
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		set_country_flag = nhs_hcd_inquisition_trials
		custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = blank_tooltip.tt
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Condem the trials
		name = nhs_hellenicconversion.52.b

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_unrest = 10
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		set_country_flag = nhs_hcd_inquisition_trials
		custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = blank_tooltip.tt
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}

	option = {
		# Intervene
		name = nhs_hellenicconversion.52.c

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			spawn_rebels = {
				type = orthodox_rebels
				size = 1
			}
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}
}


# Appointing a new consort
country_event = {
	id = nhs_hellenicconversion.53
	title = nhs_hellenicconversion53.t
	desc = {
		trigger = {
			has_consort = yes
		}
		desc = nhs_hellenicconversion53.d.a
	}
	desc = {
		trigger = {
			NOT = { has_consort = yes }
		}
		desc = nhs_hellenicconversion53.d.b
	}
	picture = BAD_WITH_MONARCH_eventPicture

	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_dlc = "Rights of Man"
		has_country_flag = hellenic_conversion_preacher
		has_estate_privilege = estate_church_nhs_inquisition_privilege
	}

	mean_time_to_happen = {
		months = 12
	}

	immediate = {
		hidden_effect = {
			set_country_flag = nhs_hcd_had_event_nhs_hellenicconversion_53
		}
	}

	option = {
		# Divorce
		name = nhs_hellenicconversion.53.a

		trigger = {
			has_consort = yes
		}

		divorce_consort_effect = yes
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		set_country_flag = nhs_hcd_inquisition_divorce
		custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = blank_tooltip.tt
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = {
		# Marry the woman
		name = nhs_hellenicconversion.53.b

		trigger = {
			NOT = { has_consort = yes }
		}

		define_consort = {}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		hidden_effect = {
			change_variable = {
				which = HellenicUprising
				value = 1
			}
		}
		set_country_flag = nhs_hcd_inquisition_divorce
		custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = blank_tooltip.tt
		custom_tooltip = hellenicconversion_anger_pagans.tt
	}

	option = { 
		# Refuse
		name = nhs_hellenicconversion.53.c

		add_legitimacy = 10
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 1
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox.tt
	}
}


# Breaking point (Church inquisition was never opposed). This event can stop the disaster.
country_event = {
	id = nhs_hellenicconversion.54
	title = nhs_hellenicconversion54.t
	desc = nhs_hellenicconversion54.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	trigger = {
		has_estate_privilege = estate_church_nhs_inquisition_privilege
		has_country_flag = nhs_hcd_inquisition_purges
		has_country_flag = nhs_hcd_inquisition_trials
		OR = {
			NOT = { has_dlc = "Rights of Man" }
			has_country_flag = nhs_hcd_inquisition_divorce
		}
	}

	mean_time_to_happen = {
		months = 6
	}

	option = {
		# Accept the situation
		name = nhs_hellenicconversion.54.a

		add_stability = 1
		remove_estate_privilege = estate_church_nhs_inquisition_privilege
		set_estate_privilege = estate_church_nhs_enforced_inquisition_privilege
		custom_tooltip = hellenicconversion_inquistion_coup.tt
		hidden_effect = {
			clr_country_flag = hellenic_conversion_preacher
			clr_country_flag = nhs_hcd_can_have_religious_disaster
			every_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority 
				}
				remove_province_modifier = nhs_hcd_Pagan_minority
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_famine_exempt
				}
				remove_province_modifier = nhs_hcd_famine_exempt
			}
			remove_country_modifier = nhs_hcd_hellenic_struggles
			remove_country_modifier = nhs_hcd_hellenic_coup
			remove_country_modifier = nhs_hcd_hellenic_representation 
			remove_country_modifier = nhs_hcd_pagan_concessions
			remove_country_modifier = nhs_hcd_lack_colonists
			remove_country_modifier = nhs_hcd_state_inquisition
		}
	}

	option = {
		# Fuck that
		name = hs_hellenicconversion.54.b

		remove_estate_privilege = estate_church_nhs_inquisition_privilege
		random_owned_province = {
			limit = {
				is_capital = yes
			}
			spawn_rebels = {
				type = orthodox_rebels
				size = 2
			}
		}
		random_owned_province = {
			limit = {
				is_capital = no
			}
			spawn_rebels = {
				type = orthodox_rebels
				size = 1
			}
		}
		hidden_effect = {
			change_variable = {
				which = OrthodoxUprising
				value = 2
			}
		}
		custom_tooltip = hellenicconversion_anger_orthodox_more.tt
	}
}


# Church coup (Once all events passed and the church was opposed at least once)
country_event = {
	id = nhs_hellenicconversion.55
	title = nhs_hellenicconversion55.t
	desc = nhs_hellenicconversion55.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	fire_only_once = yes

	trigger = {
		has_estate_privilege = estate_church_nhs_inquisition_privilege
		AND = {
			AND = {
				has_country_flag = nhs_hcd_had_event_nhs_hellenicconversion_51
				NOT = { has_country_flag = nhs_hcd_inquisition_purges }
			}
			AND = {
				has_country_flag = nhs_hcd_had_event_nhs_hellenicconversion_52
				NOT = { has_country_flag = nhs_hcd_inquisition_trials }
			}
			OR = {
				NOT = { has_dlc = "Rights of Man" }
				AND = {
					has_country_flag = nhs_hcd_had_event_nhs_hellenicconversion_53
					NOT = { has_country_flag = nhs_hcd_inquisition_divorce }
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 6
	}

	option = {
		# Negotiate
		name = nhs_hellenicconversion.55.a
		trigger = {
			has_dlc = "Rights of Man"
			OR = {
				personality = zealot_personality 
				personality = pious_personality
			}
		}
		highlight = yes

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		remove_estate_privilege = estate_church_nhs_inquisition_privilege
		add_prestige = -20
	}

	option = {
		# Kill them
		name = nhs_hellenicconversion.55.b

		remove_estate_privilege = estate_church_nhs_inquisition_privilege
		random_owned_province = {
			limit = {
				is_capital = yes
			}
			spawn_rebels = {
				type = orthodox_rebels
				size = 2
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}  
	}
}


########################################
# End of the crisis without a disaster #
########################################

country_event = {
	id = nhs_hellenicconversion.6
	title = nhs_hellenicconversion6.t
	desc = nhs_hellenicconversion6.d
	picture = CATHOLIC_RULERS_PRAYING_eventPicture

	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = hellenic_conversion_preacher
		is_year = 1467
		religion_group = christian
	}

	mean_time_to_happen = {
		months = 1
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = nhs_hcd_can_have_religious_disaster
			clr_country_flag = hellenic_conversion_preacher
			every_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority 
				}
				change_religion = pantheon_worship
				remove_province_modifier = nhs_hcd_Pagan_minority 
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_famine_exempt
				}
				remove_province_modifier = nhs_hcd_famine_exempt
			}
			remove_country_modifier = nhs_hcd_hellenic_struggles
			remove_country_modifier = nhs_hcd_hellenic_coup
			remove_country_modifier = nhs_hcd_hellenic_representation 
			remove_country_modifier = nhs_hcd_pagan_concessions
			remove_country_modifier = nhs_hcd_lack_colonists
			remove_country_modifier = nhs_hcd_state_inquisition
		}
	}

	option = {
		name = nhs_hellenicconversion.6.a

		custom_tooltip = nhs_hellenicconversion.6.tt
	}
}