# Events for the Hellenic conversion and disaster setup
# Written by TheWerelizard

namespace = nhs_hellenicconversion

##################
# Starting event #
##################

# Sets up the frame, custom variable and flag

country_event = {
	id = nhs_hellenicconversion.1
	title = nhs_hellenicconversion1.t
	desc = nhs_hellenicconversion1.d
	picture = OLYMPIANS_eventPicture

	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_estate = estate_church
		is_year = 1448
	}

	mean_time_to_happen = {
		months = 2
	}

	immediate = {
		hidden_effect = {
			set_variable = {
				which = HellenicUprising
				value = 0
			}
			set_variable = {
				which = OrthodoxUprising
				value = 0
			}
			set_variable = {
				which = HellenicDisasterProgress
				value = 0
			}
		}
	}

	option = {
		name = nhs_hellenicconversion.1.a
		set_country_flag = hellenic_conversion_preacher
		set_country_flag = nhs_hcd_can_have_religious_disaster
		add_country_modifier = {
			name = nhs_hcd_hellenic_struggles
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		custom_tooltip = hellenicconversion_preacher.tt
	}
}

# Hidden event selector
country_event = {
	id = nhs_hellenicconversion.100
	title = nhs2_hidden.t
	desc = nhs2_hidden.d
	picture = OLYMPIANS_eventPicture

	hidden = yes
	is_triggered_only = yes

	trigger = {
		NOT = { is_year = 1468 }  # Just something so it's definitely disabled by time disaster should even be over, maybe EU4 can optimize on this?
		has_country_flag = hellenic_conversion_preacher
		nhs_condition_all_ely = { KOMANDA = tag }
		religion = orthodox
	}
	
	# mean_time_to_happen = {
	# 	months = 6
	# }

	immediate = {
		if = {
			# Start major event chain, if possible
			limit = {
				NOT = { has_country_flag = hellenic_conversion_major_event }
				NOT = { has_country_modifier = nhs_hcd_majorevent_cooldown_timer }
				check_variable = {
					which = HellenicDisasterProgress
					value = 2
				}
				NOT = {
					AND = {
						has_country_flag = TO_nhs_hellenicconversion_2
						has_country_flag = TO_nhs_hellenicconversion_3
						has_country_flag = TO_nhs_hellenicconversion_4
					}
				}
			}
			random_list = {
				1 = {
					trigger = {
						NOT = { has_country_flag = TO_nhs_hellenicconversion_2 }
					}
					set_country_flag = TO_hcd_picked_major_event
					set_country_flag = TO_nhs_hellenicconversion_2
					country_event = { id = nhs_hellenicconversion.2 }  # Death of Georgios
				}
				1 = {
					trigger = {
						has_heir = yes
						heir_age = 13
						government = monarchy
						NOT = { has_country_flag = TO_nhs_hellenicconversion_3 }
						check_variable = {
							which = HellenicDisasterProgress
							value = 8
						}
					}
					set_country_flag = TO_hcd_picked_major_event
					set_country_flag = TO_nhs_hellenicconversion_3
					country_event = { id = nhs_hellenicconversion.3 }  # Heir accused of being a heretic
				}
				# 1 = {
				# 	trigger = {
				# 		check_variable = {
				# 			which = HellenicDisasterProgress
				# 			value = 5
				# 		}
				# 		num_of_cities = 2
				# 		NOT = { has_country_flag = TO_nhs_hellenicconversion_4 }
				# 	}
				# 	set_country_flag = TO_hcd_picked_major_event
				# 	set_country_flag = TO_nhs_hellenicconversion_4
				# 	country_event = { id = nhs_hellenicconversion.4 }  # Pagan assemblies
				# }
			}
			if = {
				limit = {
					has_country_flag =  TO_hcd_picked_major_event
				}
				set_country_flag = hellenic_conversion_major_event
				add_country_modifier = {
					name = nhs_hcd_majorevent_cooldown_timer
					duration = 912  # ~2.5 year cooldown between, at minimum
					hidden = yes
				}
				change_variable = {
					which = HellenicDisasterProgress
					value = 1
				}
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag =  TO_hcd_picked_major_event }
			}
			# Pick basic event otherwise
			change_variable = {
				which = HellenicDisasterProgress
				value = 1
			}
			random_list = {
				1 = {
					trigger = {
						num_of_cities = 3
						any_owned_province = {
							culture_group = ROOT
							NOT = { has_province_modifier = nhs_hcd_Pagan_taxes }
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_101 }
					}
					set_country_flag = TO_nhs_hellenicconversion_101
					country_event = { id = nhs_hellenicconversion.101 }
				}
				1 = {
					trigger = {
						num_of_cities = 3
						any_owned_province = {
							culture_group = ROOT
							NOT = { has_province_modifier = nhs_hcd_hellenic_conversion_strife }
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_102 }
					}
					set_country_flag = TO_nhs_hellenicconversion_102
					country_event = { id = nhs_hellenicconversion.102 }
				}
				1 = {
					trigger = {
						num_of_cities = 2
						any_owned_province = {
							religion = orthodox
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_103 }
					}
					set_country_flag = TO_nhs_hellenicconversion_103
					country_event = { id = nhs_hellenicconversion.103 }
				}
				1 = {
					trigger = {
						num_of_cities = 2
						NOT = { has_country_flag = TO_nhs_hellenicconversion_104 }
					}
					set_country_flag = TO_nhs_hellenicconversion_104
					country_event = { id = nhs_hellenicconversion.104 }
				}
				1 = {
					trigger = {
						num_of_cities = 2
						any_owned_province = {
							is_colony = yes
							colonysize = 400
							NOT = { has_province_modifier = nhs_hcd_land_dispute }
							NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
							NOT = { has_province_modifier = nhs_hcd_had_colony_event }
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_105 }
					}
					set_country_flag = TO_nhs_hellenicconversion_105
					country_event = { id = nhs_hellenicconversion.105 }
				}
				1 = {
					trigger = {
						num_of_cities = 2
						any_owned_province = {
							is_colony = yes
							colonysize = 400
							NOT = { has_province_modifier = nhs_hcd_land_dispute }
							NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
							NOT = { has_province_modifier = nhs_hcd_had_colony_event }
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_106 }
					}
					set_country_flag = TO_nhs_hellenicconversion_106
					country_event = { id = nhs_hellenicconversion.106 }
				}
				1 = {
					trigger = {
						OR = {
							employed_advisor = {
								category = ADM
								religion = ROOT
							}
							employed_advisor = {
								category = ADM
								religion = heretic
							}
							employed_advisor = {
								category = DIP
								religion = ROOT
							}
							employed_advisor = {
								category = DIP
								religion = heretic
							}
							employed_advisor = {
								category = MIL
								religion = ROOT
							}
							employed_advisor = {
								category = MIL
								religion = heretic
							}
						}
						NOT = { has_country_flag = TO_nhs_hellenicconversion_107 }
					}
					set_country_flag = TO_nhs_hellenicconversion_107
					country_event = { id = nhs_hellenicconversion.107 }
				}
			}
		}
		clr_country_flag =  TO_hcd_picked_major_event
	}

	option = {
		# Dummy option, must be present
		name = nhs2_hidden.a
	}
}

# Hidden event selector, assemblies
country_event = {
	id = nhs_hellenicconversion.1000
	title = nhs2_hidden.t
	desc = nhs2_hidden.d
	picture = OLYMPIANS_eventPicture

	hidden = yes
	is_triggered_only = yes

	trigger = {
		NOT = { is_year = 1468 }
		has_country_flag = hellenic_conversion_preacher
		nhs_condition_all_ely = { KOMANDA = tag }
		religion = orthodox
		has_country_flag = nhs_pagan_assemblies
		any_owned_province = {
			has_province_modifier = nhs_hcd_Pagan_minority
		}
	}
	
	# mean_time_to_happen = {
	# 	months = 6
	# }

	immediate = {
		random_list = {
			10 = {
				trigger = {
					any_owned_province = {
						religion = orthodox
						has_province_modifier = nhs_hcd_Pagan_minority
						OR = {
							NOT = { has_province_flag = nhs_assemblies_local_event }
							had_province_flag = {
								flag = nhs_assemblies_local_event
								days = 1825
							}
						}
					}
				}
				modifier = {
					factor = 0.5
					has_country_flag = nhs_had_hellenicconversion_41
				}
				set_country_flag = nhs_had_hellenicconversion_41
				country_event = { id = nhs_hellenicconversion.41 }
			}
			10 = {
				trigger = {
					any_owned_province = {
						has_province_modifier = nhs_hcd_Pagan_minority
						OR = {
							NOT = { has_province_flag = nhs_assemblies_local_event }
							had_province_flag = {
								flag = nhs_assemblies_local_event
								days = 1825
							}
						}
					}
				}
				modifier = {
					factor = 0.5
					has_country_flag = nhs_had_hellenicconversion_43
				}
				set_country_flag = nhs_had_hellenicconversion_43
				country_event = { id = nhs_hellenicconversion.43 }
			}
			10 = {
				trigger = {
					NOT = { has_country_flag = nhs_had_hellenicconversion_44 }
				}
				set_country_flag = nhs_had_hellenicconversion_44
				country_event = { id = nhs_hellenicconversion.44 }
			}
		}
	}

	option = {
		# Dummy option, must be present
		name = nhs2_hidden.a
	}
}

# Hidden event selector, inquisition
country_event = {
	id = nhs_hellenicconversion.1001
	title = nhs2_hidden.t
	desc = nhs2_hidden.d
	picture = OLYMPIANS_eventPicture

	hidden = yes
	is_triggered_only = yes

	trigger = {
		NOT = { is_year = 1468 }
		nhs_condition_all_ely = { KOMANDA = tag }
		to_nhs_hellenic_disaster_eligible_for_inquisition_events = yes
	}

	immediate = {
		random_list = {
			10 = {
				modifier = {
					factor = 0.5
					has_country_flag = nhs_had_hellenicconversion_51
				}
				modifier = {
					factor = 0.5
					NOT = { has_advisor = yes }
				}
				set_country_flag = nhs_had_hellenicconversion_51
				country_event = { id = nhs_hellenicconversion.51 }
			}
			10 = {
				trigger = {
					any_owned_province = {
						is_capital = no
						religion = orthodox
						NOT = { has_province_modifier = nhs_hdc_witch_trials_cd }
					}
				}
				modifier = {
					factor = 0.5
					has_country_flag = nhs_had_hellenicconversion_52
				}
				set_country_flag = nhs_had_hellenicconversion_52
				country_event = { id = nhs_hellenicconversion.52 }
			}
			10 = {
				trigger = {
					has_dlc = "Rights of Man"
					NOT = { has_country_flag = nhs_had_hellenicconversion_53 }
				}
				set_country_flag = nhs_had_hellenicconversion_53
				country_event = { id = nhs_hellenicconversion.53 }
			}
		}
	}

	option = {
		# Dummy option, must be present
		name = nhs2_hidden.a
	}
}


################
# Basic events #
################

# Pagans refuse to pay taxes
country_event = {
	id = nhs_hellenicconversion.101
	title = nhs_hellenicconversion101.t 
	desc = nhs_hellenicconversion101.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					culture_group = ROOT
					NOT = { has_province_modifier = nhs_hcd_hellenic_conversion_strife }
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Increase tax collection efforts and drive them out
		name = nhs_hellenicconversion.101.a
		add_treasury = 30
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			to_nhs_spawn_pre_disaster_hellenic_rebels = { SIZE = 1 }
			add_province_modifier = {
				name = nhs_hcd_Pagan_taxes
				duration = 3650
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = { 
		# Increase tax collection efforts
		name = nhs_hellenicconversion.101.b
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_Pagan_taxes
				duration = 1825
			}
		}
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Tax the church
		name = nhs_hellenicconversion.101.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Forfeit taxes
		name = nhs_hellenicconversion.101.d
		ai_chance = {
			factor = 1
		}

		add_treasury = -30
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	} 

}


# Zealots attack Pagans
country_event = { 
	id = nhs_hellenicconversion.102
	title = nhs_hellenicconversion102.t 
	desc = nhs_hellenicconversion102.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					culture_group = ROOT
					NOT = { has_province_modifier = nhs_hcd_hellenic_conversion_strife }
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Burn more Pagans
		name = nhs_hellenicconversion.102.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Let the zealots do their thing
		name = nhs_hellenicconversion.102.b
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			add_devastation = 25
			# add_province_modifier = {
			# 	name = nhs_hcd_hellenic_conversion_strife
			# 	duration = 1825
			# }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Stop the zealots
		name = nhs_hellenicconversion.102.c
		ai_chance = {
			factor = 0
		}
		
		event_target:nhs_hcd_target_province = {
			spawn_rebels = {
				type = orthodox_rebels
				size = 1
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Restore order
		name = nhs_hellenicconversion.102.d
		ai_chance = {
			factor = 1
		}

		add_mil_power = -50
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_hellenic_conversion_strife
				duration = 3650
			}
		}

		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	} 

}


# Priest killed
country_event = {
	id = nhs_hellenicconversion.103
	title = nhs_hellenicconversion103.t 
	desc = nhs_hellenicconversion103.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes

	option = {
		# Accuse the Pagans
		name = nhs_hellenicconversion.103.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Accuse natives
		name = nhs_hellenicconversion.103.b
		trigger = {
			has_estate = estate_all_natives
		}
		ai_chance = {
			factor = 50
		}

		add_estate_loyalty = {
			estate = estate_all_natives
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Let the matter drop
		name = nhs_hellenicconversion.103.c
		ai_chance = {
			factor = 1
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		} 
		add_dip_power = -50
		add_legitimacy = -5
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

}


# Angered church
country_event = {
	id = nhs_hellenicconversion.104
	title = nhs_hellenicconversion104.t 
	desc = nhs_hellenicconversion104.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = { 
		# Issue a public condemenation of Pagans
		name = nhs_hellenicconversion.104.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = { 
		# Refuse to hear the priest out
		name = nhs_hellenicconversion.104.b
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = { 
		# Make vague statements of supports to the church
		name = nhs_hellenicconversion.104.c
		ai_chance = {
			factor = 1
		}

		add_dip_power = -50
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}

# Needs disaster reducing option
# Pagan settlers
country_event = { 
	id = nhs_hellenicconversion.105
	title = nhs_hellenicconversion105.t 
	desc = nhs_hellenicconversion105.d
	picture = COLONIZATION_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_colony = yes
					colonysize = 400
					NOT = { has_province_modifier = nhs_hcd_land_dispute }
					NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
					NOT = { has_province_modifier = nhs_hcd_had_colony_event }
				}
				save_event_target_as = nhs_hcd_target_province
				add_province_modifier = {
					name = nhs_hcd_had_colony_event
					duration = 1825
					hidden = yes
				}
			}
		}
	}

	option = {
		# Conversion or death
		name = nhs_hellenicconversion.105.a
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			add_colonysize = -100
			# add_province_modifier = {
			# 	name = nhs_hcd_land_dispute
			# 	duration = 90
			# }
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Let them settle
		name = nhs_hellenicconversion.105.b
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_land_dispute
				duration = 3650
			}
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Protect the settlers
		name = nhs_hellenicconversion.105.c
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			add_colonysize = 100
			# add_province_modifier = {
			# 	name = nhs_hcd_land_dispute
			# 	duration = 30
			# }
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_major = yes

		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Mediate Conflicts? I'm kinda out of ideas
		name = nhs_hellenicconversion.105.d
		ai_chance = {
			factor = 1
		}

		add_adm_power = -50
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_land_dispute
				duration = 1825
			}
		}
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}


# Pagans Flee
country_event = {
	id = nhs_hellenicconversion.106
	title = nhs_hellenicconversion106.t
	desc = nhs_hellenicconversion106.d
	picture = BORDER_TENSION_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_colony = yes
					colonysize = 400
					NOT = { has_province_modifier = nhs_hcd_land_dispute }
					NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
					NOT = { has_province_modifier = nhs_hcd_had_colony_event }
				}
				save_event_target_as = nhs_hcd_target_province
				add_province_modifier = {
					name = nhs_hcd_had_colony_event
					duration = 1825
					hidden = yes
				}
			}
		}
	}

	option = {
		# Stop them
		name = nhs_hellenicconversion.106.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_disaster_progress = {
					disaster = nhs_hcd_hellenic_crisis
					value = 75
				}
			}
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_colonial_tensions
				duration = 3650
			}
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Let them go and seize their land
		name = nhs_hellenicconversion.106.b
		ai_chance = {
			factor = 0
		}

		add_treasury = 50
		event_target:nhs_hcd_target_province = {
			add_colonysize = -200
			# add_province_modifier = {
			# 	name = nhs_hcd_colonial_tensions
			# 	duration = 90
			# }
		}
		if = {
			limit = {
				has_province_modifier = nhs_hcd_land_dispute
			}
			remove_province_modifier = nhs_hcd_land_dispute
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Let them go
		name = nhs_hellenicconversion.106.c
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					has_disaster_progress = {
						disaster = nhs_hcd_hellenic_crisis
						value = 75
					}
				}
			}
		}

		event_target:nhs_hcd_target_province = {
			add_colonysize = -200
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	# option = {
	# 	# Send in new settlers
	# 	name = nhs_hellenicconversion.106.d

	# 	event_target:nhs_hcd_target_province = {
	# 		add_province_modifier = {
	# 			name = nhs_hcd_colonial_tensions
	# 			duration = 30
	# 		}
	# 	}
	# 	add_years_of_income = -0.25
	# 	add_dip_power = -50
	# 	custom_tooltip = hellenicconversion_anger_neither.tt      
	# }
}


# Pagan advisor
country_event = { 
	id = nhs_hellenicconversion.107
	title = nhs_hellenicconversion107.t 
	desc = nhs_hellenicconversion107.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_list = {
				1 = {
					trigger = {
						OR = {
							employed_advisor = {
								category = ADM
								religion = ROOT
							}
							employed_advisor = {
								category = ADM
								religion = heretic
							}
						}
					}
					set_country_flag = nhs_hcd_advisor_events_adm
				}
				1 = {
					trigger = {
						OR = {
							employed_advisor = {
								category = DIP
								religion = ROOT
							}
							employed_advisor = {
								category = DIP
								religion = heretic
							}
						}
					}
					set_country_flag = nhs_hcd_advisor_events_dip
				}
				1 = {
					trigger = {
						OR = {
							employed_advisor = {
								category = MIL
								religion = ROOT
							}
							employed_advisor = {
								category = MIL
								religion = heretic
							}
						}
					}
					set_country_flag = nhs_hcd_advisor_events_mil
				}
			}
		}
	}

	option = { 
		# Fire the advisor
		name = nhs_hellenicconversion.107.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		trigger_switch = {
			on_trigger = has_country_flag
			nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
			nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
			nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes

		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = { 
		# Fair trial
		name = nhs_hellenicconversion.107.b
		ai_chance = {
			factor = 0
		}

		random_list = {
			75 = {
				trigger_switch = {
					on_trigger = has_country_flag
					nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
					nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
					nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
				}
			}
			25 = {
				add_prestige = 10
			}
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = { 
		# Stand by the advisor
		name = nhs_hellenicconversion.107.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = { 
		# Pay retirement
		name = nhs_hellenicconversion.107.d
		ai_chance = {
			factor = 1
		}

		add_treasury = -30
		# add_adm_power = -50
		# add_years_of_income = -0.2
		trigger_switch = {
			on_trigger = has_country_flag
			nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
			nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
			nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
		}
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	after = {
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				nhs_hcd_advisor_events_adm = { clr_country_flag = nhs_hcd_advisor_events_adm }
				nhs_hcd_advisor_events_dip = { clr_country_flag = nhs_hcd_advisor_events_dip }
				nhs_hcd_advisor_events_mil = { clr_country_flag = nhs_hcd_advisor_events_mil }
			}
		}
	}
}


#########################
# Funeral of Georgios   #
#########################

# Death of Georgios
country_event = {
	id = nhs_hellenicconversion.2
	title = nhs_hellenicconversion2.t 
	desc = nhs_hellenicconversion2.d
	picture = REFORM_eventPicture
	
	is_triggered_only = yes

	option = {
		# Organise an official funeral 
		name = nhs_hellenicconversion.2.a
		ai_chance = {
			factor = 0
		}

		add_treasury = -25
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
		remove_country_modifier = nhs_hcd_hellenic_struggles
		add_country_modifier = {
			name = nhs_hcd_hellenic_struggles_legacy
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_hellenicconversion.2.a.tt
		random_list = {
			10 = {
				country_event = { id = nhs_hellenicconversion.21 days = 5 }  # Emperor dies
			}
			90 = {
				country_event = { id = nhs_hellenicconversion.22 days = 5 }  # Backlash from church
			}
		}
	}

	option = {
		# Covertly fund a funeral
		name = nhs_hellenicconversion.2.b
		ai_chance = {
			factor = 1
		}

		add_treasury = -25
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
		remove_country_modifier = nhs_hcd_hellenic_struggles
		add_country_modifier = {
			name = nhs_hcd_hellenic_struggles_legacy
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_hellenicconversion.2.b.tt
		random_list = {
			30 = {
				country_event = { id = nhs_hellenicconversion.23 days = 5 }  # Corruption discovered
			}
			70 = {
				country_event = { id = nhs_hellenicconversion.24 days = 5 }  # Funeral goes as planned
			}
		}
	}

	option = { 
		# Let the Pagans organise their own event
		name = nhs_hellenicconversion.2.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
		remove_country_modifier = nhs_hcd_hellenic_struggles
		add_country_modifier = {
			name = nhs_hcd_hellenic_struggles_legacy
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		custom_tooltip = nhs_hellenicconversion.2.c.tt
		random_list = {
			60 = {
				country_event = { id = nhs_hellenicconversion.25 days = 5 }  # Violent clashes
			}
			40 = {
				country_event = { id = nhs_hellenicconversion.26 days = 5 }  # Peaceful vigil
			}
		}
	}

	option = { 
		# Condemn the man
		name = nhs_hellenicconversion.2.d
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
		remove_country_modifier = nhs_hcd_hellenic_struggles
		add_country_modifier = {
			name = nhs_hcd_hellenic_struggles_legacy
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		custom_tooltip = nhs_hellenicconversion.2.d.tt
		random_list = {
			40 = {
				country_event = { id = nhs_hellenicconversion.27 days = 5 }  # Pagans outraged
			}
			30 = {
				country_event = { id = nhs_hellenicconversion.28 days = 5 }  # Pagans rise up in violence
			}
			30 = {
				country_event = { id = nhs_hellenicconversion.29 days = 5 }  # Orthodox violence
			}
		}
	}
}

# TODO rewrite loc to be an almost murder
# Ruler assassinated during funeral
country_event = {
	id = nhs_hellenicconversion.21
	title = nhs_hellenicconversion21.t
	desc = nhs_hellenicconversion21.d
	picture = DEATH_OF_HEIR_eventPicture

	is_triggered_only = yes 

	# immediate = {
	# 	hidden_effect = {
	# 		kill_ruler = yes
	# 	}
	# }

	option = { 
		# Round up the Pagan leaders
		name = nhs_hellenicconversion.21.a 
		ai_chance = {
			factor = 0
		}

		add_country_modifier = {
			name = nhs_hcd_hellenic_coup
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = to_has_happened_tt
		add_ruler_modifier = {
			name = to_hcd_monarch_stabbed
			duration = 1825
		}
	}

	option = { 
		# Accuse the church of plotting against the emperor
		name = nhs_hellenicconversion.21.b 
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -20
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = to_has_happened_tt
		add_ruler_modifier = {
			name = to_hcd_monarch_stabbed
			duration = 1825
		}
	}

	option = { 
		# Accuse no one
		name = nhs_hellenicconversion.21.c 
		ai_chance = {
			factor = 1
		}

		add_stability = -1
		# custom_tooltip = hellenicconversion_anger_neither.tt
		# custom_tooltip = to_has_happened_tt
		add_ruler_modifier = {
			name = to_hcd_monarch_stabbed
			duration = 1825
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Church angered by funeral
country_event = { 
	id = nhs_hellenicconversion.22
	title = nhs_hellenicconversion22.t
	desc = nhs_hellenicconversion22.d
	picture = STREET_SPEECH_eventPicture

	is_triggered_only = yes

	option = { 
		# The church can eat it
		name = nhs_hellenicconversion.22.a
		ai_chance = {
			factor = 0
		}

		add_prestige = 10
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		add_estate_influence_modifier = {
			estate = estate_church
			desc = EST_VAL_HCD_CHURCH_COWED
			influence = -15
			duration = 3650
		}
		# random_list = {
		# 	50 = {}
		# 	50 = {
		# 		random_owned_province = {
		# 			limit = {
		# 				is_city = yes
		# 				religion = orthodox
		# 			}
		# 			spawn_rebels = {
		# 				type = orthodox_rebels
		# 				size = 1
		# 			}
		# 		}
		# 	}
		# }
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = { 
		# Make sure the church stays quiet
		name = nhs_hellenicconversion.22.b
		ai_chance = {
			factor = 1
		}

		add_years_of_income = -0.25
		add_corruption = 2
		random_list = {
			50 = {
				custom_tooltip = nhs_hellenicconversion.22.b.1
			}
			50 = {
				custom_tooltip = nhs_hellenicconversion.22.b.2
				add_legitimacy = -10
			}
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Corruption discovered
country_event = {
	id = nhs_hellenicconversion.23
	title = nhs_hellenicconversion23.t
	desc = nhs_hellenicconversion23.d
	picture = PROTESTANT_CATHOLIC_DEBATE_eventPicture

	is_triggered_only = yes

	option = {
		name = nhs_hellenicconversion.23.a

		# add_corruption = 2
		add_legitimacy = -10
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Funeral goes as planned
country_event = {
	id = nhs_hellenicconversion.24
	title = nhs_hellenicconversion24.t
	desc = nhs_hellenicconversion24.d
	picture = CATHOLIC_RULERS_PRAYING_eventPicture

	is_triggered_only = yes

	option = {
		name = nhs_hellenicconversion.24.a
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Violent clashes
country_event = {
	id = nhs_hellenicconversion.25
	title = nhs_hellenicconversion25.t
	desc = nhs_hellenicconversion25.d
	picture = SIEGE_PRAGUE_CASTLE_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = yes
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Call down the guard
		name = nhs_hellenicconversion.25.a
		goto = nhs_hcd_target_province
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		random_owned_province = {
			limit = {
				is_capital = yes
			}
			add_devastation = 10
			# spawn_rebels = {
			# 	type = particularist_rebels
			# 	size = 1
			# }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Attempt to talk them down
		name = nhs_hellenicconversion.25.b
		ai_chance = {
			factor = 1
		}

		add_dip_power = -50
		# random_list = {
		# 	50 = {
		# 		add_legitimacy = 5
		# 	}
		# 	50 = {
		# 		random_owned_province = {
		# 			limit = {
		# 				is_capital = yes
		# 			}
		# 			spawn_rebels = {
		# 				type = particularist_rebels
		# 				size = 1
		# 			}
		# 		}
		# 	}
		# }
		# custom_tooltip = hellenicconversion_anger_neither.tt
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Peaceful vigil
country_event = {
	id = nhs_hellenicconversion.26
	title = nhs_hellenicconversion26.t
	desc = nhs_hellenicconversion26.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = nhs_hellenicconversion.26.a
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Pagans outraged
country_event = {
	id = nhs_hellenicconversion.27
	title = nhs_hellenicconversion27.t
	desc = nhs_hellenicconversion27.d
	picture = DEBATE_REPUBLICAN_eventPicture

	is_triggered_only = yes

	option = { 
		# Too bad
		name = nhs_hellenicconversion.27.a
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Pagans rise up
country_event = {
	id = nhs_hellenicconversion.28
	title = nhs_hellenicconversion28.t
	desc = nhs_hellenicconversion28.d
	picture = ANGRY_MOB_eventPicture

	goto = nhs_hcd_target_province

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = yes
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = { 
		# Stop them
		name = nhs_hellenicconversion.28.a
		ai_chance = {
			factor = 1
		}
		# Lets be nice to AI
		if = {
			limit = {
				ai = no
			}
			capital_scope = {
				to_nhs_spawn_pre_disaster_hellenic_rebels = { SIZE = 1 }
			}
		}
		else = {
			capital_scope = {
				add_devastation = 5
			}
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Do not intervene
		name = nhs_hellenicconversion.28.b
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		random_owned_province = {
			limit = {
				is_capital = yes
			}
			# add_base_manpower = -1
			add_devastation = 20
			# add_unrest = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Orthodox violence
country_event = {
	id = nhs_hellenicconversion.29
	title = nhs_hellenicconversion29.t
	desc = nhs_hellenicconversion29.d
	picture = VILLAGE_RAIDED_eventPicture

	is_triggered_only = yes

	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_city = yes
					is_capital = no
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = { 
		# Brutal
		name = nhs_hellenicconversion.29.a
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			add_devastation = 10
			# add_province_modifier = {
			# 	name = nhs_hcd_Pagan_persecution
			# 	duration = 1825
			# }
			# spawn_rebels = {
			# 	type = particularist_rebels
			# 	size = 1
			# }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = { 
		# Let them fight
		name = nhs_hellenicconversion.29.b
		ai_chance = {
			factor = 1
		}

		event_target:nhs_hcd_target_province = {
			add_devastation = 20
			add_province_modifier = {
				name = nhs_hcd_Pagan_persecution
				duration = 1825
			}
			# add_base_manpower = -1
			# add_devastation = 50
			# add_unrest = 5
		}
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Stop this madness!
		name = nhs_hellenicconversion.29.c
		ai_chance = {
			factor = 1
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		if = {
			limit = {
				ai = no
			}
			event_target:nhs_hcd_target_province = {
				spawn_rebels = {
					type = orthodox_rebels
					size = 1
				}
			}
		}
		else = {
			event_target:nhs_hcd_target_province = {
				add_devastation = 5
			}
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


##################
# Royal Heresy   #
##################

# Heir accused of being a heretic
country_event = {
	id = nhs_hellenicconversion.3
	title = nhs_hellenicconversion3.t
	desc = nhs_hellenicconversion3.d
	picture = orthodox_court_eventPicture

	is_triggered_only = yes

	option = { 
		# Denounce the heir
		name = nhs_hellenicconversion.3.a
		ai_chance = {
			factor = 1
		}

		add_heir_claim = -20
		random_list = {
			33 = {
				country_event = { id = nhs_hellenicconversion.31 days = 31 } # Faifthul heir
			}
			33 = {
				country_event = { id = nhs_hellenicconversion.32 days = 31 } # Heathen heir
			}
			# Legionary doesn't like RNG. Could be reworked and shown as tooltip which options give assasination.
			# 33 = {
			# 	country_event = { id = nhs_hellenicconversion.33 days = 31 } # Heir assassinated
			# }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Stand by the heir
		name = nhs_hellenicconversion.3.b
		ai_chance = {
			factor = 1
		}

		add_legitimacy = -10
		random_list = {
			33 = {
				country_event = { id = nhs_hellenicconversion.31 days = 31 } # Faifthul heir
			}
			33 = {
				country_event = { id = nhs_hellenicconversion.32 days = 31 } # Heathen heir
			}
			# Legionary doesn't like RNG. Could be reworked and shown as tooltip which options give assasination.
			# 33 = {
			# 	country_event = { id = nhs_hellenicconversion.33 days = 31 } # Heir assassinated
			# }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Have the priest thrown in jail
		name = nhs_hellenicconversion.3.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		random_list = {
			33 = {
				country_event = { id = nhs_hellenicconversion.31 days = 31 } # Faifthul heir
			}
			33 = {
				country_event = { id = nhs_hellenicconversion.32 days = 31 } # Heathen heir
			}
			# Legionary doesn't like RNG. Could be reworked and shown as tooltip which options give assasination.
			# 33 = {
			# 	country_event = { id = nhs_hellenicconversion.33 days = 31 } # Heir assassinated
			# }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}
}


# Faithful Heir
country_event = {
	id = nhs_hellenicconversion.31
	title = nhs_hellenicconversion31.t
	desc = nhs_hellenicconversion31.d
	picture = RELIGIOUS_CONVERSION_eventPicture

	is_triggered_only = yes

	trigger = {
		has_heir = yes
	}

	option = {
		name = nhs_hellenicconversion.31.a

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		add_heir_claim = 20
		add_legitimacy = 10
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Heathen Heir
country_event = {
	id = nhs_hellenicconversion.32
	title = nhs_hellenicconversion32.t
	desc = nhs_hellenicconversion32.d
	picture = COURT_eventPicture

	is_triggered_only = yes

	trigger = {
		has_heir = yes
	}

	immediate = {
		set_heir_religion = pantheon_worship
	}

	option = {
		# Have the heir JAILED
		name = nhs_hellenicconversion.32.a
		ai_chance = {
			factor = 0
		}

		# add_stability = -1
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		kill_heir = {}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Refuse to hurt the heir
		name = nhs_hellenicconversion.32.b
		ai_chance = {
			factor = 1
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		add_heir_claim = -20
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


# Heir assassinated
country_event = {
	id = nhs_hellenicconversion.33
	title = nhs_hellenicconversion33.t
	desc = nhs_hellenicconversion33.d
	picture = ASSASSINATION_eventPicture

	trigger = {
		has_heir = yes
	}

	is_triggered_only = yes  

	immediate = {
		hidden_effect = {
			kill_heir = {}
		}
	}

	option = {
		name = nhs_hellenicconversion.33.a

		add_stability = -1
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}


######################
# Pagan Assemblies   #
######################

# Pagan assemblies
country_event = {
	id = nhs_hellenicconversion.4
	title = nhs_hellenicconversion4.t
	desc = nhs_hellenicconversion4.d
	picture = REFORM_eventPicture

	fire_only_once = yes
	goto = nhs_hcd_target_province

	trigger = {
		NOT = { is_year = 1468 }
		has_country_flag = hellenic_conversion_preacher
		nhs_condition_all_ely = { KOMANDA = tag }
		religion = orthodox
		num_of_cities = 2
		OR = {
			has_disaster_progress = {
				disaster = nhs_hcd_hellenic_crisis
				value = 70
			}
			check_variable = {
				which = HellenicDisasterProgress
				value = 5
			}
		}
		any_owned_province = {
			is_city = yes
			is_capital = no
			culture_group = ROOT
		}
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_city = yes
					is_capital = no
					culture_group = ROOT
					area = chesapeake_area
				}
				save_event_target_as = nhs_hcd_target_province
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = nhs_hcd_target_province }
				}
				random_owned_province = {
					limit = {
						is_city = yes
						is_capital = no
						culture_group = ROOT
					}
					save_event_target_as = nhs_hcd_target_province
				}
			}
		}
	}

	option = {
		# Immediately put it down
		name = nhs_hellenicconversion.4.a
		ai_chance = {
			factor = 0
		}

		add_stability = -1
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 15
		}
		event_target:nhs_hcd_target_province = {
			add_devastation = 25
			# add_province_modifier = {
			# 	name = nhs_hcd_Pagan_minority
			# 	duration = -1
			# }
			to_nhs_spawn_pre_disaster_hellenic_rebels = { SIZE = 2 }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_huge = yes
		add_disaster_progress = {
			disaster = nhs_hcd_hellenic_crisis
			value = 24
		}
	}

	option = {
		# Refuse their demands
		name = nhs_hellenicconversion.4.b
		ai_chance = {
			factor = 0
		}

		set_country_flag = nhs_pagan_assemblies
		custom_tooltip = nhs_increase_hellenic_disaster_progress_by_0.5
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
			set_province_flag = nhs_hcd_first_pagan_minority_province
		}
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Let them be
		name = nhs_hellenicconversion.4.c
		ai_chance = {
			factor = 0
		}

		set_country_flag = nhs_pagan_assemblies
		custom_tooltip = nhs_increase_hellenic_disaster_progress_by_0.5
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_base_tax = 1
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
			set_province_flag = nhs_hcd_first_pagan_minority_province
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Private concessions
		name = nhs_hellenicconversion.4.d
		ai_chance = {
			factor = 1
		}

		set_country_flag = nhs_pagan_assemblies
		custom_tooltip = nhs_increase_hellenic_disaster_progress_by_0.5
		add_dip_power = -50
		event_target:nhs_hcd_target_province = {
			add_base_tax = 1
			add_local_autonomy = 50
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
			set_province_flag = nhs_hcd_first_pagan_minority_province
		}
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	after = {
		clr_country_flag = hellenic_conversion_major_event
	}
}

# Nearby christians angered
country_event = {
	id = nhs_hellenicconversion.41
	title = nhs_hellenicconversion41.t
	desc = nhs_hellenicconversion41.d
	picture = PRINCE_BISHOP_RESIGN_eventPicture

	# fire_only_once = yes
	is_triggered_only = yes
	goto = nhs_hcd_assemblies_target_province

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = nhs_pagan_assemblies
		religion = orthodox
		any_owned_province = {
			religion = orthodox
			has_province_modifier = nhs_hcd_Pagan_minority
			OR = {
				NOT = { has_province_flag = nhs_assemblies_local_event }
				had_province_flag = {
					flag = nhs_hcd_assemblies_target_province
					days = 1825
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			# random_owned_province = {
			# 	limit = {
			# 		is_capital = no
			# 		is_city = yes
			# 		any_neighbor_province = {
			# 			has_province_modifier = nhs_hcd_Pagan_minority
			# 		}
			# 	}
			# 	save_event_target_as = nhs_hcd_assemblies_target_province
			# }
			random_owned_province = {
				limit = {
					religion = orthodox
					has_province_modifier = nhs_hcd_Pagan_minority
					OR = {
						NOT = { has_province_flag = nhs_assemblies_local_event }
						had_province_flag = {
							flag = nhs_assemblies_local_event
							days = 1825
						}
					}
				}
				set_province_flag = nhs_assemblies_local_event
				save_event_target_as = nhs_hcd_assemblies_target_province
			}
		}
	}

	# mean_time_to_happen = {
	# 	months = 12
	# }

	option = {
		# Demand compensation from the pagans
		name = nhs_hellenicconversion.41.a
		ai_chance = {
			factor = 0
		}

		add_mil_power = -25
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_assemblies_target_province = {
			add_unrest = 10
		}
		# random_owned_province = {
		# 	limit = {
		# 		has_province_modifier = nhs_hcd_Pagan_minority
		# 	}
		# 	add_base_tax = -1
		# }
		# event_target:nhs_hcd_assemblies_target_province = {
		# 	add_base_tax = 1
		# }
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Ignore the christians
		name = nhs_hellenicconversion.41.b
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_assemblies_target_province = {
			add_unrest = 10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Settle the dispute
		name = nhs_hellenicconversion.41.c
		ai_chance = {
			factor = 1
		}

		add_treasury = -25
		add_adm_power = -25
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# The natives you say?
		name = nhs_hellenicconversion.41.d
		ai_chance = {
			factor = 0
		}

		trigger = {
			OR = {
				has_estate = estate_all_natives
				has_country_modifier = nhs_early_uprising_reduction
				any_owned_province = {
					native_culture = yes
				}
				any_known_country = {
					native_culture_primary = yes
					NOT = {
						border_distance = {
							who = ROOT
							distance = 20
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_estate = estate_all_natives
			}
			add_estate_loyalty = {
				estate = estate_all_natives
				loyalty = -10
			}
		}
		else_if = {
			limit = {
				has_country_modifier = nhs_early_uprising_reduction
			}
			remove_country_modifier = nhs_early_uprising_reduction
		}
		else_if = {
			limit = {
				any_owned_province = {
					native_culture = yes
				}
			}
			random_owned_province = {
				limit = {
					native_culture = yes
				}
				add_unrest = 5
				add_nationalism = 10
			}
		}
		else_if = {
			limit = {
				any_neighbor_country = {
					ROOT = {
						knows_country = PREV
					}
					native_culture_primary = yes
				}
			}
			random_neighbor_country = {
				limit = {
					native_culture_primary = yes
				}
				add_opinion = {
					who = ROOT
					modifier = nhs_hcd_diverted_blame
				}
			}
		}
		else_if = {
			limit = {
				any_known_country = {
					native_culture_primary = yes
					NOT = {
						border_distance = {
							who = ROOT
							distance = 20
						}
					}
				}
			}
			random_known_country = {
				limit = {
					native_culture_primary = yes
					NOT = {
						border_distance = {
							who = ROOT
							distance = 20
						}
					}
				}
				add_opinion = {
					who = ROOT
					modifier = nhs_hcd_diverted_blame
				}
			}
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}


# New pagan assembly
country_event = {
	id = nhs_hellenicconversion.42
	title = nhs_hellenicconversion42.t
	desc = nhs_hellenicconversion42.d
	picture = CITY_DEVELOPMENT_eventPicture

	# fire_only_once = yes
	# is_triggered_only = yes
	goto = nhs_hcd_new_assemblies_target_province

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = nhs_pagan_assemblies
		had_country_flag = {
			flag = nhs_pagan_assemblies
			days = 365
		}
		any_owned_province = {
			is_capital = no
			is_city = yes
			culture_group = ROOT
			NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
			NOT = { has_province_flag = nhs_had_pletnonist_assembly }
		}
		religion = orthodox
		OR = {
			AND = {
				num_of_owned_provinces_with = {
					value = 5
					is_city = yes
					culture_group = ROOT
				}
				NOT = {
					num_of_owned_provinces_with = {
						value = 2
						is_city = yes
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
			}
			AND = {
				num_of_owned_provinces_with = {
					value = 7
					is_city = yes
					culture_group = ROOT
				}
				NOT = {
					num_of_owned_provinces_with = {
						value = 3
						is_city = yes
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
			}
			AND = {
				num_of_owned_provinces_with = {
					value = 9
					is_city = yes
					culture_group = ROOT
				}
				NOT = {
					num_of_owned_provinces_with = {
						value = 4
						is_city = yes
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
			}
			AND = {
				num_of_owned_provinces_with = {
					value = 11
					is_city = yes
					culture_group = ROOT
				}
				NOT = {
					num_of_owned_provinces_with = {
						value = 5
						is_city = yes
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = nhs_pagan_assemblies
			set_country_flag = nhs_pagan_assemblies
			random_owned_province = {
				limit = {
					is_capital = no
					is_city = yes
					culture_group = ROOT
					NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
					any_neighbor_province = {
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
				save_event_target_as = nhs_hcd_new_assemblies_target_province
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = nhs_hcd_new_assemblies_target_province }
				}
				random_owned_province = {
					limit = {
						is_capital = no
						is_city = yes
						culture_group = ROOT
						NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
					}
					save_event_target_as = nhs_hcd_new_assemblies_target_province
				}
			}
			event_target:nhs_hcd_new_assemblies_target_province = {
				set_province_flag = nhs_had_pletnonist_assembly
			}
		}
	}

	option = {
		# Allow it
		name = nhs_hellenicconversion.42.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate  = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_new_assemblies_target_province = {
			add_base_tax = 1
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Placate the clergy
		name = nhs_hellenicconversion.42.b
		ai_chance = {
			factor = 1
		}
		
		add_legitimacy = -5
		add_prestige = -5
		event_target:nhs_hcd_new_assemblies_target_province = {
			add_base_tax = 1
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
		}
	}

	option = {
		# Restrain it
		name = nhs_hellenicconversion.42.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate  = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_new_assemblies_target_province = {
			to_nhs_spawn_pre_disaster_hellenic_rebels = { SIZE = 1 }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}
}


# Pagans request tax exemption
country_event = {
	id = nhs_hellenicconversion.43
	title = nhs_hellenicconversion43.t
	desc = nhs_hellenicconversion43.d
	picture = FAMINE_eventPicture

	# fire_only_once = yes
	is_triggered_only = yes
	goto = nhs_hcd_assemblies_target_province

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = nhs_pagan_assemblies
		any_owned_province = {
			has_province_modifier = nhs_hcd_Pagan_minority
			OR = {
				NOT = { has_province_flag = nhs_assemblies_local_event }
				had_province_flag = {
					flag = nhs_assemblies_local_event
					days = 1825
				}
			}
		}
		religion = orthodox
	}

	# mean_time_to_happen = {
	# 	months = 24
	# }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority
					OR = {
						NOT = { has_province_flag = nhs_assemblies_local_event }
						had_province_flag = {
							flag = nhs_assemblies_local_event
							days = 1825
						}
					}
				}
				set_province_flag = nhs_assemblies_local_event
				save_event_target_as = nhs_hcd_assemblies_target_province
			}
		}
	}

	option = { 
		# Refuse
		name = nhs_hellenicconversion.43.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_assemblies_target_province = {
			add_unrest = 10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Offer assistance
		name = nhs_hellenicconversion.43.b
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_assemblies_target_province = {
			add_province_modifier = {
				name = nhs_hcd_famine_aid
				duration = 1825
			}
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Offer exemption long term
		name = nhs_hellenicconversion.43.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_assemblies_target_province = {
			add_base_production = 1
			add_province_modifier = {
				name = nhs_hcd_famine_exempt
				duration = 7300
			}
		}
		to_nhs_hellenic_disaster_anger_orthodox_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Use the crown's ressources
		name = nhs_hellenicconversion.43.d
		ai_chance = {
			factor = 1
		}
		
		add_treasury = -25
		event_target:nhs_hcd_assemblies_target_province = {
			add_unrest = -5
		}
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}


# Pagans request representation
country_event = {
	id = nhs_hellenicconversion.44
	title = nhs_hellenicconversion44.t
	desc = nhs_hellenicconversion44.d
	picture = BURGHER_ESTATE_UPSET_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = nhs_pagan_assemblies
		any_owned_province = {
			has_province_modifier = nhs_hcd_Pagan_minority
		}
		religion = orthodox
	}

	# mean_time_to_happen = {
	# 	months = 24
	# }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = no
					is_city = yes
					has_province_modifier = nhs_hcd_Pagan_minority
				}
				save_event_target_as = nhs_hcd_assemblies_target_province
			}
		}
	}

	option = {
		# Accept
		name = nhs_hellenicconversion.44.a
		ai_chance = {
			factor = 0
		}

		# add_adm_power = -50
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_pagan_representation_modifiers_removed_tt
		add_country_modifier = {
			name = nhs_hcd_hellenic_representation
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		to_nhs_hellenic_disaster_anger_orthodox_major = yes
	}

	option = {
		# Refuse
		name = nhs_hellenicconversion.44.b
		goto = nhs_hcd_assemblies_target_province
		ai_chance = {
			factor = 0
		}

		add_patriarch_authority = 0.1
		event_target:nhs_hcd_assemblies_target_province = {
			to_nhs_spawn_pre_disaster_hellenic_rebels = { SIZE = 1 }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Offer concessions
		name = nhs_hellenicconversion.44.c
		ai_chance = {
			factor = 1
		}

		custom_tooltip = nhs_pagan_representation_modifiers_removed_tt
		add_country_modifier = {
			name = nhs_hcd_pagan_concessions 
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Negotiate
		name = nhs_hellenicconversion.44.d
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = righteous_personality
				ruler_has_personality = kind_hearted_personality
				ruler_has_personality = charismatic_negotiator_personality
				ruler_has_personality = silver_tongue_personality
			}
		}
		ai_chance = {
			factor = 500
		}

		add_prestige = -10
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_pagan_representation_modifiers_removed_tt
		add_country_modifier = {
			name = nhs_hcd_hellenic_representation
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}


########################
# People's inquisition #
########################

# Establish inquisition
country_event = {
	id = nhs_hellenicconversion.5
	title = nhs_hellenicconversion5.t
	desc = nhs_hellenicconversion5.d
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = hellenic_conversion_preacher
		religion = orthodox	
		has_disaster_progress = {
			disaster = nhs_hcd_hellenic_crisis
			value = 80
		}
		# check_variable = {
		# 	which = HellenicDisasterProgress
		# 	value = 5
		# }
	}

	mean_time_to_happen = {
		months = 2
		# modifier = {
		# 	factor = 0.5
		# 	estate_loyalty = {
		# 		estate = estate_church 
		# 		loyalty = 30
		# 	}
		# }
	}

	option = {
		# Allow the church to establish an inquisition
		name = nhs_hellenicconversion.5.a
		ai_chance = {
			factor = 1
		}

		set_estate_privilege = estate_church_nhs_inquisition_privilege
		custom_tooltip = nhs_dotted_line_tt
		add_disaster_progress = {
			disaster = nhs_hcd_hellenic_crisis
			value = -60
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		# custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
	}

	# option = {
	# 	# Fund a state-backed inquisition
	# 	name = nhs_hellenicconversion.5.b

	# 	add_years_of_income = -0.75
	# 	add_country_modifier = {
	# 		name = nhs_hcd_state_inquisition
	# 		duration = 1825
	# 	}
	# 	custom_tooltip = hellenicconversion_anger_neither.tt
	# }

	option = {
		# An inquistion is not necessary
		name = nhs_hellenicconversion.5.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		# hidden_effect = {
		# 	change_variable = {
		# 		which = OrthodoxUprising
		# 		value = 2
		# 	}
		# }
		# to_nhs_hellenic_disaster_anger_orthodox_major = yes
	}
}


# Purges
country_event = {
	id = nhs_hellenicconversion.51
	title = nhs_hellenicconversion51.t
	desc = nhs_hellenicconversion51.d
	picture = CHURCH_ESTATE_1_eventPicture
	
	# fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = hellenic_conversion_preacher
		has_estate_privilege = estate_church_nhs_inquisition_privilege
	}

	# mean_time_to_happen = {
	# 	months = 12
	# }

	immediate = {
		hidden_effect = {
			random_list = {
				1 = {
					trigger = {
						employed_advisor = {
							category = ADM
						}
					}
					set_country_flag = nhs_hcd_advisor_events_adm
				}
				1 = {
					trigger = {
						employed_advisor = {
							category = DIP
						}
					}
					set_country_flag = nhs_hcd_advisor_events_dip
				}
				1 = {
					trigger = {
						employed_advisor = {
							category = MIL
						}
					}
					set_country_flag = nhs_hcd_advisor_events_mil
				}
				1 = {
					trigger = {
						NOT = { has_advisor = yes }
					}
					set_country_flag = nhs_hcd_advisor_events_none
				}
			}
		}
	}

	option = {
		# Let the inquisition purge the suspected heathens (If advisor)
		name = nhs_hellenicconversion.51.a
		trigger = {
			has_advisor = yes
		}
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		trigger_switch = {
			on_trigger = has_country_flag
			nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
			nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
			nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
		}
		# set_country_flag = nhs_hcd_inquisition_purges
		# custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Let the inquisition purge the suspected heathens (No advisor)
		name = nhs_hellenicconversion.51.a
		trigger = {
			NOT = { has_advisor = yes }
		}
		ai_chance = {
			factor = 0
		}
		
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		add_dip_power = -25
		add_adm_power = -25
		add_mil_power = -25
		# set_country_flag = nhs_hcd_inquisition_purges
		# custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	# option = { 
	# 	# Have the list changed
	# 	name = nhs_hellenicconversion.51.b
		
	# 	add_estate_loyalty = {
	# 		estate = estate_church
	# 		loyalty = 5
	# 	}
	# 	add_corruption = 2
	# 	add_years_of_income = -0.25
	# 	set_country_flag = nhs_hcd_inquisition_purges
	# 	custom_tooltip = hellenicconversion_church_inquisition_accept.tt
	# 	custom_tooltip = nhs_new_line_tt
	# 	to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	# }

	option = {
		# Delay
		name = nhs_hellenicconversion.51.b
		ai_chance = {
			factor = 1
		}

		set_country_flag = nhs_hcd_opposed_the_inquisition
		add_adm_power = -50
		add_corruption = -1
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -15
		}
		# add_dip_power = -50
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Refuse
		name = nhs_hellenicconversion.51.c
		ai_chance = {
			factor = 0
		}

		set_country_flag = nhs_hcd_opposed_the_inquisition
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -15
		}
		# add_stability = -1
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	after = {
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				nhs_hcd_advisor_events_adm = { clr_country_flag = nhs_hcd_advisor_events_adm }
				nhs_hcd_advisor_events_dip = { clr_country_flag = nhs_hcd_advisor_events_dip }
				nhs_hcd_advisor_events_mil = { clr_country_flag = nhs_hcd_advisor_events_mil }
				nhs_hcd_advisor_events_none = { clr_country_flag = nhs_hcd_advisor_events_none }
			}
		}
	}
}


# Witch trials
country_event = {
	id = nhs_hellenicconversion.52
	title = nhs_hellenicconversion52.t
	desc = nhs_hellenicconversion52.d
	picture = aow_WITCHBURNING_eventPicture

	# fire_only_once = yes
	is_triggered_only = yes
	goto = nhs_hcd_target_province

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = hellenic_conversion_preacher
		has_estate_privilege = estate_church_nhs_inquisition_privilege
		num_of_cities = 2
		any_owned_province = {
			is_capital = no
			religion = orthodox
			NOT = { has_province_modifier = nhs_hdc_witch_trials_cd }
		}
	}

	# mean_time_to_happen = {
	# 	months = 12
	# }
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = no
					religion = orthodox
				}
				save_event_target_as = nhs_hcd_target_province
				add_province_modifier = {
					name = nhs_hdc_witch_trials_cd
					duration = 1825
					hidden = yes
				}
			}
		}
	}

	option = {
		# Tacitly approve
		name = nhs_hellenicconversion.52.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_target_province = {
			add_unrest = 10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Condem the trials
		name = nhs_hellenicconversion.52.b
		ai_chance = {
			factor = 0
		}

		set_country_flag = nhs_hcd_opposed_the_inquisition
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_unrest = 10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Intervene
		name = nhs_hellenicconversion.52.c
		ai_chance = {
			factor = 1
		}

		set_country_flag = nhs_hcd_opposed_the_inquisition
		add_mil_power = -25
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}


# Appointing a new consort
country_event = {
	id = nhs_hellenicconversion.53
	title = nhs_hellenicconversion53.t
	desc = {
		trigger = {
			has_consort = yes
		}
		desc = nhs_hellenicconversion53.d.a
	}
	desc = {
		trigger = {
			NOT = { has_consort = yes }
		}
		desc = nhs_hellenicconversion53.d.b
	}
	picture = BAD_WITH_MONARCH_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_dlc = "Rights of Man"
		has_country_flag = hellenic_conversion_preacher
		has_estate_privilege = estate_church_nhs_inquisition_privilege
	}

	# mean_time_to_happen = {
	# 	months = 12
	# }

	option = {
		# Divorce
		name = nhs_hellenicconversion.53.a
		trigger = {
			has_consort = yes
		}
		ai_chance = {
			factor = 1
		}

		divorce_consort_effect = yes
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		# set_country_flag = nhs_hcd_inquisition_divorce
		# custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Marry the woman
		name = nhs_hellenicconversion.53.b
		trigger = {
			NOT = { has_consort = yes }
		}
		ai_chance = {
			factor = 1
		}

		define_consort = {}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		# set_country_flag = nhs_hcd_inquisition_divorce
		# custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = { 
		# Refuse
		name = nhs_hellenicconversion.53.c
		ai_chance = {
			factor = 1
		}

		set_country_flag = nhs_hcd_opposed_the_inquisition
		add_prestige = 10
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}
}

########################################
# End of the crisis without a disaster #
########################################

# No Inquisition
country_event = {
	id = nhs_hellenicconversion.6
	title = nhs_hellenicconversion6.t
	desc = nhs_hellenicconversion6.d
	picture = DIPLOMACY_SIGNING_eventPicture

	major = yes
	major_trigger = { 
		knows_country = ROOT 
	}
	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = hellenic_conversion_preacher
		is_year = 1468
		religion = orthodox
		NOT = { has_estate_privilege = estate_church_nhs_inquisition_privilege }
	}

	immediate = {
		hidden_effect = {
			to_nhs_remove_pre_hellenic_disaster_flags = yes
			clr_country_flag = nhs_hcd_opposed_the_inquisition
		}
	}

	after = {
		hidden_effect = {
			set_variable = {
				which = HellenicUprising
				value = 0
			}
			set_variable = {
				which = OrthodoxUprising
				value = 0
			}
			set_variable = {
				which = HellenicDisasterProgress
				value = 0
			}
		}
	}

	option = {
		name = nhs_hellenicconversion.6.a
		ai_chance = {
			factor = 40
		}

		# custom_tooltip = nhs_hellenicconversion.6.tt
		# custom_tooltip = to_nhs_hellenic_disaster_ends_tt
		change_religion = pantheon_worship
		if = {
			limit = {
				has_spawned_rebels = orthodox_rebels
			}
			disband_rebels = orthodox_rebels
		}
		if = {
			limit = {
				has_spawned_rebels = pantheon_worship_rebels
			}
			disband_rebels = pantheon_worship_rebels
		}
		nhs_set_clergy_loyalty_to_50 = yes
		to_nhs_remove_all_clergy_privileges = yes
		to_nhs_remove_pre_hellenic_disaster_country_modifiers = yes
		add_country_modifier = {
			name = nhs_hrv_peaceful_resolution
			duration = 36500
		}
		if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_peaceful_unfriendly_hostile_tt
		}
		else_if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_moderate_neutral_tt
			add_legitimacy = 10
			add_stability_or_adm_power = yes
		}
		else = {
			custom_tooltip = to_nhs_consequences_moderate_friendly_tt
			add_legitimacy = 20
			to_add_2_stability_or_adm_power = yes
		}
		custom_tooltip = nhs_dotted_line_tt
		capital_scope = {
			if = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority
				}
				remove_province_modifier = nhs_hcd_Pagan_minority
			}
			change_religion = pantheon_worship
		}
		if = {
			limit = {
				any_owned_province = {
					has_province_modifier = nhs_hcd_Pagan_minority
					is_capital = no
				}
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority
					culture_group = ROOT
					is_capital = no
				}
				remove_province_modifier = nhs_hcd_Pagan_minority
				change_religion = pantheon_worship
			}
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_tolerated_minority_orthodox_in_the_future_tt
		set_country_flag = nhs_enable_tolerated_minority
		hidden_effect = {
			to_nhs_handle_post_disaster_tolerance_modifier_all_provinces = yes
		}
		to_nhs_remove_pre_hellenic_disaster_conflict_province_modifiers = yes
	}

	option = {
		name = nhs_hellenicconversion.6.b
		ai_chance = {
			factor = 60
		}
		if = {
			limit = {
				has_spawned_rebels = orthodox_rebels
			}
			disband_rebels = orthodox_rebels
		}
		if = {
			limit = {
				has_spawned_rebels = pantheon_worship_rebels
			}
			disband_rebels = pantheon_worship_rebels
		}
		if = {
			limit = {
				ruler_religion = pantheon_worship
			}
			set_ruler_religion = orthodox
		}
		# custom_tooltip = nhs_hellenicconversion.6.tt
		# custom_tooltip = to_nhs_hellenic_disaster_ends_tt
		to_nhs_remove_pre_hellenic_disaster_country_modifiers = yes
		add_country_modifier = {
			name = nhs_hrv_peaceful_resolution
			duration = 36500
		}
		if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_peaceful_unfriendly_hostile_tt
		}
		else_if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_moderate_neutral_tt
			add_legitimacy = 10
			add_stability_or_adm_power = yes
		}
		else = {
			custom_tooltip = to_nhs_consequences_moderate_friendly_tt
			add_legitimacy = 20
			to_add_2_stability_or_adm_power = yes
		}
		custom_tooltip = nhs_dotted_line_tt
		if = {
			limit = {
				capital_scope = {
					has_province_modifier = nhs_hcd_Pagan_minority
				}
			}
			capital_scope = {
				remove_province_modifier = nhs_hcd_Pagan_minority
			}
		}
		if = {
			limit = {
				capital_scope = {
					NOT = { religion = ROOT }
				}
			}
			capital_scope = {
				change_religion = ROOT
			}
		}
		if = {
			limit = {
				any_owned_province = {
					has_province_modifier = nhs_hcd_Pagan_minority
					is_capital = no
				}
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority
					culture_group = ROOT
					is_capital = no
				}
				remove_province_modifier = nhs_hcd_Pagan_minority
				change_religion = pantheon_worship
			}
		}

		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_tolerated_minority_hellenic_in_the_future_tt
		set_country_flag = nhs_enable_tolerated_minority
		hidden_effect = {
			to_nhs_handle_post_disaster_tolerance_modifier_all_provinces = yes
		}
		to_nhs_remove_pre_hellenic_disaster_conflict_province_modifiers = yes
	}
}

# With Inquisition
country_event = {
	id = nhs_hellenicconversion.54
	title = nhs_hellenicconversion54.t
	desc = nhs_hellenicconversion54.d
	# desc = {
	# 	trigger = {
	# 		NOT = { has_country_flag = nhs_hcd_opposed_the_inquisition }
	# 	}
	# 	desc = nhs_hellenicconversion54.d
	# }
	# desc = {
	# 	trigger = {
	# 		has_country_flag = nhs_hcd_opposed_the_inquisition
	# 	}
	# 	desc = nhs_hellenicconversion55.d
	# }
	picture = RELIGIOUS_TURMOIL_eventPicture

	major = yes
	major_trigger = { 
		knows_country = ROOT 
	}
	fire_only_once = yes

	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		has_country_flag = hellenic_conversion_preacher
		is_year = 1468
		religion = orthodox
		has_estate_privilege = estate_church_nhs_inquisition_privilege
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = no
					NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
					religion = orthodox
				}
				save_event_target_as = nhs_hcd_target_province
			}
			to_nhs_remove_pre_hellenic_disaster_flags = yes
		}
	}

	after = {
		hidden_effect = {
			set_variable = {
				which = HellenicUprising
				value = 0
			}
			set_variable = {
				which = OrthodoxUprising
				value = 0
			}
			set_variable = {
				which = HellenicDisasterProgress
				value = 0
			}
		}
	}

	# mean_time_to_happen = {
	# 	months = 6
	# }

	after = {
		clr_country_flag = nhs_hcd_opposed_the_inquisition
	}

	option = {
		# Accept the situation
		name = nhs_hellenicconversion.54.a
		ai_chance = {
			factor = 1
		}
		if = {
			limit = {
				ruler_religion = pantheon_worship
			}
			set_ruler_religion = orthodox
		}
		if = {
			limit = {
				heir_religion = pantheon_worship
			}
			set_heir_religion = orthodox
		}
		if = {
			limit = {
				has_spawned_rebels = orthodox_rebels
			}
			disband_rebels = orthodox_rebels
		}
		if = {
			limit = {
				has_spawned_rebels = pantheon_worship_rebels
			}
			disband_rebels = pantheon_worship_rebels
		}
		# custom_tooltip = to_nhs_hellenic_disaster_ends_tt
		add_patriarch_authority = 0.25
		add_war_exhaustion = 5
		add_country_modifier = {
			name = nhs_hrv_loyal_orthodox
			duration = 36500
		}
		if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_peaceful_inquisition_unfriendly_hostile_tt
		}
		else_if = {
			limit = {
				to_nhs_hellenic_disaster_attitude_neutral = {
					ATTITUDE_VARIABLE = OrthodoxUprising
				}
			}
			custom_tooltip = to_nhs_consequences_orthodox_neutral_tt
			add_war_exhaustion = -1
			add_treasury = 25
		}
		else = {
			custom_tooltip = to_nhs_consequences_orthodox_friendly_tt
			add_war_exhaustion = -2
			add_treasury = 50
		}
		custom_tooltip = nhs_dotted_line_tt
		if = {
			limit = {
				any_owned_province = {
					OR = {
						has_province_modifier = nhs_hcd_Pagan_minority
						religion = pantheon_worship
					}
				}
			}
			every_owned_province = {
				limit = {
					OR = {
						has_province_modifier = nhs_hcd_Pagan_minority
						religion = pantheon_worship
					} 
				}
				if = {
					limit = {
						religion = pantheon_worship
					}
					change_religion = orthodox
				}
				add_devastation = 50
				if = {
					limit = {
						has_province_modifier = nhs_hcd_Pagan_minority
					}
					remove_province_modifier = nhs_hcd_Pagan_minority
				}
				if = {
					limit = {
						has_province_modifier = nhs_semi_tolerated_minority
					}
					remove_province_modifier = nhs_semi_tolerated_minority
				}
			}
		}
		to_nhs_remove_pre_hellenic_disaster_country_modifiers = yes
		to_nhs_remove_pre_hellenic_disaster_province_modifiers = yes
	}

	option = {
		# Side with the moderates
		name = nhs_hellenicconversion.54.b
		ai_chance = {
			factor = 0
		}

		set_country_flag = nhs_hcd_inquisition_revolt
		# custom_tooltip = to_nhs_hellenic_disaster_ends_tt
		to_nhs_remove_all_non_tolerant_clergy_privileges = yes
		# add_stability = -1
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -20
		}
		add_country_modifier = {
			name = nhs_hrv_tolerance
			duration = 36500
		}
		if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_peaceful_unfriendly_hostile_tt
		}
		else_if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_moderate_neutral_tt
			add_treasury = 50
			add_manpower = 2
			add_stability_or_adm_power = yes
		}
		else = {
			custom_tooltip = to_nhs_consequences_moderate_friendly_tt
			add_treasury = 100
			add_manpower = 4
			to_add_2_stability_or_adm_power = yes
		}
		custom_tooltip = nhs_dotted_line_tt
		to_nhs_remove_pre_hellenic_disaster_country_modifiers = yes
		to_nhs_spawn_inquisition_revolt = { EVENT_TARGET = nhs_hcd_target_province }
		set_country_flag = nhs_enable_semi_tolerated_minority
		if = {
			limit = {
				any_owned_province = {
					OR = {
						has_province_modifier = nhs_hcd_Pagan_minority
						has_rebel_faction = pantheon_worship_rebels
					}
				}
			}
			every_owned_province = {
				limit = {
					OR = {
						has_province_modifier = nhs_hcd_Pagan_minority
						has_rebel_faction = pantheon_worship_rebels
					} 
				}
				change_religion = pantheon_worship
				if = {
					limit = {
						has_province_modifier = nhs_hcd_Pagan_minority
					}
					remove_province_modifier = nhs_hcd_Pagan_minority 
				}
			}
		}
		custom_tooltip = nhs_new_line_tt
		hidden_effect = {
			to_nhs_handle_post_disaster_tolerance_modifier_all_provinces = yes
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_semi_tolerated_minority_in_the_future_tt
		to_nhs_remove_pre_hellenic_disaster_conflict_province_modifiers = yes
	}

	# option = {
	# 	# Hellenism forever
	# 	goto = nhs_hcd_target_province
	# 	name = hs_hellenicconversion.54.b
	# 	set_country_flag = nhs_hcd_inquisition_revolt
	# 	change_religion = pantheon_worship
	# 	add_legitimacy = -50
	# 	add_country_modifier = {
	# 		name = nhs_hrv_tolerance
	# 		duration = 36500
	# 	}
	# 	nhs_set_clergy_loyalty_to_50 = yes
	# 	remove_estate_privilege = estate_church_nhs_inquisition_privilege
	# 	to_nhs_remove_all_clergy_privileges = yes
	# 	to_nhs_remove_pre_hellenic_disaster_country_modifiers = yes
	# 	if = {
	# 		limit = {
	# 			NOT = {
	# 				any_owned_province = {
	# 					has_province_modifier = nhs_hcd_Pagan_minority
	# 				}
	# 			}
	# 		}
	# 		add_stability = -5
	# 	}
	# 	else = {
	# 		add_stability = -3
	# 	}
	# 	add_estate_loyalty = {
	# 		estate = estate_church
	# 		loyalty = -20
	# 	}
	# 	if = {
	# 		limit = {
	# 			has_saved_event_target = nhs_hcd_target_province
	# 			event_target:nhs_hcd_target_province = {
	# 				owned_by = ROOT
	# 			}
	# 		}
	# 		event_target:nhs_hcd_target_province = {
	# 			spawn_rebels = {
	# 				type = orthodox_rebels
	# 				size = 2
	# 			}
	# 			set_province_flag = nhs_hcd_inquisition_revolt_province
	# 		}
	# 	}
	# 	else = {
	# 		random_owned_province = {
	# 			limit = {
	# 				is_capital = no
	# 				NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
	# 				religion = orthodox
	# 			}
	# 			spawn_rebels = {
	# 				type = orthodox_rebels
	# 				size = 2
	# 			}
	# 			set_province_flag = nhs_hcd_inquisition_revolt_province
	# 		}
	# 	}
	# 	every_owned_province = {
	# 		limit = {
	# 			religion = orthodox
	# 			is_capital = no
	# 		}
	# 		add_province_modifier = {
	# 			name = nhs_tolerated_minority
	# 			duration = -1
	# 		}
	# 	}
	# 	to_nhs_remove_pre_hellenic_disaster_conflict_province_modifiers = yes
	# }
}


# Inquisition revolt defeated
country_event = {
	id = nhs_hellenicconversion.56
	title = nhs_hellenicconversion56.t
	desc = {
		trigger = {
			OR = {
				NOT = { has_country_flag = established_varangians }
				has_country_flag = nhs_disbanded_varangians
			}
		}
		desc = nhs_hellenicconversion56.da
	}
	desc = {
		trigger = {
			has_country_flag = established_varangians
			NOT = { has_country_flag = nhs_disbanded_varangians }
		}
		desc = nhs_hellenicconversion56.db
	}
	picture = REVOLUTION_eventPicture

	fire_only_once = yes

	trigger = {
		has_country_flag = nhs_hcd_inquisition_revolt
		NOT = { has_spawned_rebels = orthodox_rebels }
		NOT = {
			any_owned_province = {
				controlled_by = REB
			}
		}
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = nhs_hcd_inquisition_revolt
		}
	}

	option = {
		name = nhs_hellenicconversion.56.a
		add_stability_or_adm_power = yes
		capital_scope = {
			add_devastation = 10
		}
		every_owned_province = {
			limit = {
				has_province_modifier = nhs_hcd_inquisition_headquarters
			}
			add_devastation = 10
			remove_province_modifier = nhs_hcd_inquisition_headquarters
		}
	}
}

# Inquisition revolt victorious
country_event = {
	id = nhs_hellenicconversion.57
	title = nhs_hellenicconversion57.t
	desc = nhs_hellenicconversion57.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes

	trigger = {
		has_country_flag = nhs_hcd_inquisition_revolt
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = nhs_hcd_inquisition_revolt
			clr_country_flag = nhs_enable_semi_tolerated_minority
		}
	}

	option = {
		name = nhs_hellenicconversion.57.a
		add_patriarch_authority = 0.25
		add_war_exhaustion = 5
		set_estate_privilege = estate_church_nhs_inquisition_privilege
		if = {
			limit = {
				NOT = {	has_disaster = nhs_hcd_hellenic_crisis }
			}
			add_country_modifier = {
				name = "religious_intolerance_enforced"
				duration = 7300
			}
			if = {
				limit = {
					any_owned_province = {
						OR = {
							has_province_modifier = nhs_hcd_Pagan_minority
							religion = pantheon_worship
						}
					}
				}
				every_owned_province = {
					limit = {
						OR = {
							has_province_modifier = nhs_hcd_Pagan_minority
							religion = pantheon_worship
						}
					}
					if = {
						limit = {
							religion = pantheon_worship
						}
						change_religion = orthodox
					}
					add_devastation = 50
					if = {
						limit = {
							has_province_modifier = nhs_hcd_Pagan_minority
						}
						remove_province_modifier = nhs_hcd_Pagan_minority
					}
					if = {
						limit = {
							has_province_modifier = nhs_semi_tolerated_minority
						}
						remove_province_modifier = nhs_semi_tolerated_minority
					}
				}
			}
		}
		else = {
			clr_country_flag = nhs_hcd_supported_moderates
			clr_country_flag = nhs_hcd_converted_to_hellenic
			set_country_flag = nhs_hcd_supported_zealots
			if = {
				limit = {
					has_country_modifier = nhs_hcd_tolerant_approach
				}
				remove_country_modifier = nhs_hcd_tolerant_approach
			}
			if = {
				limit = {
					has_country_modifier = nhs_hcd_pagan_loyalty
				}
				remove_country_modifier = nhs_hcd_pagan_loyalty
			}
			add_country_modifier = {
				name = nhs_hcd_church_loyalty 
				duration = -1
				desc = "END_OF_ELY_RELIGIOUS_WARS"
			}
			if = {
				limit = {
					any_owned_province = {
						religion = pantheon_worship
					}
				}
				if = {
					limit = {
						any_owned_province = {
							religion = pantheon_worship
							has_missionary = no
						}
					}
					random_owned_province = {
						limit = {
							religion = pantheon_worship
							has_missionary = no 
						}
						change_religion = orthodox
						add_devastation = 50
						if = {
							limit = {
								has_province_modifier = nhs_semi_tolerated_minority
							}
							remove_province_modifier = nhs_semi_tolerated_minority
						}
					}
				}
				else = {
					random_owned_province = {
						limit = {
							religion = pantheon_worship
						}
						change_religion = orthodox
						add_devastation = 50
						if = {
							limit = {
								has_province_modifier = nhs_semi_tolerated_minority
							}
							remove_province_modifier = nhs_semi_tolerated_minority
						}
					}
				}
			}
		}
		hidden_effect = {
			to_nhs_handle_post_disaster_tolerance_modifier_all_provinces = yes
		}
		to_nhs_remove_pre_hellenic_disaster_province_modifiers = yes
	}
}



# # Church coup (Once all events passed and the church was opposed at least once)
# country_event = {
# 	id = nhs_hellenicconversion.55
# 	title = nhs_hellenicconversion55.t
# 	desc = nhs_hellenicconversion55.d
# 	picture = RELIGIOUS_TURMOIL_eventPicture

# 	fire_only_once = yes

# 	trigger = {
# 		has_estate_privilege = estate_church_nhs_inquisition_privilege
# 		AND = {
# 			AND = {
# 				has_country_flag = nhs_hcd_had_event_nhs_hellenicconversion_51
# 				NOT = { has_country_flag = nhs_hcd_inquisition_purges }
# 			}
# 			AND = {
# 				has_country_flag = nhs_hcd_had_event_nhs_hellenicconversion_52
# 				NOT = { has_country_flag = nhs_hcd_inquisition_trials }
# 			}
# 			OR = {
# 				NOT = { has_dlc = "Rights of Man" }
# 				AND = {
# 					has_country_flag = nhs_hcd_had_event_nhs_hellenicconversion_53
# 					NOT = { has_country_flag = nhs_hcd_inquisition_divorce }
# 				}
# 			}
# 		}
# 	}

# 	mean_time_to_happen = {
# 		months = 6
# 	}

# 	option = {
# 		# Negotiate
# 		name = nhs_hellenicconversion.55.a
# 		trigger = {
# 			has_dlc = "Rights of Man"
# 			OR = {
# 				personality = zealot_personality 
# 				personality = pious_personality
# 			}
# 		}
# 		highlight = yes

# 		add_estate_loyalty = {
# 			estate = estate_church
# 			loyalty = -5
# 		}
# 		remove_estate_privilege = estate_church_nhs_inquisition_privilege
# 		add_prestige = -20
# 	}

# 	option = {
# 		# Kill them
# 		name = nhs_hellenicconversion.55.b

# 		remove_estate_privilege = estate_church_nhs_inquisition_privilege
# 		random_owned_province = {
# 			limit = {
# 				is_capital = yes
# 			}
# 			spawn_rebels = {
# 				type = orthodox_rebels
# 				size = 2
# 			}
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_church
# 			loyalty = -10
# 		}  
# 	}
# }
