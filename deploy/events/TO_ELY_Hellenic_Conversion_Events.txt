# Events for the Hellenic conversion and disaster setup
# Written by TheWerelizard

namespace = nhs_hellenicconversion

##################
# Starting event #
##################

# Sets up the frame, custom variable and flag

country_event = {
	id = nhs_hellenicconversion.1
	title = nhs_hellenicconversion1.t
	desc = nhs_hellenicconversion1.d
	picture = OLYMPIANS_eventPicture

	fire_only_once = yes

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_estate = estate_church
		is_year = 1448
	}

	mean_time_to_happen = {
		months = 2
	}

	immediate = {
		hidden_effect = {
			set_variable = {
				which = HellenicUprising
				value = 0
			}
			set_variable = {
				which = OrthodoxUprising
				value = 0
			}
			set_variable = {
				which = HellenicDisasterProgress
				value = 0
			}
		}
	}

	option = {
		name = nhs_hellenicconversion.1.a
		set_country_flag = hellenic_conversion_preacher
		add_country_modifier = {
			name = nhs_hcd_hellenic_struggles
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		custom_tooltip = hellenicconversion_preacher.tt
	}
}

# Hidden event selector
country_event = {
	id = nhs_hellenicconversion.100
	title = nhs2_hidden.t
	desc = nhs2_hidden.d
	picture = OLYMPIANS_eventPicture

	hidden = yes
	is_triggered_only = yes

	trigger = {
		NOT = { is_year = 1468 }  # Just something so it's definitely disabled by time disaster should even be over, maybe EU4 can optimize on this?
		has_country_flag = hellenic_conversion_preacher
		nhs_check_all_elysian_tags = { CONDITION = tag }
		religion = orthodox
	}
	
	# mean_time_to_happen = {
	# 	months = 6
	# }

	immediate = {
		if = {
			# Start major event chain, if possible
			limit = {
				check_variable = {
					which = HellenicDisasterProgress
					value = 2
				}
				NOT = {
					AND = {
						has_country_flag = TO_nhs_hellenicconversion_2
						# has_country_flag = TO_nhs_hellenicconversion_3
						# has_country_flag = TO_nhs_hellenicconversion_4
					}
				}
			}
			random_list = {
				1 = {
					trigger = {
						NOT = { has_country_flag = TO_nhs_hellenicconversion_2 }
					}
					set_country_flag = TO_hcd_picked_major_event
					set_country_flag = TO_nhs_hellenicconversion_2
					country_event = { id = nhs_hellenicconversion.2 }  # Death of Georgios
				}
				1 = {
					trigger = {
						government = monarchy
						religion = orthodox
						has_heir = yes
						has_regency = no
						heir_age = 13
						heir_religion = orthodox
						ruler_religion = orthodox
						NOT = { has_country_flag = TO_nhs_hellenicconversion_3 }
						check_variable = {
							which = HellenicDisasterProgress
							value = 7
						}
					}
					set_country_flag = TO_hcd_picked_major_event
					set_country_flag = TO_nhs_hellenicconversion_3
					country_event = { id = nhs_hellenicconversion.3 }  # Heir accused of being a heretic
				}
				# 1 = {
				# 	trigger = {
				# 		check_variable = {
				# 			which = HellenicDisasterProgress
				# 			value = 5
				# 		}
				# 		num_of_cities = 2
				# 		NOT = { has_country_flag = TO_nhs_hellenicconversion_4 }
				# 	}
				# 	set_country_flag = TO_hcd_picked_major_event
				# 	set_country_flag = TO_nhs_hellenicconversion_4
				# 	country_event = { id = nhs_hellenicconversion.4 }  # Pagan assemblies
				# }
			}
			if = {
				limit = {
					has_country_flag =  TO_hcd_picked_major_event
				}
				change_variable = {
					which = HellenicDisasterProgress
					value = 1
				}
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag =  TO_hcd_picked_major_event }
			}
			# Pick basic event otherwise
			change_variable = {
				which = HellenicDisasterProgress
				value = 1
			}
			random_list = {
				100 = {
					trigger = {
						num_of_cities = 3
						any_owned_province = {
							culture_group = ROOT
							NOT = { has_province_modifier = nhs_hcd_Pagan_taxes }
						}
					}
					modifier = {
						factor = 0.01
						has_country_flag = TO_nhs_hellenicconversion_101
					}
					set_country_flag = TO_nhs_hellenicconversion_101
					country_event = { id = nhs_hellenicconversion.101 }
				}
				100 = {
					trigger = {
						num_of_cities = 3
						any_owned_province = {
							culture_group = ROOT
							NOT = { has_province_modifier = nhs_hcd_hellenic_conversion_strife }
						}
					}
					modifier = {
						factor = 0.01
						has_country_flag = TO_nhs_hellenicconversion_102
					}
					set_country_flag = TO_nhs_hellenicconversion_102
					country_event = { id = nhs_hellenicconversion.102 }
				}
				100 = {
					trigger = {
						num_of_cities = 2
						any_owned_province = {
							religion = orthodox
						}
					}
					modifier = {
						factor = 0.01
						has_country_flag = TO_nhs_hellenicconversion_103
					}
					set_country_flag = TO_nhs_hellenicconversion_103
					country_event = { id = nhs_hellenicconversion.103 }
				}
				100 = {
					trigger = {
						num_of_cities = 2
						NOT = { has_country_flag = TO_nhs_hellenicconversion_104 }
					}
					modifier = {
						factor = 0.01
						has_country_flag = TO_nhs_hellenicconversion_104
					}
					set_country_flag = TO_nhs_hellenicconversion_104
					country_event = { id = nhs_hellenicconversion.104 }
				}
				100 = {
					trigger = {
						num_of_cities = 2
						any_owned_province = {
							is_colony = yes
							colonysize = 400
							NOT = { has_province_modifier = nhs_hcd_land_dispute }
							NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
							NOT = { has_province_modifier = nhs_hcd_had_colony_event }
						}
					}
					modifier = {
						factor = 0.01
						has_country_flag = TO_nhs_hellenicconversion_105
					}
					set_country_flag = TO_nhs_hellenicconversion_105
					country_event = { id = nhs_hellenicconversion.105 }
				}
				100 = {
					trigger = {
						num_of_cities = 2
						any_owned_province = {
							is_colony = yes
							colonysize = 400
							NOT = { has_province_modifier = nhs_hcd_land_dispute }
							NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
							NOT = { has_province_modifier = nhs_hcd_had_colony_event }
						}
					}
					modifier = {
						factor = 0.01
						has_country_flag = TO_nhs_hellenicconversion_106
					}
					set_country_flag = TO_nhs_hellenicconversion_106
					country_event = { id = nhs_hellenicconversion.106 }
				}
				100 = {
					trigger = {
						OR = {
							employed_advisor = {
								category = ADM
								religion = ROOT
							}
							employed_advisor = {
								category = ADM
								religion = heretic
							}
							employed_advisor = {
								category = DIP
								religion = ROOT
							}
							employed_advisor = {
								category = DIP
								religion = heretic
							}
							employed_advisor = {
								category = MIL
								religion = ROOT
							}
							employed_advisor = {
								category = MIL
								religion = heretic
							}
						}
					}
					modifier = {
						factor = 0.01
						has_country_flag = TO_nhs_hellenicconversion_107
					}
					set_country_flag = TO_nhs_hellenicconversion_107
					country_event = { id = nhs_hellenicconversion.107 }
				}
				100 = {
					trigger = {
						has_regency = no
						NOT = { has_country_flag = TO_nhs_hellenicconversion_21 }
					}
					set_country_flag = TO_nhs_hellenicconversion_21
					country_event = { id = nhs_hellenicconversion.21 }
				}
			}
		}
		clr_country_flag =  TO_hcd_picked_major_event
	}

	option = {
		# Dummy option, must be present
		name = nhs2_hidden.a
	}
}

# Hidden event selector, assemblies
country_event = {
	id = nhs_hellenicconversion.1000
	title = nhs2_hidden.t
	desc = nhs2_hidden.d
	picture = OLYMPIANS_eventPicture

	hidden = yes
	is_triggered_only = yes

	trigger = {
		NOT = { is_year = 1468 }
		has_country_flag = hellenic_conversion_preacher
		nhs_check_all_elysian_tags = { CONDITION = tag }
		religion = orthodox
		has_country_flag = nhs_pagan_assemblies
		any_owned_province = {
			has_province_modifier = nhs_hcd_Pagan_minority
		}
	}
	
	# mean_time_to_happen = {
	# 	months = 6
	# }

	immediate = {
		random_list = {
			100 = {
				trigger = {
					any_owned_province = {
						religion = orthodox
						has_province_modifier = nhs_hcd_Pagan_minority
						OR = {
							NOT = { has_province_flag = nhs_assemblies_local_event }
							had_province_flag = {
								flag = nhs_assemblies_local_event
								days = 1825
							}
						}
					}
				}
				modifier = {
					factor = 0.01
					has_country_flag = nhs_had_hellenicconversion_41
				}
				set_country_flag = nhs_had_hellenicconversion_41
				country_event = { id = nhs_hellenicconversion.41 }
			}
			100 = {
				trigger = {
					any_owned_province = {
						has_province_modifier = nhs_hcd_Pagan_minority
						OR = {
							NOT = { has_province_flag = nhs_assemblies_local_event }
							had_province_flag = {
								flag = nhs_assemblies_local_event
								days = 1825
							}
						}
					}
				}
				modifier = {
					factor = 0.01
					has_country_flag = nhs_had_hellenicconversion_43
				}
				set_country_flag = nhs_had_hellenicconversion_43
				country_event = { id = nhs_hellenicconversion.43 }
			}
			100 = {
				trigger = {
					NOT = { has_country_flag = nhs_had_hellenicconversion_44 }
				}
				set_country_flag = nhs_had_hellenicconversion_44
				country_event = { id = nhs_hellenicconversion.44 }
			}
		}
	}

	option = {
		# Dummy option, must be present
		name = nhs2_hidden.a
	}
}

# Hidden event selector, inquisition
country_event = {
	id = nhs_hellenicconversion.1001
	title = nhs2_hidden.t
	desc = nhs2_hidden.d
	picture = OLYMPIANS_eventPicture

	hidden = yes
	is_triggered_only = yes

	trigger = {
		NOT = { is_year = 1468 }
		nhs_check_all_elysian_tags = { CONDITION = tag }
		to_nhs_hellenic_disaster_eligible_for_inquisition_events = yes
	}

	immediate = {
		random_list = {
			100 = {
				modifier = {
					factor = 0.01
					has_country_flag = nhs_had_hellenicconversion_51
				}
				modifier = {
					factor = 0.5
					NOT = { has_advisor = yes }
				}
				set_country_flag = nhs_had_hellenicconversion_51
				country_event = { id = nhs_hellenicconversion.51 }
			}
			100 = {
				trigger = {
					any_owned_province = {
						is_capital = no
						religion = orthodox
						NOT = { has_province_modifier = nhs_hdc_witch_trials_cd }
					}
				}
				modifier = {
					factor = 0.01
					has_country_flag = nhs_had_hellenicconversion_52
				}
				set_country_flag = nhs_had_hellenicconversion_52
				country_event = { id = nhs_hellenicconversion.52 }
			}
			100 = {
				trigger = {
					has_dlc = "Rights of Man"
					NOT = { has_country_flag = nhs_had_hellenicconversion_53 }
				}
				set_country_flag = nhs_had_hellenicconversion_53
				country_event = { id = nhs_hellenicconversion.53 }
			}
		}
	}

	option = {
		# Dummy option, must be present
		name = nhs2_hidden.a
	}
}


################
# Basic events #
################

# Pagans refuse to pay taxes
country_event = {
	id = nhs_hellenicconversion.101
	title = nhs_hellenicconversion101.t 
	desc = nhs_hellenicconversion101.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					culture_group = ROOT
					NOT = { has_province_modifier = nhs_hcd_hellenic_conversion_strife }
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Increase tax collection efforts and drive them out
		name = nhs_hellenicconversion.101.a
		add_treasury = 30
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			to_nhs_spawn_pre_disaster_hellenic_rebels = { SIZE = 1 }
			add_province_modifier = {
				name = nhs_hcd_Pagan_taxes
				duration = 3650
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = { 
		# Increase tax collection efforts
		name = nhs_hellenicconversion.101.b
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_Pagan_taxes
				duration = 1825
			}
		}
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Tax the church
		name = nhs_hellenicconversion.101.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Forfeit taxes
		name = nhs_hellenicconversion.101.d
		ai_chance = {
			factor = 1
		}

		add_treasury = -30
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	} 

}


# Zealots attack Pagans
country_event = { 
	id = nhs_hellenicconversion.102
	title = nhs_hellenicconversion102.t 
	desc = nhs_hellenicconversion102.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					culture_group = ROOT
					NOT = { has_province_modifier = nhs_hcd_hellenic_conversion_strife }
				}
				save_event_target_as = nhs_hcd_target_province
			}
		}
	}

	option = {
		# Burn more Pagans
		name = nhs_hellenicconversion.102.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Let the zealots do their thing
		name = nhs_hellenicconversion.102.b
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			add_devastation = 25
			# add_province_modifier = {
			# 	name = nhs_hcd_hellenic_conversion_strife
			# 	duration = 1825
			# }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Stop the zealots
		name = nhs_hellenicconversion.102.c
		ai_chance = {
			factor = 0
		}
		
		event_target:nhs_hcd_target_province = {
			spawn_rebels = {
				type = orthodox_rebels
				size = 1
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Restore order
		name = nhs_hellenicconversion.102.d
		ai_chance = {
			factor = 1
		}

		add_mil_power = -50
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_hellenic_conversion_strife
				duration = 3650
			}
		}

		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	} 

}


# Priest killed
country_event = {
	id = nhs_hellenicconversion.103
	title = nhs_hellenicconversion103.t 
	desc = nhs_hellenicconversion103.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes

	option = {
		# Accuse the Pagans
		name = nhs_hellenicconversion.103.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Accuse natives
		name = nhs_hellenicconversion.103.b
		trigger = {
			has_estate = estate_all_natives
		}
		ai_chance = {
			factor = 50
		}

		add_estate_loyalty = {
			estate = estate_all_natives
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Let the matter drop
		name = nhs_hellenicconversion.103.c
		ai_chance = {
			factor = 1
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		} 
		add_dip_power = -50
		add_legitimacy = -5
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

}


# Angered church
country_event = {
	id = nhs_hellenicconversion.104
	title = nhs_hellenicconversion104.t 
	desc = nhs_hellenicconversion104.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = { 
		# Issue a public condemenation of Pagans
		name = nhs_hellenicconversion.104.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = { 
		# Refuse to hear the priest out
		name = nhs_hellenicconversion.104.b
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = { 
		# Make vague statements of supports to the church
		name = nhs_hellenicconversion.104.c
		ai_chance = {
			factor = 1
		}

		add_dip_power = -50
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}

# Needs disaster reducing option
# Pagan settlers
country_event = { 
	id = nhs_hellenicconversion.105
	title = nhs_hellenicconversion105.t 
	desc = nhs_hellenicconversion105.d
	picture = COLONIZATION_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_colony = yes
					colonysize = 400
					NOT = { has_province_modifier = nhs_hcd_land_dispute }
					NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
					NOT = { has_province_modifier = nhs_hcd_had_colony_event }
				}
				save_event_target_as = nhs_hcd_target_province
				add_province_modifier = {
					name = nhs_hcd_had_colony_event
					duration = 1825
					hidden = yes
				}
			}
		}
	}

	option = {
		# Conversion or death
		name = nhs_hellenicconversion.105.a
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			add_colonysize = -50
			# add_province_modifier = {
			# 	name = nhs_hcd_land_dispute
			# 	duration = 90
			# }
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Let them settle
		name = nhs_hellenicconversion.105.b
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_colonysize = 50
			add_province_modifier = {
				name = nhs_hcd_land_dispute
				duration = 3650
			}
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Protect the settlers
		name = nhs_hellenicconversion.105.c
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_target_province = {
			add_colonysize = 200
			# add_province_modifier = {
			# 	name = nhs_hcd_land_dispute
			# 	duration = 30
			# }
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_major = yes

		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Mediate Conflicts? I'm kinda out of ideas
		name = nhs_hellenicconversion.105.d
		ai_chance = {
			factor = 1
		}

		add_adm_power = -50
		event_target:nhs_hcd_target_province = {
			add_colonysize = 50
			add_province_modifier = {
				name = nhs_hcd_land_dispute
				duration = 1825
			}
		}
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}


# Pagans Flee
country_event = {
	id = nhs_hellenicconversion.106
	title = nhs_hellenicconversion106.t
	desc = nhs_hellenicconversion106.d
	picture = BORDER_TENSION_eventPicture

	is_triggered_only = yes
	goto = nhs_hcd_target_province

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_colony = yes
					colonysize = 400
					NOT = { has_province_modifier = nhs_hcd_land_dispute }
					NOT = { has_province_modifier = nhs_hcd_colonial_tensions }
					NOT = { has_province_modifier = nhs_hcd_had_colony_event }
				}
				save_event_target_as = nhs_hcd_target_province
				add_province_modifier = {
					name = nhs_hcd_had_colony_event
					duration = 1825
					hidden = yes
				}
			}
		}
	}

	option = {
		# Stop them
		name = nhs_hellenicconversion.106.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_disaster_progress = {
					disaster = nhs_hcd_hellenic_crisis
					value = 75
				}
			}
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_colonial_tensions
				duration = 3650
			}
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Let them go and seize their land
		name = nhs_hellenicconversion.106.b
		ai_chance = {
			factor = 0
		}

		add_treasury = 50
		event_target:nhs_hcd_target_province = {
			add_colonysize = -200
			# add_province_modifier = {
			# 	name = nhs_hcd_colonial_tensions
			# 	duration = 90
			# }
		}
		if = {
			limit = {
				has_province_modifier = nhs_hcd_land_dispute
			}
			remove_province_modifier = nhs_hcd_land_dispute
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Let them go
		name = nhs_hellenicconversion.106.c
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					has_disaster_progress = {
						disaster = nhs_hcd_hellenic_crisis
						value = 75
					}
				}
			}
		}

		event_target:nhs_hcd_target_province = {
			add_colonysize = -200
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	# option = {
	# 	# Send in new settlers
	# 	name = nhs_hellenicconversion.106.d

	# 	event_target:nhs_hcd_target_province = {
	# 		add_province_modifier = {
	# 			name = nhs_hcd_colonial_tensions
	# 			duration = 30
	# 		}
	# 	}
	# 	add_years_of_income = -0.25
	# 	add_dip_power = -50
	# 	custom_tooltip = hellenicconversion_anger_neither.tt      
	# }
}


# Pagan advisor
country_event = { 
	id = nhs_hellenicconversion.107
	title = nhs_hellenicconversion107.t 
	desc = nhs_hellenicconversion107.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_list = {
				1 = {
					trigger = {
						OR = {
							employed_advisor = {
								category = ADM
								religion = ROOT
							}
							employed_advisor = {
								category = ADM
								religion = heretic
							}
						}
					}
					set_country_flag = nhs_hcd_advisor_events_adm
				}
				1 = {
					trigger = {
						OR = {
							employed_advisor = {
								category = DIP
								religion = ROOT
							}
							employed_advisor = {
								category = DIP
								religion = heretic
							}
						}
					}
					set_country_flag = nhs_hcd_advisor_events_dip
				}
				1 = {
					trigger = {
						OR = {
							employed_advisor = {
								category = MIL
								religion = ROOT
							}
							employed_advisor = {
								category = MIL
								religion = heretic
							}
						}
					}
					set_country_flag = nhs_hcd_advisor_events_mil
				}
			}
		}
	}

	option = { 
		# Fire the advisor
		name = nhs_hellenicconversion.107.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		trigger_switch = {
			on_trigger = has_country_flag
			nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
			nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
			nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes

		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = { 
		# Fair trial
		name = nhs_hellenicconversion.107.b
		ai_chance = {
			factor = 0
		}

		random_list = {
			75 = {
				trigger_switch = {
					on_trigger = has_country_flag
					nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
					nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
					nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
				}
			}
			25 = {
				add_prestige = 10
			}
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = { 
		# Stand by the advisor
		name = nhs_hellenicconversion.107.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = { 
		# Pay retirement
		name = nhs_hellenicconversion.107.d
		ai_chance = {
			factor = 1
		}

		add_treasury = -30
		# add_adm_power = -50
		# add_years_of_income = -0.2
		trigger_switch = {
			on_trigger = has_country_flag
			nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
			nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
			nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
		}
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	after = {
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				nhs_hcd_advisor_events_adm = { clr_country_flag = nhs_hcd_advisor_events_adm }
				nhs_hcd_advisor_events_dip = { clr_country_flag = nhs_hcd_advisor_events_dip }
				nhs_hcd_advisor_events_mil = { clr_country_flag = nhs_hcd_advisor_events_mil }
			}
		}
	}
}

# Ruler assassination
country_event = {
	id = nhs_hellenicconversion.21
	title = nhs_hellenicconversion21.t
	desc = nhs_hellenicconversion21.d
	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes 

	option = { 
		# Round up the Pagan leaders
		name = nhs_hellenicconversion.21.a 
		ai_chance = {
			factor = 0
		}
		add_country_modifier = {
			name = nhs_hcd_hellenic_coup
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
		# custom_tooltip = nhs_new_line_tt
		# add_ruler_modifier = {
		# 	name = to_hcd_monarch_stabbed
		# 	duration = 1825
		# }
	}

	option = { 
		# Accuse the church of plotting against the emperor
		name = nhs_hellenicconversion.21.b
		ai_chance = {
			factor = 0
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
		# custom_tooltip = nhs_new_line_tt
		# add_ruler_modifier = {
		# 	name = to_hcd_monarch_stabbed
		# 	duration = 1825
		# }
	}

	# option = { 
	# 	# Noble #... a professional hired by a noble! It's a coup!
	# 	name = nhs_hellenicconversion.21.c
	# 	ai_chance = {
	# 		factor = 1
	# 	}
	# 	if = {
	# 		limit = {
	# 			ai = no
	# 		}
	# 		add_stability = -1
	# 	}
	# 	add_estate_loyalty = {
	# 		estate = estate_nhs_nobles
	# 		loyalty = -20
	# 	}
	# 	add_estate_influence_modifier = {
	# 		estate = estate_nhs_nobles
	# 		influence = -20
	# 		duration = 3650
	# 		desc = TO_ATTEMPTED_COUP
	# 	}
	# 	custom_tooltip = nhs_new_line_tt
	# 	add_ruler_modifier = {
	# 		name = to_hcd_monarch_stabbed
	# 		duration = 1825
	# 	}
	# 	custom_tooltip = nhs_new_line_tt
	# 	to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	# }

	option = { 
		# Accuse no one
		name = nhs_hellenicconversion.21.c
		ai_chance = {
			factor = 1
		}
		if = {
			limit = {
				ai = no
			}
			add_stability = -1
		}
		# custom_tooltip = nhs_new_line_tt
		# add_ruler_modifier = {
		# 	name = to_hcd_monarch_stabbed
		# 	duration = 1825
		# }
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}


#########################
# Funeral of Georgios   #
#########################

# Death of Georgios
country_event = {
	id = nhs_hellenicconversion.2
	title = nhs_hellenicconversion2.t
	desc = nhs_hellenicconversion2.d
	picture = REFORM_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = no
					area_for_scope_province = {
						is_capital = yes
					}
					culture_group = ROOT
					controlled_by = ROOT
				}
				save_event_target_as = to_georgios_funeral_province
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = to_georgios_funeral_province }
				}
				random_owned_province = {
					limit = {
						is_capital = no
						culture_group = ROOT
						controlled_by = ROOT
					}
					save_event_target_as = to_georgios_funeral_province
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = to_georgios_funeral_province }
				}
				random_owned_province = {
					limit = {
						is_capital = no
						area_for_scope_province = {
							is_capital = yes
						}
						controlled_by = ROOT
					}
					save_event_target_as = to_georgios_funeral_province
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = to_georgios_funeral_province }
				}
				random_owned_province = {
					limit = {
						is_capital = no
						controlled_by = ROOT
					}
					save_event_target_as = to_georgios_funeral_province
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = to_georgios_funeral_province }
				}
				capital_scope = {
					save_event_target_as = to_georgios_funeral_province
				}
			}
		}
	}

	option = {
		# Organize a funeral
		# Small Anger Orthodox
		# -25 Ducats, + 1 Admin. Burden
		name = nhs_hellenicconversion.2.a
		custom_tooltip = nhs_hellenicconversion.2.a.tt
		custom_tooltip = to_add_hellenic_struggles_legacy_tt
		custom_tooltip = to_add_hellenic_struggles_legacy_1_tt
		hidden_effect = {
			remove_country_modifier = nhs_hcd_hellenic_struggles
			add_country_modifier = {
				name = nhs_hcd_hellenic_struggles_legacy_1
				duration = -1
				desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
			}
		}
		custom_tooltip = nhs_new_line_tt
		add_treasury = -25
		add_government_power = {
			mechanic_type = to_administrative_burden_mechanic
			power_type = to_administrative_burden
			value = 1
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Allow it
		# 20% Nothing, 70% Minor Revolt, 10% Major Revolt (win siege, +devastation)
		name = nhs_hellenicconversion.2.b
		custom_tooltip = nhs_hellenicconversion.2.b.tt
		custom_tooltip = to_add_hellenic_struggles_legacy_tt
		custom_tooltip = to_add_hellenic_struggles_legacy_2_tt
		hidden_effect = {
			remove_country_modifier = nhs_hcd_hellenic_struggles
			add_country_modifier = {
				name = nhs_hcd_hellenic_struggles_legacy_2
				duration = -1
				desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
			}
		}
		custom_tooltip = nhs_new_line_tt
		random_list = {
			20 = {

			}
			70 = {
				to_death_of_georgios_province_effect = {
					EFFECT = "
					spawn_rebels = {
						type = orthodox_rebels
						size = 1
					}
					"
				}
			}
			10 = {
				to_death_of_georgios_province_effect = {
					EFFECT = "
					add_devastation = 10
					spawn_rebels = {
						type = orthodox_rebels
						size = 1
						win = yes
					}
					"
				}
			}
		}
	}

	option = {
		# Small Anger Hellenics
		# +6 Progress Disaster
		# +10 Church Loyalty
		name = nhs_hellenicconversion.2.c
		custom_tooltip = nhs_hellenicconversion.2.c.tt
		custom_tooltip = to_add_hellenic_struggles_legacy_tt
		custom_tooltip = to_add_hellenic_struggles_legacy_3_tt
		hidden_effect = {
			remove_country_modifier = nhs_hcd_hellenic_struggles
			add_country_modifier = {
				name = nhs_hcd_hellenic_struggles_legacy_3
				duration = -1
				desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
			}
		}
		custom_tooltip = nhs_new_line_tt
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 15
		}
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}
}

# Violent clashes
# TODO Rework in the normal pre-disaster event
# country_event = {
# 	id = nhs_hellenicconversion.25
# 	title = nhs_hellenicconversion25.t
# 	desc = nhs_hellenicconversion25.d
# 	picture = SIEGE_PRAGUE_CASTLE_eventPicture

# 	is_triggered_only = yes

# 	immediate = {
# 		hidden_effect = {
# 			random_owned_province = {
# 				limit = {
# 					is_capital = yes
# 				}
# 				save_event_target_as = nhs_hcd_target_province
# 			}
# 		}
# 	}

# 	option = {
# 		# Call down the guard
# 		name = nhs_hellenicconversion.25.a
# 		goto = nhs_hcd_target_province
# 		ai_chance = {
# 			factor = 0
# 		}

# 		add_estate_loyalty = {
# 			estate = estate_church
# 			loyalty = 5
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_capital = yes
# 			}
# 			add_devastation = 10
# 			# spawn_rebels = {
# 			# 	type = particularist_rebels
# 			# 	size = 1
# 			# }
# 		}
# 		custom_tooltip = nhs_new_line_tt
# 		to_nhs_hellenic_disaster_anger_hellenic_major = yes
# 		to_nhs_increase_hellenic_crisis_disaster_progress = yes
# 	}

# 	option = {
# 		# Attempt to talk them down
# 		name = nhs_hellenicconversion.25.b
# 		ai_chance = {
# 			factor = 1
# 		}

# 		add_dip_power = -50
# 		# random_list = {
# 		# 	50 = {
# 		# 		add_legitimacy = 5
# 		# 	}
# 		# 	50 = {
# 		# 		random_owned_province = {
# 		# 			limit = {
# 		# 				is_capital = yes
# 		# 			}
# 		# 			spawn_rebels = {
# 		# 				type = particularist_rebels
# 		# 				size = 1
# 		# 			}
# 		# 		}
# 		# 	}
# 		# }
# 		# custom_tooltip = hellenicconversion_anger_neither.tt
# 	}
# }


# Pagans rise up
# TODO Rework in the normal pre-disaster event
# country_event = {
# 	id = nhs_hellenicconversion.28
# 	title = nhs_hellenicconversion28.t
# 	desc = nhs_hellenicconversion28.d
# 	picture = ANGRY_MOB_eventPicture

# 	goto = nhs_hcd_target_province

# 	is_triggered_only = yes

# 	immediate = {
# 		hidden_effect = {
# 			random_owned_province = {
# 				limit = {
# 					is_capital = yes
# 				}
# 				save_event_target_as = nhs_hcd_target_province
# 			}
# 		}
# 	}

# 	option = { 
# 		# Stop them
# 		name = nhs_hellenicconversion.28.a
# 		ai_chance = {
# 			factor = 1
# 		}
# 		# Lets be nice to AI
# 		if = {
# 			limit = {
# 				ai = no
# 			}
# 			capital_scope = {
# 				to_nhs_spawn_pre_disaster_hellenic_rebels = { SIZE = 1 }
# 			}
# 		}
# 		else = {
# 			capital_scope = {
# 				add_devastation = 5
# 			}
# 		}
# 		custom_tooltip = nhs_new_line_tt
# 		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
# 	}

# 	option = {
# 		# Do not intervene
# 		name = nhs_hellenicconversion.28.b
# 		ai_chance = {
# 			factor = 0
# 		}

# 		add_estate_loyalty = {
# 			estate = estate_church
# 			loyalty = -10
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_capital = yes
# 			}
# 			# add_base_manpower = -1
# 			add_devastation = 20
# 			# add_unrest = 5
# 		}
# 		custom_tooltip = nhs_new_line_tt
# 		to_nhs_hellenic_disaster_anger_orthodox_major = yes
# 		to_nhs_increase_hellenic_crisis_disaster_progress = yes
# 	}
# }


# Orthodox violence
# TODO Rework in the normal pre-disaster event
# country_event = {
# 	id = nhs_hellenicconversion.29
# 	title = nhs_hellenicconversion29.t
# 	desc = nhs_hellenicconversion29.d
# 	picture = VILLAGE_RAIDED_eventPicture

# 	is_triggered_only = yes

# 	goto = nhs_hcd_target_province

# 	immediate = {
# 		hidden_effect = {
# 			random_owned_province = {
# 				limit = {
# 					is_city = yes
# 					is_capital = no
# 				}
# 				save_event_target_as = nhs_hcd_target_province
# 			}
# 		}
# 	}

# 	option = { 
# 		# Brutal
# 		name = nhs_hellenicconversion.29.a
# 		ai_chance = {
# 			factor = 0
# 		}

# 		event_target:nhs_hcd_target_province = {
# 			add_devastation = 10
# 			# add_province_modifier = {
# 			# 	name = nhs_hcd_Pagan_persecution
# 			# 	duration = 1825
# 			# }
# 			# spawn_rebels = {
# 			# 	type = particularist_rebels
# 			# 	size = 1
# 			# }
# 		}
# 		custom_tooltip = nhs_new_line_tt
# 		to_nhs_hellenic_disaster_anger_hellenic_major = yes
# 		to_nhs_increase_hellenic_crisis_disaster_progress = yes
# 	}

# 	option = { 
# 		# Let them fight
# 		name = nhs_hellenicconversion.29.b
# 		ai_chance = {
# 			factor = 1
# 		}

# 		event_target:nhs_hcd_target_province = {
# 			add_devastation = 20
# 			add_province_modifier = {
# 				name = nhs_hcd_Pagan_persecution
# 				duration = 1825
# 			}
# 			# add_base_manpower = -1
# 			# add_devastation = 50
# 			# add_unrest = 5
# 		}
# 		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
# 	}

# 	option = {
# 		# Stop this madness!
# 		name = nhs_hellenicconversion.29.c
# 		ai_chance = {
# 			factor = 1
# 		}

# 		add_estate_loyalty = {
# 			estate = estate_church
# 			loyalty = -5
# 		}
# 		if = {
# 			limit = {
# 				ai = no
# 			}
# 			event_target:nhs_hcd_target_province = {
# 				spawn_rebels = {
# 					type = orthodox_rebels
# 					size = 1
# 				}
# 			}
# 		}
# 		else = {
# 			event_target:nhs_hcd_target_province = {
# 				add_devastation = 5
# 			}
# 		}
# 		custom_tooltip = nhs_new_line_tt
# 		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
# 	}
# }


##################
# Royal Heresy   #
##################

# Heir accused of being a heretic
country_event = {
	id = nhs_hellenicconversion.3
	title = nhs_hellenicconversion.3.t
	desc = nhs_hellenicconversion.3.d
	picture = CHURCH_ESTATE_1_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_saved_name = {
				key = to_hellenic_advisor
				type = advisor
				scope = ROOT
			}
			to_compute_zealous_ruler_heir_stats = {
				SOURCE_ADM = heir_adm
				SOURCE_DIP = heir_dip
				SOURCE_MIL = heir_mil
			}
		}
	}

	option = {
		# Big Anger Orthodox
		# Heir converts to Hellenic
		# -10 Clergy Loyalty
		# Get Theologian advisor at -80% cost
		# Employing Hellenic theologian advisors increases your religious unity by 5% per level for 30 years
		name = nhs_hellenicconversion.3.a
		set_heir_religion = pantheon_worship
		add_heir_claim = -50
		set_heir_flag = to_heir_lost_claim_hellenic_major
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -20
		}
		custom_tooltip = nhs_new_line_tt
		define_advisor = {
			type = theologian
			name = to_hellenic_advisor
			religion = pantheon_worship
			skill = 2
			cost_multiplier = 0.2
		}
		custom_tooltip = to_religious_unity_from_hellenic_advisors_tt
		hidden_effect = {
			add_country_modifier = {
				name = to_religious_unity_from_hellenic_advisors
				duration = 10950
				hidden = yes
			}
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_major = yes
	}

	option = {
		# Religion changes to Hellenic
		# Small Anger Orthodox
		# set_heir_religion = pantheon_worship
		name = nhs_hellenicconversion.3.b
		add_heir_claim = -33
		set_heir_flag = to_heir_lost_claim_hellenic
		custom_tooltip = to_heir_practices_hellenism_in_secret_tt
		set_heir_flag = to_heir_practices_hellenism_in_secret
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Heir picks the same 
		# -25 adm power
		# -50 ducats
		# Theologian Hellenic Advisor, Inquisititor Orthodox Advisor
		name = nhs_hellenicconversion.3.c
		add_treasury = -50
		add_adm_power = -25
		add_heir_claim = -33
		set_heir_flag = to_heir_lost_claim_hellenic
		custom_tooltip = nhs_new_line_tt
		define_advisor = {
			type = theologian
			name = to_hellenic_advisor
			skill = 2
			cost_multiplier = 0.9
		}
		define_advisor = {
			type = inquisitor
			religion = orthodox
			skill = 1
			cost_multiplier = 0.9
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Religion remains Orthodox
		# Small anger Hellenic
		name = nhs_hellenicconversion.3.e
		add_heir_claim = -10
		set_heir_flag = to_heir_lost_claim_hellenic_minor
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Big Anger Hellenic
		# +10 Clergy Loyalty
		# +10 Patriarch Authority
		# Get new heir (6-2-4) 15 years old with Zealot
		name = nhs_hellenicconversion.3.f
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 20
		}
		# add_estate_influence_modifier = {
		# 	estate = estate_church
		# 	influence = 10
		# 	desc = TO_PICKED_HEIR
		# 	duration = 7300
		# }
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = to_zealous_relative_proposal_tt
		to_assign_zealous_heir = yes
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
	}
}

# (Secretly?) Heretic heir Ascends the Throne (peaceful ending)
country_event = {
	id = nhs_hellenicconversion.7
	title = nhs_hellenicconversion.7.t
	desc = {
		trigger = {
			NOT = { ruler_religion = pantheon_worship }
		}
		desc = nhs_hellenicconversion.7.da
	}
	desc = {
		desc = nhs_hellenicconversion.7.db
	}
	picture = BYZANTINE_EMPEROR_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_country_modifier = nhs_hrv_peaceful_resolution
		religion = orthodox
		OR = {
			ruler_religion = pantheon_worship
			has_ruler_flag = to_heir_practices_hellenism_in_secret
		}
	}

	immediate = {
		hidden_effect = {
			set_country_flag = to_determine_religion_event_active
		}
	}

	after = {
		hidden_effect = {
			clr_ruler_flag = to_heir_practices_hellenism_in_secret
			clr_country_flag = to_determine_religion_event_active
		}
	}

	option = {
		# Hellenic path
		name = nhs_hellenicconversion.7.a
		change_religion = pantheon_worship
		nhs_set_clergy_loyalty_to_50 = yes
		to_nhs_remove_all_clergy_privileges = yes
		if = {
			limit = {
				has_spawned_rebels = pantheon_worship_rebels
			}
			disband_rebels = pantheon_worship_rebels
			custom_tooltip = nhs_new_line_tt
		}
	}

	option = {
		# Orthodox path
		name = nhs_hellenicconversion.7.b
		if = {
			limit = {
				ruler_religion = pantheon_worship
			}
			set_ruler_religion = ROOT
		}
		if = {
			limit = {
				heir_religion = pantheon_worship
			}
			set_heir_religion = ROOT
		}
		add_prestige = 10
		add_legitimacy = 10
	}
}

# (Secretly?) Hellenic Ruler Ascends the Throne (disaster ending)
country_event = {
	id = nhs_hellenicconversion.8
	title = nhs_hellenicconversion.8.t
	# Award for the most dynamic event description?
	desc = {
		trigger = {
			ruler_religion = pantheon_worship
			has_country_modifier = nhs_hrv_loyal_orthodox
			any_owned_province = {
				religion = pantheon_worship
			}
		}
		desc = nhs_hellenicconversion.8.da
	}
	desc = {
		trigger = {
			ruler_religion = pantheon_worship
			NOT = { has_country_modifier = nhs_hrv_loyal_orthodox }
			any_owned_province = {
				religion = pantheon_worship
			}
		}
		desc = nhs_hellenicconversion.8.db
	}
	desc = {
		trigger = {
			ruler_religion = pantheon_worship
			has_country_modifier = nhs_hrv_loyal_orthodox
			NOT = {
				any_owned_province = {
					religion = pantheon_worship
				}
			}
		}
		desc = nhs_hellenicconversion.8.dc
	}
	desc = {
		trigger = {
			ruler_religion = pantheon_worship
			NOT = { has_country_modifier = nhs_hrv_loyal_orthodox }
			NOT = {
				any_owned_province = {
					religion = pantheon_worship
				}
			}
		}
		desc = nhs_hellenicconversion.8.dd
	}
	desc = {
		trigger = {
			has_country_modifier = nhs_hrv_loyal_orthodox
			any_owned_province = {
				religion = pantheon_worship
			}
		}
		desc = nhs_hellenicconversion.8.de
	}
	desc = {
		trigger = {
			NOT = { has_country_modifier = nhs_hrv_loyal_orthodox }
			any_owned_province = {
				religion = pantheon_worship
			}
		}
		desc = nhs_hellenicconversion.8.df
	}
	desc = {
		trigger = {
			has_country_modifier = nhs_hrv_loyal_orthodox
			any_owned_province = {
				religion = pantheon_worship
			}
		}
		desc = nhs_hellenicconversion.8.dg
	}
	desc = {
		desc = nhs_hellenicconversion.8.dh
	}
	picture = BYZANTINE_EMPEROR_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			has_country_modifier = nhs_hrv_loyal_orthodox
			has_country_modifier = nhs_hrv_tolerance
		}
		OR = {
			ruler_religion = pantheon_worship
			has_ruler_flag = to_heir_practices_hellenism_in_secret
		}
	}

	immediate = {
		hidden_effect = {
			set_country_flag = to_determine_religion_event_active
			to_orthodox_revolt_potential_province = {
				EVENT_TARGET = to_orthodox_revolt_province_1
			}
			if = {
				limit = {
					has_saved_event_target = to_orthodox_revolt_province_1
				}
				to_orthodox_revolt_potential_province = {
					EVENT_TARGET = to_orthodox_revolt_province_2
					ADDITIONAL_TRIGGER = "
					event_target:to_orthodox_revolt_province_1 = {
						NOT = { province_id = PREV }
					}
					"
				}
			}
			if = {
				limit = {
					has_saved_event_target = to_orthodox_revolt_province_3
				}
				to_orthodox_revolt_potential_province = {
					EVENT_TARGET = to_orthodox_revolt_province_3
					ADDITIONAL_TRIGGER = "
					event_target:to_orthodox_revolt_province_1 = {
						NOT = { province_id = PREV }
					}
					event_target:to_orthodox_revolt_province_2 = {
						NOT = { province_id = PREV }
					}
					"
				}
			}
			if = {
				limit = {
					NOT = { has_country_flag = to_computed_zealous_heir_stats }
				}
				if = {
					limit = {
						has_heir = yes
					}
					to_compute_zealous_ruler_heir_stats = {
						SOURCE_ADM = heir_adm
						SOURCE_DIP = heir_dip
						SOURCE_MIL = heir_mil
					}
				}
				else = {
					to_compute_zealous_ruler_heir_stats = {
						SOURCE_ADM = adm
						SOURCE_DIP = dip
						SOURCE_MIL = mil
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			clr_ruler_flag = to_heir_practices_hellenism_in_secret
			clr_country_flag = to_determine_religion_event_active
		}
	}

	option = {
		# There is no fighting the inevitable
		trigger = {
			has_country_modifier = nhs_hrv_loyal_orthodox
		}
		name = nhs_hellenicconversion.8.a
		add_ruler_modifier = {
			name = to_reanounced_beliefs
			duration = -1
		}
		if = {
			limit = {
				NOT = { ruler_religion = ROOT }
			}
			set_ruler_religion = ROOT
		}
		if = {
			limit = {
				heir_religion = pantheon_worship
			}
			set_heir_religion = ROOT
		}
		if = {
			limit = {
				ruler_has_personality = tolerant_personality
			}
			remove_ruler_personality = tolerant_personality
		}
	}

	option = {
		# Curtain Clergy
		name = nhs_hellenicconversion.8.b
		trigger = {
			has_country_modifier = nhs_hrv_loyal_orthodox
		}
		if = {
			limit = {
				NOT = { ruler_religion = ROOT }
			}
			set_ruler_religion = ROOT
		}
		if = {
			limit = {
				ruler_has_personality = zealot_personality
			}
			remove_ruler_personality = zealot_personality
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -30
		}
		custom_tooltip = nhs_new_line_tt
		remove_country_modifier = nhs_hrv_loyal_orthodox
		add_country_modifier = {
			name = nhs_hrv_tolerance
			duration = 29200
		}
		if = {
			limit = {
				has_estate_privilege = estate_church_nhs_inquisition_privilege
			}
			to_nhs_spawn_inquisition_revolt_disaster = {
				EVENT_TARGET = to_orthodox_revolt_province_1
			}
		}
		else = {
			to_orthodox_spawn_revolt_in_potential_province = {
				EVENT_TARGET = to_orthodox_revolt_province_1
				SIZE = 1
			}
		}
	}

	option = {
		# Reanouce beliefs (Continue the moderate policies)
		name = nhs_hellenicconversion.8.c
		trigger = {
			NOT = { has_country_modifier = nhs_hrv_loyal_orthodox }
		}
		if = {
			limit = {
				NOT = { ruler_religion = ROOT }
			}
			set_ruler_religion = ROOT
		}
		if = {
			limit = {
				ruler_has_personality = zealot_personality
			}
			remove_ruler_personality = zealot_personality
		}
	}

	option = {
		# Give up throne
		name = nhs_hellenicconversion.8.e
		highlight = yes
		trigger = {
			NOT = {
				any_owned_province = {
					religion = pantheon_worship
				}
			}
		}
		to_assign_zealous_ruler = yes
		custom_tooltip = nhs_new_line_tt
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 20
		}
		add_estate_influence_modifier = {
			estate = estate_church
			influence = 10
			desc = TO_APPOINTED_RULER
			duration = 3650
		}
	}

	option = {
		# Hellenic tolerant path?
		name = nhs_hellenicconversion.8.f
		highlight = yes
		trigger = {
			any_owned_province = {
				religion = pantheon_worship
			}
		}
		hidden_effect = {
			if = {
				limit = {
					has_estate_privilege = estate_church_nhs_inquisition_privilege
				}
				set_country_flag = to_has_inquisition
			}
		}
		change_religion = pantheon_worship
		if = {
			limit = {
				has_country_modifier = nhs_hrv_loyal_orthodox
			}
			remove_country_modifier = nhs_hrv_loyal_orthodox
			nhs_set_clergy_loyalty_to_80 = yes
			to_nhs_remove_all_clergy_privileges = yes
			custom_tooltip = nhs_new_line_tt
			if = {
				limit = {
					OR = {
						has_estate_privilege = estate_church_nhs_inquisition_privilege
						has_country_flag = to_has_inquisition
					}
				}
				to_nhs_spawn_inquisition_revolt = {
					EVENT_TARGET = to_orthodox_revolt_province_1
					EVENT_TARGET_3 = to_orthodox_revolt_province_2
				}
				clr_country_flag = to_has_inquisition
			}
			else = {
				if = {
					limit = {
						has_saved_event_target = to_orthodox_revolt_province_1
					}
					to_orthodox_spawn_revolt_in_potential_province = {
						EVENT_TARGET = to_orthodox_revolt_province_1
						SIZE = 3
					}
				}
				if = {
					limit = {
						has_saved_event_target = to_orthodox_revolt_province_2
					}
					to_orthodox_spawn_revolt_in_potential_province = {
						EVENT_TARGET = to_orthodox_revolt_province_2
						SIZE = 2
					}
				}
				if = {
					limit = {
						has_saved_event_target = to_orthodox_revolt_province_3
					}
					to_orthodox_spawn_revolt_in_potential_province = {
						EVENT_TARGET = to_orthodox_revolt_province_3
						SIZE = 1
					}
				}
			}
		}
		else = {
			remove_country_modifier = nhs_hrv_tolerance
			add_country_modifier = {
				name = nhs_hrv_loyal_hellenic
				duration = 29200
			}
			nhs_set_clergy_loyalty_to_50 = yes
			to_nhs_remove_all_clergy_privileges = yes
			custom_tooltip = nhs_new_line_tt
			if = {
				limit = {
					OR = {
						has_estate_privilege = estate_church_nhs_inquisition_privilege
						has_country_flag = to_has_inquisition
					}
				}
				to_nhs_spawn_inquisition_revolt = {
					EVENT_TARGET = to_orthodox_revolt_province_1
					EVENT_TARGET_2 = to_orthodox_revolt_province_2
				}
				clr_country_flag = to_has_inquisition
			}
			else = {
				if = {
					limit = {
						has_saved_event_target = to_orthodox_revolt_province_1
					}
					to_orthodox_spawn_revolt_in_potential_province = {
						EVENT_TARGET = to_orthodox_revolt_province_1
						SIZE = 2
					}
				}
				if = {
					limit = {
						has_saved_event_target = to_orthodox_revolt_province_2
					}
					to_orthodox_spawn_revolt_in_potential_province = {
						EVENT_TARGET = to_orthodox_revolt_province_2
						SIZE = 1
					}
				}
			}
		}
	}
}

######################
# Pagan Assemblies   #
######################

# Pagan assemblies
country_event = {
	id = nhs_hellenicconversion.4
	title = nhs_hellenicconversion4.t
	desc = nhs_hellenicconversion4.d
	picture = REFORM_eventPicture

	fire_only_once = yes
	goto = nhs_hcd_target_province

	trigger = {
		NOT = { is_year = 1468 }
		has_country_flag = hellenic_conversion_preacher
		nhs_check_all_elysian_tags = { CONDITION = tag }
		religion = orthodox
		num_of_cities = 2
		OR = {
			has_disaster_progress = {
				disaster = nhs_hcd_hellenic_crisis
				value = 70
			}
			check_variable = {
				which = HellenicDisasterProgress
				value = 5
			}
		}
		any_owned_province = {
			is_city = yes
			is_capital = no
			culture_group = ROOT
		}
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_city = yes
					is_capital = no
					culture_group = ROOT
					area = chesapeake_area
				}
				save_event_target_as = nhs_hcd_target_province
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = nhs_hcd_target_province }
				}
				random_owned_province = {
					limit = {
						is_city = yes
						is_capital = no
						culture_group = ROOT
					}
					save_event_target_as = nhs_hcd_target_province
				}
			}
		}
	}

	option = {
		# Immediately put it down
		name = nhs_hellenicconversion.4.a
		ai_chance = {
			factor = 0
		}

		add_stability = -1
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 15
		}
		event_target:nhs_hcd_target_province = {
			add_devastation = 25
			# add_province_modifier = {
			# 	name = nhs_hcd_Pagan_minority
			# 	duration = -1
			# }
			to_nhs_spawn_pre_disaster_hellenic_rebels = { SIZE = 2 }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_huge = yes
		add_disaster_progress = {
			disaster = nhs_hcd_hellenic_crisis
			value = 24
		}
	}

	option = {
		# Refuse their demands
		name = nhs_hellenicconversion.4.b
		ai_chance = {
			factor = 0
		}

		set_country_flag = nhs_pagan_assemblies
		custom_tooltip = nhs_increase_hellenic_disaster_progress_by_0.5
		custom_tooltip = nhs_new_line_tt
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_target_province = {
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
			set_province_flag = nhs_hcd_first_pagan_minority_province
		}
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Let them be
		name = nhs_hellenicconversion.4.c
		ai_chance = {
			factor = 0
		}

		set_country_flag = nhs_pagan_assemblies
		custom_tooltip = nhs_increase_hellenic_disaster_progress_by_0.5
		custom_tooltip = nhs_new_line_tt
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_base_tax = 1
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
			set_province_flag = nhs_hcd_first_pagan_minority_province
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Private concessions
		name = nhs_hellenicconversion.4.d
		ai_chance = {
			factor = 1
		}

		set_country_flag = nhs_pagan_assemblies
		custom_tooltip = nhs_increase_hellenic_disaster_progress_by_0.5
		custom_tooltip = nhs_new_line_tt
		add_dip_power = -50
		event_target:nhs_hcd_target_province = {
			add_base_tax = 1
			add_local_autonomy = 50
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
			set_province_flag = nhs_hcd_first_pagan_minority_province
		}
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}

# Nearby christians angered
country_event = {
	id = nhs_hellenicconversion.41
	title = nhs_hellenicconversion41.t
	desc = nhs_hellenicconversion41.d
	picture = PRINCE_BISHOP_RESIGN_eventPicture

	# fire_only_once = yes
	is_triggered_only = yes
	goto = nhs_hcd_assemblies_target_province

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_country_flag = nhs_pagan_assemblies
		religion = orthodox
		any_owned_province = {
			religion = orthodox
			has_province_modifier = nhs_hcd_Pagan_minority
			OR = {
				NOT = { has_province_flag = nhs_assemblies_local_event }
				had_province_flag = {
					flag = nhs_hcd_assemblies_target_province
					days = 1825
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			# random_owned_province = {
			# 	limit = {
			# 		is_capital = no
			# 		is_city = yes
			# 		any_neighbor_province = {
			# 			has_province_modifier = nhs_hcd_Pagan_minority
			# 		}
			# 	}
			# 	save_event_target_as = nhs_hcd_assemblies_target_province
			# }
			random_owned_province = {
				limit = {
					religion = orthodox
					has_province_modifier = nhs_hcd_Pagan_minority
					OR = {
						NOT = { has_province_flag = nhs_assemblies_local_event }
						had_province_flag = {
							flag = nhs_assemblies_local_event
							days = 1825
						}
					}
				}
				set_province_flag = nhs_assemblies_local_event
				save_event_target_as = nhs_hcd_assemblies_target_province
			}
		}
	}

	# mean_time_to_happen = {
	# 	months = 12
	# }

	option = {
		# Demand compensation from the pagans
		name = nhs_hellenicconversion.41.a
		ai_chance = {
			factor = 0
		}

		add_mil_power = -25
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_assemblies_target_province = {
			add_unrest = 10
		}
		# random_owned_province = {
		# 	limit = {
		# 		has_province_modifier = nhs_hcd_Pagan_minority
		# 	}
		# 	add_base_tax = -1
		# }
		# event_target:nhs_hcd_assemblies_target_province = {
		# 	add_base_tax = 1
		# }
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Ignore the christians
		name = nhs_hellenicconversion.41.b
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_assemblies_target_province = {
			add_unrest = 10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Settle the dispute
		name = nhs_hellenicconversion.41.c
		ai_chance = {
			factor = 1
		}

		add_treasury = -25
		add_adm_power = -25
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# The natives you say?
		name = nhs_hellenicconversion.41.d
		ai_chance = {
			factor = 0
		}

		trigger = {
			OR = {
				has_estate = estate_all_natives
				has_country_modifier = nhs_early_uprising_reduction
				any_owned_province = {
					native_culture = yes
				}
				any_known_country = {
					native_culture_primary = yes
					NOT = {
						border_distance = {
							who = ROOT
							distance = 20
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_estate = estate_all_natives
			}
			add_estate_loyalty = {
				estate = estate_all_natives
				loyalty = -10
			}
		}
		else_if = {
			limit = {
				has_country_modifier = nhs_early_uprising_reduction
			}
			remove_country_modifier = nhs_early_uprising_reduction
		}
		else_if = {
			limit = {
				any_owned_province = {
					native_culture = yes
				}
			}
			random_owned_province = {
				limit = {
					native_culture = yes
				}
				add_unrest = 5
				add_nationalism = 10
			}
		}
		else_if = {
			limit = {
				any_neighbor_country = {
					ROOT = {
						knows_country = PREV
					}
					native_culture_primary = yes
				}
			}
			random_neighbor_country = {
				limit = {
					native_culture_primary = yes
				}
				add_opinion = {
					who = ROOT
					modifier = nhs_hcd_diverted_blame
				}
			}
		}
		else_if = {
			limit = {
				any_known_country = {
					native_culture_primary = yes
					NOT = {
						border_distance = {
							who = ROOT
							distance = 20
						}
					}
				}
			}
			random_known_country = {
				limit = {
					native_culture_primary = yes
					NOT = {
						border_distance = {
							who = ROOT
							distance = 20
						}
					}
				}
				add_opinion = {
					who = ROOT
					modifier = nhs_hcd_diverted_blame
				}
			}
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}

# New pagan assembly
country_event = {
	id = nhs_hellenicconversion.42
	title = nhs_hellenicconversion42.t
	desc = nhs_hellenicconversion42.d
	picture = CITY_DEVELOPMENT_eventPicture

	# fire_only_once = yes
	# is_triggered_only = yes
	goto = nhs_hcd_new_assemblies_target_province

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_country_flag = nhs_pagan_assemblies
		had_country_flag = {
			flag = nhs_pagan_assemblies
			days = 365
		}
		any_owned_province = {
			is_capital = no
			is_city = yes
			culture_group = ROOT
			NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
			NOT = { has_province_flag = nhs_had_pletnonist_assembly }
		}
		religion = orthodox
		OR = {
			AND = {
				num_of_owned_provinces_with = {
					value = 5
					is_city = yes
					culture_group = ROOT
				}
				NOT = {
					num_of_owned_provinces_with = {
						value = 2
						is_city = yes
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
			}
			AND = {
				num_of_owned_provinces_with = {
					value = 7
					is_city = yes
					culture_group = ROOT
				}
				NOT = {
					num_of_owned_provinces_with = {
						value = 3
						is_city = yes
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
			}
			AND = {
				num_of_owned_provinces_with = {
					value = 9
					is_city = yes
					culture_group = ROOT
				}
				NOT = {
					num_of_owned_provinces_with = {
						value = 4
						is_city = yes
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
			}
			AND = {
				num_of_owned_provinces_with = {
					value = 11
					is_city = yes
					culture_group = ROOT
				}
				NOT = {
					num_of_owned_provinces_with = {
						value = 5
						is_city = yes
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = nhs_pagan_assemblies
			set_country_flag = nhs_pagan_assemblies
			random_owned_province = {
				limit = {
					is_capital = no
					is_city = yes
					culture_group = ROOT
					NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
					any_neighbor_province = {
						has_province_modifier = nhs_hcd_Pagan_minority
					}
				}
				save_event_target_as = nhs_hcd_new_assemblies_target_province
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = nhs_hcd_new_assemblies_target_province }
				}
				random_owned_province = {
					limit = {
						is_capital = no
						is_city = yes
						culture_group = ROOT
						NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
					}
					save_event_target_as = nhs_hcd_new_assemblies_target_province
				}
			}
			event_target:nhs_hcd_new_assemblies_target_province = {
				set_province_flag = nhs_had_pletnonist_assembly
			}
		}
	}

	option = {
		# Allow it
		name = nhs_hellenicconversion.42.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate  = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_new_assemblies_target_province = {
			add_base_tax = 1
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Placate the clergy
		name = nhs_hellenicconversion.42.b
		ai_chance = {
			factor = 1
		}
		
		add_legitimacy = -5
		add_prestige = -5
		event_target:nhs_hcd_new_assemblies_target_province = {
			add_base_tax = 1
			add_province_modifier = {
				name = nhs_hcd_Pagan_minority
				duration = -1
			}
		}
	}

	option = {
		# Restrain it
		name = nhs_hellenicconversion.42.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate  = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_new_assemblies_target_province = {
			to_nhs_spawn_pre_disaster_hellenic_rebels = { SIZE = 1 }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}
}

# Pagans request tax exemption
country_event = {
	id = nhs_hellenicconversion.43
	title = nhs_hellenicconversion43.t
	desc = nhs_hellenicconversion43.d
	picture = FAMINE_eventPicture

	# fire_only_once = yes
	is_triggered_only = yes
	goto = nhs_hcd_assemblies_target_province

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_country_flag = nhs_pagan_assemblies
		any_owned_province = {
			has_province_modifier = nhs_hcd_Pagan_minority
			OR = {
				NOT = { has_province_flag = nhs_assemblies_local_event }
				had_province_flag = {
					flag = nhs_assemblies_local_event
					days = 1825
				}
			}
		}
		religion = orthodox
	}

	# mean_time_to_happen = {
	# 	months = 24
	# }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority
					OR = {
						NOT = { has_province_flag = nhs_assemblies_local_event }
						had_province_flag = {
							flag = nhs_assemblies_local_event
							days = 1825
						}
					}
				}
				set_province_flag = nhs_assemblies_local_event
				save_event_target_as = nhs_hcd_assemblies_target_province
			}
		}
	}

	option = { 
		# Refuse
		name = nhs_hellenicconversion.43.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_assemblies_target_province = {
			add_unrest = 10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Offer assistance
		name = nhs_hellenicconversion.43.b
		ai_chance = {
			factor = 0
		}

		event_target:nhs_hcd_assemblies_target_province = {
			add_province_modifier = {
				name = nhs_hcd_famine_aid
				duration = 1825
			}
		}
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Offer exemption long term
		name = nhs_hellenicconversion.43.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_assemblies_target_province = {
			add_base_production = 1
			add_province_modifier = {
				name = nhs_hcd_famine_exempt
				duration = 7300
			}
		}
		to_nhs_hellenic_disaster_anger_orthodox_major = yes
		to_nhs_increase_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Use the crown's ressources
		name = nhs_hellenicconversion.43.d
		ai_chance = {
			factor = 1
		}
		
		add_treasury = -25
		event_target:nhs_hcd_assemblies_target_province = {
			add_province_modifier = {
				name = nhs_hcd_famine_aid
				duration = 1825
			}
		}
		custom_tooltip = nhs_new_line_tt
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}

# Pagans request representation
country_event = {
	id = nhs_hellenicconversion.44
	title = nhs_hellenicconversion44.t
	desc = nhs_hellenicconversion44.d
	picture = BURGHER_ESTATE_UPSET_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_country_flag = nhs_pagan_assemblies
		any_owned_province = {
			has_province_modifier = nhs_hcd_Pagan_minority
		}
		religion = orthodox
	}

	# mean_time_to_happen = {
	# 	months = 24
	# }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = no
					is_city = yes
					has_province_modifier = nhs_hcd_Pagan_minority
				}
				save_event_target_as = nhs_hcd_assemblies_target_province
			}
		}
	}

	option = {
		# Accept
		name = nhs_hellenicconversion.44.a
		ai_chance = {
			factor = 0
		}

		# add_adm_power = -50
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_pagan_representation_modifiers_removed_tt
		add_country_modifier = {
			name = nhs_hcd_hellenic_representation
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		to_nhs_hellenic_disaster_anger_orthodox_major = yes
	}

	option = {
		# Refuse
		name = nhs_hellenicconversion.44.b
		goto = nhs_hcd_assemblies_target_province
		ai_chance = {
			factor = 0
		}

		add_patriarch_authority = 0.1
		event_target:nhs_hcd_assemblies_target_province = {
			to_nhs_spawn_pre_disaster_hellenic_rebels = { SIZE = 1 }
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Offer concessions
		name = nhs_hellenicconversion.44.c
		ai_chance = {
			factor = 1
		}

		custom_tooltip = nhs_pagan_representation_modifiers_removed_tt
		add_country_modifier = {
			name = nhs_hcd_pagan_concessions 
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Negotiate
		name = nhs_hellenicconversion.44.d
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = righteous_personality
				ruler_has_personality = kind_hearted_personality
				ruler_has_personality = charismatic_negotiator_personality
				ruler_has_personality = silver_tongue_personality
			}
		}
		ai_chance = {
			factor = 500
		}

		add_prestige = -10
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_pagan_representation_modifiers_removed_tt
		add_country_modifier = {
			name = nhs_hcd_hellenic_representation
			duration = -1
			desc = "END_OF_PRE_ELY_RELIGIOUS_WARS"
		}
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}

########################
# People's inquisition #
########################

# Establish inquisition
country_event = {
	id = nhs_hellenicconversion.5
	title = nhs_hellenicconversion5.t
	desc = nhs_hellenicconversion5.d
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_country_flag = hellenic_conversion_preacher
		religion = orthodox	
		has_disaster_progress = {
			disaster = nhs_hcd_hellenic_crisis
			value = 80
		}
		# check_variable = {
		# 	which = HellenicDisasterProgress
		# 	value = 5
		# }
	}

	mean_time_to_happen = {
		months = 2
		# modifier = {
		# 	factor = 0.5
		# 	estate_loyalty = {
		# 		estate = estate_church 
		# 		loyalty = 30
		# 	}
		# }
	}

	option = {
		# Allow the church to establish an inquisition
		name = nhs_hellenicconversion.5.a
		ai_chance = {
			factor = 1
		}

		set_estate_privilege = estate_church_nhs_inquisition_privilege
		custom_tooltip = nhs_dotted_line_tt
		add_disaster_progress = {
			disaster = nhs_hcd_hellenic_crisis
			value = -60
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		# custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_major = yes
	}

	# option = {
	# 	# Fund a state-backed inquisition
	# 	name = nhs_hellenicconversion.5.b

	# 	add_years_of_income = -0.75
	# 	add_country_modifier = {
	# 		name = nhs_hcd_state_inquisition
	# 		duration = 1825
	# 	}
	# 	custom_tooltip = hellenicconversion_anger_neither.tt
	# }

	option = {
		# An inquistion is not necessary
		name = nhs_hellenicconversion.5.c
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		# hidden_effect = {
		# 	change_variable = {
		# 		which = OrthodoxUprising
		# 		value = 2
		# 	}
		# }
		# to_nhs_hellenic_disaster_anger_orthodox_major = yes
	}
}

# Purges
country_event = {
	id = nhs_hellenicconversion.51
	title = nhs_hellenicconversion51.t
	desc = nhs_hellenicconversion51.d
	picture = CHURCH_ESTATE_1_eventPicture
	
	# fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_country_flag = hellenic_conversion_preacher
		has_estate_privilege = estate_church_nhs_inquisition_privilege
	}

	# mean_time_to_happen = {
	# 	months = 12
	# }

	immediate = {
		hidden_effect = {
			random_list = {
				1 = {
					trigger = {
						employed_advisor = {
							category = ADM
						}
					}
					set_country_flag = nhs_hcd_advisor_events_adm
				}
				1 = {
					trigger = {
						employed_advisor = {
							category = DIP
						}
					}
					set_country_flag = nhs_hcd_advisor_events_dip
				}
				1 = {
					trigger = {
						employed_advisor = {
							category = MIL
						}
					}
					set_country_flag = nhs_hcd_advisor_events_mil
				}
				1 = {
					trigger = {
						NOT = { has_advisor = yes }
					}
					set_country_flag = nhs_hcd_advisor_events_none
				}
			}
		}
	}

	option = {
		# Let the inquisition purge the suspected heathens (If advisor)
		name = nhs_hellenicconversion.51.a
		trigger = {
			has_advisor = yes
		}
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		trigger_switch = {
			on_trigger = has_country_flag
			nhs_hcd_advisor_events_adm = { kill_advisor_by_category_effect = { ADM = yes } }
			nhs_hcd_advisor_events_dip = { kill_advisor_by_category_effect = { DIP = yes } }
			nhs_hcd_advisor_events_mil = { kill_advisor_by_category_effect = { MIL = yes } }
		}
		# set_country_flag = nhs_hcd_inquisition_purges
		# custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Let the inquisition purge the suspected heathens (No advisor)
		name = nhs_hellenicconversion.51.a
		trigger = {
			NOT = { has_advisor = yes }
		}
		ai_chance = {
			factor = 0
		}
		
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		add_dip_power = -25
		add_adm_power = -25
		add_mil_power = -25
		# set_country_flag = nhs_hcd_inquisition_purges
		# custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	# option = { 
	# 	# Have the list changed
	# 	name = nhs_hellenicconversion.51.b
		
	# 	add_estate_loyalty = {
	# 		estate = estate_church
	# 		loyalty = 5
	# 	}
	# 	add_corruption = 2
	# 	add_years_of_income = -0.25
	# 	set_country_flag = nhs_hcd_inquisition_purges
	# 	custom_tooltip = hellenicconversion_church_inquisition_accept.tt
	# 	custom_tooltip = nhs_new_line_tt
	# 	to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	# }

	option = {
		# Delay
		name = nhs_hellenicconversion.51.b
		ai_chance = {
			factor = 1
		}

		set_country_flag = nhs_hcd_opposed_the_inquisition
		add_adm_power = -50
		add_corruption = -1
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -15
		}
		# add_dip_power = -50
		# custom_tooltip = hellenicconversion_anger_neither.tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}

	option = {
		# Refuse
		name = nhs_hellenicconversion.51.c
		ai_chance = {
			factor = 0
		}

		set_country_flag = nhs_hcd_opposed_the_inquisition
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -15
		}
		# add_stability = -1
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	after = {
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				nhs_hcd_advisor_events_adm = { clr_country_flag = nhs_hcd_advisor_events_adm }
				nhs_hcd_advisor_events_dip = { clr_country_flag = nhs_hcd_advisor_events_dip }
				nhs_hcd_advisor_events_mil = { clr_country_flag = nhs_hcd_advisor_events_mil }
				nhs_hcd_advisor_events_none = { clr_country_flag = nhs_hcd_advisor_events_none }
			}
		}
	}
}

# Witch trials
country_event = {
	id = nhs_hellenicconversion.52
	title = nhs_hellenicconversion52.t
	desc = nhs_hellenicconversion52.d
	picture = aow_WITCHBURNING_eventPicture

	# fire_only_once = yes
	is_triggered_only = yes
	goto = nhs_hcd_target_province

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_country_flag = hellenic_conversion_preacher
		has_estate_privilege = estate_church_nhs_inquisition_privilege
		num_of_cities = 2
		any_owned_province = {
			is_capital = no
			religion = orthodox
			NOT = { has_province_modifier = nhs_hdc_witch_trials_cd }
		}
	}

	# mean_time_to_happen = {
	# 	months = 12
	# }
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = no
					religion = orthodox
				}
				save_event_target_as = nhs_hcd_target_province
				add_province_modifier = {
					name = nhs_hdc_witch_trials_cd
					duration = 1825
					hidden = yes
				}
			}
		}
	}

	option = {
		# Tacitly approve
		name = nhs_hellenicconversion.52.a
		ai_chance = {
			factor = 0
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:nhs_hcd_target_province = {
			add_unrest = 10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Condem the trials
		name = nhs_hellenicconversion.52.b
		ai_chance = {
			factor = 0
		}

		set_country_flag = nhs_hcd_opposed_the_inquisition
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:nhs_hcd_target_province = {
			add_unrest = 10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}

	option = {
		# Intervene
		name = nhs_hellenicconversion.52.c
		ai_chance = {
			factor = 1
		}

		set_country_flag = nhs_hcd_opposed_the_inquisition
		add_mil_power = -25
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_decrease_hellenic_crisis_disaster_progress = yes
	}
}

# Appointing a new consort
country_event = {
	id = nhs_hellenicconversion.53
	title = nhs_hellenicconversion53.t
	desc = {
		trigger = {
			has_consort = yes
		}
		desc = nhs_hellenicconversion53.d.a
	}
	desc = {
		trigger = {
			NOT = { has_consort = yes }
		}
		desc = nhs_hellenicconversion53.d.b
	}
	picture = BAD_WITH_MONARCH_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_dlc = "Rights of Man"
		has_country_flag = hellenic_conversion_preacher
		has_estate_privilege = estate_church_nhs_inquisition_privilege
	}

	# mean_time_to_happen = {
	# 	months = 12
	# }

	option = {
		# Divorce
		name = nhs_hellenicconversion.53.a
		trigger = {
			has_consort = yes
		}
		ai_chance = {
			factor = 1
		}

		divorce_consort_effect = yes
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		# set_country_flag = nhs_hcd_inquisition_divorce
		# custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = {
		# Marry the woman
		name = nhs_hellenicconversion.53.b
		trigger = {
			NOT = { has_consort = yes }
		}
		ai_chance = {
			factor = 1
		}

		define_consort = {}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		# set_country_flag = nhs_hcd_inquisition_divorce
		# custom_tooltip = hellenicconversion_church_inquisition_accept.tt
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_hellenic_minor = yes
	}

	option = { 
		# Refuse
		name = nhs_hellenicconversion.53.c
		ai_chance = {
			factor = 1
		}

		set_country_flag = nhs_hcd_opposed_the_inquisition
		add_prestige = 10
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		custom_tooltip = nhs_new_line_tt
		to_nhs_hellenic_disaster_anger_orthodox_minor = yes
	}
}

########################################
# End of the crisis without a disaster #
########################################

# No Inquisition
country_event = {
	id = nhs_hellenicconversion.6
	title = nhs_hellenicconversion6.t
	desc = nhs_hellenicconversion6.d
	picture = DIPLOMACY_SIGNING_eventPicture

	major = yes
	major_trigger = { 
		knows_country = ROOT 
	}
	fire_only_once = yes

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_country_flag = hellenic_conversion_preacher
		is_year = 1468
		religion = orthodox
		NOT = { has_estate_privilege = estate_church_nhs_inquisition_privilege }
	}

	immediate = {
		hidden_effect = {
			to_nhs_remove_pre_hellenic_disaster_flags = yes
			clr_country_flag = nhs_hcd_opposed_the_inquisition
		}
	}

	after = {
		hidden_effect = {
			set_variable = {
				which = HellenicUprising
				value = 0
			}
			set_variable = {
				which = OrthodoxUprising
				value = 0
			}
			set_variable = {
				which = HellenicDisasterProgress
				value = 0
			}
		}
	}

	option = {
		name = nhs_hellenicconversion.6.a
		ai_chance = {
			factor = 40
		}

		# custom_tooltip = nhs_hellenicconversion.6.tt
		# custom_tooltip = to_nhs_hellenic_disaster_ends_tt
		change_religion = pantheon_worship
		if = {
			limit = {
				has_spawned_rebels = orthodox_rebels
			}
			disband_rebels = orthodox_rebels
		}
		if = {
			limit = {
				has_spawned_rebels = pantheon_worship_rebels
			}
			disband_rebels = pantheon_worship_rebels
		}
		nhs_set_clergy_loyalty_to_50 = yes
		to_nhs_remove_all_clergy_privileges = yes
		to_nhs_remove_pre_hellenic_disaster_country_modifiers = yes
		add_country_modifier = {
			name = nhs_hrv_peaceful_resolution
			duration = 36500
		}
		if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_peaceful_unfriendly_hostile_tt
		}
		else_if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_moderate_neutral_tt
			add_legitimacy = 10
			add_stability_or_adm_power = yes
		}
		else = {
			custom_tooltip = to_nhs_consequences_moderate_friendly_tt
			add_legitimacy = 20
			to_add_2_stability_or_adm_power = yes
		}
		to_restore_heir_claim_hellenic = yes
		custom_tooltip = nhs_dotted_line_tt
		if = {
			limit = {
				capital_scope = {
					NOT = { religion = pantheon_worship }
					NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
				}
			}
			capital_scope = {
				change_religion = pantheon_worship
			}
		}
		if = {
			limit = {
				any_owned_province = {
					has_province_modifier = nhs_hcd_Pagan_minority
				}
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority
				}
				remove_province_modifier = nhs_hcd_Pagan_minority
				change_religion = pantheon_worship
			}
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_tolerated_minority_orthodox_in_the_future_tt
		set_country_flag = nhs_enable_tolerated_minority
		hidden_effect = {
			to_nhs_handle_post_disaster_tolerance_modifier_all_provinces = yes
		}
		to_nhs_remove_pre_hellenic_disaster_conflict_province_modifiers = yes
	}

	option = {
		name = nhs_hellenicconversion.6.b
		ai_chance = {
			factor = 60
		}
		if = {
			limit = {
				has_spawned_rebels = orthodox_rebels
			}
			disband_rebels = orthodox_rebels
		}
		if = {
			limit = {
				has_spawned_rebels = pantheon_worship_rebels
			}
			disband_rebels = pantheon_worship_rebels
		}
		if = {
			limit = {
				ruler_religion = pantheon_worship
			}
			set_ruler_religion = orthodox
		}
		# custom_tooltip = nhs_hellenicconversion.6.tt
		# custom_tooltip = to_nhs_hellenic_disaster_ends_tt
		to_nhs_remove_pre_hellenic_disaster_country_modifiers = yes
		add_country_modifier = {
			name = nhs_hrv_peaceful_resolution
			duration = 36500
		}
		if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_peaceful_unfriendly_hostile_tt
		}
		else_if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_moderate_neutral_tt
			add_legitimacy = 10
			add_stability_or_adm_power = yes
		}
		else = {
			custom_tooltip = to_nhs_consequences_moderate_friendly_tt
			add_legitimacy = 20
			to_add_2_stability_or_adm_power = yes
		}
		to_restore_heir_claim_hellenic = yes
		custom_tooltip = nhs_dotted_line_tt
		if = {
			limit = {
				capital_scope = {
					has_province_modifier = nhs_hcd_Pagan_minority
				}
			}
			capital_scope = {
				remove_province_modifier = nhs_hcd_Pagan_minority
			}
		}
		if = {
			limit = {
				capital_scope = {
					NOT = { religion = orthodox }
				}
			}
			capital_scope = {
				change_religion = orthodox
			}
		}
		if = {
			limit = {
				any_owned_province = {
					has_province_modifier = nhs_hcd_Pagan_minority
					is_capital = no
				}
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority
					is_capital = no
				}
				remove_province_modifier = nhs_hcd_Pagan_minority
				change_religion = pantheon_worship
			}
		}

		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_tolerated_minority_hellenic_in_the_future_tt
		set_country_flag = nhs_enable_tolerated_minority
		hidden_effect = {
			to_nhs_handle_post_disaster_tolerance_modifier_all_provinces = yes
		}
		to_nhs_remove_pre_hellenic_disaster_conflict_province_modifiers = yes
	}
}

# With Inquisition
country_event = {
	id = nhs_hellenicconversion.54
	title = nhs_hellenicconversion54.t
	desc = {
		trigger = {
			ruler_religion = ROOT
			NOT = { has_ruler_flag = to_heir_practices_hellenism_in_secret }
			OR = {
				has_heir = no
				AND = {
					heir_religion = ROOT
					NOT = { has_heir_flag = to_heir_practices_hellenism_in_secret }
				}
			}
		}
		desc = nhs_hellenicconversion54.da
	}
	desc = {
		trigger = {
			ruler_religion = ROOT
			NOT = { has_ruler_flag = to_heir_practices_hellenism_in_secret }
			has_heir = yes
			NOT = { heir_religion = ROOT }
		}
		desc = nhs_hellenicconversion54.db
	}
	desc = {
		trigger = {
			ruler_religion = ROOT
			NOT = { has_ruler_flag = to_heir_practices_hellenism_in_secret }
			has_heir = yes
			has_heir_flag = to_heir_practices_hellenism_in_secret
		}
		desc = nhs_hellenicconversion54.dc
	}
	desc = {
		trigger = {
			NOT = { ruler_religion = ROOT }
		}
		desc = nhs_hellenicconversion54.dd
	}
	desc = {
		desc = nhs_hellenicconversion54.de
	}
	picture = RELIGIOUS_TURMOIL_eventPicture

	major = yes
	major_trigger = { 
		knows_country = ROOT 
	}
	fire_only_once = yes

	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		has_country_flag = hellenic_conversion_preacher
		is_year = 1468
		religion = orthodox
		has_estate_privilege = estate_church_nhs_inquisition_privilege
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = no
					NOT = { has_province_modifier = nhs_hcd_Pagan_minority }
					religion = orthodox
				}
				save_event_target_as = nhs_hcd_target_province
			}
			if = {
				limit = {
					NOT = { has_country_flag = to_computed_zealous_heir_stats }
				}
				if = {
					limit = {
						has_heir = yes
					}
					to_compute_zealous_ruler_heir_stats = {
						SOURCE_ADM = heir_adm
						SOURCE_DIP = heir_dip
						SOURCE_MIL = heir_mil
					}
				}
				else = {
					to_compute_zealous_ruler_heir_stats = {
						SOURCE_ADM = adm
						SOURCE_DIP = dip
						SOURCE_MIL = mil
					}
				}
			}
			to_nhs_remove_pre_hellenic_disaster_flags = yes
		}
	}

	after = {
		hidden_effect = {
			set_variable = {
				which = HellenicUprising
				value = 0
			}
			set_variable = {
				which = OrthodoxUprising
				value = 0
			}
			set_variable = {
				which = HellenicDisasterProgress
				value = 0
			}
		}
	}

	# mean_time_to_happen = {
	# 	months = 6
	# }

	after = {
		clr_country_flag = nhs_hcd_opposed_the_inquisition
	}

	option = {
		# Accept the situation
		name = nhs_hellenicconversion.54.a
		trigger = {
			ruler_religion = ROOT
			NOT = { has_ruler_flag = to_heir_practices_hellenism_in_secret }
		}
		ai_chance = {
			factor = 1
		}
		if = {
			limit = {
				has_spawned_rebels = orthodox_rebels
			}
			disband_rebels = orthodox_rebels
		}
		if = {
			limit = {
				has_spawned_rebels = pantheon_worship_rebels
			}
			disband_rebels = pantheon_worship_rebels
		}
		# custom_tooltip = to_nhs_hellenic_disaster_ends_tt
		add_patriarch_authority = 0.25
		add_war_exhaustion = 5
		add_country_modifier = {
			name = nhs_hrv_loyal_orthodox
			duration = 36500
		}
		if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_peaceful_inquisition_unfriendly_hostile_tt
		}
		else_if = {
			limit = {
				to_nhs_hellenic_disaster_attitude_neutral = {
					ATTITUDE_VARIABLE = OrthodoxUprising
				}
			}
			custom_tooltip = to_nhs_consequences_orthodox_neutral_tt
			add_war_exhaustion = -1
			add_treasury = 25
		}
		else = {
			custom_tooltip = to_nhs_consequences_orthodox_friendly_tt
			add_stability_or_adm_power = yes
			add_war_exhaustion = -2
			add_treasury = 50
		}
		if = {
			limit = {
				has_heir = yes
				OR = {
					NOT = { heir_religion = ROOT }
					has_heir_flag = to_heir_practices_hellenism_in_secret
				}
			}
			custom_tooltip = nhs_new_line_tt
			custom_tooltip = to_zealous_relative_proposal_tt
			to_assign_zealous_heir = yes
		}
		custom_tooltip = nhs_dotted_line_tt
		if = {
			limit = {
				any_owned_province = {
					OR = {
						has_province_modifier = nhs_hcd_Pagan_minority
						religion = pantheon_worship
					}
				}
			}
			every_owned_province = {
				limit = {
					OR = {
						has_province_modifier = nhs_hcd_Pagan_minority
						religion = pantheon_worship
					} 
				}
				if = {
					limit = {
						religion = pantheon_worship
					}
					change_religion = orthodox
				}
				add_devastation = 50
				if = {
					limit = {
						has_province_modifier = nhs_hcd_Pagan_minority
					}
					remove_province_modifier = nhs_hcd_Pagan_minority
				}
				if = {
					limit = {
						has_province_modifier = nhs_semi_tolerated_minority
					}
					remove_province_modifier = nhs_semi_tolerated_minority
				}
			}
		}
		to_nhs_remove_pre_hellenic_disaster_country_modifiers = yes
		to_nhs_remove_pre_hellenic_disaster_province_modifiers = yes
	}

	option = {
		# Accept the situation (Hellenic)
		name = nhs_hellenicconversion.54.c
		trigger = {
			OR = {
				NOT = { ruler_religion = ROOT }
				has_ruler_flag = to_heir_practices_hellenism_in_secret
			}
		}
		ai_chance = {
			factor = 0
		}
		to_assign_zealous_ruler = yes
		if = {
			limit = {
				has_heir = yes
				OR = {
					NOT = { heir_religion = ROOT }
					has_heir_flag = to_heir_practices_hellenism_in_secret
				}
			}
			kill_heir = { allow_new_heir = no }
		}
		custom_tooltip = nhs_new_line_tt
		if = {
			limit = {
				has_spawned_rebels = orthodox_rebels
			}
			disband_rebels = orthodox_rebels
		}
		if = {
			limit = {
				has_spawned_rebels = pantheon_worship_rebels
			}
			disband_rebels = pantheon_worship_rebels
		}
		# custom_tooltip = to_nhs_hellenic_disaster_ends_tt
		add_stability_or_adm_power = yes
		add_patriarch_authority = 0.25
		add_war_exhaustion = 5
		add_country_modifier = {
			name = nhs_hrv_loyal_orthodox
			duration = 36500
		}
		if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_peaceful_inquisition_unfriendly_hostile_tt
		}
		else_if = {
			limit = {
				to_nhs_hellenic_disaster_attitude_neutral = {
					ATTITUDE_VARIABLE = OrthodoxUprising
				}
			}
			custom_tooltip = to_nhs_consequences_orthodox_neutral_tt
			add_war_exhaustion = -1
			add_treasury = 25
		}
		else = {
			custom_tooltip = to_nhs_consequences_orthodox_friendly_tt
			add_war_exhaustion = -2
			add_treasury = 50
		}
		custom_tooltip = nhs_dotted_line_tt
		if = {
			limit = {
				any_owned_province = {
					OR = {
						has_province_modifier = nhs_hcd_Pagan_minority
						religion = pantheon_worship
					}
				}
			}
			every_owned_province = {
				limit = {
					OR = {
						has_province_modifier = nhs_hcd_Pagan_minority
						religion = pantheon_worship
					} 
				}
				if = {
					limit = {
						religion = pantheon_worship
					}
					change_religion = orthodox
				}
				add_devastation = 50
				if = {
					limit = {
						has_province_modifier = nhs_hcd_Pagan_minority
					}
					remove_province_modifier = nhs_hcd_Pagan_minority
				}
				if = {
					limit = {
						has_province_modifier = nhs_semi_tolerated_minority
					}
					remove_province_modifier = nhs_semi_tolerated_minority
				}
			}
		}
		to_nhs_remove_pre_hellenic_disaster_country_modifiers = yes
		to_nhs_remove_pre_hellenic_disaster_province_modifiers = yes
	}

	option = {
		# Side with the moderates
		name = nhs_hellenicconversion.54.c
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				ruler_religion = ROOT
				NOT = { has_ruler_flag = to_heir_practices_hellenism_in_secret }
			}
		}
		if = {
			limit = {
				has_ruler_flag = to_heir_practices_hellenism_in_secret
				ruler_religion = ROOT
			}
			add_legitimacy = -33
			set_ruler_religion = pantheon_worship
		}
		if = {
			limit = {
				has_heir = yes
				heir_religion = ROOT
				has_heir_flag = to_heir_practices_hellenism_in_secret
			}
			set_heir_religion = pantheon_worship
		}
		# custom_tooltip = to_nhs_hellenic_disaster_ends_tt
		to_nhs_remove_all_non_tolerant_clergy_privileges = yes
		# add_stability = -1
		if = {
			limit = {
				ruler_religion = ROOT
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = -20
			}
		}
		else = {
			add_estate_loyalty = {
				estate = estate_church
				loyalty = -50
			}
		}
		add_country_modifier = {
			name = nhs_hrv_tolerance
			duration = 36500
		}
		if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_hostile = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_unfriendly = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_peaceful_unfriendly_hostile_tt
		}
		else_if = {
			limit = {
				OR = {
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = OrthodoxUprising
					}
					to_nhs_hellenic_disaster_attitude_neutral = {
						ATTITUDE_VARIABLE = HellenicUprising
					}
				}
			}
			custom_tooltip = to_nhs_consequences_moderate_neutral_tt
			add_treasury = 50
			add_manpower = 2
			add_stability_or_adm_power = yes
		}
		else = {
			custom_tooltip = to_nhs_consequences_moderate_friendly_tt
			add_treasury = 100
			add_manpower = 4
			to_add_2_stability_or_adm_power = yes
		}
		custom_tooltip = nhs_dotted_line_tt
		to_nhs_remove_pre_hellenic_disaster_country_modifiers = yes
		to_nhs_spawn_inquisition_revolt = { EVENT_TARGET = nhs_hcd_target_province }
		set_country_flag = nhs_enable_semi_tolerated_minority
		if = {
			limit = {
				any_owned_province = {
					OR = {
						has_province_modifier = nhs_hcd_Pagan_minority
						has_rebel_faction = pantheon_worship_rebels
					}
				}
			}
			every_owned_province = {
				limit = {
					OR = {
						has_province_modifier = nhs_hcd_Pagan_minority
						has_rebel_faction = pantheon_worship_rebels
					} 
				}
				change_religion = pantheon_worship
				if = {
					limit = {
						has_province_modifier = nhs_hcd_Pagan_minority
					}
					remove_province_modifier = nhs_hcd_Pagan_minority 
				}
			}
		}
		custom_tooltip = nhs_new_line_tt
		hidden_effect = {
			to_nhs_handle_post_disaster_tolerance_modifier_all_provinces = yes
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = nhs_semi_tolerated_minority_hellenic_in_the_future_tt
		to_nhs_remove_pre_hellenic_disaster_conflict_province_modifiers = yes
	}
}


# Inquisition revolt defeated
country_event = {
	id = nhs_hellenicconversion.56
	title = nhs_hellenicconversion56.t
	desc = {
		trigger = {
			OR = {
				NOT = { has_country_flag = established_varangians }
				has_country_flag = nhs_disbanded_varangians
			}
		}
		desc = nhs_hellenicconversion56.da
	}
	desc = {
		trigger = {
			has_country_flag = established_varangians
			NOT = { has_country_flag = nhs_disbanded_varangians }
		}
		desc = nhs_hellenicconversion56.db
	}
	picture = REVOLUTION_eventPicture

	fire_only_once = yes

	trigger = {
		has_country_flag = nhs_hcd_inquisition_revolt
		NOT = { has_spawned_rebels = orthodox_rebels }
		NOT = {
			any_owned_province = {
				controlled_by = REB
			}
		}
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = nhs_hcd_inquisition_revolt
		}
	}

	option = {
		name = nhs_hellenicconversion.56.a
		add_stability_or_adm_power = yes
		capital_scope = {
			add_devastation = 10
		}
		every_owned_province = {
			limit = {
				has_province_modifier = nhs_hcd_inquisition_headquarters
			}
			add_devastation = 10
			remove_province_modifier = nhs_hcd_inquisition_headquarters
		}
		to_restore_heir_claim_hellenic = yes
	}
}

# Inquisition revolt victorious
country_event = {
	id = nhs_hellenicconversion.57
	title = nhs_hellenicconversion57.t
	desc = {
		trigger = {
			ruler_religion = ROOT
			NOT = { has_ruler_flag = to_heir_practices_hellenism_in_secret }
		}
		desc = nhs_hellenicconversion57.da
	}
	desc = {
		desc = nhs_hellenicconversion57.db
	}
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes

	trigger = {
		has_country_flag = nhs_hcd_inquisition_revolt
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = nhs_hcd_inquisition_revolt
			clr_country_flag = nhs_enable_semi_tolerated_minority
			if = {
				limit = {
					NOT = { has_country_flag = to_computed_zealous_heir_stats }
				}
				if = {
					limit = {
						has_heir = yes
					}
					to_compute_zealous_ruler_heir_stats = {
						SOURCE_ADM = heir_adm
						SOURCE_DIP = heir_dip
						SOURCE_MIL = heir_mil
					}
				}
				else = {
					to_compute_zealous_ruler_heir_stats = {
						SOURCE_ADM = adm
						SOURCE_DIP = dip
						SOURCE_MIL = mil
					}
				}
			}
		}
	}

	option = {
		name = nhs_hellenicconversion.57.a
		if = {
			limit = {
				OR = {
					NOT = { ruler_religion = ROOT }
					NOT = { has_ruler_flag = to_heir_practices_hellenism_in_secret }
				}
			}
			to_assign_zealous_ruler = yes
			custom_tooltip = nhs_new_line_tt
		}
		if = {
			limit = {
				has_heir = yes
				OR = {
					NOT = { heir_religion = ROOT }
					has_heir_flag = to_heir_practices_hellenism_in_secret
				}
			}
			kill_heir = { allow_new_heir = no }
			custom_tooltip = nhs_new_line_tt
		}
		add_patriarch_authority = 0.25
		add_war_exhaustion = 5
		set_estate_privilege = estate_church_nhs_inquisition_privilege
		if = {
			limit = {
				NOT = {	has_disaster = nhs_hcd_hellenic_crisis }
			}
			add_country_modifier = {
				name = "religious_intolerance_enforced"
				duration = 7300
			}
			if = {
				limit = {
					any_owned_province = {
						OR = {
							has_province_modifier = nhs_hcd_Pagan_minority
							religion = pantheon_worship
						}
					}
				}
				every_owned_province = {
					limit = {
						OR = {
							has_province_modifier = nhs_hcd_Pagan_minority
							religion = pantheon_worship
						}
					}
					if = {
						limit = {
							religion = pantheon_worship
						}
						change_religion = orthodox
					}
					add_devastation = 50
					remove_province_modifier = nhs_hcd_Pagan_minority
					remove_province_modifier = nhs_semi_tolerated_minority
				}
			}
		}
		else = {
			clr_country_flag = nhs_hcd_supported_moderates
			clr_country_flag = nhs_hcd_converted_to_hellenic
			set_country_flag = nhs_hcd_supported_zealots
			remove_country_modifier = nhs_hcd_tolerant_approach
			remove_country_modifier = nhs_hcd_pagan_loyalty
			add_country_modifier = {
				name = nhs_hcd_church_loyalty 
				duration = -1
				desc = "END_OF_ELY_RELIGIOUS_WARS"
			}
			if = {
				limit = {
					any_owned_province = {
						religion = pantheon_worship
					}
				}
				if = {
					limit = {
						any_owned_province = {
							religion = pantheon_worship
							has_missionary = no
						}
					}
					random_owned_province = {
						limit = {
							religion = pantheon_worship
							has_missionary = no 
						}
						change_religion = orthodox
						add_devastation = 50
						remove_province_modifier = nhs_semi_tolerated_minority
					}
				}
				else = {
					random_owned_province = {
						limit = {
							religion = pantheon_worship
						}
						change_religion = orthodox
						add_devastation = 50
						remove_province_modifier = nhs_semi_tolerated_minority
					}
				}
			}
		}
		hidden_effect = {
			to_nhs_handle_post_disaster_tolerance_modifier_all_provinces = yes
		}
		to_nhs_remove_pre_hellenic_disaster_province_modifiers = yes
	}
}