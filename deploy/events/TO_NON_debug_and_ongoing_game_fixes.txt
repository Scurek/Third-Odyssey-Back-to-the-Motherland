namespace = nhs2_test

country_event = {
	id = nhs2_test.1
	title = nhs2_mainlandevents1.t
	desc = nhs2_mainlandevents1.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	

	option = {
		name = "nhs2_mainlandevents1.a"
		change_primary_culture = elysian
		change_tag = ELY
		add_government_reform = senatorial_empire
		hidden_effect = {
			every_province = {
				limit = {
					continent = north_america
				}
				cede_province = ROOT
				change_religion = ROOT
				change_culture = elysian
				add_core = ROOT
				change_trade_goods = grain
			}
		}
		change_technology_group = modern_greek
		change_unit_type  = elysian_unit
	}
	
	option = {
		name = "nhs2_mainlandevents1.a"
		change_primary_culture = elysian
		change_tag = ELY
		add_government_reform = senatorial_empire
	}
	
	option = {
		name = "ALL EUROPE"
		hidden_effect = {
			every_province = {
				limit = {
					OR = {
						superregion = near_east_superregion
						continent = europe
						region = maghreb_region
						region = egypt_region
						region = persia_region
					}
					
				}
				cede_province = ROOT
				add_core = ROOT
			}
		}
	}
	
	option = {
		name = "nhs2_mainlandevents1.c"
		hidden_effect = {
			every_province = {
				limit = {
					OR = {
						region = maghreb_region
						region = egypt_region
					}
				}
				cede_province = ROOT
				add_core = ROOT
			}
		}
	}
	
	option = {
		name = "nhs2_mainlandevents1.d"
		hidden_effect = {
			every_province = {
				limit = {
					OR = {
						region = anatolia_region
						region = balkan_region
					}
				}
				cede_province = ELG
			}
		}
	}
}

province_event = {
	id = nhs2_test.2
	title = nhs2_hidden.t
	desc = nhs2_hidden.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	immediate = {
	}
	option = {
		name = "nhs2_hidden.a"
		add_building = fort_15th
	}
}

country_event = {
	id = nhs2_test.3
	title = nhs2_mainlandevents1.t
	desc = nhs2_mainlandevents1.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	

	option = {
		name = "nhs2_mainlandevents1.a"
		change_religion = elysian_orthodoxy
		hidden_effect = {
			every_province = {
				limit = {
					continent = north_america
				}
				cede_province = ROOT
				change_culture = ROOT
				change_religion = ROOT
				add_core = ROOT
				change_trade_goods = grain
			}
		}
		every_owned_province = {
			limit = {
				is_colony = yes
			}
			add_colonysize = 1000
		}
	}
	option = {
		every_owned_province = {
			add_nationalism = -10
		}
	}
	option = {
		change_primary_culture = elysian
		change_tag = ELY
		add_government_reform = senatorial_empire
		change_technology_group = modern_greek
		change_unit_type  = elysian_unit
		set_global_flag = nhs_borealians_appeared
		set_global_flag = nhs_hyperborealians_appeared
		set_global_flag = nhs_hesperidians_appeared
		set_global_flag = nhs_kykladian_appeared
		set_global_flag = nhs_elyric_appeared
		set_global_flag = nhs_arkadians_appeared
		set_global_flag = nhs_eleutheroi_appeared
		hidden_effect = {
			every_province = {
				limit = {
					continent = north_america
					is_wasteland = no
					OR = {
						is_empty = yes
						owner = {
							OR = {
								tag = ROOT
								technology_group = north_american
								technology_group = south_american
							}
						}
					}
				}
				cede_province = ROOT
				change_culture = elysian
				to_ely_province_culture_check = yes
				change_religion = ROOT
				add_core = ROOT
				change_trade_goods = grain
			}
			every_province = {
				limit = {
					region = colombia_region
					OR = {
						is_empty = yes
						owner = {
							OR = {
								tag = ROOT
								technology_group = north_american
								technology_group = south_american
							}
						}
					}
				}
				cede_province = ROOT
				change_culture = elysian
				to_ely_province_culture_check = yes
				change_religion = ROOT
				add_core = ROOT
				change_trade_goods = grain
			}
		}
	}
}

country_event = {
	id = nhs2_test.4
	title = nhs2_mainlandevents1.t
	desc = nhs2_mainlandevents1.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	

	option = {
		name = "nhs2_mainlandevents1.a"
		change_primary_culture = elysian
		change_tag = ELY
		nhs_change_government = { GOV = monarchy }
		add_government_reform = senatorial_empire
		change_technology_group = modern_greek
		change_unit_type  = elysian_unit
	}
	option = {
		name = "nhs2_mainlandevents1.a"
		change_primary_culture = elysian
		change_tag = ERF
		nhs_change_government = { GOV = republic }
		add_government_reform = elysian_republic
		change_technology_group = modern_greek
		change_unit_type  = elysian_unit
	}
	option = {
		name = "nhs2_mainlandevents1.a"
		change_primary_culture = elysian
		change_tag = ELR
		nhs_change_government = { GOV = republic }
		add_government_reform = nhs_noble_republic
		change_technology_group = modern_greek
		change_unit_type  = elysian_unit
	}
	option = {
		name = "nhs2_mainlandevents1.a"
		change_primary_culture = elysian
		change_tag = ERR
		nhs_change_government = { GOV = republic }
		add_government_reform = elysian_revolutionary_republic
		change_technology_group = modern_greek
		change_unit_type  = elysian_unit
	}
	after = {
		swap_non_generic_missions = yes
	}
}

country_event = {
	id = nhs2_test.5
	title = nhs2_mainlandevents1.t
	desc = nhs2_mainlandevents1.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
	}
	
	immediate = {
		custom_tooltip = nhs_too_many_patriarch_t
	}

	option = {
		name = "nhs2_mainlandevents1.a"
		change_religion = elysian_orthodoxy
	}
	
	option = {
		name = "nhs2_mainlandevents1.a"
		change_religion = pantheon_worship
	}
}


#Remove trading if trading partner doesn't exist
country_event = {
	id = nhs2_test.12
	title = nhs2_mainlandevents1.t
	desc = nhs2_mainlandevents1.d
	picture = CITY_VIEW_eventPicture
	
	hidden = yes
	
	trigger = {
		nhs_condition_all_ely = { KOMANDA = tag }
		OR = {
			AND = {
				NOT = { exists = MK1 }
				trading_with_markland = yes
			}
			AND = {
				NOT = { exists = HLL }
				trading_with_helluland = yes
			}
			AND = {
				NOT = { exists = VIN }
				trading_with_vinland = yes
			}
		}
	}
	
	immediate = {
		clr_global_flag = nhs_vov_markland_deal_f
		clr_global_flag = nhs_vov_helluland_deal_f
		clr_global_flag = nhs_vov_vinland_deal_f
		set_global_flag = nhs_vov_no_deal
		if = {
			limit = {
				has_country_modifier = nhs_vov_markland_deal
			}
			remove_country_modifier = nhs_vov_markland_deal
			MK1 = { 
				remove_country_modifier = nhs_vov_trade_deal
			}
		}
		if = {
			limit = {
				has_country_modifier = nhs_vov_helluland_deal
			}
			remove_country_modifier = nhs_vov_helluland_deal
			HLL = { 
				remove_country_modifier = nhs_vov_trade_deal
			}
		}
		if = {
			limit = {
				has_country_modifier = nhs_vov_vinland_deal
			}
			remove_country_modifier = nhs_vov_vinland_deal
			VIN = { 
				remove_country_modifier = nhs_vov_trade_deal
			}
		}
		if = {
			limit = {
				has_country_modifier = nhs_vov_markland_deal_after
			}
			remove_country_modifier = nhs_vov_markland_deal_after
			MK1 = { 
				remove_country_modifier = nhs_vov_trade_deal
			}
		}
		if = {
			limit = {
				has_country_modifier = nhs_vov_helluland_deal_after
			}
			remove_country_modifier = nhs_vov_helluland_deal_after
			HLL = { 
				remove_country_modifier = nhs_vov_trade_deal
			}
		}
		if = {
			limit = {
				has_country_modifier = nhs_vov_vinland_deal_after
			}
			remove_country_modifier = nhs_vov_vinland_deal_after
			VIN = { 
				remove_country_modifier = nhs_vov_trade_deal
			}
		}
	}
	

	option = {
		name = "nhs2_mainlandevents1.a"
	}
}

#Jerusalem name
country_event = {
	id = nhs2_test.16
	title = nhs2_mainlandevents1.t
	desc = nhs2_mainlandevents1.d
	picture = CITY_VIEW_eventPicture
	
	hidden = yes
	
	trigger = {
		owns = 379
		culture_group = turko_semitic
		is_subject = yes
		overlord = {
			OR = {
				culture_group = elysian_group
				culture_group = spartakian_group
			}
			religion_group = christian
		}
	}
	
	immediate = {
		379 = {
			change_province_name = "Jerusalem"
			rename_capital = "Jerusalem"
		}
	}
	

	option = {
		name = "nhs2_mainlandevents1.a"
	}
}

#Jerusalem name
country_event = {
	id = nhs2_test.17
	title = nhs2_mainlandevents1.t
	desc = nhs2_mainlandevents1.d
	picture = CITY_VIEW_eventPicture
	
	hidden = yes
	
	trigger = {
		owns = 379
		culture_group = turko_semitic
		OR = {
			is_subject = no
			NOT = {
				overlord = {
					OR = {
						culture_group = elysian_group
						culture_group = spartakian_group
					}
					religion_group = christian
				}
			}
		}
	}
	
	immediate = {
		379 = {
			change_province_name = "al-Quds"
			rename_capital = "Al Quds"
		}
	}
	
	option = {
		name = "nhs2_mainlandevents1.a"
	}
}

#Test
country_event = {
	id = nhs2_test.26
	title = nhs2_mainlandevents1.t
	desc = nhs2_mainlandevents1.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes

	
	option = {
		name = "nhs2_mainlandevents1.a"
		953 = {
			show_ambient_object = wonder_statue
		}
	}
	option = {
		name = "nhs2_mainlandevents1.a"
		950 = {
			show_ambient_object = wonder_lighthouse
		}
	}
	option = {
		name = "nhs2_mainlandevents1.a"
		953 = {
			show_ambient_object = wonder_generic
		}
	}
	option = {
		name = "nhs2_mainlandevents1.a"
		change_religion = orthodox
		set_country_flag = nhs_great_project
	}
	
}

country_event = {
	id = nhs2_test.28
	title = nhs2_mainlandevents1.t
	desc = nhs2_mainlandevents1.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		nhs_condition_all_ely = { KOMANDA = alliance_with }
	}
	
	immediate = {
	
	}
	
	option = {
		name = "nhs2_mainlandevents1.a"
		exile_ruler_as = to_exile_test_@ROOT
	}

	option = {
		name = "nhs2_mainlandevents1.a"
		set_ruler = to_exile_test_@ROOT
	}
	
}

#Testing grounds
country_event = {
	id = nhs2_test.32
	title = nhs2_mainlandevents1.t
	desc = nhs2_mainlandevents1.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	
	immediate = {
	}
	
	option = {
		name = "nhs2_mainlandevents1.a"
		if = {
			limit = {
				has_regency = no
				has_heir = yes
			}
			exile_heir_as = nhs_rev_exiled_heir
			exile_ruler_as = nhs_rev_exiled_ruler
			set_global_flag = nhs_has_exiled_heir
			set_global_flag = nhs_has_exiled_ruler
		}
		else_if = {
			limit = {
				has_regency = no
				has_heir = no
			}
			exile_ruler_as = nhs_rev_exiled_ruler
			set_global_flag = nhs_has_exiled_ruler
		}
		else_if = {
			limit = {
				has_regency = yes
			}
			exile_heir_as = nhs_rev_exiled_heir
			set_global_flag = nhs_has_exiled_heir
		}
	}
	option = {
		
		ELF = {
			if = {
				limit = {
					has_global_flag = nhs_has_exiled_heir
					has_global_flag = nhs_has_exiled_ruler
				}
				set_ruler = nhs_rev_exiled_ruler
				set_heir = nhs_rev_exiled_heir
				if = {
					limit = {
						ruler_age = 70
					}
					if = {
						limit = {
							heir_age = 80
						}
						ROOT = {
							define_ruler = {
								dynasty = PREV
								claim = 50
								min_age = 30
								max_age = 40
							}
							if = {
								limit = {
									ruler_age = 60
									has_heir = no
								}
								kill_ruler = yes
								define_heir = {
									dynasty = PREV
									claim = 50
									age = 15
								}
							}
						}
					}
					else = {
						exile_heir_as = nhs_rev_exiled_heir
						ROOT = {
							define_ruler = {
								name = "(Interregnum)"
								adm = 3
								max_random_adm = 3
								dip = 3
								max_random_dip = 3
								mil = 1
								max_random_mil = 1
								regency = yes
							}
							set_heir = nhs_rev_exiled_heir
							add_legitimacy = 100
							add_legitimacy = -20
							if = {
								limit = {
									heir_age = 60
								}
								kill_ruler = yes
								if = {
									limit = {
										has_heir = no
									}
									define_heir = {
										dynasty = PREV
										claim = 50
										age = 15
									}
								}
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							heir_age = 70
						}
						exile_ruler_as = nhs_rev_exiled_ruler
						ROOT = {
							set_ruler = nhs_rev_exiled_ruler
							if = {
								limit = {
									ruler_age = 50
									has_heir = no
								}
								define_heir = {
									dynasty = PREV
									claim = 50
									age = 15
								}
							}
						}
					}
					else = {
						exile_heir_as = nhs_rev_exiled_heir
						exile_ruler_as = nhs_rev_exiled_ruler
						ROOT = {
							set_heir = nhs_rev_exiled_heir
							set_ruler = nhs_rev_exiled_ruler
							add_legitimacy = 100
							add_legitimacy = -20
						}
					}
				}
			}
			else_if = {
				limit = {
					has_global_flag = nhs_has_exiled_heir
					NOT = { has_global_flag = nhs_has_exiled_ruler }
				}
				set_heir = nhs_rev_exiled_heir
				if = {
					limit = {
						heir_age = 80
					}
					ROOT = {
						define_ruler = {
							dynasty = PREV
							claim = 50
							age = 21
						}
					}
				}
				else = {
					exile_heir_as = nhs_rev_exiled_heir
					ROOT = {
						define_ruler = {
							name = "(Interregnum)"
							adm = 3
							max_random_adm = 3
							dip = 3
							max_random_dip = 3
							mil = 1
							max_random_mil = 1
							regency = yes
						}
						set_heir = nhs_rev_exiled_heir
						add_legitimacy = 100
						add_legitimacy = -20
						if = {
							limit = {
								heir_age = 60
							}
							kill_ruler = yes
							if = {
								limit = {
									has_heir = no
								}
								define_heir = {
									dynasty = PREV
									claim = 50
									age = 15
								}
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					NOT = { has_global_flag = nhs_has_exiled_heir }
					has_global_flag = nhs_has_exiled_ruler
				}
				set_ruler = nhs_rev_exiled_ruler
				if = {
					limit = {
						ruler_age = 80
					}
					log = "RULER TOO OLD"
					ROOT = {
						define_ruler = {
							dynasty = PREV
							claim = 50
							age = 21
						}
					}
				}
				else = {
					exile_ruler_as = nhs_rev_exiled_ruler
					ROOT = {
						set_ruler = nhs_rev_exiled_ruler
						if = {
							limit = {
								ruler_age = 50
								has_heir = no
							}
							define_heir = {
								dynasty = PREV
								claim = 50
								age = 15
							}
						}
					}
				}
			}
			else = {
				ROOT = {
					define_ruler = {
						dynasty = "historic_dynasty"
						claim = 40
						age = 21
					}
				}
			}
			clr_global_flag = nhs_has_exiled_heir
			clr_global_flag = nhs_has_exiled_ruler
		}
	}
}

province_event = {
	id = nhs2_test.34
	title = nhs2_test.34.t
	desc = nhs2_test.34.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	trigger = {
		
	}
	immediate = {
		hidden_effect = {
			export_to_variable = {
				which = to_test_var
				value = trigger_value:is_year
			}
		}
		
	}
	option = {
		name = "nhs2_mainlandevents1.a"
		custom_tooltip = nhs_test_program_tt
		add_province_modifier = {
			name = judaism_abrahamic_roots
			duration = 1825
		}
	}
	option = {
		extend_province_modifier = {
			name = judaism_abrahamic_roots
			duration = 3650
		}
	}
}

# Print Variable
country_event = {
	id = nhs2_test.42
	title = nhs2_test.42.t
	desc = nhs2_test.42.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		nhs_handle_culture_integration_initial_mesoamerican = yes
	}
	
	option = {
		name = "nhs2_mainlandevents1.a"
		every_owned_province = {
			custom_tooltip = nhs_test_program2_tt
		}
	}
}

country_event = {
	id = nhs2_test.48
	title = nhs2_hidden.t
	desc = nhs2_hidden.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		NOT = { has_dlc = "Rule Britannia" }
	}
	
	immediate = {
		every_province = {
			limit = {
				nhs_has_coal = yes
				NOT = { has_province_modifier = nhs2_lantent_coal_tm }
			}
			add_permanent_province_modifier = {
				name = nhs2_lantent_coal
				duration = -1
			}
			add_province_triggered_modifier = nhs2_lantent_coal_tm
		}
	}
	
	option = {
		name = "nhs2_mainlandevents1.a"
	}
}