namespace = nhs_vov_coloniesevents

##Starting Flavour Events (norse colonies)
country_event = {
	id = nhs_vov_coloniesevents.0
	title = nhs_vov_coloniesevents.1.t
	desc = nhs_vov_coloniesevents.1.d
	picture = VINLANDOPENING_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes

    trigger = {
		tag = MK1
		NOT = { is_year = 1446 }
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		hidden_effect = {
			viking_discovery = yes
			if = {
				limit = {
					tag = HLL
				}
				add_truce_with = MK1
			}
			if = {
				limit = {
					tag = MK1
				}
				add_truce_with = HLL
			}
			every_owned_province = {
				add_institution_embracement = {
					which = "feudalism"
					value = 75
				}
			}
		}
	}
	
	option = {	
		name = "nhs_vov_coloniesevents.1.a"
		add_historical_rival = HLL
		custom_tooltip = nhs_new_line_tt
		add_idea_group = discovery_ideas
		custom_tooltip = vov_add_strangers_in_strange_land_idea_tt
		hidden_effect = {
			add_idea = strangers_in_a_strange_world
		}
		add_country_modifier = {
			name = "nhs_vov_population"
			duration = -1
		}
		add_country_modifier = {
			name = "nhs_vov_no_merchant"
			duration = -1
		}
		custom_tooltip = vov_add_colony_bonus_to_coasts_tt
		set_country_flag = nhs_vov_raiders_return
	}
}
country_event = {
	id = nhs_vov_coloniesevents.1
	title = nhs_vov_coloniesevents.1.t
	desc = nhs_vov_coloniesevents.1.d
	picture = VINLANDOPENING_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes

    trigger = {
		tag = HLL
		NOT = { is_year = 1446 }
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		hidden_effect = {
			viking_discovery = yes
			if = {
				limit = {
					tag = HLL
				}
				add_truce_with = MK1
			}
			if = {
				limit = {
					tag = MK1
				}
				add_truce_with = HLL
			}
			every_owned_province = {
				add_institution_embracement = {
					which = "feudalism"
					value = 75
				}
			}
		}
		
	}
	
	option = {	
		name = "nhs_vov_coloniesevents.1.a"
		add_historical_rival = MK1
		custom_tooltip = nhs_new_line_tt
		add_idea_group = discovery_ideas
		custom_tooltip = vov_add_strangers_in_strange_land_idea_tt
		hidden_effect = {
			add_idea = strangers_in_a_strange_world
		}
		add_country_modifier = {
			name = "nhs_vov_population"
			duration = -1
		}
		add_country_modifier = {
			name = "nhs_vov_no_merchant"
			duration = -1
		}
		custom_tooltip = vov_add_colony_bonus_to_coasts_tt
		set_country_flag = nhs_vov_raiders_return
	}
}

##Discovery Events (norse colonies)
#Discover Erikson River
country_event = {
	id = nhs_vov_coloniesevents.2
	title = nhs_vov_coloniesevents.2.t
	desc = nhs_vov_coloniesevents.2.d
	picture = norse_at_sea_eventPicture
	
	trigger = {
		OR = {
			tag = MK1
			tag = HLL
		}
		NOT = {
			has_country_flag = erikson_river
		}
		is_year = 1445
	}
	
	mean_time_to_happen = {
		months = 5
		
		modifier = {
			factor = 0.9
			stability = 1
		}
		modifier = {
			factor = 0.9
			stability = 2
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
	}
	immediate = {
		hidden_effect = {
			set_country_flag = erikson_river
			erikson_river_discovery = yes
		}
	}
	
	option = {	
		name = "nhs_vov_coloniesevents.2.a"
	}
}
#Discover the Coast down to New York
country_event = {
	id = nhs_vov_coloniesevents.3
	title = nhs_vov_coloniesevents.3.t
	desc = nhs_vov_coloniesevents.3.d
	picture = norse_at_sea_eventPicture
	
	
	trigger = {
		OR = {
			tag = MK1
			tag = HLL
		}
		NOT = {
			has_country_flag = disputed_coast
		}
		is_year = 1447
	}
	
	mean_time_to_happen = {
		months = 5
		
		modifier = {
			factor = 0.9
			stability = 1
		}
		modifier = {
			factor = 0.9
			stability = 2
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = disputed_coast
			disputed_lands_coast_discovery = yes
			north_elysian_sea_discovery = yes
		}
	}
	
	option = {	
		name = "nhs_vov_coloniesevents.3.a"
	}
	
}
#Discover the Great Lakes
country_event = {
	id = nhs_vov_coloniesevents.4
	title = nhs_vov_coloniesevents.4.t
	desc = nhs_vov_coloniesevents.4.d
	picture = norse_at_sea_eventPicture

	trigger = {
		OR = {
			tag = MK1
			tag = HLL
		}
		NOT = {
			has_country_flag = great_lakes
		}
		has_country_flag = erikson_river
	}
	
	mean_time_to_happen = {
		months = 5
		
		modifier = {
			factor = 0.9
			stability = 1
		}
		modifier = {
			factor = 0.9
			stability = 2
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = great_lakes
			great_lakes_discovery = yes
			great_lakes_sea_discovery = yes
		}
		
	}
	option = {	
		name = "nhs_vov_coloniesevents.4.a"
	}
	
}
#Discover Thorfinn's Bay
country_event = {
	id = nhs_vov_coloniesevents.5
	title = nhs_vov_coloniesevents.5.t
	desc = nhs_vov_coloniesevents.5.d
	picture = norse_at_sea_eventPicture

	trigger = {
		OR = {
			tag = MK1
			tag = HLL
		}	
		NOT = {
			has_country_flag = thorfinn_bay
		}
		is_year = 1446
	}
	
	mean_time_to_happen = {
		months = 5
		
		modifier = {
			factor = 0.9
			stability = 1
		}
		modifier = {
			factor = 0.9
			stability = 2
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = thorfinn_bay
			thorfinn_bay_discovery = yes
			thorfinn_sea_discovery = yes
		}
	}
	
	option = {	
		name = "nhs_vov_coloniesevents.5.a"
		
	}
}
#Discover the Elysian Coast
country_event = {
	id = nhs_vov_coloniesevents.6
	title = nhs_vov_coloniesevents.6.t
	desc = nhs_vov_coloniesevents.6.d
	picture = norse_at_sea_eventPicture

	trigger = {
		OR = {
			tag = MK1
			tag = HLL
		}
		nhs_check_all_elysian_tags = { CONDITION = exists }
		is_year = 1448
		has_country_flag = disputed_coast
		NOT = {
			has_country_flag = elysian_coast
			has_global_flag = nhs_visitors
		}
		OR = {
			ai = no
			AND = {
				MK1 = {
					ai = yes
				}
				HLL = {
					ai = yes
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 5
		
		modifier = {
			factor = 0.9
			stability = 1
		}
		modifier = {
			factor = 0.9
			stability = 2
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = elysian_coast
			set_global_flag = nhs_visitors
			elysian_coast_discovery = yes
			discover_province = 1501
		}
	}
	
	option = {	
		name = "nhs_vov_coloniesevents.6.a"
		hidden_effect = {
			if = {
				limit = {
					nhs_check_existing_elysian_tags_with_full_condition = {
						CONDITION = "religion = pantheon_worship"
					}
				}
				country_event = { id = nhs_vov_coloniesevents.7 days = 30 }
			}
			else = {
				country_event = { id = nhs_vov_coloniesevents.100 days = 30 }
			}
		}
	}
}
###Pantheon Elysia
##Discovery of Elysia Events (possible localisation change depending on Elysia's religion)
#Norsemen Reach Elysia (norse colonies)
country_event = {
	id = nhs_vov_coloniesevents.7
	title = nhs_vov_coloniesevents.7.t
	desc = nhs_vov_coloniesevents.7.d
	picture = miklagard_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = nhs_met_greeks
		nhs_effect_for_existing_elysian_tag = { EFFECT = "save_event_target_as = existing_elysia" }
	}
	
	option = {
		name = "nhs_vov_coloniesevents.7.a"
		hidden_effect = {
			event_target:existing_elysia = {
				country_event = { id = nhs_vov_coloniesevents.8 days = 1 }
			}
		}
	}
	
}

#Norsemen Reach Elysia (elysia)
country_event = {
	id = nhs_vov_coloniesevents.8
	title = nhs_vov_coloniesevents.8.t
	desc = nhs_vov_coloniesevents.8.d
	picture = vinland_visits_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "nhs_vov_coloniesevents.8.a"
		hidden_effect = {
			FROM = {
				country_event = { id = nhs_vov_coloniesevents.9 days = 10 }
			}
			if = {
				limit = {
					FROM = {
						tag = MK1
					}
				}
				HLL = {
					country_event = { id = nhs_vov_coloniesevents.10 days = 10 }
				}
			}
			if = {
				limit = {
					FROM = {
						tag = HLL
					}
				}
				MK1 = {
					country_event = { id = nhs_vov_coloniesevents.10 days = 10 }
				}
			}
		}
	}
}

#Elysian diplomats reach the colonies (norse colony that met the greeks)
country_event = {
	id = nhs_vov_coloniesevents.9
	title = nhs_vov_coloniesevents.9.t
	desc = nhs_vov_coloniesevents.9.d
	picture = viking_court_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "nhs_vov_coloniesevents.9.a"
		FROM = {
			country_event = { id = nhs_vov_coloniesevents.11 days = 3 }
		}
	}
	
}

#Elysian diplomats reach the colonies (norse colony that has yet to meet the greeks)
country_event = {
	id = nhs_vov_coloniesevents.10
	title = nhs_vov_coloniesevents.10.t
	desc = nhs_vov_coloniesevents.10.d
	picture = viking_court_eventPicture

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_country_flag = nhs_met_greeks
			elysian_coast_discovery = yes
			north_elysian_sea_discovery = yes
			discover_province = 1501
			discover_province = 953
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.10.a"
		
	}
	
}
##Orthodox Elysia
#Norsemen Reach Elysia (norse colonies)
country_event = {
	id = nhs_vov_coloniesevents.100
	title = nhs_vov_coloniesevents.100.t
	desc = nhs_vov_coloniesevents.100.d
	picture = miklagard_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = nhs_met_greeks
		nhs_effect_for_existing_elysian_tag = { EFFECT = "save_event_target_as = existing_elysia" }
	}
	
	option = {
		name = "nhs_vov_coloniesevents.100.a"
		hidden_effect = {
			event_target:existing_elysia = {
				country_event = { id = nhs_vov_coloniesevents.101 days = 1 }
			}
		}
	}
	
}

#Norsemen Reach Elysia (elysia)
country_event = {
	id = nhs_vov_coloniesevents.101
	title = nhs_vov_coloniesevents.101.t
	desc = nhs_vov_coloniesevents.101.d
	picture = vinland_visits_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "nhs_vov_coloniesevents.101.a"
		hidden_effect = {
			FROM = {
				country_event = { id = nhs_vov_coloniesevents.102 days = 10 }
			}
			if = {
				limit = {
					FROM = {
						tag = MK1
					}
				}
				HLL = {
						country_event = { id = nhs_vov_coloniesevents.103 days = 10 }
					}
			}
			if = {
				limit = {
					FROM = {
						tag = HLL
					}
				}
				MK1 = {
						country_event = { id = nhs_vov_coloniesevents.103 days = 10 }
					}
			}
		}
	}
	
}

#Elysian diplomats reach the colonies (norse colony that met the greeks)
country_event = {
	id = nhs_vov_coloniesevents.102
	title = nhs_vov_coloniesevents.102.t
	desc = nhs_vov_coloniesevents.102.d
	picture = viking_court_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "nhs_vov_coloniesevents.102.a"
		FROM = {
			country_event = { id = nhs_vov_coloniesevents.11 days = 3 }
		}
	}
	
}

#Elysian diplomats reach the colonies (norse colony that has yet to meet the greeks)
country_event = {
	id = nhs_vov_coloniesevents.103
	title = nhs_vov_coloniesevents.103.t
	desc = nhs_vov_coloniesevents.103.d
	picture = viking_court_eventPicture

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_country_flag = nhs_met_greeks
			elysian_coast_discovery = yes
			discover_province = 1492
			discover_province = 1499
			discover_province = 1500
			discover_province = 1501
			discover_province = 953
			discover_province = 5377
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.103.a"
		hidden_effect = {
			set_country_flag = nhs_met_greeks
			elysian_coast_discovery = yes
			north_elysian_sea_discovery = yes
			discover_province = 1501
			discover_province = 5377
		}
	}
	
}

#Elysian diplomats reach the colonies (elysia)
country_event = {
	id = nhs_vov_coloniesevents.11
	title = nhs_vov_coloniesevents.11.t
	desc = nhs_vov_coloniesevents.11.d
	picture = viking_court_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = to_can_get_varangians
			add_country_modifier = {
				name = nhs_vov_recently_proposed_trade
				duration = 3650
				hidden = yes
			}
			HLL = {
				add_country_modifier = {
					name = nhs_vov_recently_proposed_trade
					duration = 3650
					hidden = yes
				}
				country_event = { id = nhs_vov_coloniesevents.30 days = 30 }
			}
			MK1 = {
				add_country_modifier = {
					name = nhs_vov_recently_proposed_trade
					duration = 3650
					hidden = yes
				}
				country_event = { id = nhs_vov_coloniesevents.30 days = 30 }
			}
			north_elysian_sea_discovery = yes
			vinlandic_sea_discovery = yes
			
			##Just to be sure
			discover_province = 980
			discover_province = 981
			discover_province = 2573
			discover_province = 982
			discover_province = 2574
			discover_province = 2575
			discover_province = 997
			discover_province = 996
		}
	}
	
	option = { #Accept deal for exotic goods from Markland (more trade power in the north and more trade power in general; small boost to food production as well)
		name = "nhs_vov_coloniesevents.11.a"
		ai_chance = {
			factor = 45 
			modifier = {
				factor = 0
				HLL = { ai = no }
			}
		}
		set_global_flag = nhs_vov_markland_deal_f
		add_country_modifier = {
			name = nhs_vov_markland_deal
			duration = -1
		}
		create_alliance = MK1
		to_vov_trade_deal_add_friend_and_opinion = { TAG = MK1 }
		custom_tooltip = nhs_new_line_tt
		MK1 = {
			country_event = { id = nhs_vov_coloniesevents.12 }
		}
		HLL = {
			country_event = { id = nhs_vov_coloniesevents.13 }
		}
		set_global_flag = nhs_meeting
	}
	option = { #Accept deal for naval supplies from Helluland (more trade power in the north and cheaper boats; small boost to food produciton as well)
		name = "nhs_vov_coloniesevents.11.b"
		ai_chance = { 
			factor = 45
			modifier = {
				factor = 0
				MK1 = { ai = no }
			}
		}
		set_global_flag = nhs_vov_helluland_deal_f
		add_country_modifier = {
			name = nhs_vov_helluland_deal
			duration = -1
		}
		create_alliance = HLL
		to_vov_trade_deal_add_friend_and_opinion = { TAG = HLL }
		custom_tooltip = nhs_new_line_tt
		HLL = {
			country_event = { id = nhs_vov_coloniesevents.12 }
		}
		MK1 = {
			country_event = { id = nhs_vov_coloniesevents.13 }
		}
		set_global_flag = nhs_meeting
	}
	option = { #Make no deal with the northeners
		name = "nhs_vov_coloniesevents.11.c"
		ai_chance = { 
			factor = 10 
			modifier = {
				factor = 0
				OR = {
					MK1 = { ai = no }
					HLL = { ai = no }
				}
			}
		}
		set_global_flag = nhs_vov_no_deal
		HLL = {
			country_event = { id = nhs_vov_coloniesevents.14 }
		}
		MK1 = {
			country_event = { id = nhs_vov_coloniesevents.14 }
		}
		set_global_flag = nhs_meeting
	}
}
#Elysia agrees to trade agreement (norse colony chosen)
country_event = {
	id = nhs_vov_coloniesevents.12
	title = nhs_vov_coloniesevents.12.t
	desc = nhs_vov_coloniesevents.12.d
	picture = viking_court_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "nhs_vov_coloniesevents.12.a"
		to_vov_trade_deal_add_friend_and_opinion = { TAG = FROM }
		add_country_modifier = {
			name = nhs_vov_trade_deal
			duration = -1
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_flag = nhs_first_trade_deal }
				}
				set_global_flag = nhs_first_trade_deal	
			}
			add_country_modifier = {
				name = nhs_vov_recently_proposed_trade
				duration = 3650
			}
		}
	}
}
#Elysia agrees to trade agreement with other colony (norse colony not chosen)
country_event = {
	id = nhs_vov_coloniesevents.13
	title = nhs_vov_coloniesevents.13.t
	desc = nhs_vov_coloniesevents.13.d
	picture = viking_court_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "nhs_vov_coloniesevents.13.a"
		add_opinion = {
			who = FROM
			modifier = nhs_no_trade
		}
		hidden_effect = {
			add_country_modifier = {
				name = nhs_vov_recently_proposed_trade
				duration = 3650
			}
		}
	}
}
#Elysia refuses trade agreement with the colonies (norse coloies)
country_event = {
	id = nhs_vov_coloniesevents.14
	title = nhs_vov_coloniesevents.14.t
	desc = nhs_vov_coloniesevents.14.d
	picture = viking_court_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "nhs_vov_coloniesevents.13.a"
		add_opinion = {
			who = FROM
			modifier = nhs_no_trade
		}
		hidden_effect = {
			add_country_modifier = {
				name = nhs_vov_recently_proposed_trade
				duration = 3650
			}
		}
	}
}






#A group of people plan to sail north to trade with the northeners (elysia didnt chose anyone [can choose to stop it losing points but gaining prestige or allow it and lose prestige but gaining a small temporary boost to trade power in the north])
country_event = {
	id = nhs_vov_coloniesevents.15
	title = nhs_vov_coloniesevents.15.t
	desc = nhs_vov_coloniesevents.15.d
	picture = ELYSHIP_eventPicture
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		NOT = { trading_with_markland = yes }
		NOT = { trading_with_helluland = yes }
		NOT = { trading_with_vinland = yes }
		NOT = { has_country_modifier = nhs_vov_north_trade_venture }
		NOT = { has_country_modifier = nhs_vov_stopped_trade_venture }
		has_global_flag = nhs_meeting
		OR = {
			exists = VIN
			exists = HLL
			exists = MK1
		}
	}
	
	mean_time_to_happen = {
		months = 200
	}
	
	option = {
		name = "nhs_vov_coloniesevents.15.a"
		add_prestige = -10
		add_country_modifier = {
			name = nhs_vov_north_trade_venture
			duration = 1825
		}
		if = {
			limit = {
				exists = MK1
			}
			reverse_add_opinion = {
				who = MK1
				modifier = nhs_allowed_marchants
			}
			hidden_effect = {
				MK1 = {
					country_event = { id = nhs_vov_coloniesevents.16 days = 50 }	
				}
			}
		}
		if = {
			limit = {
				exists = HLL
			}
			reverse_add_opinion = {
				who = HLL
				modifier = nhs_allowed_marchants
			}
			hidden_effect = {
				HLL = {
					country_event = { id = nhs_vov_coloniesevents.16 days = 50 }	
				}
			}
		}
		if = {
			limit = {
				exists = MK1
			}
			reverse_add_opinion = {
				who = VIN
				modifier = nhs_allowed_marchants
			}
			hidden_effect = {
				VIN = {
					country_event = { id = nhs_vov_coloniesevents.16 days = 50 }	
				}
			}
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.15.b"
		add_country_modifier = {
			name = nhs_vov_stopped_trade_venture
			duration = 1825
		}
		add_prestige = 5
	}
}

#Various southern merchants seek to sell their wares (colony not chosen or elysia didnt make a deal [gives temporary boost to the colony in exchange for money])
country_event = {
	id = nhs_vov_coloniesevents.16
	title = nhs_vov_coloniesevents.16.t
	desc = nhs_vov_coloniesevents.16.d
	picture = ELYSHIP_eventPicture
	
	trigger = {
		OR = {
			tag = MK1
			tag = HLL
			tag = VIN
		}
		NOT = { has_country_modifier = nhs_vov_south_trade_venture }
		has_global_flag = nhs_meeting
		if = {
			limit = {
				trading_with_helluland = yes
			}
			OR = {
				tag = MK1
				tag = VIN
			}
		}
		else_if = {
			limit = {
				trading_with_markland = yes
			}
			OR = {
				tag = HLL
				tag = VIN
			}
		}
		else_if = {
			limit = {
				NOT = { trading_with_vinland = yes }
			}
			OR = {
				tag = HLL
				tag = MK1
				tag = VIN
			}
		}
	}
	
	mean_time_to_happen = {
		months = 200
	}
	
	immediate = {
		
	}
	
	option = {
		name = "nhs_vov_coloniesevents.16.a"
		add_country_modifier = {
			name = nhs_vov_south_trade_venture
			duration = 1825
		}
		if = {
			limit = {
				exists = MK1
			}
			reverse_add_opinion = {
				who = MK1
				modifier = nhs_allowed_marchants
			}
		}
		if = {
			limit = {
				exists = NHS
			}
			reverse_add_opinion = {
				who = NHS
				modifier = nhs_allowed_marchants
			}
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.16.b"
		add_prestige = 5
	}
}

#Merchants from the north bring exotic goods (if elysia didnt make a deal [can allow them to stay losing prestige but gaining a small boost to money from trade or kick him out losing points and trade power on the north])
country_event = {
	id = nhs_vov_coloniesevents.17
	title = nhs_vov_coloniesevents.17.t
	desc = nhs_vov_coloniesevents.17.d
	picture = vinland_visits_eventPicture
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		OR = {
			exists = HLL
			exists = MK1
			exists = VIN
		}
		NOT = { trading_with_markland = yes }
		NOT = { trading_with_helluland = yes }
		NOT = { trading_with_vinland = yes }
		NOT = { has_country_modifier = nhs_vov_north_trade_venture }
		has_global_flag = nhs_meeting
	}
	
	mean_time_to_happen = {
		months = 200
	}
	
	option = {
		name = "nhs_vov_coloniesevents.17.a"
		add_country_modifier = {
			name = nhs_vov_north_trade_venture
			duration = 1825
		}
		add_prestige = -5
	}
	
	option = {
		name = "nhs_vov_coloniesevents.17.b"
		add_prestige = 5
	}
	
}


#Vikings propose trade deal (if elysia didnt make a deal and allied one of the colonies [must make sure elysia cant ally to both])
country_event = {
	id = nhs_vov_coloniesevents.18
	title = nhs_vov_coloniesevents.18.t
	desc = nhs_vov_coloniesevents.18.d
	picture = vinland_visits_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
	}

	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = nhs_vov_recently_proposed_trade
				duration = 3650
				hidden = yes
			}
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.18.a"
		trigger = {
			FROM = {
				tag = MK1
			}
		}
		set_global_flag = nhs_vov_markland_deal_f
		clr_global_flag = nhs_vov_helluland_deal_f
		clr_global_flag = nhs_vov_vinland_deal_f
		clr_global_flag = nhs_vov_no_deal
		to_vov_remove_helluland_trade_deal = { OFFENDER = yes }
		to_vov_remove_vinland_trade_deal = { OFFENDER = yes }
		to_vov_trade_deal_add_friend_and_opinion = { TAG = MK1 }
		if = {
			limit = {
				NOT = { has_global_flag = nhs_vov_trade_reduced }
			}
			add_country_modifier = {
				name = nhs_vov_markland_deal
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = nhs_vov_markland_deal_after
				duration = -1
			}
		}
		MK1 = {
			country_event = { id = nhs_vov_coloniesevents.12 }
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.18.b"
		trigger = {
			FROM = {
				tag = HLL
			}
		}
		clr_global_flag = nhs_vov_markland_deal_f
		set_global_flag = nhs_vov_helluland_deal_f
		clr_global_flag = nhs_vov_vinland_deal_f
		clr_global_flag = nhs_vov_no_deal
		to_vov_remove_markland_trade_deal = { OFFENDER = yes }
		to_vov_remove_vinland_trade_deal = { OFFENDER = yes }
		to_vov_trade_deal_add_friend_and_opinion = { TAG = HLL }
		if = {
			limit = {
				NOT = { has_global_flag = nhs_vov_trade_reduced }
			}
			add_country_modifier = {
				name = nhs_vov_helluland_deal
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = nhs_vov_helluland_deal_after
				duration = -1
			}
		}
		HLL = {
			country_event = { id = nhs_vov_coloniesevents.12 }
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.18.c"
		trigger = {
			FROM = {
				tag = VIN
			}
		}
		clr_global_flag = nhs_vov_markland_deal_f
		clr_global_flag = nhs_vov_helluland_deal_f
		set_global_flag = nhs_vov_vinland_deal_f
		clr_global_flag = nhs_vov_no_deal
		to_vov_remove_markland_trade_deal = { OFFENDER = yes }
		to_vov_remove_helluland_trade_deal = { OFFENDER = yes }
		to_vov_trade_deal_add_friend_and_opinion = { TAG = VIN }
		if = {
			limit = {
				NOT = { has_global_flag = nhs_vov_trade_reduced }
			}
			add_country_modifier = {
				name = nhs_vov_vinland_deal
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = nhs_vov_vinland_deal_after
				duration = -1
			}
		}
		VIN = {
			country_event = { id = nhs_vov_coloniesevents.12 }
		}
	}
	option = {
		name = "nhs_vov_coloniesevents.18.e"
		
	}
}

#Choice where to send request
country_event = {
	id = nhs_vov_coloniesevents.19
	title = nhs_vov_coloniesevents.19.t
	desc = nhs_vov_coloniesevents.19.d
	picture = vinland_visits_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
	}
	
	option = { #Accept deal for exotic goods from Markland (more trade power in the north and more trade power in general; small boost to food production as well)
		name = "nhs_vov_coloniesevents.19.a"
		trigger = {
			to_vov_can_start_trading_with_viking = { TAG = MK1 }
		}
		MK1 = {
			country_event = { id = nhs_vov_coloniesevents.20 }
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = to_vov_if_they_accept_tt
		tooltip = {
			to_vov_trade_deal_add_friend_and_opinion = { TAG = MK1 }
			if = {
				limit = {
					NOT = { has_global_flag = nhs_vov_trade_reduced }
				}
				add_country_modifier = {
					name = nhs_vov_markland_deal
					duration = -1
				}
			}
			else = {
				add_country_modifier = {
					name = nhs_vov_markland_deal_after
					duration = -1
				}
			}
		}
	}
	option = { #Accept deal for naval supplies from Helluland (more trade power in the north and cheaper boats; small boost to food produciton as well)
		name = "nhs_vov_coloniesevents.19.b"
		trigger = {
			to_vov_can_start_trading_with_viking = { TAG = HLL }
		}
		HLL = {
			country_event = { id = nhs_vov_coloniesevents.20 }
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = to_vov_if_they_accept_tt
		tooltip = {
			to_vov_trade_deal_add_friend_and_opinion = { TAG = HLL }
			if = {
				limit = {
					NOT = { has_global_flag = nhs_vov_trade_reduced }
				}
				add_country_modifier = {
					name = nhs_vov_helluland_deal
					duration = -1
				}
			}
			else = {
				add_country_modifier = {
					name = nhs_vov_helluland_deal_after
					duration = -1
				}
			}
		}
	}
	option = { #Vinland
		name = "nhs_vov_coloniesevents.19.c"
		trigger = {
			to_vov_can_start_trading_with_viking = { TAG = VIN }
		}
		VIN = {
			country_event = { id = nhs_vov_coloniesevents.20 }
		}
		custom_tooltip = nhs_new_line_tt
		custom_tooltip = to_vov_if_they_accept_tt
		tooltip = {
			to_vov_trade_deal_add_friend_and_opinion = { TAG = VIN }
			if = {
				limit = {
					NOT = { has_global_flag = nhs_vov_trade_reduced }
				}
				add_country_modifier = {
					name = nhs_vov_vinland_deal
					duration = -1
				}
			}
			else = {
				add_country_modifier = {
					name = nhs_vov_vinland_deal_after
					duration = -1
				}
			}
		}
	}
	option = {  #Make no deal with the northeners
		name = "nhs_vov_coloniesevents.19.e"
		hidden_effect = {
			remove_country_modifier = nhs_vov_recently_proposed_trade
			if = {
				limit = { 
					exists = MK1
				}
				MK1 = {
					remove_country_modifier = nhs_vov_recently_proposed_trade
				}
			}
			if = {
				limit = { 
					exists = HLL
				}
				HLL = {
					remove_country_modifier = nhs_vov_recently_proposed_trade
				}
			}
			if = {
				limit = { 
					exists = VIN
				}
				VIN = {
					remove_country_modifier = nhs_vov_recently_proposed_trade
				}
			}
		}
	}
}


#Elysia propose trade deal
country_event = {
	id = nhs_vov_coloniesevents.20
	title = nhs_vov_coloniesevents.20.t
	desc = nhs_vov_coloniesevents.20.d
	picture = ELYSHIP_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = MK1
			tag = HLL
			tag = VIN
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.20.a"
		clr_global_flag = nhs_vov_no_deal
		to_vov_trade_deal_add_friend_and_opinion = { TAG = FROM }
		add_country_modifier = {
			name = nhs_vov_trade_deal
			duration = -1
		}
		FROM = {
			country_event = { id = nhs_vov_coloniesevents.21 }
		}
	}
	option = {
		name = "nhs_vov_coloniesevents.20.b"
		FROM = {
			country_event = { id = nhs_vov_coloniesevents.28 }
		}	
	}
}

#Vikings reply yes
country_event = {
	id = nhs_vov_coloniesevents.21
	title = nhs_vov_coloniesevents.21.t
	desc = nhs_vov_coloniesevents.21.d
	picture = vinland_visits_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
	}
	
	option = {
		name = "nhs_vov_coloniesevents.21.a"
		trigger = {
			FROM = {
				tag = MK1
			}
		}
		set_global_flag = nhs_vov_markland_deal_f
		clr_global_flag = nhs_vov_helluland_deal_f
		clr_global_flag = nhs_vov_vinland_deal_f
		to_vov_remove_helluland_trade_deal = { OFFENDER = yes }
		to_vov_remove_vinland_trade_deal = { OFFENDER = yes }
		to_vov_trade_deal_add_friend_and_opinion = { TAG = MK1 }
		if = {
			limit = {
				NOT = { has_global_flag = nhs_vov_trade_reduced }
			}
			add_country_modifier = {
				name = nhs_vov_markland_deal
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = nhs_vov_markland_deal_after
				duration = -1
			}
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.21.b"
		trigger = {
			FROM = {
				tag = HLL
			}
		}
		clr_global_flag = nhs_vov_markland_deal_f
		set_global_flag = nhs_vov_helluland_deal_f
		clr_global_flag = nhs_vov_vinland_deal_f
		to_vov_remove_markland_trade_deal = { OFFENDER = yes }
		to_vov_remove_vinland_trade_deal = { OFFENDER = yes }
		to_vov_trade_deal_add_friend_and_opinion = { TAG = HLL }
		if = {
			limit = {
				NOT = { has_global_flag = nhs_vov_trade_reduced }
			}
			add_country_modifier = {
				name = nhs_vov_helluland_deal
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = nhs_vov_helluland_deal_after
				duration = -1
			}
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.21.c"
		trigger = {
			FROM = {
				tag = VIN
			}
		}
		clr_global_flag = nhs_vov_markland_deal_f
		clr_global_flag = nhs_vov_helluland_deal_f
		set_global_flag = nhs_vov_vinland_deal_f
		to_vov_remove_markland_trade_deal = { OFFENDER = yes }
		to_vov_remove_helluland_trade_deal = { OFFENDER = yes }
		to_vov_trade_deal_add_friend_and_opinion = { TAG = VIN }
		if = {
			limit = {
				NOT = { has_global_flag = nhs_vov_trade_reduced }
			}
			add_country_modifier = {
				name = nhs_vov_vinland_deal
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = nhs_vov_vinland_deal_after
				duration = -1
			}
		}
	}
}

#Vikings reply no
country_event = {
	id = nhs_vov_coloniesevents.28
	title = nhs_vov_coloniesevents.28.t
	desc = nhs_vov_coloniesevents.28.d
	picture = vinland_visits_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
	}
	
	option = {
		name = "nhs_vov_coloniesevents.28.a"
		add_opinion = {
			who = FROM
			modifier = nhs_no_trade
		}
	}
}

#End of the trade deal if at war with each other
country_event = {
	id = nhs_vov_coloniesevents.22
	title = nhs_vov_coloniesevents.22.t
	desc = nhs_vov_coloniesevents.22.d
	picture = nordic_battle_eventPicture
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		OR = {
			AND = {
				offensive_war_with = MK1
				trading_with_markland = yes
			}
			AND = {
				offensive_war_with = HLL
				trading_with_helluland = yes
			}
			AND = {
				offensive_war_with = VIN
				trading_with_vinland = yes
			}
		}
	}
	
	immediate = {
		set_global_flag = nhs_vov_no_deal
		clr_global_flag = nhs_vov_helluland_deal_f
		clr_global_flag = nhs_vov_markland_deal_f
		clr_global_flag = nhs_vov_vinland_deal_f
	}
	
	option = {
		name = "nhs_vov_coloniesevents.22.a"
		add_country_modifier = {
			name = nhs_broken_trade_deal
			duration = 3650
		}
		if = {
			limit = {
				NOT = { has_global_flag = nhs_vov_trade_reduced }
			}
			add_stability = -1
			add_prestige = -10
		}
		to_vov_remove_markland_trade_deal = { OFFENDER = yes }
		to_vov_remove_helluland_trade_deal = { OFFENDER = yes }
		to_vov_remove_vinland_trade_deal = { OFFENDER = yes }
	}
}
#Trade deal end, bounce
country_event = {
	id = nhs_vov_coloniesevents.25
	title = nhs_vov_coloniesevents.25.t
	desc = nhs_vov_coloniesevents.25.d
	picture = nordic_battle_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = nhs_vov_trade_deal
	}
	
	option = {
		name = "nhs_vov_coloniesevents.25.a"
		remove_country_modifier = nhs_vov_trade_deal
		reverse_add_opinion = { who = FROM modifier = nhs_broken_trade }
		remove_historical_friend = FROM
		tooltip = {
			FROM = {
				remove_historical_friend = ROOT
			}
		}
	}
}
# End trade if at war, offender vikings
country_event = {
	id = nhs_vov_coloniesevents.26
	title = nhs_vov_coloniesevents.26.t
	desc = nhs_vov_coloniesevents.26.d
	picture = nordic_battle_eventPicture
	
	trigger = {
		OR = {
			tag = MK1
			tag = HLL
			tag = VIN
		}
		has_country_modifier = nhs_vov_trade_deal
		nhs_check_all_elysian_tags = { CONDITION = offensive_war_with }
	}
	
	immediate = {
		hidden_effect = {
			set_global_flag = nhs_vov_no_deal
			clr_global_flag = nhs_vov_helluland_deal_f
			clr_global_flag = nhs_vov_markland_deal_f
			clr_global_flag = nhs_vov_vinland_deal_f
			nhs_effect_for_existing_elysian_tag = { EFFECT = "save_event_target_as = existing_elysia" }
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.26.a"
		remove_country_modifier = nhs_vov_trade_deal
		nhs_scripted_effect_with_parameter_for_existing_elysian_tag = {
			SCRIPTED_EFFECT = to_vov_break_trade_deal_vikings
			PARAMETER_NAME = TAG
		}
	}
}

#Trade deal end, bounce
country_event = {
	id = nhs_vov_coloniesevents.27
	title = nhs_vov_coloniesevents.27.t
	desc = nhs_vov_coloniesevents.27.d
	picture = nordic_battle_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "nhs_vov_coloniesevents.27.a"
		to_vov_remove_markland_trade_deal = { OFFENDER = no }
		to_vov_remove_helluland_trade_deal = { OFFENDER = no }
		to_vov_remove_vinland_trade_deal = { OFFENDER = no }
	}
}

#Trade deal stills after a certain time
country_event = {
	id = nhs_vov_coloniesevents.23
	title = nhs_vov_coloniesevents.23.t
	desc = nhs_vov_coloniesevents.23.d
	picture = viking_pier_eventPicture
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		is_year = 1580
		OR = {
			trading_with_helluland = yes
			trading_with_vinland = yes
			trading_with_markland = yes
		}
		NOT = { has_global_flag = nhs_vov_trade_reduced }
	}
	
	mean_time_to_happen = {
		months = 6
	}
	
	immediate = {
		set_global_flag = nhs_vov_trade_reduced
	}
	
	option = {
		name = "nhs_vov_coloniesevents.23.a"
		if = { 
			limit = {
				has_country_modifier = nhs_vov_helluland_deal
			}
			remove_country_modifier = nhs_vov_helluland_deal
			add_country_modifier = {
				name = nhs_vov_helluland_deal_after
				duration = -1
			}
		}
		if = { 
			limit = {
				has_country_modifier = nhs_vov_markland_deal
			}
			remove_country_modifier = nhs_vov_markland_deal
			add_country_modifier = {
				name = nhs_vov_markland_deal_after
				duration = -1
			}
		}
		if = { 
			limit = {
				has_country_modifier = nhs_vov_vinland_deal
			}
			remove_country_modifier = nhs_vov_vinland_deal
			add_country_modifier = {
				name = nhs_vov_vinland_deal_after
				duration = -1
			}
		}
	}
}
#Trade deal stills after either vinland or elysia becomes too big
country_event = {
	id = nhs_vov_coloniesevents.24
	title = nhs_vov_coloniesevents.24.t
	desc = nhs_vov_coloniesevents.24.d
	picture = ELYSIAN_HARBOUR_eventPicture
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
		OR = {
			trading_with_markland = yes
			trading_with_helluland = yes
			trading_with_vinland = yes
		}
		OR = {
			num_of_cities = 40
			MK1 = { num_of_cities = 30 }
			HLL = { num_of_cities = 30 }
			VIN = { num_of_cities = 30 }
		}
		NOT = { has_global_flag = nhs_vov_trade_reduced }
	}
	immediate = {
		set_global_flag = nhs_vov_trade_reduced
	}
	option = {
		name = "nhs_vov_coloniesevents.24.a"
		if = { 
			limit = {
				has_country_modifier = nhs_vov_helluland_deal
			}
			remove_country_modifier = nhs_vov_helluland_deal
			add_country_modifier = {
				name = nhs_vov_helluland_deal_after
				duration = -1
			}
		}
		if = { 
			limit = {
				has_country_modifier = nhs_vov_markland_deal
			}
			remove_country_modifier = nhs_vov_markland_deal
			add_country_modifier = {
				name = nhs_vov_markland_deal_after
				duration = -1
			}
		}
		if = { 
			limit = {
				has_country_modifier = nhs_vov_vinland_deal
			}
			remove_country_modifier = nhs_vov_vinland_deal
			add_country_modifier = {
				name = nhs_vov_vinland_deal_after
				duration = -1
			}
		}
	}
}
##Start of the nordic expansion
#Elysia's existence revitalized trade. More and more people seek new land to gather goods for trade ( gain a colonist but still remain with an heavy nerf to colonization and trade) [might do with a modifier]
country_event = {
	id = nhs_vov_coloniesevents.30
	title = nhs_vov_coloniesevents.30.t
	desc = nhs_vov_coloniesevents.30.d
	picture = norse_colony_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { num_of_colonists = 1 }
		NOT = { has_country_modifier = nhs_vov_colonist }
	}
	
	option = {
		name = "nhs_vov_coloniesevents.30.a"
		add_country_modifier = {
			name = nhs_vov_colonist
			duration = -1
		}
	}
}

country_event = {
	id = nhs_vov_coloniesevents.300
	title = nhs_vov_coloniesevents.30.t
	desc = nhs_vov_coloniesevents.30.d
	picture = norse_colony_eventPicture
	
	trigger = {
		NOT = { num_of_colonists = 1 }
		NOT = { has_country_modifier = nhs_vov_colonist }
		OR = {
			tag = MK1
			tag = HLL
			tag = VIN
		}
		had_global_flag = { flag = nhs_visitors days = 1000 }
	}
	
	option = {
		name = "nhs_vov_coloniesevents.30.a"
		add_country_modifier = {
			name = nhs_vov_colonist
			duration = -1
		}
	}
}
#Population Boom due to trade for food with Elysia (has trade deal with elysia, gain temporary boost to colonization and trade power)
# country_event =  {
# 	id = nhs_vov_coloniesevents.31
# 	title = nhs_vov_coloniesevents.31.t
# 	desc = nhs_vov_coloniesevents.31.d
# 	picture = norse_colony_eventPicture
	
# 	trigger = {
# 		has_country_modifier = nhs_vov_trade_deal
# 		has_country_modifier = nhs_vov_colonist
# 		NOT = { has_country_modifier = nhs_vov_colony_big_boost }
# 		NOT = { has_country_modifier = nhs_vov_colony_small_boost }
# 	}
# 	mean_time_to_happen = {
# 		months = 60
# 	}
# 	option = {
# 		name = "nhs_vov_coloniesevents.31.a"
# 		add_country_modifier = {
# 			name = nhs_vov_colony_big_boost
# 			duration = 730
# 		}
# 	}
# }
#Small Population Boom due to trade for food with Elysia merchants (has no trade deal with elysia, gain small temporary boost to colonization)
# country_event =  {
# 	id = nhs_vov_coloniesevents.32
# 	title = nhs_vov_coloniesevents.32.t
# 	desc = nhs_vov_coloniesevents.32.d
# 	picture = norse_colony_eventPicture
	
# 	trigger = {
# 		NOT = { has_country_modifier = nhs_vov_trade_deal }
# 		has_country_modifier = nhs_vov_colonist
# 		NOT = { has_country_modifier = nhs_vov_colony_small_boost }
# 		NOT = { has_country_modifier = nhs_vov_colony_big_boost }
# 	}
# 	mean_time_to_happen = {
# 		months = 60
# 	}
# 	option = {
# 		name = "nhs_vov_coloniesevents.32.a"
# 		add_country_modifier = {
# 			name = nhs_vov_colony_small_boost
# 			duration = 730
# 		}
# 	}
# }
#Remove Colonist once you have another
country_event = {
	id = nhs_vov_coloniesevents.33
	title = nhs_vov_coloniesevents.33.t
	desc = nhs_vov_coloniesevents.33.d
	picture = norse_colony_eventPicture
	
	trigger = {
		has_country_modifier = nhs_vov_colonist
		num_of_colonists = 2
	}
	
	option = {
		name = "nhs_vov_coloniesevents.33.a"
		remove_country_modifier = nhs_vov_colonist
	}
	
}

#Population Boom due to raids of elysian ships (elysia made trade deal with other colony, gain small temporary boost to colonization and to privateers)

#Elysian influence for more naval supplies and exotic trade goods from the north (pelts, whale meat, seal leather and walrus ivory) urges expansion

##Vinlandic War
#A Population boom and Elysia's influence has pushed the colonies to their limits (norse colonies)
country_event = {
	id = nhs_vov_coloniesevents.40
	title = nhs_vov_coloniesevents.40.t
	desc = nhs_vov_coloniesevents.40.d
	picture = norse_war_eventPicture
	
	trigger = {
		OR = {
			tag = HLL
			tag = MK1
		}
		OR = {
			HLL = { ai = no }
			MK1 = { ai = no }
		}
		NOT = { has_country_flag = nhs_vov_war_ai_sceniario }
		NOT = { has_country_flag = nhs_vov_war_brewing_c }
		exists = HLL
		exists = MK1
		is_year = 1473
		OR = {
			HLL = { ai = no }
			MK1 = { ai = no }
		}
	}
	
	mean_time_to_happen = {
		months = 48
		
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = nhs_vov_war_brewing_c
			set_global_flag = nhs_vov_war_brewing
			if = {
				limit = {
					tag = HLL
				}
				remove_historical_friend = MK1
				add_historical_rival = MK1
				add_truce_with = MK1
				
			}
			if = {
				limit = {
					tag = MK1
				}
				remove_historical_friend = HLL
				add_historical_rival = HLL
				add_truce_with = HLL
			}
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.40.a"
		
		trigger = {
			tag = HLL
		}
		MK1 = {
			country_event = { id = nhs_vov_coloniesevents.40 }
		}
	}
	option = {
		name = "nhs_vov_coloniesevents.40.b"
		
		trigger = {
			tag = MK1
		}
		HLL = {
			country_event = { id = nhs_vov_coloniesevents.40 }
		}
	}
}
#Family Feud (norse colonies)
country_event = {
	id = nhs_vov_coloniesevents.41
	title = nhs_vov_coloniesevents.41.t
	desc = nhs_vov_coloniesevents.41.d
	picture = norse_dispute_eventPicture
	
	trigger = {
		has_country_flag = nhs_vov_war_brewing_c
		NOT = { has_country_flag = nhs_vov_war_brewing_ff }
		exists = HLL
		exists = MK1
		OR = {
			HLL = { ai = no }
			MK1 = { ai = no }
		}
		NOT = { has_country_flag = nhs_vov_war_ai_sceniario }
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		set_country_flag = nhs_vov_war_brewing_ff
	}
	
	option = {
		name = "nhs_vov_coloniesevents.41.a"
		trigger = {
			tag = MK1
		}
		add_opinion = {
			who = HLL
			modifier = nhs_vov_norse_feud
		}
		reverse_add_opinion = {
			who = HLL
			modifier = nhs_vov_norse_feud
		}
		hidden_effect = {
			if = {
				limit = {
					HLL = {
						NOT = { has_country_flag = nhs_vov_war_brewing_ff }
					}
				}
				HLL = { country_event = { id = nhs_vov_coloniesevents.41 } }
			}
		}
	}
	option = {
		name = "nhs_vov_coloniesevents.41.a"
		trigger = {
			tag = HLL
		}
		add_opinion = {
			who = MK1
			modifier = nhs_vov_norse_feud
		}
		reverse_add_opinion = {
			who = MK1
			modifier = nhs_vov_norse_feud
		}
		hidden_effect = {
			if = {
				limit = {
					MK1 = {
						NOT = { has_country_flag = nhs_vov_war_brewing_ff }
					}
				}
				MK1 = { country_event = { id = nhs_vov_coloniesevents.41 } }
			}
		}
	}
}
#Land Feud (norse colonies)
country_event = {
	id = nhs_vov_coloniesevents.42
	title = nhs_vov_coloniesevents.42.t
	desc = nhs_vov_coloniesevents.42.d
	picture = norse_dispute_eventPicture
	
	trigger = {
		has_country_flag = nhs_vov_war_brewing_c
		NOT = { has_country_flag = nhs_vov_war_brewing_lf }
		exists = HLL
		exists = MK1
		OR = {
			HLL = { ai = no }
			MK1 = { ai = no }
		}
		NOT = { has_country_flag = nhs_vov_war_ai_sceniario }
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		set_country_flag = nhs_vov_war_brewing_lf
	}
	
	option = {
		name = "nhs_vov_coloniesevents.42.a"
		trigger = {
			tag = MK1
		}
		HLL = {
			every_owned_province = {
				limit = {
					is_capital = no
				}
				add_permanent_claim = MK1
			}
		}
		add_opinion = {
			who = HLL
			modifier = nhs_vov_norse_feud
		}
		reverse_add_opinion = {
			who = HLL
			modifier = nhs_vov_norse_feud
		}
		hidden_effect = {
			if = {
				limit = {
					HLL = {
						NOT = { has_country_flag = nhs_vov_war_brewing_lf }
					}
				}
				HLL = { country_event = { id = nhs_vov_coloniesevents.42 } }
			}
		}
	}
	option = {
		name = "nhs_vov_coloniesevents.42.a"
		trigger = {
			tag = HLL
		}
		MK1 = {
			every_owned_province = {
				limit = {
					is_capital = no
				}
				add_permanent_claim = HLL
			}
		}
		add_opinion = {
			who = MK1
			modifier = nhs_vov_norse_feud
		}
		reverse_add_opinion = {
			who = MK1
			modifier = nhs_vov_norse_feud
		}
		hidden_effect = {
			if = {
				limit = {
					MK1 = {
						NOT = { has_country_flag = nhs_vov_war_brewing_lf }
					}
				}
				MK1 = { country_event = { id = nhs_vov_coloniesevents.42 } }
			}
		}
	}
}
#Feud over Vinland's Title (norse colonies)
country_event = {
	id = nhs_vov_coloniesevents.43
	title = nhs_vov_coloniesevents.43.t
	desc = nhs_vov_coloniesevents.43.d
	picture = norse_dispute_eventPicture
	
	trigger = {
		has_country_flag = nhs_vov_war_brewing_c
		NOT = { has_country_flag = nhs_vov_war_brewing_vf }
		exists = HLL
		exists = MK1
		OR = {
			HLL = { ai = no }
			MK1 = { ai = no }
		}
		NOT = { has_country_flag = nhs_vov_war_ai_sceniario }
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		set_country_flag = nhs_vov_war_brewing_vf
	}
	
	option = {
		name = "nhs_vov_coloniesevents.43.a"
		trigger = {
			tag = MK1
		}
		HLL = {
			every_owned_province = {
				limit = {
					is_capital = yes
				}
				add_permanent_claim = MK1
			}
		}
		add_opinion = {
			who = HLL
			modifier = nhs_vov_norse_feud
		}
		reverse_add_opinion = {
			who = HLL
			modifier = nhs_vov_norse_feud
		}
		hidden_effect = {
			if = {
				limit = {
					HLL = {
						NOT = { has_country_flag = nhs_vov_war_brewing_vf }
					}
				}
				HLL = { country_event = { id = nhs_vov_coloniesevents.43 } }
			}
		}
	}
	option = {
		name = "nhs_vov_coloniesevents.43.a"
		trigger = {
			tag = HLL
		}
		MK1 = {
			every_owned_province = {
				limit = {
					is_capital = yes
				}
				add_permanent_claim = HLL
			}
		}
		add_opinion = {
			who = MK1
			modifier = nhs_vov_norse_feud
		}
		reverse_add_opinion = {
			who = MK1
			modifier = nhs_vov_norse_feud
		}
		hidden_effect = {
			if = {
				limit = {
					MK1 = {
						NOT = { has_country_flag = nhs_vov_war_brewing_vf }
					}
				}
				MK1 = { country_event = { id = nhs_vov_coloniesevents.43 } }
			}
		}
	}
}
#War in the north 
country_event = {
	id = nhs_vov_coloniesevents.44
	title = nhs_vov_coloniesevents.44.t
	desc = nhs_vov_coloniesevents.44.d
	picture = norse_war_eventPicture
	
	trigger = {
		OR = {
			HLL = {
				war_with = MK1
			}
			has_global_flag = nhs_vov_war_ai_sceniario
		}
		knows_country = HLL
		knows_country = MK1
		NOT = {
			OR = {
				tag = HLL
				tag = MK1
			}
		}
		capital_scope = {
			continent = north_america
		}
		NOT = { has_country_flag = nhs_vov_war_ai_sceniario }
		NOT = { has_country_flag = nhs_vov_war_in_the_north_o }
	}
	
	immediate = {
		set_country_flag = nhs_vov_war_in_the_north_o
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "nhs_vov_coloniesevents.44.a"
	}
}


# Victory (norse victor) [need to annex all of the other colony's land and remove it's cores OR control both capitals]
country_event = {
	id = nhs_vov_coloniesevents.50
	title = nhs_vov_coloniesevents.50.t
	desc = nhs_vov_coloniesevents.50.d
	picture = norse_victory_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		OR = {
			tag = HLL
			tag = MK1
			tag = VIN
		}
		OR = {
			AND = {
				NOT = { exists = HLL }
				tag = MK1
			}
			AND = {
				NOT = { exists = MK1 }
				tag = HLL
			}
			tag = VIN
		}
		NOT = { has_global_flag = nhs_started_at_bookmark }
	}
	
	immediate = {
		set_country_flag = nhs_vov_war_victor
		nhs_effect_for_existing_elysian_tag = { EFFECT = "save_event_target_as = existing_elysia" }
		hidden_effect = {
			every_country = {
				clr_country_flag = nhs_vov_war_brewing_c
			}
			event_target:existing_elysia = { country_event = { id = nhs_vov_coloniesevents.51 } } 
		}
	}
	
	option = {
		name = "nhs_vov_coloniesevents.50.a"
		if = {
			limit = {
				tag = MK1
			}
			every_province = {
				limit = {
					continent = north_america
					is_core = HLL
				}
				add_permanent_claim = MK1
				if = {
					limit = {
						owned_by = ROOT
					}
					remove_core = HLL
				}
			}
		}
		if = {
			limit = {
				tag = HLL
			}
			every_province = {
				limit = {
					continent = north_america
					is_core = MK1
				}
				add_permanent_claim = HLL
				if = {
					limit = {
						owned_by = ROOT
					}
					remove_core = MK1
				}
			}
		}
	}
}

#War finished (elysia) [choose if want to start/continue support/trade with the victor or to remain/continue neutral]
country_event = {
	id = nhs_vov_coloniesevents.51
	title = nhs_vov_coloniesevents.51.t
	desc = nhs_vov_coloniesevents.51.d
	picture = norse_victory_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		nhs_check_all_elysian_tags = { CONDITION = tag }
	}
	
	option = { #Continue Trade Deal
		name = "nhs_vov_coloniesevents.51.a"
		ai_chance = { factor = 100 }
		trigger = {
			OR = {
				AND = {
					OR = {
						MK1 = { has_country_flag = nhs_vov_war_victor }
						FROM = {
							tag = MK1
						}
					}
					exists = MK1
					trading_with_markland = yes
				}
				AND = {
					OR = {
						HLL = { has_country_flag = nhs_vov_war_victor }
						FROM = {
							tag = HLL
						}
					}
					exists = HLL
					trading_with_helluland = yes
				}
				AND = {
					exists = VIN
					trading_with_vinland = yes
				}
			}
		}
	}
	
	option = { #Stop Trade Deal
		name = "nhs_vov_coloniesevents.51.b"
		ai_chance = { factor = 1 }
		trigger = {
			OR = {
				trading_with_markland = yes
				trading_with_helluland = yes
				trading_with_vinland = yes
			}
		}
		clr_global_flag = nhs_vov_markland_deal_f
		clr_global_flag = nhs_vov_helluland_deal_f
		clr_global_flag = nhs_vov_vinland_deal_f
		add_country_modifier = {
			name = nhs_broken_trade_deal
			duration = 3650
		}
		to_vov_remove_markland_trade_deal = { OFFENDER = yes }
		to_vov_remove_helluland_trade_deal = { OFFENDER = yes }
		to_vov_remove_vinland_trade_deal = { OFFENDER = yes }
	}
	
	option = { #Start Trade Deal
		name = "nhs_vov_coloniesevents.51.c"
		ai_chance = { factor = 100 }
		trigger = {
			OR = {
				MK1 = { has_country_flag = nhs_vov_war_victor }
				FROM = {
					tag = MK1
				}
			}
			exists = MK1
			NOT = {
				trading_with_markland = yes
			}
		}
		clr_global_flag = nhs_no_deal
		clr_global_flag = nhs_vov_helluland_deal_f
		to_vov_remove_helluland_trade_deal = { OFFENDER = yes }
		set_global_flag = nhs_vov_markland_deal_f
		if = {
			limit = {
				NOT = { has_global_flag = nhs_vov_trade_reduced }
			}
			add_country_modifier = {
				name = nhs_vov_markland_deal
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = nhs_vov_markland_deal_after
				duration = -1
			}
		}
	}
	option = { #Start Trade Deal
		name = "nhs_vov_coloniesevents.51.e"
		ai_chance = { factor = 100 }
		trigger = {
			OR = {
				HLL = { has_country_flag = nhs_vov_war_victor }
				FROM = {
					tag = HLL
				}
			}
			exists = HLL
			NOT = {
				trading_with_helluland = yes
			}
		}
		clr_global_flag = nhs_no_deal
		clr_global_flag = nhs_vov_markland_deal_f
		to_vov_remove_markland_trade_deal = { OFFENDER = yes }
		set_global_flag = nhs_vov_helluland_deal_f
		if = {
			limit = {
				NOT = { has_global_flag = nhs_vov_trade_reduced }
			}
			add_country_modifier = {
				name = nhs_vov_helluland_deal
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = nhs_vov_helluland_deal_after
				duration = -1
			}
		}
	}
	option = { #Start Trade Deal
		name = "nhs_vov_coloniesevents.51.v"
		ai_chance = { factor = 100 }
		trigger = {
			exists = VIN
			NOT = {
				trading_with_vinland = yes
			}
		}
		clr_global_flag = nhs_no_deal
		clr_global_flag = nhs_vov_markland_deal_f
		clr_global_flag = nhs_vov_helluland_deal_f
		if = {
			limit = {
				has_country_modifier = nhs_vov_markland_deal
			}
			remove_country_modifier = nhs_vov_markland_deal
		}
		if = {
			limit = {
				has_country_modifier = nhs_vov_helluland_deal
			}
			remove_country_modifier = nhs_vov_helluland_deal
		}
		if = {
			limit = {
				has_country_modifier = nhs_vov_markland_deal_after
			}
			remove_country_modifier = nhs_vov_markland_deal_after
		}
		if = {
			limit = {
				has_country_modifier = nhs_vov_helluland_deal_after
			}
			remove_country_modifier = nhs_vov_helluland_deal_after
		}
		if = {
			limit = {
				NOT = { has_global_flag = nhs_vov_trade_reduced }
			}
			add_country_modifier = {
				name = nhs_vov_vinland_deal
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = nhs_vov_vinland_deal
				duration = -1
			}
		}
	}
	option = { #Maintain no deal policy
		name = "nhs_vov_coloniesevents.51.f"
		ai_chance = { factor = 1 }
		trigger = {
			NOT = {
				OR = {
					AND = {
						exists = MK1
						trading_with_markland = yes
					}
					AND = {
						exists = HLL
						trading_with_helluland = yes
					}
					AND = {
						exists = VIN
						trading_with_vinland = yes
					}
				}
			}
		}
	}
}

#Decay Event for Outsider
# country_event = {
# 	id = nhs_vov_coloniesevents.70
# 	title = nhs_vov_coloniesevents.70.t
# 	desc = nhs_vov_coloniesevents.70.d
# 	picture = norse_street_eventPicture

#     trigger = {
# 		NOT = { vov_eligible_for_vinland_improvements_restoration = yes }
# 		any_owned_province = {
# 			OR = {
# 				AND = {
# 					has_province_modifier = vov_whalebone_palace_tm
# 					NOT = { has_province_flag = nhs_vi_whalebone_palace_decay }
# 				}
# 				AND = {
# 					has_province_modifier = vov_great_port_tm
# 					NOT = { has_province_flag = nhs_vi_great_port_decay }
# 				}
# 			}
# 		}
# 	}
	
# 	mean_time_to_happen = {
# 		months = 240
# 		modifier = {
# 			# From 20 years to 2.4 months if no positive stability
# 			factor = 0.01
# 			NOT = { stability = 0 }
# 		}
# 	}
	
# 	immediate = {
# 		hidden_effect = {
# 			random_owned_province = {
# 				limit = {
# 					OR = {
# 						AND = {
# 							has_province_modifier = vov_whalebone_palace_tm
# 							NOT = { has_province_flag = nhs_vi_whalebone_palace_decay }
# 						}
# 						AND = {
# 							has_province_modifier = vov_great_port_tm
# 							NOT = { has_province_flag = nhs_vi_great_port_decay }
# 						}
# 						AND = {
# 							has_province_modifier = vov_irminsul_tm
# 							NOT = { has_province_flag = nhs_vi_irminsul_decay }
# 						}
# 					}
# 				}
# 				save_event_target_as = nhs_vov_coloniesevents70target
# 				# Select modifiers to decay
# 				if = {
# 					limit = {
# 						has_province_modifier = vov_whalebone_palace_tm
# 						NOT = { has_province_flag = nhs_vi_whalebone_palace_decay }
# 					}
# 					set_province_flag = nhs_vi_whalebone_palace_decay
# 					set_province_flag = nhs_vi_whalebone_palace_decay_rn
# 				}
# 				if = {
# 					limit = {
# 						has_province_modifier = vov_great_port_tm
# 						NOT = { has_province_flag = nhs_vi_great_port_decay }
# 					}
# 					set_province_flag = nhs_vi_great_port_decay
# 					set_province_flag = nhs_vi_great_port_decay_rn
# 				}
# 			}
# 		}
# 	}

# 	option = {	
# 		name = "nhs_vov_coloniesevents.70.a"
# 		event_target:nhs_vov_coloniesevents70target = {
# 			# Select modifiers to decay
# 			if = {
# 				limit = {
# 					has_province_flag = nhs_vi_whalebone_palace_decay_rn
# 				}
# 				ROOT = { add_treasury = 300 }
# 				tooltip = {
# 					add_permanent_province_modifier = {
# 						name = "nhs_vov_whalebone_palace_decay"
# 						duration = -1
# 					}
# 				}
# 				hidden_effect = {
# 					add_province_triggered_modifier = vov_whalebone_palace_tm_decay
# 				}
# 			}
# 			if = {
# 				limit = {
# 					has_province_flag = nhs_vi_great_port_decay_rn
# 				}
# 				ROOT = { add_treasury = 150 }
# 				tooltip = {
# 					add_permanent_province_modifier = {
# 						name = "nhs_vov_great_port_decay"
# 						duration = -1
# 					}
# 				}
# 				hidden_effect = {
# 					add_province_triggered_modifier = vov_great_port_tm_decay
# 				}
# 			}
# 		}
# 		clr_province_flag = nhs_vi_whalebone_palace_decay_rn
# 		clr_province_flag = nhs_vi_great_port_decay_rn
# 	}
# }

# Choosing deity norse
country_event = {
	id = nhs_vov_coloniesevents.71
	title = nhs_vov_coloniesevents.71.t
	desc = nhs_vov_coloniesevents.71.d
	picture = Oracle_eventPicture

	trigger = {
		religion = norse_pagan_reformed
		ai = no
		has_regency = no
		NOT = { has_dlc = "Wealth of Nations" }
		NOT = { has_personal_deity = odin }
		NOT = { has_personal_deity = freya }
		NOT = { has_personal_deity = tor }
		NOT = { has_personal_deity = tyr }
		NOT = { has_personal_deity = njord }
		NOT = { has_personal_deity = snotra }
		NOT = { has_personal_deity = ullr }
		NOT = { has_personal_deity = hel }
		NOT = { has_country_flag = to_choosing_deity }
	}

	immediate = {
		set_country_flag = to_choosing_deity
	}

	after = {
		clr_country_flag = to_choosing_deity
	}

	option = {
		name = "nhs_vov_coloniesevents.71.a"
		change_personal_deity = odin
	}
	option = {
		name = "nhs_vov_coloniesevents.71.b"
		change_personal_deity = freya
	}
	option = {
		name = "nhs_vov_coloniesevents.71.c"
		change_personal_deity = tor
	}
	option = {
		name = "nhs_vov_coloniesevents.71.e"
		change_personal_deity = tyr
	}
	option = {
		name = "nhs_vov_coloniesevents.71.f"
		change_personal_deity = njord
	}
	option = {
		name = "nhs_vov_coloniesevents.71.g"
		change_personal_deity = snotra
	}
	option = {
		name = "nhs_vov_coloniesevents.71.h"
		change_personal_deity = ullr
	}
	option = {
		name = "nhs_vov_coloniesevents.71.i"
		change_personal_deity = hel
	}
}

# Mead event
country_event = {
	id = nhs_vov_coloniesevents.72
	title = nhs_vov_coloniesevents.72.t
	desc = nhs_vov_coloniesevents.72.d
	picture = norse_feast_eventPicture
	
	fire_only_once = yes

	trigger = {
		tag = VIN
		# is_year = 1482
		religion = norse_pagan_reformed
		owns_core_province = 994
		994 = {
			is_city = yes
		}
		OR = {
			trading_with_vinland = yes
			has_country_modifier = nhs_vov_south_trade_venture
		}
	}

	mean_time_to_happen = {
		months = 6
	}

	option = {
		name = "nhs_vov_coloniesevents.72.a"
		add_prestige = 15
		994 = {
			add_base_production = 3
			add_base_manpower = 1
			hidden_effect = {
				nhs_save_previous_goods = yes
			}
			change_trade_goods = norse_mead
		}
	}
}

# Great Bank fisheries alternative
country_event = {
	id = nhs_vov_coloniesevents.73
	title = nhs_vov_coloniesevents.73.t
	desc = nhs_vov_coloniesevents.73.d
	picture = awesome_viking_city_eventPicture
	
	fire_only_once = yes

	major = yes

	trigger = {
		tag = VIN
		# is_year = 1482
		OR = {
			has_country_flag = nhs_europe_discovered_got
			is_year = 1550
		}
		owns_core_province = 980
		owns_core_province = 2573
		owns_core_province = 981
		NOT = { has_global_flag = great_fisheries_happened }
	}

	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		hidden_effect = {
			set_global_flag = great_fisheries_happened
		}
	}

	option = {
		name = "nhs_vov_coloniesevents.73.a"
		change_price = {
			trade_goods = fish
			key = GREAT_FISHERIES
			value = -0.1
			duration = -1
		}
		change_price = {
			trade_goods = salt
			key = GREAT_FISHERIES
			value = 0.1
			duration = -1
		}
		newfoundland_area = {
			limit = {
				trade_goods = fish
			}
			add_permanent_province_modifier = {
				name = "grand_bank_fisheries"
				duration = -1
			}
		}
	}
}