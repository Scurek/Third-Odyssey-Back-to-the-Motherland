namespace = nhs_religionevents

# Proper Sacrifices
country_event = {	
	id = nhs_religionevents.1
	title = nhs_religionevents.1.t
	desc = nhs_religionevents.1.d
	picture = PANTHEON_eventPicture

    trigger = {
		OR = {
			religion = pantheon_worship
			religion = aztlan_worship
		}
		NOT = { has_ruler_flag = nhs_had_proper_sacrifices }
		NOT = { has_ruler_modifier = nhs_proper_sacrifices }
	}

	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 0.90
			stability = 1
		}
		modifier = {
			factor = 0.90
			stability = 2
		}
		modifier = {
			factor = 0.90
			stability = 3
		}
		modifier = {
			factor = 5.0
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 0.65
			has_country_modifier = nhs_high_priests
		}
	}
	
	immediate = {
		hidden_effect = {
			set_ruler_flag = nhs_had_proper_sacrifices
		}
	}

	option = {	
		name = "NHSRELIGIONEVENTSNAME1A"
		ai_chance = { 
			factor = 100 
			modifier = {
				factor = 0
				ai = yes
			}
		}
		if = {
			limit = {
				NOT = { monthly_income = 1 }
			}
			add_treasury = -12
		}
		else_if = {
			limit = {
				NOT = { monthly_income = 62 }
			}
			add_years_of_income = -0.10
		}
		else = {
			add_treasury = -75
		}
		add_ruler_modifier = {
			name = nhs_proper_sacrifices
			duration = -1
		}
	}
	option = {	
		name = "NHSRELIGIONEVENTSNAME1B"
		ai_chance = { 
			factor = 10
		}
		add_prestige = 5
	}
}

# Ares/Poseidon worship
country_event = {	
	id = nhs_religionevents.2
	title = nhs_religionevents.2.t
	desc = nhs_religionevents.2.d
	picture = AWESOMECITY_eventPicture
	
    trigger = {
		is_year = 1500
		religion = pantheon_worship
		treasury = 75
		NOT = { has_country_modifier = nhs_ares_worship }
		NOT = { has_country_modifier = nhs_poseidon_worship }
		has_country_modifier = nhs_high_priests
		nhs_condition_all_ely = { KOMANDA = tag }
	}

	mean_time_to_happen = {
		months = 60
		modifier = {
			factor = 0.9
			stability = 1
		}
		modifier = {
			factor = 0.9
			stability = 2
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.8
			treasury = 100
		}
		modifier = {
			factor = 2.0
			has_country_flag = nhs_hadevent_religionevents2
		}
		modifier = {
			factor = 0.1
			is_at_war = yes
			NOT = { has_country_flag = nhs_hadevent_religionevents2 }
		}
	}

	option = {	# Worship Ares
		name = "NHSRELIGIONEVENTSNAME2A"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 10
				nhs_check_all_spartan = { CONDITION = tag }
			}
		}
		add_treasury = -100
		add_army_tradition = 5
		add_country_modifier = {
			name = nhs_ares_worship
			duration = -1
		}	
	}
	option = {	# Worship Poseidon
		name = "NHSRELIGIONEVENTSNAME2B"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				nhs_check_all_spartan = { CONDITION = tag }
			}
		}
		add_treasury = -100
		add_stability_or_adm_power = yes
		add_navy_tradition = 5
		add_country_modifier = {
			name = nhs_poseidon_worship
			duration = -1
		}
	}
	option = {	# Can't afford it right now
		name = "NHSRELIGIONEVENTSNAME2C"
		add_prestige = -10
		set_country_flag = nhs_hadevent_religionevents2
		ai_chance = {
			factor = 0
		}
	}
}

# Establish High Priests
country_event = {	
	id = nhs_religionevents.4
	title = nhs_religionevents.4.t
	desc = nhs_religionevents.4.d
	picture = OLYMPIANS_eventPicture

    trigger = {
		is_year = 1475
		OR = {
			religion = pantheon_worship
			religion = aztlan_worship
		}
		NOT = { has_country_modifier = nhs_high_priests }
		OR = {
			nhs_condition_all_ely = { KOMANDA = tag }
			nhs_check_all_spartan = { CONDITION = tag }
		}
		any_owned_province = {
			religion = ROOT
			is_city = yes
			OR = {
				is_capital = yes
				is_in_capital_area = yes
				has_province_flag = nhs_hcd_first_pagan_minority_province
			}
		}
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_flag = nhs_hcd_first_pagan_minority_province
					religion = ROOT
				}
				save_event_target_as = nhs_high_priesthood_target
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = nhs_high_priesthood_target }
				}
				random_owned_province = {
					limit = {
						is_capital = yes
						religion = ROOT
					}
					save_event_target_as = nhs_high_priesthood_target
				}
			}
			if = {
				limit = {
					NOT = { has_saved_event_target = nhs_high_priesthood_target }
				}
				random_owned_province = {
					limit = {
						is_city = yes
						is_in_capital_area = yes
						religion = ROOT
					}
					save_event_target_as = nhs_high_priesthood_target
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 12
		modifier = {
			factor = 0.75
			stability = 1
		}
		modifier = {
			factor = 0.75
			stability = 2
		}
		modifier = {
			factor = 0.75
			stability = 3
		}
		modifier = {
			factor = 0.75
			dip = 3
		}
		modifier = {
			factor = 0.75
			dip = 4
		}
		modifier = {
			factor = 0.75
			dip = 5
		}
		modifier = {
			factor = 0.75
			dip = 6
		}
		modifier = {
			factor = 0.75
			is_at_war = no
		}
	}

	option = {	
		name = "NHSRELIGIONEVENTSNAME4A"
		goto = nhs_high_priesthood_target
		trigger = {
			nhs_condition_all_ely = { KOMANDA = tag }
		}
		ai_chance = { factor = 100 }
		custom_tooltip = nhs_enable_heralds_dispatch_tt
		custom_tooltip = nhs_new_line_tt
		add_country_modifier = {
			name = nhs_high_priests
			duration = -1
		}

		if = {
			limit = {
				has_saved_event_target = nhs_high_priesthood_target
				event_target:nhs_high_priesthood_target = {
					owned_by = ROOT
				}
			}
			event_target:nhs_high_priesthood_target = {
				tooltip = {
					add_permanent_province_modifier = {
						name = nhs_seat_of_high_priesthood_t
						duration = -1
					}
				}
				hidden_effect = {
					add_province_triggered_modifier = nhs_seat_of_high_priesthood
				}
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					religion = ROOT
					is_capital = yes
				}
			}
			capital_scope = {
				tooltip = {
					add_permanent_province_modifier = {
						name = nhs_seat_of_high_priesthood_t
						duration = -1
					}
				}
				hidden_effect = {
					add_province_triggered_modifier = nhs_seat_of_high_priesthood
				}
			}
		}
		else_if = {
			limit = {
				any_owned_province = {
					is_city = yes
					religion = ROOT
					OR = {
						is_capital = yes
						is_in_capital_area = yes
						has_province_flag = nhs_hcd_first_pagan_minority_province
					}
				}
			}
			random_owned_province = {
				limit = {
					is_city = yes
					religion = ROOT
					OR = {
						is_capital = yes
						is_in_capital_area = yes
						has_province_flag = nhs_hcd_first_pagan_minority_province
					}
				}
				tooltip = {
					add_permanent_province_modifier = {
						name = nhs_seat_of_high_priesthood_t
						duration = -1
					}
				}
				hidden_effect = {
					add_province_triggered_modifier = nhs_seat_of_high_priesthood
				}
			}
		}
		else = {
			random_owned_province = {
				limit = {
					is_city = yes
				}
				tooltip = {
					add_permanent_province_modifier = {
						name = nhs_seat_of_high_priesthood_t
						duration = -1
					}
				}
				hidden_effect = {
					add_province_triggered_modifier = nhs_seat_of_high_priesthood
				}
			}
		}
	}

	option = {	
		name = "NHSRELIGIONEVENTSNAME4A"
		trigger = {
			NOT = { nhs_condition_all_ely = { KOMANDA = tag } }
		}
		ai_chance = { factor = 100 }
		custom_tooltip = nhs_enable_heralds_dispatch_tt
		custom_tooltip = nhs_new_line_tt
		add_country_modifier = {
			name = nhs_high_priests
			duration = -1
		}
	}
}


# Expand the Pantheon of Gods
country_event = {	
	id = nhs_religionevents.5
	title = nhs_religionevents.5.t
	desc = nhs_religionevents.5.d
	picture = OLYMPIANS_eventPicture

    trigger = {
		is_year = 1490
		religion = pantheon_worship
		dip_power = 25
		has_country_modifier = nhs_high_priests
		# nhs_condition_all_ely = { KOMANDA = tag }
		NOT = { nhs_check_all_spartan = { CONDITION = tag } }
		NOT = { has_country_modifier = nhs_expanded_pantheon }
		NOT = { has_country_modifier = nhs_consolidated_pantheon }
		OR = {
			any_neighbor_country = {
				religion_group = pagan
				NOT = { religion = pantheon_worship }
			}
			any_owned_province = {
				religion_group = pagan
				NOT = { religion = pantheon_worship }
			}
		}
	}

	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 0.50
			stability = 1
		}
		modifier = {
			factor = 0.50
			stability = 2
		}
		modifier = {
			factor = 0.50
			stability = 3
		}
		modifier = {
			factor = 0.50
			is_at_war = no
		}
	}

	option = {	# Expand the Pantheon
		name = "NHSRELIGIONEVENTSNAME5A"
		ai_chance = {
			factor = 75
			modifier = {
				factor = 10
				nhs_check_all_spartan = { CONDITION = tag }
			}
		}
		add_dip_power = -25
		add_country_modifier = {
			name = nhs_expanded_pantheon
			duration = -1
		}
	}
	option = {	# Consolidate our own Pantheon
		name = "NHSRELIGIONEVENTSNAME5B"
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0.1
				nhs_check_all_spartan = { CONDITION = tag }
			}
		}
		add_dip_power = -25
		add_country_modifier = {
			name = nhs_consolidated_pantheon
			duration = -1
		}
	}
}

# Hero event
country_event = {	
	id = nhs_religionevents.10
	title = nhs_religionevents.10.t
	desc = nhs_religionevents.10.d
	picture = ARMY_CHARGE_eventPicture

    trigger = {
		is_year = 1500
		OR = {
			religion = pantheon_worship
			religion = aztlan_worship
		}
		OR = {
			is_at_war = yes
			had_recent_war = 1
		}
		NOT = { has_country_modifier = nhs_timer_heroes }
	}

	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 0.5
			war_exhaustion = 5
		}
		modifier = {
			factor = 0.5
			war_exhaustion = 7.5
		}
		modifier = {
			factor = 2
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 2.0
			has_wartaxes = yes
		}
		modifier = {
			factor = 5
			religion = aztlan_worship
		}
	}
	
	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = nhs_timer_heroes
				duration = 18250 # 50 years
				hidden = yes
			}
			random_list = {
				20 = { set_country_flag = hero_aeneas }
				20 = { set_country_flag = hero_hercules }
				20 = { set_country_flag = hero_achilles }
				20 = { set_country_flag = hero_odysseus }
				20 = { set_country_flag = hero_perseus }
			}
		}
	}

	option = {	
		name = "NHSRELIGIONEVENTSNAME10"
		add_war_exhaustion = -5
		add_army_tradition = 5	
		if = {
			limit = {
				has_country_flag = hero_aeneas
			}
			define_general = {
				name = "Aeneas"
				fire = 4
				shock = 4
				manuever = 4
				siege = 2
			}
			clr_country_flag = hero_aeneas
		}
		if = {
			limit = {
				has_country_flag = hero_hercules
			}
			define_general = {
				name = "Hercules"
				fire = 4
				shock = 6
				manuever = 2
				siege = 2
			}
			clr_country_flag = hero_hercules
		}
		if = {
			limit = {
				has_country_flag = hero_achilles
			}
			define_general = {
				name = "Achilles"
				fire = 6
				shock = 2
				manuever = 4
				siege = 2
			}
			clr_country_flag = hero_achilles
		}
		if = {
			limit = {
				has_country_flag = hero_odysseus
			}
			define_general = {
				name = "Odysseus"
				fire = 5
				shock = 2
				manuever = 3
				siege = 4
			}
			clr_country_flag = hero_odysseus
		}
		if = {
			limit = {
				has_country_flag = hero_perseus
			}
			define_general = {
				name = "Perseus"
				fire = 2
				shock = 6
				manuever = 3
				siege = 3
			}
			clr_country_flag = hero_perseus
		}
		
	}
}
