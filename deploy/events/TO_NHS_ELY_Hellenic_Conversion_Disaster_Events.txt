# Events for the Elysian religious wars
# Written by TheWerelizard

namespace = nhs_hcd_hellenicrevolt

###########################################################
#Events firing at the begining and the end of the disaster#
###########################################################

country_event = { #Disaster starts
	id = nhs_hcd_hellenicrevolt.1
	title = nhs_hcd_hellenicrevolt1.t
	desc = nhs_hcd_hellenicrevolt1.d
	picture = REVOLT_HUNGARIAN_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_capital = no
					has_owner_religion = yes 
				}
				change_religion = elysian_hellenic
				add_province_modifier = {
					name = nhs_hcd_conversion_zeal
					duration = 365
				}
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_Pagan_minority 
				}
				change_religion = elysian_hellenic
				remove_province_modifier = nhs_hcd_Pagan_minority 
			}
			every_owned_province = {
				limit = {
					has_province_modifier = nhs_hcd_famine_exempt
				}
				remove_province_modifier = nhs_hcd_famine_exempt
			}
			remove_country_modifier = nhs_hcd_hellenic_struggles
			remove_country_modifier = nhs_hcd_hellenic_coup
			remove_country_modifier = nhs_hcd_hellenic_representation 
			remove_country_modifier = nhs_hcd_pagan_concessions
			remove_country_modifier = nhs_hcd_lack_colonists
			remove_country_modifier = nhs_hcd_state_inquistion

			add_stability = -3

			clr_country_flag = hellenic_conversion_preacher
			clr_country_flag = nhs_hcd_can_have_religious_disaster
		}
	}

	option = { #Side with pagans
		name = nhs_hcd_hellenicrevolt.1.a

		trigger = {
			NOT = {
				check_variable = {
					which = HellenicUprising
					value = 13
				}
			}
		}

		change_religion = elysian_hellenic
		set_ruler_religion = elysian_hellenic
		if = {
			limit = {
				has_heir = yes
			}
			set_heir_religion = elysian_hellenic
		}
		set_country_flag = nhs_hcd_converted_to_hellenic
		add_country_modifier = {
			name= nhs_hcd_pagan_loyalty
			duration = 3650
		}

		custom_tooltip = nhs_hellenicconversion.disaster_siding_with_Pagans.tt
	}

	option = { #Side with church
		name = nhs_hcd_hellenicrevolt.1.b
		trigger = {
			NOT = {
				check_variable = {
					which = OrthodoxcUprising
					value = 13
				}
			}
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		set_country_flag = nhs_hcd_supported_zealots
		add_country_modifier = {
			name = nhs_hcd_church_loyalty 
			duration = 3650
		}

		custom_tooltip = nhs_hellenicconversion.disaster_siding_with_zealots.tt
	}

	option = { #Side with moderates
		name = nhs_hcd_hellenicrevolt.1.c
		
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}

		set_country_flag = nhs_hcd_supported_moderates
		custom_tooltip = nhs_hellenicconversion.disaster_siding_with_moderates.tt
	}

	option = { #Side with pagans (Lose stability)
		name = nhs_hcd_hellenicrevolt.1.a

		trigger = {
			check_variable = {
				which = HellenicUprising
				value = 13
			}
		}

		change_religion = elysian_hellenic
		set_country_flag = nhs_hcd_converted_to_hellenic

		set_ruler_religion = elysian_hellenic
		if = {
			limit = {
				has_heir = yes
			}
			set_heir_religion = elysian_hellenic
		}

		add_stability = -1

		add_country_modifier = {
			name= nhs_hcd_pagan_loyalty
			duration = 3650
		}

		custom_tooltip = nhs_hellenicconversion.disaster_siding_with_Pagans.tt
	}

	option = { #Side with church (Lose stability)
		name = nhs_hcd_hellenicrevolt.1.b
		trigger = {
			check_variable = {
				which = OrthodoxcUprising
				value = 13
			}
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}

		set_country_flag = nhs_hcd_supported_zealots

		add_stability = -1

		add_country_modifier = {
			name = nhs_hcd_church_loyalty 
			duration = 3650
		}

		custom_tooltip = nhs_hellenicconversion.disaster_siding_with_zealots.tt
	}
}

country_event = { #Disaster ends
	id = nhs_hcd_hellenicrevolt.100
	title = nhs_hcd_hellenicrevolt100.t
	desc = nhs_hcd_hellenicrevolt100.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = { #End the disaster
		name = nhs_hcd_hellenicrevolt.100.a

		add_stability = 1

		hidden_effect = {
			clr_country_flag = nhs_hcd_converted_to_hellenic
			clr_country_flag = nhs_hcd_supported_zealots
			clr_country_flag = nhs_hcd_supported_moderates
		}
	}
}

#################
#Periodic events#
#################

#Events for siding with zealots

country_event = { #Witch trials in province
	id = nhs_hcd_hellenicrevolt.21
	title = nhs_hcd_hellenicrevolt21.t
	desc = nhs_hcd_hellenicrevolt21.d
	picture = aow_WITCHBURNING_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
				random_list = {
					40 = {
						set_country_flag = nhs_hcd_hellenicrevolt_witchtrials_merchant
					}
					30 = {
						set_country_flag = nhs_hcd_hellenicrevolt_witchtrials_soldier
					}
					30 = {
						set_country_flag = nhs_hcd_hellenicrevolt_witchtrials_farmer
					}
				}
			    random_list = {
					40 = {
						set_country_flag = nhs_hcd_hellenicrevolt_witchtrials_painter
					}
					40 = {
						set_country_flag = nhs_hcd_hellenicrevolt_witchtrials_poet
					}
					20 = {
						set_country_flag = nhs_hcd_hellenicrevolt_witchtrials_beggar
					}
				}
				random_owned_province = {
					limit = {
						is_city = yes
						NOT = {
							is_overseas = yes
						}
					}
					set_province_flag = nhs_hcd_hellenicrevolt_witchtrials
				}
		}
	}

	option = { #Burn the Merchant
		name = nhs_hcd_hellenicrevolt.21.aa

		trigger = {
			has_country_flag = nhs_hcd_hellenicrevolt_witchtrials_merchant
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}

		every_owned_province = {
			limit = {
				has_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			}
			add_unrest = 5
			clr_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			add_province_modifier = {
				name = nhs_hrv_merchant_death 
				duration = 31
			}
		}
	}

	option = { #Burn the Soldier
		name = nhs_hcd_hellenicrevolt.21.ab

		trigger = {
			has_country_flag = nhs_hcd_hellenicrevolt_witchtrials_soldier
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}

		every_owned_province = {
			limit = {
				has_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			}
			add_unrest = 3
			clr_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			add_province_modifier = {
				name = nhs_hrv_soldier_death 
				duration = 31
			}
		}
	}

	option = { #Burn the Farmer
		name = nhs_hcd_hellenicrevolt.21.ac

		trigger = {
			has_country_flag = nhs_hcd_hellenicrevolt_witchtrials_farmer
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}

		every_owned_province = {
			limit = {
				has_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			}
			add_unrest = 3
			clr_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			add_province_modifier = {
				name = nhs_hrv_farmer_death 
				duration = 31
			}
		}
	}

	option = { #Burn the painter
		name = nhs_hcd_hellenicrevolt.21.ba

		trigger = {
			has_country_flag = nhs_hcd_hellenicrevolt_witchtrials_painter
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}

		every_owned_province = {
			limit = {
				has_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			}
			add_unrest = 3
			clr_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			add_province_modifier = {
				name = nhs_hrv_painter_death 
				duration = 31
			}
		}
	}

	option = { #Burn the poet
		name = nhs_hcd_hellenicrevolt.21.bb

		trigger = {
			has_country_flag = nhs_hcd_hellenicrevolt_witchtrials_poet
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}

		every_owned_province = {
			limit = {
				has_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			}
			add_unrest = 3
			clr_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			add_province_modifier = {
				name = nhs_hrv_poet_death 
				duration = 31
			}
		}
	}

	option = { #Burn the beggar
		name = nhs_hcd_hellenicrevolt.21.bc

		trigger = {
			has_country_flag = nhs_hcd_hellenicrevolt_witchtrials_beggar
		}

		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}

		every_owned_province = {
			limit = {
				has_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			}
			add_unrest = 3
			clr_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			add_province_modifier = {
				name = nhs_hrv_beggar_death 
				duration = 31
			}
		}
	}

	option = { #Burning is too cruel
		name = nhs_hcd_hellenicrevolt.21.c

		random_owned_province = {
			limit = {
				has_province_flag = nhs_hcd_hellenicrevolt_witchtrials
			}
			spawn_rebels = {
				size = 1
				type = orthodox_rebels
			}
			clr_province_flag = nhs_hcd_hellenicrevolt_witchtrials
		}
	}

	after = {
		
			clr_country_flag = nhs_hcd_hellenicrevolt_witchtrials_beggar
			clr_country_flag  = nhs_hcd_hellenicrevolt_witchtrials_merchant
			clr_country_flag  = nhs_hcd_hellenicrevolt_witchtrials_soldier
			clr_country_flag  = nhs_hcd_hellenicrevolt_witchtrials_painter
			clr_country_flag  = nhs_hcd_hellenicrevolt_witchtrials_poet
			clr_country_flag  = nhs_hcd_hellenicrevolt_witchtrials_farmer
		every_owned_province = {
			clr_province_flag = nhs_hcd_hellenicrevolt_witchtrials
		}
	}
}

province_event = { #Iconocalstic fury in province
	
}

province_event = { #Seizure of pagan property
	
}

country_event = { #Pagan farmers revolt {UNIQUE}
	
}

province_event = { #Pagans rise up in a province
	
}

province_event = { #Zealots crucify merchant family {UNIQUE}
	
}

#Events for siding with pagans

country_event = {
	
}

#Events for siding with nobody

country_event = {
	
}