namespace = nhs2_religionevents

# Deification of Emperors
country_event = {	
	id = nhs2_religionevents.1
	title = nhs2_religionevents1.t
	desc = nhs2_religionevents1.d
	picture = OLYMPIANS_eventPicture

    trigger = {
		OR = {
			religion = pantheon_worship
			religion = aztlan_worship
		}
		NOT = { has_country_modifier = nhs_deification_of_emperors }
		NOT = { has_country_modifier = nhs_nope_deification_of_emperors }
		NOT = { has_ruler_modifier = nhs_deification_of_refused }
		has_country_modifier = nhs_high_priests
		government_rank = 3
		government = monarchy
	}

	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 0.90
			stability = 1
		}
		modifier = {
			factor = 0.90
			stability = 2
		}
		modifier = {
			factor = 0.90
			stability = 3
		}
		modifier = {
			factor = 0.9
			dip = 3
		}
		modifier = {
			factor = 0.9
			mil = 3
		}
		modifier = {
			factor = 0.9
			adm = 3
		}
		modifier = {
			factor = 0.9
			dip = 4
		}
		modifier = {
			factor = 0.9
			mil = 4
		}
		modifier = {
			factor = 0.9
			adm = 4
		}
		modifier = {
			factor = 0.75
			dip = 5
		}
		modifier = {
			factor = 0.75
			mil = 5
		}
		modifier = {
			factor = 0.75
			adm = 5
		}
		modifier = {
			factor = 2
			has_country_modifier = nhs_consolidated_pantheon
		}
		modifier = {
			factor = 0.5
			has_country_modifier = nhs_expanded_pantheon
		}
	}

	option = {	
		name = "nhs2_religionevents1.a"
		add_years_of_income = -1
		add_legitimacy = 10
		add_dip_power = -50
		add_country_modifier = {
			name = nhs_deification_of_emperors
			duration = -1
		}	
	}	
	option = {	
		name = "nhs2_religionevents1.b"  #We are not the gods
		add_legitimacy = 5
		add_prestige = 20
		add_country_modifier = {
			name = nhs_nope_deification_of_emperors
			duration = -1
		}	
	}
	
	option = {
		name = "nhs2_religionevents1.c"
		add_prestige = 10
		custom_tooltip = nhs2_deification
		hidden_effect = {
			add_ruler_modifier = {
				name = nhs_deification_of_refused
				hidden = yes
			}
		}
	}
}

# Religion spread - Pantheon
country_event = {
	id = nhs2_religionevents.2
	title = nhs2_religionevents2.t
	desc = nhs2_religionevents2.d
	picture = OLYMPIANS_eventPicture

    trigger = {
		religion = totemism
		NOT = { tag = CAO }
		OR = {
			is_year = 1500
			capital_scope = { religion = pantheon_worship }
		}
		OR = {
			NOT = { num_of_cities = 4 }
			num_of_religion = { religion = pantheon_worship value = 2 }
		}
		OR = {
			technology_group = hellenised_american
			any_owned_province = {
				religion = pantheon_worship
			}
		}
		any_neighbor_country = {
			OR = {
				technology_group = exiled_greek
				technology_group = modern_greek
			}
			religion = pantheon_worship
		}
	}

	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.90
			stability = 1
		}
		modifier = {
			factor = 0.90
			stability = 2
		}
		modifier = {
			factor = 0.90
			stability = 3
		}
		modifier = {
			factor = 2
			any_known_country = {
				has_country_modifier = nhs_consolidated_pantheon
			}
		}
		modifier = {
			factor = 0.5
			any_known_country = {
				has_country_modifier = nhs_expanded_pantheon
			}
		}
		modifier = {
			factor = 10
			has_country_flag = nhs_religion_spread_pantheon
		}
		modifier = {
			factor = 0.00001
			capital_scope = { religion = pantheon_worship }
		}
	}
	
	immediate = {
		set_country_flag = nhs_religion_spread_pantheon
	}

	option = {	 # Accept
		ai_chance = {
			factor = 75
		}
		name = "nhs2_religionevents2.a"
		add_legitimacy = -10
		change_religion = pantheon_worship
		set_global_flag = nhs_native_deity
		if = {
			limit = {
				any_owned_province = {
					religion = totemism
				}
			}
			random_owned_province = {
				limit = {
					religion = totemism
				}
				change_religion = pantheon_worship
			}
		}
	}
	
	option = {	
		name = "nhs2_religionevents2.b"  #Decline
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				capital_scope = { religion = pantheon_worship }
			}
		}
		add_legitimacy = 5
		add_prestige = 10
	}
}

# Religion spread - Orthodox
country_event = {	
	id = nhs2_religionevents.3
	title = nhs2_religionevents3.t
	desc = nhs2_religionevents3.d
	picture = PANTHEON_eventPicture

    trigger = {
		is_year = 1470
		religion = totemism
		NOT = { tag = CAO }
		OR = {
			is_year = 1500
			capital_scope = { religion = elysian_orthodoxy }
		}
		OR = {
			NOT = { num_of_cities = 4 }
			num_of_religion = { religion = elysian_orthodoxy value = 3 }
		}
		any_known_country = {
			OR = {
				technology_group = exiled_greek
				technology_group = modern_greek
			}
			religion = elysian_orthodoxy
		}
		OR = {
			technology_group = hellenised_american
			any_owned_province = {
				religion = elysian_orthodoxy
			}
		}
	}

	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.90
			stability = 1
		}
		modifier = {
			factor = 0.90
			stability = 2
		}
		modifier = {
			factor = 0.90
			stability = 3
		}
		modifier = {
			factor = 10
			has_country_flag = nhs_religion_spread_orthodox
		}
		modifier = {
			factor = 0.00001
			capital_scope = { religion = elysian_orthodoxy }
		}
	}
	
	immediate = {
		set_country_flag = nhs_religion_spread_orthodox
	}

	option = {	 # Accept
		name = "nhs2_religionevents3.a"
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.1
				NOT = { stability = 1 }
			}
			modifier = {
				factor = 10
				capital_scope = { religion = elysian_orthodoxy }
			}
		}
		add_stability = -2
		add_legitimacy = -10
		change_religion = elysian_orthodoxy
		if = {
			limit = {
				any_owned_province = {
					religion_group = pagan
				}
			}
			random_owned_province = {
				limit = {
					religion_group = pagan
				}
				change_religion = elysian_orthodoxy
			}
		}
	}
	
	option = {
		name = "nhs2_religionevents3.b"  #Decline
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				capital_scope = { religion = elysian_orthodoxy }
			}
		}
		random_owned_province = {
			limit = {
				religion = elysian_orthodoxy
			}
			add_unrest = 5
		}
		if = {
			limit = {
				capital_scope = {
					religion = elysian_orthodoxy
				}
			}
			capital_scope = {
				change_religion = elysian_orthodoxy
			}
		}	
		add_legitimacy = 5
		add_prestige = 10	
	}
}

# Missionaries native pantheon
country_event = {
	id = nhs2_religionevents.6
	title = nhs2_religionevents6.t
	desc = nhs2_religionevents6.d
	picture = OLYMPIANS_eventPicture

    is_triggered_only = yes
	
	option = {	 # Accept
		ai_chance = {
			factor = 80
			modifier = {
				factor = 1.25
				alliance_with = FROM
			}
			modifier = {
				factor = 1.1
				stability = 1
			}
			modifier = {
				factor = 1.1
				stability = 2
			}
			modifier = {
				factor = 1.1
				stability = 3
			}
			modifier = {
				factor = 1.25
				FROM = {
					has_opinion = { who = ROOT value = 150 }
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					has_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 0.2
				FROM = {
					NOT = {
						has_opinion = { who = ROOT value = 0 }
					}
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					NOT = {
						has_opinion = { who = ROOT value = -100 }
					}
				}
			}
			modifier = {
				factor = 2
				technology_group = hellenised_american
			}
			modifier = {
				factor = 0.5
				FROM = {
					has_country_modifier = nhs_consolidated_pantheon
				}
			}
			modifier = {
				factor = 1.2
				FROM = {
					has_country_modifier = nhs_expanded_pantheon
				}
			}
		}
		name = "nhs2_religionevents6.a"
		reverse_add_opinion = { who = FROM modifier = nhs_o_embraced_new_religion }
		add_opinion = { who = FROM modifier = nhs_o_embraced_new_religion }
		if = {
			limit = {
				any_owned_province = {
					NOT = { religion = pantheon_worship }
					is_capital = no
				}
			}
			random_owned_province = {
				limit = {
					NOT = { religion = pantheon_worship }
					is_capital = no
				}
				change_religion = pantheon_worship
				add_permanent_province_modifier = {
					name = "religious_zeal_at_conv"
					duration = 7300
				}
			}
		}
		if = {
			limit = {
				NOT = {
					any_owned_province = {
						NOT = { religion = pantheon_worship }
						is_capital = no
					}
				}
			}
			capital_scope = {
				change_religion = pantheon_worship
			}
		}
		if = {
			limit = {
				NOT = { num_of_cities = 2 }
			}
			country_event = { id = nhs2_religionevents.2 }
		}
		FROM = {
			country_event = { id = nhs2_religionevents.7 days = 30 }
		}
	}
	
	option = {	
		name = "nhs2_religionevents6.b"  #Decline
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.75
				alliance_with = FROM
			}
			modifier = {
				factor = 0.9
				FROM = {
					has_opinion = { who = ROOT value = 150 }
				}
			}
			modifier = {
				factor = 0.9
				FROM = {
					has_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 0.9
				FROM = {
					NOT = {
						has_opinion = { who = ROOT value = 100 }
					}
				}
			}
			modifier = {
				factor = 1.2
				FROM = {
					NOT = {
						has_opinion = { who = ROOT value = 0 }
					}
				}
			}
			modifier = {
				factor = 10
				FROM = {
					NOT = {
						has_opinion = { who = ROOT value = -100 }
					}
				}
			}
			modifier = {
				factor = 2
				NOT = { stability = 0 }
			}	
		}
		add_legitimacy = 5
		add_prestige = 10
		FROM = {
			country_event = { id = nhs2_religionevents.8 days = 30 }
			
		}
	}
}

# Missionaries get back + pantheon
country_event = {
	id = nhs2_religionevents.7
	title = nhs2_religionevents7.t
	desc = nhs2_religionevents7.d
	picture = OLYMPIANS_eventPicture

    is_triggered_only = yes

	option = {
		name = "nhs2_religionevents7.a"
		add_prestige = 10	
	}
}

# Missionaries get back - pantheon
country_event = {
	id = nhs2_religionevents.8
	title = nhs2_religionevents8.t
	desc = nhs2_religionevents8.d
	picture = PANTHEON_eventPicture

    is_triggered_only = yes

	option = {
		name = "nhs2_religionevents8.a"
		add_prestige = -10
	}
}

# Missionaries native orthodox
country_event = {
	id = nhs2_religionevents.10
	title = nhs2_religionevents10.t
	desc = nhs2_religionevents10.d
	picture = PANTHEON_eventPicture

    is_triggered_only = yes

	option = {	 # Accept
		ai_chance = {
			factor = 80
			modifier = {
				factor = 1.1
				alliance_with = FROM
			}
			modifier = {
				factor = 1.1
				stability = 1
			}
			modifier = {
				factor = 1.1
				stability = 2
			}
			modifier = {
				factor = 1.1
				stability = 3
			}
			modifier = {
				factor = 1.1
				FROM = {
					has_opinion = { who = ROOT value = 150 }
				}
			}
			modifier = {
				factor = 1.1
				FROM = {
					has_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						has_opinion = { who = ROOT value = 0 }
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						has_opinion = { who = ROOT value = -100 }
					}
				}
			}
			modifier = {
				factor = 1.2
				technology_group = hellenised_american
			}
			modifier = {
				factor = 0
				any_known_country = {
					has_country_flag = nhs_allows_to_enslave
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					num_of_cities = 20
				}
			}
			modifier = {
				factor = 2
				FROM = {
					num_of_cities = 30
				}
			}
		}
		name = "nhs2_religionevents10.a"
		add_legitimacy = -10
		reverse_add_opinion = { who = FROM modifier = nhs_o_embraced_new_religion }
		add_opinion = { who = FROM modifier = nhs_o_embraced_new_religion }
		if = {
			limit = {
				any_owned_province = {
					NOT = { religion = elysian_orthodoxy }
					is_capital = no
				}
			}
			random_owned_province = {
				limit = {
					NOT = { religion = elysian_orthodoxy }
					is_capital = no
				}
				change_religion = elysian_orthodoxy
				add_permanent_province_modifier = {
					name = "religious_zeal_at_conv"
					duration = 7300
				}
			}
		}
		if = {
			limit = {
				NOT = {
					any_owned_province = {
						NOT = { religion = elysian_orthodoxy }
						is_capital = no
					}
				}
			}
			capital_scope = {
				change_religion = elysian_orthodoxy
			}
		}
		every_owned_province = {
			limit = {
				religion = totemism
			}
			add_unrest = 2
		}
		FROM = {
			country_event = { id = nhs2_religionevents.11 days = 30 }
		}
	}
	
	option = {	
		name = "nhs2_religionevents10.b"  #Decline
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.8
				alliance_with = FROM
			}
			modifier = {
				factor = 0.9
				FROM = {
					has_opinion = { who = ROOT value = 150 }
				}
			}
			modifier = {
				factor = 0.9
				FROM = {
					has_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 0.9
				FROM = {
					NOT = {
						has_opinion = { who = ROOT value = 100 }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						has_opinion = { who = ROOT value = 0 }
					}
				}
			}
			modifier = {
				factor = 10
				FROM = {
					NOT = {
						has_opinion = { who = ROOT value = -100 }
					}
				}
			}
			modifier = {
				factor = 3
				NOT = { stability = 0 }
			}
			modifier = {
				factor = 0.9
				FROM = {
					num_of_cities = 20
				}
			}
			modifier = {
				factor = 0.8
				FROM = {
					num_of_cities = 30
				}
			}
		}
		add_legitimacy = 5
		add_prestige = 10
		FROM = { 
			country_event = { id = nhs2_religionevents.12 days = 30 }
		}
	}
}

# Missionaries get back + orthodox
country_event = {	
	id = nhs2_religionevents.11
	title = nhs2_religionevents11.t
	desc = nhs2_religionevents11.d
	picture = PANTHEON_eventPicture

	is_triggered_only = yes

	option = {
		name = "nhs2_religionevents11.a"
		add_prestige = 10
		add_patriarch_authority = 0.05
	}
}

# Missionaries get back - orthodox
country_event = {
	id = nhs2_religionevents.12
	title = nhs2_religionevents12.t
	desc = nhs2_religionevents12.d
	picture = PANTHEON_eventPicture

    is_triggered_only = yes

	option = {
		name = "nhs2_religionevents12.a"
		add_prestige = -10
		add_patriarch_authority = -0.01
	}
}

# Establish High Priests for others
country_event = {	
	id = nhs2_religionevents.13
	title = nhs2_religionevents13.t
	desc = nhs2_religionevents13.d
	picture = OLYMPIANS_eventPicture

    trigger = {
		is_year = 1480
		religion = pantheon_worship
		stability = 0
		any_known_country = {
			has_country_modifier = nhs_high_priests
		}
		NOT = {
			nhs_condition_all_ely = { KOMANDA = tag }
		}
		NOT = { has_country_modifier = nhs_high_priests }
	}

	mean_time_to_happen = {
		months = 10
		modifier = {
			factor = 0.75
			stability = 1
		}
		modifier = {
			factor = 0.75
			stability = 2
		}
		modifier = {
			factor = 0.75
			stability = 3
		}
		modifier = {
			factor = 0.75
			dip = 3
		}
		modifier = {
			factor = 0.75
			dip = 4
		}
		modifier = {
			factor = 0.75
			dip = 5
		}
		modifier = {
			factor = 0.75
			dip = 6
		}
		modifier = {
			factor = 0.75
			is_at_war = no
		}
	}

	option = {	
		name = "nhs2_religionevents13.a"
		ai_chance = { factor = 100 }
		add_dip_power = -25
		add_country_modifier = {
			name = nhs_high_priests
			duration = -1
		}
	}
}

# Heralds for Elysians
country_event = {	
	id = nhs2_religionevents.14
	title = nhs2_religionevents14.t
	desc = nhs2_religionevents14.d
	picture = PANTHEON_eventPicture

    trigger = {
		OR = {
			nhs_condition_all_ely = { KOMANDA = tag }
			AND = {
				nhs_check_all_spartan = { CONDITION = tag }
				NOT = { nhs_condition_all_ely = { KOMANDA = exists } }
			}
			AND = {
				NOT = { nhs_condition_all_ely = { KOMANDA = exists } }
				NOT = { nhs_check_all_spartan = { CONDITION = exists } }
			}
		}
		has_country_modifier = nhs_high_priests
		NOT = { has_global_flag = nhs_heralds_enabled }
		religion = pantheon_worship
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {	
		name = "nhs2_religionevents14.a"
		set_global_flag = nhs_heralds_enabled
		set_country_flag = nhs_heralds_enabledc
		set_country_flag = nhs_heralds_bonus
		if = {
			limit = {
				has_dlc = "The Cossacks"
			}
			custom_tooltip = nhs_herald_estates_t
		}
		if = {
			limit = {
				religion = pantheon_worship
			}
			custom_tooltip = nhs_enable_heralds_dispatch_tt
		}
	}
}

# Heralds for others
country_event = {
	id = nhs2_religionevents.15
	title = nhs2_religionevents15.t
	desc = nhs2_religionevents15.d
	picture = PANTHEON_eventPicture

    trigger = {
		NOT = { has_dlc = "The Cossacks" }
		religion = pantheon_worship
		NOT = {
			nhs_condition_all_ely = { KOMANDA = tag }
		}
		has_global_flag = nhs_heralds_enabled
		NOT = { has_country_flag = nhs_heralds_enabledc }
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {	
		name = "nhs2_religionevents15.a"
		set_country_flag = nhs_heralds_enabledc
		if = {
			limit = {
				has_dlc = "The Cossacks"
			}
			custom_tooltip = nhs_herald_estates_t
		}
		if = {
			limit = {
				religion = pantheon_worship
			}
			custom_tooltip = nhs_enable_heralds_dispatch_tt
		}
	}	

}

# Establish High Priests for Aztlan (not sparta, since it already gets it)
country_event = {
	id = nhs2_religionevents.16
	title = nhs2_religionevents16.t
	desc = nhs2_religionevents16.d
	picture = OLYMPIANS_eventPicture

    trigger = {
		is_year = 1480
		religion = aztlan_worship
		stability = 0
		any_known_country = {
			religion = aztlan_worship
			has_country_modifier = nhs_high_priests
		}
		NOT = { nhs_check_all_spartan = { CONDITION = tag } }
		NOT = { has_country_modifier = nhs_high_priests }
	}

	mean_time_to_happen = {
		months = 10
		modifier = {
			factor = 0.75
			stability = 1
		}
		modifier = {
			factor = 0.75
			stability = 2
		}
		modifier = {
			factor = 0.75
			stability = 3
		}
		modifier = {
			factor = 0.75
			dip = 3
		}
		modifier = {
			factor = 0.75
			dip = 4
		}
		modifier = {
			factor = 0.75
			dip = 5
		}
		modifier = {
			factor = 0.75
			dip = 6
		}
		modifier = {
			factor = 0.75
			is_at_war = no
		}
	}

	option = {
		name = "nhs2_religionevents16.a"
		ai_chance = { factor = 100 }
		add_dip_power = -25
		add_country_modifier = {
			name = nhs_high_priests
			duration = -1
		}
	}
}

# Choosing deity hellenic
country_event = {
	id = nhs2_religionevents.17
	title = nhs2_religionevents.17.t
	desc = nhs2_religionevents.17.d
	picture = OLYMPIANS_eventPicture

	trigger = {
		religion = pantheon_worship
		ai = no
		has_regency = no
		NOT = { has_dlc = "Wealth of Nations" }
		NOT = { has_personal_deity = Zeus }
		NOT = { has_personal_deity = hera }
		NOT = { has_personal_deity = Poseidon }
		NOT = { has_personal_deity = Hades }
		NOT = { has_personal_deity = Ares }
		NOT = { has_personal_deity = Athena }
		NOT = { has_personal_deity = Hermes }
		NOT = { has_personal_deity = Aphrodite }
		NOT = { has_country_flag = nhs_choosing_d }
	}

	immediate = {
		set_country_flag = nhs_choosing_d
	}

	option = {
		name = "nhs2_countryevents.21.a"
		change_personal_deity = Zeus
		custom_tooltip = nhs_zeus_tooltip
		clr_country_flag = nhs_choosing_d
	}
	option = {
		name = "nhs2_countryevents.21.b"
		change_personal_deity = hera
		custom_tooltip = nhs_hera_tooltip
		clr_country_flag = nhs_choosing_d
	}
	option = {
		name = "nhs2_countryevents.21.c"
		change_personal_deity = Poseidon
		custom_tooltip = nhs_poseidon_tooltip
		clr_country_flag = nhs_choosing_d
	}
	option = {
		name = "nhs2_countryevents.21.e"
		change_personal_deity = Hades
		custom_tooltip = nhs_hades_tooltip
		clr_country_flag = nhs_choosing_d
	}
	option = {
		name = "nhs2_countryevents.21.f"
		change_personal_deity = Ares
		custom_tooltip = nhs_ares_tooltip
		clr_country_flag = nhs_choosing_d
	}
	option = {
		name = "nhs2_countryevents.21.g"
		change_personal_deity = Athena
		custom_tooltip = nhs_athena_tooltip
		clr_country_flag = nhs_choosing_d
	}
	option = {
		name = "nhs2_countryevents.21.h"
		change_personal_deity = Hermes
		custom_tooltip = nhs_hermes_tooltip
		clr_country_flag = nhs_choosing_d
	}
	option = {
		name = "nhs2_countryevents.21.i"
		change_personal_deity = Aphrodite
		custom_tooltip = nhs_aphrodite_tooltip
		clr_country_flag = nhs_choosing_d
	}
	option = {
		name = "nhs2_countryevents.21.j"
		trigger = {
			OR = {
				tag = MSN
				has_country_flag = msg_spartan_hellenism
			}
			has_global_flag = msg_hellenic_leonidas_deity
		}
		change_personal_deity = Leonidas_2
		custom_tooltip = nhs_Leonidas_2_tooltip
		clr_country_flag = nhs_choosing_d
	}
	option = {
		name = "nhs2_countryevents.21.k"
		trigger = {
			OR = {
				tag = MSN
				has_country_flag = msg_spartan_hellenism
			}
			has_global_flag = msg_hellenic_ketsalon_deity
		}
		change_personal_deity = Ketsalon_2
		custom_tooltip = nhs_Ketsalon_2_tooltip
		clr_country_flag = nhs_choosing_d
	}
}