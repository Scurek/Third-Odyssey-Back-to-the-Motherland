#
# remember to add graphics for relevant ones when you add to this
#
# if a modifier is scaled, its multiplied with development in the province.


# any_friendly_coast_border_province is a special scope made for institution spread.
# It checks for adjacent provinces or provinces one seazone away.
# Friendly is defined as at positive relations or owned by the same country that owns the province.

#######################################
# Feudalism.  
# 
# Most in the old world start with it.
#######################################

feudalism = {
	penalty = 0.5
	bonus = {
		free_leader_pool = 1
	}

	trade_company_efficiency = 0.0

	history = {
		is_year = 1000
		owner = {
			OR = {
				NOT = {
					technology_group = viking
				}
				is_year = 1452
			}
		}
		OR = {
			AND = { #If this is changed costs for Nation Designer may also need to be changed.
				OR = {
					continent = new_world
					continent = north_america
					continent = south_america
					continent = oceania
				}
				owner = {
					is_playing_custom_nation = yes
					OR = {
						technology_group = western
						technology_group = eastern
						technology_group = ottoman
						technology_group = muslim
						technology_group = indian
						technology_group = chinese
						technology_group = exiled_greek
						technology_group = exiled_spartan
						technology_group = modern_greek
						technology_group = modern_spartan
						technology_group = modern_vinlandic
						technology_group = viking
						technology_group = hellenised_american
						#technology_group = high_american #Is listed below as High Americans get it regardless of if Nation Designer is used.
						#tag = PEQ
						#tag = XXP
						#tag = XXK
						#tag = AKW
						#tag = XXL
						#tag = XXM
						#tag = ABE
						#tag = IRO
						#tag = XXU
						#tag = XXR
						#tag = PIA
						#tag = SUS
						#tag = LEN
						#tag = CHE
						#tag = PNC
						#tag = SHA
						#tag = XXT
						#tag = HUR
						#tag = XXW
						#tag = POW
						#tag = XXS
						#tag = CRE
						#tag = XXY
					}
				}
			}
			AND = {
				owner = { is_playing_custom_nation = no }
				OR = {
					culture = persian
					culture = azerbaijani
					culture = kurdish
					culture = armenian
					culture = mazandarani
					culture = turkish
					culture = omani_culture
					culture = yemeni_culture
					culture = swahili
					culture = manchu
					culture_group = byzantine
					culture_group = dravidian
					culture_group = east_asian
					culture_group = east_slavic
					culture_group = eastern_aryan
					culture_group = japanese_g
					culture_group = korean_g
					culture_group = scandinavian
					culture_group = west_slavic
					culture_group = western_aryan
					province_id = 383
					province_id = 412
					province_id = 2327
					province_id = 2329
					province_id = 2331
					province_id = 2999
				}
			}
			AND = {
				region = horn_of_africa_region
				owner = { NOT = { has_reform = tribal_federation } }
			}
			AND = {
				culture = al_misr_arabic
				NOT = { area = libyan_desert_area }
				NOT = { area = cyrenaica_area }
			}
			AND = {
				culture_group = hindusthani
				NOT = { owner = { has_reform = tribal_kingdom } } #Ladakh
			}
			owner = { technology_group = high_american }
			owner = {
				NOT = {
					government = tribal
					government = native
					primary_culture = bedouin_arabic
					primary_culture = uyghur
					technology_group = andean
					technology_group = mesoamerican
					technology_group = north_american
					technology_group = south_american
					technology_group = sub_saharan
				}
			}
			AND = {
				is_year = 1600
				owner = {
					NOT = { has_reform = siberian_tribe }
					NOT = { has_reform = steppe_horde }
				}
			}
			is_year = 1700
		}
	}
	
	# no need for events, as its there from the start.
	#can_start = {	is_year = 1000	}
	#start_chance = 100
	#on_start = institution_events.1

	can_embrace = {
		NOT = { is_native_council = yes }
	}

	embracement_speed = {
		modifier = {
			factor = 0.6
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					has_country_modifier = nhs2_elysian_free_trade
				}
			}
			custom_trigger_tooltip = {
				tooltip = NHS_FREE_TRADE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					feudalism = 100
				}
			}
		}
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_small_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = SMALL_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					feudalism = 100
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					feudalism = 100
				}
			}
		}
		modifier = {
			factor = 1.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_large_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = LARGE_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_large_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					feudalism = 100
				}
			}
		}
		modifier = {
			factor = 1.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_european_enclave
			}
			custom_trigger_tooltip = {
				tooltip = EUROPEAN_ENCLAVE
				has_province_modifier = nhs2_european_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					feudalism = 100
				}
			}
		}
		modifier = {
			factor = 0.6
			scale = yes
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = {
					feudalism = 100
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						feudalism = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		modifier = {
			factor = 0.15
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_estate = estate_nobles }
			}
			custom_trigger_tooltip = {
				tooltip = FEUDALISM_AND_NOBLES
				any_neighbor_province = {
					feudalism = 100
				}
				owner = {
					has_estate = estate_nobles
					estate_loyalty = {
						estate = estate_nobles
						loyalty = 40
					}
				}
				has_estate = estate_nobles
			}
		}
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = PORT_OR_CAPITAL_IN_COLONY_FEUDAL
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = feudalism }
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				owner = { is_colonial_nation = no }
			}
			custom_trigger_tooltip = {
				tooltip = CAPITAL_IN_OLD_WORLD_FEUDAL
			
				is_capital = yes
				NOT = { continent = north_america }
				NOT = { continent = south_america }
				NOT = { continent = new_world }
				owner = {
					NOT = { government = tribal }
					NOT = { government = native }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = feudalism
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_feudalism_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = feudalism
				}
			}
		 }
		 modifier = {
			factor = 5
			potential = {
				owner = {
					technology_group = viking
					any_known_country = {
						OR = {
							nhs_is_elysia = yes
							technology_group = exiled_greek
							technology_group = modern_greek
						}
						any_owned_province = {
							is_capital = yes
							continent = north_america
						}
					}
				}
				OR = {
					owner = { NOT = { has_institution = feudalism } }
					region = canada_region
				}
			}
			custom_trigger_tooltip = {
				tooltip = NHS_ELYSIAN_INFLUENCES
				owner = {
					technology_group = viking
					any_known_country = {
						OR = {
							nhs_is_elysia = yes
							technology_group = exiled_greek
							technology_group = modern_greek
						}
						any_owned_province = {
							is_capital = yes
							continent = north_america
						}
					}
				}
				OR = {
					owner = { NOT = { has_institution = feudalism } }
					region = canada_region
				}
			}
		}
		modifier = {
			factor = 12
			potential = {
				OR = {
					has_province_flag = nhs_elysianism
					has_province_flag = nhs_elysianism_old
					has_province_flag = nhs_elysianism_new
				}
				owner = {
					OR = {
						technology_group = north_american
						technology_group = hellenised_american
						technology_group = mesoamerican
					}
					NOT = { has_institution = feudalism }
				}
				OR = {
					owner = { NOT = { has_institution = feudalism } }
					any_neighbor_province = {
						is_capital = yes
						owned_by = ROOT
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = NHS_WESTERN_INFLUENCES
				OR = {
					has_province_flag = nhs_elysianism
					has_province_flag = nhs_elysianism_old
					has_province_flag = nhs_elysianism_new
				}
				owner = {
					technology_group = north_american
					NOT = { has_institution = feudalism }
				}
				OR = {
					owner = { NOT = { has_institution = feudalism } }
					any_neighbor_province = {
						is_capital = yes
						owned_by = ROOT
					}
				}
			}
		}
	}

	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Renaissance
# 
# Flows from italy
#######################################

renaissance = {
	penalty = 0.5

	bonus = {
		development_cost = -0.05
		build_cost = -0.05
	}

	trade_company_efficiency = 0.0


	historical_start_date = 1450.1.1
	historical_start_province = 116 # Florence

	history = {
		OR = {
			AND = {
				is_year = 1450
				region = italy_region
			}
			
			AND = {
				is_year = 1450
				continent = europe
			}
			AND = {
				is_year = 1500
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1500
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1500
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
			AND = {
				is_year = 1600
				continent = asia
				owner = {
					NOT = { government = tribal }
				}
			}
			is_year = 1780
		}
	}
	
	can_start = {
		is_year = 1450
		region = italy_region
		is_state = yes
		NOT = { province_id = 126 }
		is_island = no
		OR = {
			development = 20
			is_capital = yes
			normal_or_historical_nations = no
		}
	}
	start_chance = 5		#in 100 for when a province can_start
	
	
	on_start = institution_events.2
	
	
	

	
	
	can_embrace = {
		owner = { has_institution = feudalism }
	}


	
	embracement_speed = {
		modifier = {
			factor = 0.6
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					has_country_modifier = nhs2_elysian_free_trade
				}
			}
			custom_trigger_tooltip = {
				tooltip = NHS_FREE_TRADE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					renaissance = 100
				}
			}
		}
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_small_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = SMALL_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					renaissance = 100
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					renaissance = 100
				}
			}
		}
		modifier = {
			factor = 1.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_large_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = LARGE_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_large_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					renaissance = 100
				}
			}
		}
		modifier = {
			factor = 1.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_european_enclave
			}
			custom_trigger_tooltip = {
				tooltip = EUROPEAN_ENCLAVE
				has_province_modifier = nhs2_european_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					renaissance = 100
				}
			}
		}
		modifier = {
			scale = yes
			factor = 0.6
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = {
					renaissance = 100
				}
			}
		}
		modifier = {
			factor = 0.3
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						renaissance = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		modifier = {
			factor = 1
			potential = {
				region = italy_region
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_italian_capital
				is_capital = yes
				region = italy_region
				culture_group = latin
			}
			
			
		}
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_development_10
				continent = europe
				development = 10
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_development_20
				development = 20
				continent = europe
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_development_5_post_1500
				continent = europe
				is_year = 1500
				development = 5
			}
		}
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				OR = {
					area = flanders_area
					area = tuscany_area
					area = venetia_area
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_flanders_tuscany_venetia
				OR = {
					area = flanders_area
					area = tuscany_area
					area = venetia_area
				}
			}
		}
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_renaissance
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = renaissance }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = renaissance
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_renaissance_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = renaissance
				}
			}
		}
		modifier = {
			factor = 20  #3 per month
			potential = {
				owner = {
					OR = {
						technology_group = modern_greek
						technology_group = modern_spartan
						technology_group = modern_vinlandic
					}
				}
				OR = {
					owner = { NOT = { has_institution = renaissance } }
					any_neighbor_province = {
						is_capital = yes
						owned_by = ROOT
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = NHS_MODERNISATION_TT
				owner = {
					OR = {
						technology_group = modern_greek
						technology_group = modern_spartan
						technology_group = modern_vinlandic
					}
				}
				OR = {
					owner = { NOT = { has_institution = renaissance } }
					any_neighbor_province = {
						is_capital = yes
						owned_by = ROOT
					}
				}
			}
		}
	}

	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}


#######################################
# New World
#
# Colonising is good.. mkay.-.
#######################################
new_world_i = {
	penalty = 0.5

	bonus = {
		global_prov_trade_power_modifier = 0.10
	}

	trade_company_efficiency = 0.0

	historical_start_date = 1520.1.1
	historical_start_province = 224 #Sevilla

	history = {
		OR = {
			AND = {
				is_year = 1520
				continent = europe
				OR = {
					owner = { has_idea = quest_for_the_new_world }
					owner = { colony = 1 }
				}
			}
			AND = {
				is_year = 1550
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1550
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1550
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
			AND = {
				is_year = 1600
				superregion = near_east_superregion
			}
			AND = {
				is_year = 1600
				continent = europe
			}
			AND = {
				is_year = 1625
				superregion = persia_superregion
			}
			AND = {
				is_year = 1650
				superregion = india_superregion
			}
			
			
			AND = {
				is_year = 1650
				superregion = china_superregion
			}
			
			AND = {
				is_year = 1650
				superregion = east_indies_superregion
			}
			AND = {
				is_year = 1700
				superregion = africa_superregion
			}
			is_year = 1800
		}
	}

	can_start = {
		OR = {
			custom_trigger_tooltip = {
				tooltip = nhs_has_nhs_europe_discovered
				has_global_flag = nhs_europe_discovered
			}
			is_year = 1535
		}
		continent = europe
		has_port = yes
		is_island = no
		is_state = yes
		is_in_capital_area = yes
		OR = {
			province_has_center_of_trade_of_level = 1
			development = 12
			is_capital = yes
		}
		owner = {
			has_idea = quest_for_the_new_world
			capital_scope = { continent = europe }
		}
	}
	start_chance = 5		#in 100 for when a province can_start
	
	
	on_start = institution_events.3
	
	
	

	
	
	can_embrace = {
		always = yes
	}



	embracement_speed = {
		modifier = {
			factor = 0.6
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					has_country_modifier = nhs2_elysian_free_trade
				}
			}
			custom_trigger_tooltip = {
				tooltip = NHS_FREE_TRADE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					new_world_i = 100
				}
			}
		}
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_small_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = SMALL_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					new_world_i = 100
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					new_world_i = 100
				}
			}
		}
		modifier = {
			factor = 1.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_large_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = LARGE_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_large_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					new_world_i = 100
				}
			}
		}
		modifier = {
			factor = 1.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_european_enclave
			}
			custom_trigger_tooltip = {
				tooltip = EUROPEAN_ENCLAVE
				has_province_modifier = nhs2_european_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					new_world_i = 100
				}
			}
		}

		modifier = {
			factor = 1.2
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = {
					new_world_i = 100
				}
			}
			
		}
		
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				has_port = yes
				NOT = {
					any_friendly_coast_border_province = {
						new_world_i = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_new_world
				has_port = yes
				any_neighbor_province = {
					new_world_i = 100
				}
			}
		}
		
		#Port provinces in countries with colonial subjects
		modifier = {
			factor = 10
			potential = {
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					capital_scope = {
						NOT = { continent = north_america }
						NOT = { continent = south_america }
						NOT = { continent = new_world }
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_colonial_subject_in_new_world
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					colony = 1
					any_subject_country = {
						is_colonial_nation = yes
						OR = {
							capital_scope = { continent = north_america }
							capital_scope = { continent = south_america }
							capital_scope = { continent = new_world }
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_new_world_i
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = new_world_i }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = new_world_i
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_new_world_i_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = new_world_i
				}
			}
		}
		modifier = {
			factor = 30
			potential = {
				owner = {
					OR = {
						technology_group = modern_greek
						AND = {
							technology_group = modern_spartan
							NOT = { has_country_modifier = nhs_msg_handicap_settlers }
						}
						technology_group = viking
						technology_group = modern_vinlandic
					}
				}
				OR = {
					has_port = yes
					is_capital = yes
					owner = {
						OR = {
							technology_group = viking
							technology_group = modern_vinlandic
						}
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = nhs_colonial_ambitions_tt
				owner = {
					OR = {
						technology_group = modern_greek
						AND = {
							technology_group = modern_spartan
							NOT = { has_country_modifier = nhs_msg_handicap_settlers }
						}
						technology_group = viking
						technology_group = modern_vinlandic
					}
				}
				OR = {
					has_port = yes
					is_capital = yes
					owner = {
						OR = {
							technology_group = viking
							technology_group = modern_vinlandic
						}
					}
				}
			}
		}
		modifier = {
			factor = 15    #1.5
			potential = {
				owner = {
					OR = {
						technology_group = modern_greek
						AND = {
							technology_group = modern_spartan
							NOT = { has_country_modifier = nhs_msg_handicap_settlers }
						}
					}
				}
				NOT = {
					OR = {
						has_port = yes
						is_capital = yes
					}
				}
				any_neighbor_province = {
					new_world_i = 100
				}
			}
			custom_trigger_tooltip = {
				tooltip = nhs_colonial_ambitions_tt
				owner = {
					OR = {
						technology_group = modern_greek
						AND = {
							technology_group = modern_spartan
							NOT = { has_country_modifier = nhs_msg_handicap_settlers }
						}
					}
				}
				NOT = {
					OR = {
						has_port = yes
						is_capital = yes
					}
				}
				any_neighbor_province = {
					new_world_i = 100
				}
			}
		}
	}

	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}



#######################################
# Printing Press
#######################################
printing_press = {
	penalty = 0.5

	bonus = {
		stability_cost_modifier = -0.05
	}

	trade_company_efficiency = 0.0

	historical_start_date = 1550.1.1
	historical_start_province = 1876 #Frankfurt

	history = {
		OR = {
			AND = {
				province_id = 1876
				is_year = 1550
			}
			AND = {
				is_year = 1560
				OR = {
					religion = protestant
					religion = reformed
					region = italy_region
					region = france_region
				}
			}
			AND = {
				is_year = 1575
				continent = europe
				development = 12
			}
			AND = {
				is_year = 1600
				continent = europe
			}
			AND = {
				is_year = 1600
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1600
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1600
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
			AND = {
				is_year = 1625
				superregion = near_east_superregion
			}
			AND = {
				is_year = 1650
				superregion = persia_superregion
			}
			AND = {
				is_year = 1725
				superregion = china_superregion
			}
			AND = {
				is_year = 1725
				superregion = india_superregion
			}
			AND = {
				is_year = 1725
				superregion = east_indies_superregion
			}
		}
	}
	
	can_start = {
		is_year = 1550
		is_in_capital_area = yes
		is_island = no
		is_state = yes
		OR = {
			development = 15
			is_capital = yes
			trade_goods = paper
		}
		OR = {
			religion = protestant
			religion = reformed
			region = north_german_region
			region = south_german_region
		}

	}
	start_chance = 5		#in 100 for when a province can_start
	
	
	on_start = institution_events.4
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
		modifier = {
			factor = 0.6
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					has_country_modifier = nhs2_elysian_free_trade
				}
			}
			custom_trigger_tooltip = {
				tooltip = NHS_FREE_TRADE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					printing_press = 100
				}
			}
		}
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_small_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = SMALL_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					printing_press = 100
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					printing_press = 100
				}
			}
		}
		modifier = {
			factor = 1.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_large_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = LARGE_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_large_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					printing_press = 100
				}
			}
		}
		modifier = {
			factor = 1.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_european_enclave
			}
			custom_trigger_tooltip = {
				tooltip = EUROPEAN_ENCLAVE
				has_province_modifier = nhs2_european_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					printing_press = 100
				}
			}
		}

		modifier = {
			factor = 0.6
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = {
					printing_press = 100
				}
			}
		}
		
		modifier = {
			factor = 0.2
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						printing_press = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_estate = estate_church }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_printing_press_clergy
				any_neighbor_province = {
					printing_press = 100
				}
				owner = {
					has_estate = estate_church
					estate_loyalty = {
						estate = estate_church
						loyalty = 40
					}
				}
				has_estate = estate_church
			}
		}
		modifier = {
			factor = 1
			custom_trigger_tooltip = {
				tooltip = tooltip_dip_tech15_capital
				is_capital = yes
				owner = {
					dip_tech = 15
				}
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_development_20_capital
				development = 20
				is_capital = yes
				continent = europe
			}
		}
		modifier = {
			factor = 2
			potential = {
				owner = {
					religion_group = christian
				}
			}
			if = {
				limit = { has_dlc = "Rule Britannia" }
				custom_trigger_tooltip = {
					tooltip = tooltip_owner_protestant
					is_owned_by_trade_company = no
					owner = {
						OR = {
							religion = protestant
							religion = reformed
							religion = anglican
						}
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = tooltip_owner_protestant
					is_owned_by_trade_company = no
					owner = {
						OR = {
							religion = protestant
							religion = reformed
							religion = anglican
						}
					}
				}
			}
		}
		modifier = {
			factor = 1
			if = {
				limit = {
					has_dlc = "Rule Britannia"
				}
				custom_trigger_tooltip = {
					tooltip = tooltip_province_protestant_RB
					OR = {
						religion = reformed
						religion = protestant
						religion = anglican
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = tooltip_province_protestant
					OR = {
						religion = reformed
						religion = protestant
						religion = anglican
					}
				}
			}
		}
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_printing_press
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = printing_press }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = printing_press
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_printing_press_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = printing_press
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}





#######################################
# Global Trade
#######################################
global_trade = {
	penalty = 0.5

	bonus = {
		merchants = 1
	}

	trade_company_efficiency = 0.1

	historical_start_date = 1600.1.1
	historical_start_province = 97 #Holland

	history = {
		OR = {
			AND = {
				is_year = 1620
				continent = europe
				owner = { technology_group = western }
			}
			
			AND = {
				is_year = 1660
				continent = europe
			}	
			AND = {
				is_year = 1660
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1660
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1660
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
			AND = {
				is_year = 1700
				is_capital = no
				OR = {
					region = maghreb_region
					region = egypt_region
					superregion = near_east_superregion
				}
			}
			
			AND = {
				is_year = 1720
				has_port = yes
				is_capital = no
				OR = {
					superregion = india_superregion
					superregion = persia_superregion
					superregion = east_indies_superregion
				}
			}
			AND = {
				is_year = 1750
				has_port = yes
				is_capital = no
				superregion = africa_superregion
			}
		}
	}
	
	can_start = {
		is_year = 1600
		is_island = no
		highest_value_trade_node = yes
		OR = {
			province_has_center_of_trade_of_level = 3
			province_has_center_of_trade_of_level = 2
			is_capital = yes
		}
		owner = {
			any_active_trade_node = {
				is_strongest_trade_power = PREV
				highest_value_trade_node = yes
			}
		}

	}
	start_chance = 25		#in 100 for when a province can_start
	
	
	on_start = institution_events.5
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
		modifier = {
			factor = 0.6
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					has_country_modifier = nhs2_elysian_free_trade
				}
			}
			custom_trigger_tooltip = {
				tooltip = NHS_FREE_TRADE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					global_trade = 100
				}
			}
		}
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_small_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = SMALL_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					global_trade = 100
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					global_trade = 100
				}
			}
		}
		modifier = {
			factor = 1.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_large_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = LARGE_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_large_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					global_trade = 100
				}
			}
		}
		modifier = {
			factor = 1.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_european_enclave
			}
			custom_trigger_tooltip = {
				tooltip = EUROPEAN_ENCLAVE
				has_province_modifier = nhs2_european_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					global_trade = 100
				}
			}
		}

		modifier = {
			factor = 0.4 #Not scaled
			province_trade_power = 15
		}
		modifier = {
			factor = 0.8 #Not Scaled
			province_trade_power = 25
		}
		modifier = {
			factor = 1.2 #Not Scaled
			province_trade_power = 35
		}
		modifier = {
			factor = 1.6 #Not Scaled
			province_trade_power = 45
		}
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				province_has_center_of_trade_of_level = 3
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_center_of_trade_spread
				OR = {
					province_has_center_of_trade_of_level = 3
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				OR = {
					province_has_center_of_trade_of_level = 1
					province_has_center_of_trade_of_level = 2
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_center_of_trade_spread
				OR = {
					province_has_center_of_trade_of_level = 2
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_estate = estate_burghers }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_global_trade_burghers
				any_neighbor_province = {
					global_trade = 100
				}
				owner = {
					has_estate = estate_burghers
					estate_loyalty = {
						estate = estate_burghers
						loyalty = 40
					}
				}
				has_estate = estate_burghers
			}
		}

		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				has_port = no
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				has_port = no
				any_neighbor_province = {
					global_trade = 100
					
				}
			}
		}
		
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				has_port = yes
				any_neighbor_province = {
					global_trade = 100
					
				}
			}
		}
		
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_global_trade
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = global_trade }
				}
			}
		}
		
		modifier = {
			factor = 0.5
			printing_press = 100
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = global_trade
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_global_trade_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = global_trade
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}


#######################################
# Manufactories
#######################################
manufactories = {
	penalty = 0.5

	bonus = {
		global_trade_goods_size_modifier = 0.1
	}

	trade_company_efficiency = 0.2

	historical_start_date = 1650.1.1
	historical_start_province = 183 #Paris

	history = {
		OR = {
			AND = {
				is_year = 1680
				continent = europe
				owner = { technology_group = western }
			}
			
			AND = {
				is_year = 1720
				continent = europe
			}	
			AND = {
				is_year = 1750
				superregion = china_superregion
			}
			AND = {
				is_year = 1750
				superregion = india_superregion
			}
			AND = {
				is_year = 1750
				superregion = near_east_superregion
			}
			AND = {
				is_year = 1750
				region = maghreb_region
			}
			AND = {
				is_year = 1750
				region = egypt_region
			}
			AND = {
				is_year = 1760
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1760
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1760
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
			
			AND = {
				is_year = 1780
				superregion = persia_superregion
			}
			
		}
	}
	
	can_start = {
		is_year = 1650
		is_in_capital_area = yes
		is_island = no
		is_state = yes
		development = 20
		printing_press = 100
		global_trade = 100
		OR = {
			has_building = wharf
			has_building = weapons
			has_building = textile
			has_building = plantations
			has_building = tradecompany
			has_building = mills
		}
	}
	start_chance = 10		#in 100 for when a province can_start
	
	
	on_start = institution_events.6
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
		modifier = {
			factor = 0.6
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					has_country_modifier = nhs2_elysian_free_trade
				}
			}
			custom_trigger_tooltip = {
				tooltip = NHS_FREE_TRADE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					manufactories = 100
				}
			}
		}
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_small_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = SMALL_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					manufactories = 100
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					manufactories = 100
				}
			}
		}
		modifier = {
			factor = 1.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_large_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = LARGE_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_large_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					manufactories = 100
				}
			}
		}
		modifier = {
			factor = 1.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_european_enclave
			}
			custom_trigger_tooltip = {
				tooltip = EUROPEAN_ENCLAVE
				has_province_modifier = nhs2_european_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					manufactories = 100
				}
			}
		}
		modifier = {
			factor = 0.35
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = {
					manufactories = 100
				}
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						manufactories = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = naval_supplies
					trade_goods = fish
					trade_goods = salt
					trade_goods = whaling
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_wharf_on_institution_continent
				has_building = wharf
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = copper
					trade_goods = iron
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_weapons_on_institution_continent
				has_building = weapons
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = wool
					trade_goods = cloth
					trade_goods = silk
					trade_goods = dyes
					trade_goods = elysian_silk
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_textile_on_institution_continent
				has_building = textile
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = coffee
					trade_goods = cotton
					trade_goods = sugar
					trade_goods = tobacco
					trade_goods = tea
					trade_goods = cocoa
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_plantations_on_institution_continent
				has_building = plantations
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = ivory
					trade_goods = slaves
					trade_goods = spices
					trade_goods = fur
					trade_goods = incense
					trade_goods = seal_hunting
				}
			}
			has_building = tradecompany
			custom_trigger_tooltip = {
				tooltip = tooltip_tradecompany_on_institution_continent
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = grain
					trade_goods = maize
					trade_goods = livestock
					trade_goods = wine
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_farm_estate_on_institution_continent
				has_building = farm_estate
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			potential = {
				OR = {
					trade_goods = paper
					trade_goods = gems
					trade_goods = tropical_wood
					trade_goods = glass
					trade_goods = chinaware
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_mills_on_institution_continent
				has_building = mills
				any_province = {
					is_institution_origin = manufactories
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = naval_supplies
					trade_goods = fish
					trade_goods = salt
					trade_goods = whaling
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_wharf_not_institution_continent
				has_building = wharf
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = copper
					trade_goods = iron
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_weapons_not_institution_continent
				has_building = weapons
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				OR = {
					trade_goods = wool
					trade_goods = cloth
					trade_goods = silk
					trade_goods = dyes
					trade_goods = elysian_silk
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_textile_not_institution_continent
				has_building = textile
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = coffee
					trade_goods = cotton
					trade_goods = sugar
					trade_goods = tobacco
					trade_goods = tea
					trade_goods = cocoa
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_plantations_not_institution_continent
				has_building = plantations
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = ivory
					trade_goods = slaves
					trade_goods = spices
					trade_goods = fur
					trade_goods = incense
					trade_goods = seal_hunting
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_tradecompany_not_institution_continent
				has_building = tradecompany
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
					trade_goods = wine
					trade_goods = maize
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_farm_estate_not_institution_continent
				has_building = farm_estate
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				OR = {
					trade_goods = paper
					trade_goods = gems
					trade_goods = tropical_wood
					trade_goods = glass
					trade_goods = chinaware
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_mills_not_institution_continent
				has_building = mills
				any_province = {
					is_institution_origin = manufactories
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_manufactories
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = manufactories }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = manufactories
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_manufactories_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = manufactories
				}
			}
		}

	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}



#######################################
# Enlightenment
#######################################
enlightenment = {
	penalty = 0.5

	bonus = {
		culture_conversion_cost = -0.25
	}

	trade_company_efficiency = 0.3

	historical_start_date = 1700.1.1
	historical_start_province = 236 #London

	history = {
		OR = {
			AND = {
				is_year = 1700
				continent = europe
				owner = { technology_group = western }
			}
			
			AND = {
				is_year = 1730
				continent = europe
			}	

			AND = {
				is_year = 1800
				superregion = near_east_superregion
			}
			AND = {
				is_year = 1770
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = south_america_superregion
			}
			AND = {
				is_year = 1770
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = north_america_superregion
			}
			AND = {
				is_year = 1770
				owner = {
					NOT = { technology_group = north_american }
					NOT = { technology_group = mesoamerican }
					NOT = { technology_group = south_american }
					NOT = { technology_group = andean }
				}
				superregion = central_america_superregion
			}
		}
	}
	
	can_start = {
		is_year = 1700
		is_in_capital_area = yes
		is_island = no
		is_state = yes
		printing_press = 100
		global_trade = 100
		development = 30
		OR = {
			custom_trigger_tooltip = {
				tooltip = tooltip_has_seat_in_parliament
				has_seat_in_parliament = yes
			}
			has_building = university
			AND = {
				continent = europe
				owner = {
					ADM = 5
					MIL = 5
					DIP = 5
				}
			}
			
		}
	}
	start_chance = 10		#in 100 for when a province can_start
	
	
	on_start = institution_events.7
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
		modifier = {
			factor = 0.6
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					has_country_modifier = nhs2_elysian_free_trade
				}
			}
			custom_trigger_tooltip = {
				tooltip = NHS_FREE_TRADE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					enlightenment = 100
				}
			}
		}
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_small_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = SMALL_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_small_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					enlightenment = 100
				}
			}
		}
		modifier = {
			factor = 1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					enlightenment = 100
				}
			}
		}
		modifier = {
			factor = 1.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_large_por_enclave
			}
			custom_trigger_tooltip = {
				tooltip = LARGE_PORTUGESE_ENCLAVE
				has_province_modifier = nhs2_large_por_enclave
				any_province = {
					owned_by = POR
					has_port = yes
					enlightenment = 100
				}
			}
		}
		modifier = {
			factor = 1.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_province_modifier = nhs2_european_enclave
			}
			custom_trigger_tooltip = {
				tooltip = EUROPEAN_ENCLAVE
				has_province_modifier = nhs2_european_enclave
				any_province = {
					continent = europe
					owner = {
						technology_group = western
					}
					has_port = yes
					enlightenment = 100
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = {
					enlightenment = 100
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						enlightenment = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		modifier = {
			factor = 5
			custom_trigger_tooltip = {
				tooltip = tooltip_university_on_institution_continent
				has_building = university
				any_province = {
					is_institution_origin = enlightenment
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 1
			custom_trigger_tooltip = {
				tooltip = tooltip_university_not_institution_continent
				has_building = university
				any_province = {
					is_institution_origin = enlightenment
					NOT = { continent = PREV }
				}
			}
		}
		modifier = {
			factor = 5
			potential = {
				owner = {
					has_parliament = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_seat_in_parliament_on_institution_continent
				has_seat_in_parliament = yes
				any_province = {
					is_institution_origin = enlightenment
					continent = PREV
				}
			}
		}
		modifier = {
			factor = 0.5
			potential = {
				owner = {
					has_parliament = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_seat_in_parliament_not_institution_continent
				has_seat_in_parliament = yes
				any_province = {
				is_institution_origin = enlightenment
				NOT = { continent = PREV }
			}
			}
		}
		modifier = {
			factor = 1.5
			custom_trigger_tooltip = {
				tooltip = tooltip_philosopher_capital
				is_capital = yes
				owner = {
					advisor = philosopher
					dip_tech = 20
				}
			}
		}
		modifier = {
			factor = 3
			custom_trigger_tooltip = {
				tooltip = tooltip_scientist_capital
				is_capital = yes
				owner = {
					advisor = natural_scientist
					dip_tech = 20
				}
			}
		}
		modifier = {
			factor = 5
			custom_trigger_tooltip = {
				tooltip = tooltip_full_innovativeness
				is_capital = yes
				owner = {
					full_idea_group = innovativeness_ideas
				}
			}
		}
		modifier = {
			factor = 5
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_enlightenment
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = enlightenment }
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			potential = {
				owner = {
					has_institution = enlightenment
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_enlightenment_embraced
				is_owned_by_trade_company = no
				owner = {
					has_institution = enlightenment
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}
